"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[700],{52697:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(35944),o=n(79547),i=n.n(o),a=(n(67294),n(94184)),l=n.n(a);function c(e){var t=e.unreadDot,n=e.size,o=void 0===n?12:n,a=e.count,c=void 0===a?null:a,s=c&&c>99,u=s?"99+":null===c||void 0===c?void 0:c.toString();return(0,r.BX)("span",{className:"jsx-1c7f3b9066c4c334",children:[(0,r.tZ)("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-1c7f3b9066c4c334",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-1c7f3b9066c4c334"})}),t&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 unread-indicator"}),Boolean(c)&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 "+(l()("count",{overflow:s})||""),children:u}),(0,r.tZ)(i(),{id:"1c7f3b9066c4c334",children:"span.jsx-1c7f3b9066c4c334{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.unread-indicator.jsx-1c7f3b9066c4c334{width:5px;height:5px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-moz-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);-o-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute}.count.jsx-1c7f3b9066c4c334{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-moz-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);-o-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small)}.overflow.jsx-1c7f3b9066c4c334{-webkit-transform:translate(25%,-50%);-moz-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);-o-transform:translate(25%,-50%);transform:translate(25%,-50%)}"})]})}},38380:function(e,t){t.Z=function(e){var t={},n=!0,r=!1,o=void 0;try{for(var i,a=e.messages[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;l.user&&(t[l.user.id]=l.user)}}catch(c){r=!0,o=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return Object.values(t)}},74279:function(e,t,n){n.d(t,{Z:function(){return o}});var r=["TextMessageContentType","PreviewMessageContentType"];function o(e){var t=[],n=null,o=!0,i=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s,u,d,f,m=l.value;if(!n||(null===m||void 0===m||null===(s=m.user)||void 0===s?void 0:s.id)!==(null===n||void 0===n||null===(u=n.user)||void 0===u?void 0:u.id)||(null===m||void 0===m||null===(d=m.anchor)||void 0===d?void 0:d.id)!==(null===n||void 0===n?void 0:n.anchorId)||!r.includes(n.messageType)||!r.includes(m.content.__typename)||new Date(m.timeCreated).getTime()-new Date(n.timeCreated).getTime()>6e5)n&&t.push(n),n={user:m.user,timeCreated:m.timeCreated,anchorId:null===m||void 0===m||null===(f=m.anchor)||void 0===f?void 0:f.id,messages:[m],messageType:m.content.__typename};else n.messages.push(m)}}catch(p){i=!0,a=p}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}return n&&t.push(n),t}},21837:function(e,t,n){n.d(t,{Ft:function(){return g},Vy:function(){return w},kL:function(){return x}});var r=n(34051),o=n.n(r),i=n(67294),a=n(92876),l=n(78120),c=n(56834);function s(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,l,"next",e)}function l(e){s(i,r,o,a,l,"throw",e)}a(void 0)}))}}function d(e,t,n){return f.apply(this,arguments)}function f(){return(f=u(o().mark((function e(t,n,r){var i,a,l,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.path&&"number"===typeof t.indexStart&&"number"===typeof t.indexEnd&&t.otVersion){e.next=2;break}return e.abrupt("return");case 2:if(r!==t.otVersion){e.next=4;break}return e.abrupt("return",{path:t.path,indexStart:t.indexStart,indexEnd:t.indexEnd,otVersion:t.otVersion});case 4:return i=r,a=window.performance.now(),l=function(){(0,c.j)(c.U3.ANNOTATION_FASTFORWARDED,{opCount:i-t.otVersion,anchorId:t.id,flagPid1Fastforwards:!0,time:window.performance.now()-a})},e.next=9,n({indexStart:t.indexStart,indexEnd:t.indexEnd,versionFrom:t.otVersion,versionTo:i});case 9:return s=e.sent,l(),e.abrupt("return",{path:t.path,indexStart:s.indexStart,indexEnd:s.indexEnd,otVersion:i});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=n(30617);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){h(i,r,o,a,l,"next",e)}function l(e){h(i,r,o,a,l,"throw",e)}a(void 0)}))}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return y.apply(this,arguments)}function y(){return(y=b(o().mark((function e(t){var n,r,i,c,s,u,f,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.anchor,r=t.version,i=t.transformSelection,c=t.content,n.path){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,d(n,i,r);case 5:if(s=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return f=function(){},m=function(){try{for(var e=l.xv.of(c.split("\n")),t=e.lineAt(s.indexStart),n=e.lineAt(s.indexEnd),r=[],o=t.number===n.number?Math.max(0,t.number-1):t.number,i=Math.min(e.lines,n.number+1),u=o;u<=i;u++)r.push(e.line(u).text);return{startLineNumber:o,lines:r}}catch(d){a.Tb(d)}},e.abrupt("return",{anchor:n,newSelection:s,newPosition:undefined,selectedContent:u,getHighlight:f,getSnippet:m});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){var t=(0,m.Z)().fs,n=i.useRef(null),r=i.useRef(null),o=v(i.useState(!1),2),a=o[0],l=o[1];return i.useEffect((function(){if(e){var o=function(){r.current=null,l(!1)},i=t.watchOtFile(e,{onReady:function(e){var t=e.transformSelection,o=e.initialContent;n.current=o.toString(),r.current=t,l(!0)},onMoveOrDelete:function(){o()},onError:function(){o()},onChange:function(e){var t=e.latestContent;n.current=t}});return function(){o(),i()}}}),[e,t]),{contentRef:n,transformSelectionRef:r,loadedFile:a}}function w(e){var t=(0,m.Z)().fs,n=v(i.useState(null),2),r=n[0],o=n[1],a=x(null===e||void 0===e?void 0:e.path),l=a.contentRef,c=a.loadedFile,s=a.transformSelectionRef;return i.useEffect((function(){(null===e||void 0===e?void 0:e.path)&&c&&s.current&&null!==l.current&&g({anchor:e,version:t.getOTVersion(e.path),transformSelection:s.current,content:l.current}).then((function(e){o(e)})).catch((function(){o(null)}))}),[t,e,c]),r}},33379:function(e,t,n){n.d(t,{Q:function(){return i},c:function(){return o}});var r=n(91131),o=(0,r.cn)(!1),i=(0,r.cn)(null)},47571:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(67294),o=n(5560),i=n(88768);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){var t=(0,o.Z)(),n=l((0,i.nAY)(),1)[0];r.useEffect((function(){if(e){var r=e.messages.filter((function(e){return!e.seen})).map((function(e){return e.id}));0!==r.length&&n({variables:{replId:t,threadId:e.id,messageIds:r},optimisticResponse:{markMessagesAsSeen:{messages:r.map((function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}})),__typename:"AnnotationMessageList"}}})}}),[t,e,n])}},66715:function(e,t,n){n.d(t,{R$:function(){return ne},Wo:function(){return ee},D2:function(){return J},XZ:function(){return oe},JJ:function(){return Y},sN:function(){return ae},ZP:function(){return ie},s3:function(){return te}});var r=n(35944),o=n(67294),i=n(3204),a=n(67938),l=n(54929),c=n(13475),s=n(27651),u=n(88503),d=n(29698),f=n(57170),m=n(34996),p=n(46253),h=n(12741),b=n(71841),v=n(428),g=n(34860),y=n(66552),x=n(85567),w=n(19826),Z=n(12220),k=n(44262),S=n(16733),j=n(92876),C=n(56834),T=n(24506),O=n(91674),E=n(22429),A=n(91762),_=n(30617),I=n(1517),P=n(27464),R=n(16108),z=n(63051),N=n(93577),M=n(39453),D=n(38880),B=n(15682),U=n(84109),L=n(37424);function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e){var t=e.view,n=e.metadata,c=e.closeMenu,s=n.text,u=n.icon,d=(0,D.Z)().showError,f=o.useRef(!1),m=V(o.useState(!1),2),p=m[0],h=m[1],b=V(o.useState(null),2),v=b[0],g=b[1],y=(0,_.Z)().fs,x=(0,N.Z)(),w=(0,E.Z)(x||""),Z=(0,L.H)(),k=Z("label"),S=Z("menu"),X=o.useRef(null),F=V((0,B.XZ)(X,!1),4),G=(F[0],F[1]),H=F[2],K=F[3];return(0,B.Ym)(G,X),o.useEffect((function(){if(w&&x&&p&&!f.current){var e=t.state,n=e.selection.main,r={start:(0,M.s)(e.doc,n.from),end:(0,M.s)(e.doc,n.to)};f.current=!0,w.request.codeActions(x,r).then((function(e){if((0,C.j)(C.U3.EDITOR_CONTEXT_MENU_CODE_ACTIONS_REQUESTED,{success:!("error"in e),numActions:"result"in e&&e.result?e.result.length:null}),"error"in e)return f.current=!1,g([]),d("Something went wrong fetching code actions"),void j.Tb(new Error(e.error.message));null!==e.result&&0!==e.result.length?g(e.result):g([])}))}}),[w,p,x,v,t,d]),(0,r.BX)(l.Z,{tag:"li",onClick:function(e){e.stopPropagation(),h((function(e){return!e}))},children:[(0,r.BX)(l.Z,{css:[T.gU.listItem,i.l0.p(8),i.l0.flex.row,i.l0.align.center],children:[u,(0,r.tZ)(l.Z,{css:[i.l0.pl(8)],children:(0,r.tZ)(a.x,{id:k,children:s})}),(0,r.tZ)(l.Z,{css:[i.l0.position.absolute,i.l0.right(4)],children:(0,r.tZ)(P.Z,{alt:"Toggle Code Actions",tooltipHidden:!0,"aria-expanded":p,"aria-controls":S,onClick:function(){K(),h((function(e){return!e}))},innerRef:X,onKeyDown:H,children:(0,r.tZ)(z.Z,{rotate:p?90:0,style:{transition:"200ms ease"}})})})]}),p&&!v?(0,r.BX)(l.Z,{css:[i.l0.p(8),i.l0.flex.row,i.l0.align.center],children:[(0,r.tZ)(a.x,{color:"dimmer",children:"Loading actions..."}),(0,r.tZ)(l.Z,{css:[i.l0.align.center,i.l0.justify.center,i.l0.position.absolute,i.l0.right(4),i.l0.width(24),i.l0.height(24)],children:(0,r.tZ)(I.Z,{})})]}):null,p&&v&&w?(0,r.BX)(l.Z,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-labelledby":k,id:S,children:[v.map((function(e,t){return(0,r.tZ)(U.Z,{onClick:function(){if(O.Command.is(e))return w.request.executeCommand(e.command,e.arguments),void c();var t=e.edit,n=e.command;t&&(0,A.w)({edit:t,fs:y,client:w}),n&&w.request.executeCommand(n.command,n.arguments),c()},children:(0,r.tZ)(l.Z,{css:[T.gU.listItem,i.l0.p(8),i.l0.flex.row,i.l0.align.center],children:(0,r.BX)(l.Z,{css:[i.l0.flex.row,i.l0.justify.spaceBetween,i.l0.width("100%")],children:[(0,r.tZ)(a.x,{css:[i.l0.maxWidth("90%")],children:e.title}),(0,r.tZ)(l.Z,{tag:"span",children:(0,r.tZ)(R.Z,{size:12})})]})})},t)})),0===v.length?(0,r.tZ)(l.Z,{css:[i.l0.p(8),i.l0.flex.row,i.l0.align.center],children:(0,r.tZ)(a.x,{color:"dimmer",children:"No actions available"})}):null]}):null]})}var G=n(28614),H=n(86072),K=n(56443);function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var J,$,Y="Divider";!function(e){e.Cut="Cut",e.Copy="Copy",e.Paste="Paste",e.JumpToDefinition="JumpToDefinition",e.JumpToTypeDefinition="JumpToTypeDefinition",e.JumpToImplementation="JumpToImplementation",e.FindReferences="FindReferences",e.Rename="Rename",e.SelectAllOccurrences="SelectAllOccurrences",e.CodeActions="CodeActions",e.CopyLinkToPos="CopyLinkToPos",e.ToggleBreakpoint="ToggleBreakpoint",e.StartThread="StartThread",e.ExplainCode="ExplainCode",e.LookForErrors="LookForErrors",e.GenerateCode="GenerateCode",e.SearchCode="SearchCode"}(J||(J={}));var ee=(q($={},J.Cut,{text:"Cut",icon:(0,r.tZ)(h.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"X"}}),q($,J.Copy,{text:"Copy",icon:(0,r.tZ)(b.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"C"}}),q($,J.Paste,{text:"Paste",icon:(0,r.tZ)(v.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"V"}}),q($,J.JumpToDefinition,{text:"Jump to definition",icon:(0,r.tZ)(g.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"F12"}}),q($,J.JumpToTypeDefinition,{text:"Jump to type definition",icon:(0,r.tZ)(k.Z,{})}),q($,J.JumpToImplementation,{text:"Jump to implementation",icon:(0,r.tZ)(S.Z,{})}),q($,J.FindReferences,{text:"Find references",icon:(0,r.tZ)(u.Z,{}),keyboardShortcut:{shiftKey:!0,key:"F12"}}),q($,J.Rename,{text:"Rename all occurrences",icon:(0,r.tZ)(d.Z,{}),keyboardShortcut:{key:"F2"}}),q($,J.SelectAllOccurrences,{text:"Select all occurrences",icon:(0,r.tZ)(s.Z,{}),keyboardShortcut:{key:"F2",cmdOrCtrlKey:!0}}),q($,J.CodeActions,{text:"Code actions",icon:(0,r.tZ)(Z.Z,{})}),q($,J.CopyLinkToPos,{text:"Copy link to position",icon:(0,r.tZ)(f.Z,{})}),q($,J.ToggleBreakpoint,{text:"Toggle breakpoint",icon:(0,r.tZ)(m.Z,{})}),q($,J.StartThread,{text:"Start thread",icon:(0,r.tZ)(p.Z,{}),keyboardShortcut:{key:"/",altKey:!0}}),q($,J.LookForErrors,{text:"Look for errors",icon:(0,r.tZ)(G.Z,{})}),q($,J.ExplainCode,{text:"Explain code",icon:(0,r.tZ)(w.Z,{})}),q($,J.GenerateCode,{text:"Generate code",icon:(0,r.tZ)(H.Z,{}),keyboardShortcut:{key:"g",altKey:!0}}),q($,J.SearchCode,{text:"Search code",icon:(0,r.tZ)(u.Z,{})}),$);function te(e){return e===Y}var ne=35;function re(e){var t=e.dom,n=e.verticalOffset,r=e.coords,o=r.x,i=r.y,a=t.getBoundingClientRect().bottom,l=document.documentElement.clientWidth;if(o+275>l&&(o=l-275-5),i+n>a){var c=i-n;return c<0?{x:o+5,y:0}:{x:o,y:c}}return{x:o,y:i}}function oe(e){var t=e.view,n=e.coords,a=e.closeMenu,s=e.verticalOffset,u=e.children,d=e.width,f=void 0===d?275:d,m=t.dom,p=(0,c.Z)(a,[]),h=Q(o.useState((function(){return re({dom:m,verticalOffset:s,coords:n})})),2),b=h[0],v=b.x,g=b.y,x=h[1];return o.useEffect((function(){x(re({dom:m,verticalOffset:s,coords:n}))}),[n,s,m]),(0,r.tZ)(y.Z,{innerRef:p,background:"higher",className:"cm-custom-context-menu",css:[i.l0.position.fixed,i.l0.flex.column,i.l0.justify.center,i.l0.borderRadius(8),i.l0.shadow(1),i.l0.width(f),i.l0.zIndex(101),{border:"1px solid ".concat(i.TV.outlineDimmest)},{left:v,top:g}],children:(0,r.tZ)(K.ZP,{children:(0,r.tZ)(B.uP,{options:{direction:"vertical"},children:(0,r.tZ)(l.Z,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",children:u})})})})}function ie(e){var t=e.view,n=e.closeMenu,o=e.actions,i=e.onAction,a=o.map((function(e){return te(e)?1:ne})).reduce((function(e,t){return e+t}),0);return(0,r.tZ)(oe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){q(e,t,n[t])}))}return e}({verticalOffset:a},e,{children:o.map((function(e,a){return te(e)?(0,r.tZ)(l.Z,{css:[{borderBottom:"1px solid var(--background-highest)"}]},a):e===J.CodeActions?(0,r.tZ)(F,{view:t,closeMenu:n,metadata:ee[e]},e):(0,r.tZ)(U.Z,{onClick:function(){i(e),n()},children:(0,r.tZ)(le,{item:e,isFirst:0===a,isLast:a===o.length-1})},e)}))}))}function ae(e){var t=e.children,n=e.isFirst,o=e.isLast;return(0,r.tZ)(l.Z,{css:[i.l0.p(8),i.l0.flex.row,i.l0.align.center,n&&{borderTopLeftRadius:4,borderTopRightRadius:4},o&&{borderBottomLeftRadius:4,borderBottomRightRadius:4}],children:t})}function le(e){var t=e.item,n=e.isFirst,o=e.isLast,c=ee[t],s=c.text,u=c.icon,d=c.keyboardShortcut;return(0,r.BX)(ae,{isFirst:n,isLast:o,children:[u,(0,r.tZ)(l.Z,{css:[i.l0.px(8)],children:(0,r.tZ)(a.x,{children:s})}),d?(0,r.tZ)(l.Z,{css:[i.l0.position.absolute,i.l0.right(4)],children:(0,r.tZ)(x.Z,{shortcut:d,small:!0,hideBorder:!0})}):null]})}},84109:function(e,t,n){var r=n(35944),o=n(15682),i=n(23139),a=n(67294);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=(0,i.KD)("button");t.Z=function(e){var t=e.onClick,n=e.children,l=a.useRef(null),u=c((0,o.XZ)(l,!1),4),d=u[0],f=u[1],m=u[2],p=u[3];return(0,o.Ym)(f,l),(0,r.tZ)(s,{ref:l,role:"menuitem",css:[i.d$,i.gU.listItem],onClick:function(e){p(),t(e)},onKeyDown:m,tabIndex:d,children:n})}},32378:function(e,t,n){n.d(t,{Fy:function(){return j},Vw:function(){return C},dp:function(){return O},u5:function(){return T}});var r=n(35944),o=n(79547),i=n.n(o),a=n(67294),l=n(24561),c=n(38098),s=n(534),u=n(94184),d=n.n(u),f=n(47421),m=n(55681),p=n(54929),h=n(3204),b=n(27464),v=n(14692),g=n(67938),y=n(64711),x=n(32181),w=n(39453);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){var t=e.height,n=e.loading;return(0,r.BX)("div",{className:i().dynamic([["dea430aa30530a9e",[t]]])+" "+(d()("loader",{loading:n})||""),children:[(0,r.BX)(l.ZP,{viewBox:"0 0 100 36",primaryColor:"var(--background-highest)",secondaryColor:"var(--background-higher)",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"4",height:"4",className:i().dynamic([["dea430aa30530a9e",[t]]])}),(0,r.tZ)("rect",{x:"6",y:"0",rx:"2",ry:"2",width:"92",height:"4",className:i().dynamic([["dea430aa30530a9e",[t]]])})]}),(0,r.tZ)(i(),{id:"dea430aa30530a9e",dynamic:[t],children:".loader.__jsx-style-dynamic-selector{padding:var(--space-8);display:none}.loader.loading.__jsx-style-dynamic-selector{height:".concat(t,";display:block}")})]})}function j(e){var t=e.maxHeight,n=e.minHeight,o=e.extensions,l=void 0===o?[]:o,s=e.allowScroll,u=void 0===s||s,m=e.fontSize,p=e.hideGutter,b=e.path,v=e.snippet,g=e.style,y=e.elevation,Z=e.onNavigateToCode,j=(0,c.Z)({hideGutter:p,filePath:b,fontSize:m,readOnly:!0}),C=j.view,T=j.ref,O=k(a.useState(!1),2),E=O[0],A=O[1],_=a.useRef(h.TV.backgroundDefault),I=(0,x.Z)({view:C});return a.useEffect((function(){if(C&&v&&b){var e="lines"in v?v.lines.join("\n"):v.doc;C.dispatch({changes:{from:0,to:C.state.doc.length,insert:e},effects:I.reconfigure([(0,f.Eu)({formatNumber:function(e){return String(e+v.startLineNumber-1)}}),l])});var t,n={root:h.TV.backgroundRoot,higher:h.TV.backgroundHigher,highest:h.TV.backgroundHighest,default:h.TV.backgroundDefault};return _.current=y&&null!==(t=n[y])&&void 0!==t?t:h.TV.backgroundDefault,A(!0),function(){C.dispatch({effects:I.reconfigure([])})}}}),[C,v,b,I,l,y]),(0,r.BX)("div",{style:g,className:i().dynamic([["9c1b4f3b2cf471f5",[t||"10em",n,_.current,_.current]]]),children:[(0,r.tZ)("div",{ref:T,onClick:function(e){if(Z&&C){var t=e.clientX,n=e.clientY,r=C.posAtCoords({x:t,y:n}),o=null!==r?(0,w.s)(C.state.doc,r):null;Z(o)}},className:i().dynamic([["9c1b4f3b2cf471f5",[t||"10em",n,_.current,_.current]]])+" "+(d()("snippet-editor",{"no-scroll":!u,loading:!E})||"")}),(0,r.tZ)(S,{loading:!E,height:t}),(0,r.tZ)(i(),{id:"9c1b4f3b2cf471f5",dynamic:[t||"10em",n,_.current,_.current],children:".snippet-editor.__jsx-style-dynamic-selector .cm-scroller{max-height:".concat(t||"10em",";min-height:").concat(n,";scrollbar-width:thin;outline:none}.snippet-editor.__jsx-style-dynamic-selector .cm-content{padding-bottom:0}.snippet-editor.__jsx-style-dynamic-selector .cm-editor{background-color:").concat(_.current,"}.snippet-editor.loading.__jsx-style-dynamic-selector{display:none}.snippet-editor.no-scroll.__jsx-style-dynamic-selector .cm-scroller{overflow:hidden}.snippet-editor.__jsx-style-dynamic-selector ::-webkit-scrollbar{width:4px}.snippet-editor.__jsx-style-dynamic-selector .cm-gutters{min-width:unset;background-color:").concat(_.current,"}")})]})}function C(e){var t=e.path,n=e.doc,o=e.extensions,i=void 0===o?[]:o,l=e.numMatches,c=e.onNavigateToCode,s=e.initiallyExpanded,u=k(a.useState(s),2),d=u[0],f=u[1],x=d?"block":"none",w=d?180:0,Z=d?"Collapse snippet":"Expand snippet";return(0,r.BX)(p.Z,{children:[(0,r.BX)(p.Z,{css:[h.l0.flex.row,h.l0.p(4),{justifyContent:"space-between"}],children:[(0,r.BX)(p.Z,{css:[h.l0.rowWithGap(8),h.l0.center,h.l0.p(4)],children:[(0,r.tZ)(m.Z,{path:t}),(0,r.tZ)(g.x,{children:t}),(0,r.tZ)(g.x,{color:"dimmest",children:(0,y.Z)("match",l,!0)})]}),(0,r.tZ)(b.Z,{alt:Z,tooltipHidden:!0,onClick:function(){return f((function(e){return!e}))},children:(0,r.tZ)(v.Z,{rotate:w,style:{transition:"200ms ease"}})})]}),(0,r.tZ)(p.Z,{css:[h.l0.p(4),{display:x}],children:(0,r.tZ)(j,{path:t,snippet:{doc:n,startLineNumber:1},extensions:i,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:c})})]})}function T(e){var t=e.path,n=e.snippet,o=e.maxHeight,a=e.minHeight,l=e.extensions,c=void 0===l?[]:l,s=e.allowScroll,u=void 0===s||s,d=e.onNavigateToCode,f=function(e){if(!e)return"";var t="lines"in e?e.lines.length:e.doc.lines;return(0,y.Z)("line",t,!0)}(n);return(0,r.BX)("div",{className:"jsx-ea81418c08a690a7 snippet-container",children:[(0,r.BX)("div",{className:"jsx-ea81418c08a690a7 snippet-header",children:[(0,r.BX)("div",{className:"jsx-ea81418c08a690a7 path-container",children:[(0,r.tZ)("span",{className:"jsx-ea81418c08a690a7 lang-icon",children:(0,r.tZ)(m.Z,{path:t,fill:"var(--accent-primary-default)"})}),(0,r.tZ)("span",{className:"jsx-ea81418c08a690a7 path",children:t}),(0,r.BX)("span",{className:"jsx-ea81418c08a690a7 lines",children:["  ","\u2022 ",f]})]}),(0,r.tZ)("div",{onClick:d,className:"jsx-ea81418c08a690a7 jump-to-code",children:"Jump to code"})]}),(0,r.tZ)(j,{path:t,fontSize:12,snippet:n,maxHeight:o||"54pt",minHeight:a,extensions:c,allowScroll:u}),(0,r.tZ)(i(),{id:"ea81418c08a690a7",children:".snippet-container.jsx-ea81418c08a690a7{display:grid;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);grid-gap:var(--space-4)}.snippet-header.jsx-ea81418c08a690a7{display:grid;grid-auto-flow:column;grid-template-columns:1fr -webkit-max-content;grid-template-columns:1fr max-content;padding:var(--space-4);grid-gap:var(--space-8)}.path-container.jsx-ea81418c08a690a7{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden}.lang-icon.jsx-ea81418c08a690a7{width:20px;height:20px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.path.jsx-ea81418c08a690a7{font-size:var(--font-size-small);color:var(--accent-primary-default);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.lines.jsx-ea81418c08a690a7{font-size:var(--font-size-small);color:var(--accent-primary-dimmer);white-space:pre}.jump-to-code.jsx-ea81418c08a690a7{font-size:var(--font-size-small);color:var(--accent-primary-default);cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})}function O(e){var t=e.extensions,n=void 0===t?[]:t,o=e.timeString,a=e.message,l=e.onClick,c=e.snippet,u=e.avatar,d=e.path;return(0,r.BX)("div",{onClick:l,className:"jsx-ac67521191136beb snippet-container",children:[(0,r.tZ)(j,{path:d,snippet:c,fontSize:12,maxHeight:"36pt",minHeight:"36pt",allowScroll:!1,style:{opacity:.7},extensions:n}),(0,r.BX)("div",{className:"jsx-ac67521191136beb snippet-first-message",children:[u?(0,r.tZ)(s.Z,{src:u.src,size:24,alt:u.name}):(0,r.tZ)("div",{className:"jsx-ac67521191136beb"}),(0,r.tZ)("div",{className:"jsx-ac67521191136beb text",children:a}),(0,r.tZ)("div",{className:"jsx-ac67521191136beb time",children:o})]}),(0,r.tZ)(i(),{id:"ac67521191136beb",children:".snippet-container.jsx-ac67521191136beb{display:grid;border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);overflow:hidden;grid-gap:var(--space-4);max-width:100%;cursor:pointer;-webkit-transition:-webkit-transform.1s ease-in-out;-moz-transition:-moz-transform.1s ease-in-out;-o-transition:-o-transform.1s ease-in-out;transition:-webkit-transform.1s ease-in-out;transition:-moz-transform.1s ease-in-out;transition:-o-transform.1s ease-in-out;transition:transform.1s ease-in-out}.snippet-container.jsx-ac67521191136beb:hover{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-ms-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05)}.snippet-first-message.jsx-ac67521191136beb{border-top:1px solid var(--outline-dimmest);font-size:var(--font-size-default);background:var(--background-root);color:var(--foreground-default);padding:var(--space-8);display:grid;grid-auto-flow:column;grid-template-columns:-webkit-min-content 1fr -webkit-max-content;grid-template-columns:min-content 1fr max-content;grid-gap:var(--space-8);-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.text.jsx-ac67521191136beb{-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.time.jsx-ac67521191136beb{font-size:var(--font-size-small)}"})]})}},35515:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(88768),o=n(5560);function i(){var e,t=(0,o.Z)(),n=(0,r.LSE)({variables:{replId:t}}).data;if("Repl"!==(null===n||void 0===n?void 0:n.repl.__typename))return[];var i=[];(null===(e=n.repl.owner)||void 0===e?void 0:e.username)&&"User"===n.repl.owner.__typename&&i.push(n.repl.owner);var a=!0,l=!1,c=void 0;try{for(var s,u=n.repl.permissions[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d,f=s.value;(null===(d=f.user)||void 0===d?void 0:d.username)&&i.push(f.user)}}catch(m){l=!0,c=m}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return i}},15127:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(67294),o=n(88768),i=n(5560),a=n(38880);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n,c){var s=(0,a.Z)().showError,u=(0,i.Z)(),d=(0,o.eRu)({variables:{replId:u,path:e},onError:function(e){s(e.message)},skip:!c||t}),f=r.useMemo((function(){var r;return t||d.loading||d.error||!d.data||"ThreadsByFileResult"!==(null===(r=d.data.threadsByFile)||void 0===r?void 0:r.__typename)?{}:d.data.threadsByFile.threads.filter((function(t){return t.path===e&&(!n||!t.isResolved)})).reduce((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({},e,l({},t.id,t))}),{})}),[d.loading,d.data,d.error,e,t,n]);return f}},93914:function(e,t,n){n.d(t,{OQ:function(){return j},PQ:function(){return T},UQ:function(){return x},YM:function(){return k},ZS:function(){return C},cR:function(){return S},eR:function(){return Z},nE:function(){return O},qi:function(){return y},zj:function(){return A}});var r=n(35944),o=n(78120),i=n(1712),a=n(23139),l=n(47421),c=n(73935),s=n(98066);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function h(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}var y=o.Py.define(),x=o.Py.define(),w=o.Py.define(),Z=o.Py.define(),k=o.Py.define(),S=l.tk.baseTheme({".replit-thread-highlight":{background:a.TV.blueDimmest}}),j=o.QQ.define({create:function(){return{}},update:function(e,t){var n=e;return(0,i.j)(t,y,(function(e){n=e.value})),t.changes.empty?n:n=Object.values(n).map((function(e){return p({},e,{indexStart:t.changes.mapPos(e.indexStart),indexEnd:t.changes.mapPos(e.indexEnd)})})).reduce((function(e,t){return e[t.id]=t,e}),{})}}),C=o.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,i.j)(t,x,(function(e){var r=t.state,o=r.selection.main;n={id:e.value,indexStart:o.from,indexEnd:o.empty?Math.min(o.to+1,r.doc.length):o.to}})),(0,i.j)(t,w,(function(){n=null})),(0,i.j)(t,k,(function(){n=null})),null!==n&&(0,i.j)(t,y,(function(e){if(!n)throw new Error("expected newPlaceholder");e.value[n.id]&&(n=null)})),!t.changes.empty&&n&&(n=p({},n,{indexStart:t.changes.mapPos(n.indexStart),indexEnd:t.changes.mapPos(n.indexEnd)})),n}}),T=o.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,i.j)(t,k,(function(e){n=e.value})),(0,i.j)(t,x,(function(e){n=e.value})),n}}),O=function(e){m(n,e);var t=g(n);function n(e,r){var o;return u(this,n),(o=t.call(this)).id=e,o.setThreadElements=r,o}var r=n.prototype;return r.eq=function(e){return e.id===this.id},r.toDOM=function(e){var t=this,n=document.createElement("div");return n.setAttribute("aria-hidden","true"),n.className="cm-thread-portal-widget",setTimeout((function(){var e=t;t.setThreadElements((function(t){return p({},t,d({},e.id,n))}))})),n},r.destroy=function(){var e=this;setTimeout((function(){var t=e;e.setThreadElements((function(e){var n=p({},e);return delete n[t.id],n}))}))},r.ignoreEvent=function(){return!0},n}(l.l9),E=function(e){m(n,e);var t=g(n);function n(e){var r;return u(this,n),(r=t.call(this)).id=e,r}return n.prototype.toDOM=function(e){var t=this,n=document.createElement("span");return n.setAttribute("aria-hidden","true"),n.className="cm-thread-indicator-widget",c.render((0,r.tZ)(s.Z,{isOpen:!1}),n),n.style.cursor="pointer",n.onclick=function(n){n.stopPropagation(),n.preventDefault(),e.dispatch({effects:[k.of(e.state.field(T)===t.id?null:t.id)]})},n},n}(l.SJ),A=(0,l.v5)({class:"cm-thread-indicator-gutter",markers:function(e){var t=e.state.field(j);return o.Xs.of(Object.values(t).map((function(t){var n=e.state.doc.lineAt(Math.min(t.indexStart,t.indexEnd)).from;return new E(t.id).range(n)})),!0)},initialSpacer:function(){return new E("initial-spacer")}})},1712:function(e,t,n){function r(e,t,n){if("effects"in e){var o=!0,i=!1,a=void 0;try{for(var l,c=e.effects[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value;s.is(t)&&n(s)}}catch(h){i=!0,a=h}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}else{var u=!0,d=!1,f=void 0;try{for(var m,p=e.transactions[Symbol.iterator]();!(u=(m=p.next()).done);u=!0){r(m.value,t,n)}}catch(h){d=!0,f=h}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}}}n.d(t,{j:function(){return r}})},39453:function(e,t,n){function r(e,t){var n=Math.max(t.line+1,1),r=e.line(Math.min(n,e.lines));if(n>e.lines)return r.to;var o=r.from+t.character;return Math.min(o,r.to)}function o(e,t){var n=e.lineAt(t);return{line:n.number-1,character:t-n.from}}n.d(t,{R:function(){return r},s:function(){return o}})},64784:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(67294),o=n(79367),i=n.n(o);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(){var e=l(r.useState(null),2),t=e[0],n=e[1];return r.useLayoutEffect((function(){if(t)return i()(t),function(){i().destroy(t)}}),[t]),{ref:n,update:function(){t&&i().update(t)}}}},85133:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(67294),o=n(30617),i=n(27754);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(){var e,t,n=(0,o.Z)().container,a=l(r.useState(null!==(t=null===(e=n.getContext())||void 0===e?void 0:e.repl)&&void 0!==t?t:null),2),c=a[0],s=a[1];return r.useEffect((function(){return n.onConnectionStateChanged((function(e){var t,r;e===i.e.CONNECTED&&s(null!==(r=null===(t=n.getContext())||void 0===t?void 0:t.repl)&&void 0!==r?r:null)}))}),[s,n]),c}},91762:function(e,t,n){n.d(t,{w:function(){return l}});var r=n(82053),o=n(46846),i=n(93770);function a(e){var t=e.path,n=e.fs,i=e.edits,a=!1,l=n.watchOtFile(t,{onReady:function(e){var t=e.writeOp,n=e.initialContent;t((0,r.Z)(i,n.toString())),a=!0},onStatusChange:function(e){e===o.KF.Clean&&a&&l()}})}function l(e){var t=e.edit,n=e.fs,r=e.client,l=t.documentChanges,c=t.changes;if(l&&l.forEach((function(e){if("textDocument"in e){var t=e.edits,l=e.textDocument;a({path:r.documentUriToPath(l.uri),fs:n,edits:t})}else switch(e.kind){case"create":var c=r.documentUriToPath(e.uri),s=e.options,u=Boolean((null===s||void 0===s?void 0:s.overwrite)||!(null===s||void 0===s?void 0:s.ignoreIfExists)),d=function(){n.writeFile(c,i.Z.from("")).then((function(e){if(e.error)throw new Error("Something went wrong writing to a file")}))};if(u){d();break}n.stat(c).then((function(e){e.exists||d()}));break;case"delete":var f=r.documentUriToPath(e.uri),m=e.options,p=Boolean(null===m||void 0===m?void 0:m.recursive),h=Boolean(null===m||void 0===m?void 0:m.ignoreIfNotExists);n.stat(f).then((function(e){if(!e.exists)throw new Error("Expected file to exist");if(e.type===o.Tv.Directory&&!p)throw new Error("Trying to delete a directory without recursive option enabled");n.deleteFile(f).then((function(e){var t=e.error;if((t!==o.Df.NotFound||!h)&&t)throw new Error("Something went wrong deleting the file")}))}));break;case"rename":var b=r.documentUriToPath(e.oldUri),v=r.documentUriToPath(e.newUri),g=e.options,y=Boolean((null===g||void 0===g?void 0:g.overwrite)||!(null===g||void 0===g?void 0:g.ignoreIfExists)),x=function(){n.moveFile(b,v).then((function(e){if(e.error)throw new Error("Something went wrong moving the file")}))};if(y){x();break}n.stat(v).then((function(e){e.exists||x()}))}})),c)for(var s in c){var u=r.documentUriToPath(s),d=c[s];a({path:u,fs:n,edits:d})}}},82053:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(78120),o=n(39453),i=n(37510);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var n=[];if(!e.length)return n;var a=r.xv.of(t.split("\n"));if(1===e.length){var c=l(e,1)[0],s=c.range,u=s.start,d=s.end,f=c.newText;if(0===(0,o.R)(a,u))if((0,o.R)(a,d)===a.length)return(0,i.diffStr)(t,f)}var m=!0,p=!1,h=void 0;try{for(var b,v=e[Symbol.iterator]();!(m=(b=v.next()).done);m=!0){var g=b.value,y=g.range,x=g.newText,w=[],Z=(0,o.R)(a,y.start);Z>0&&w.push(Z);var k=(0,o.R)(a,y.end);k>Z&&w.push({d:k-Z}),x.length>0&&w.push(x),n=(0,i.compose)(n,(0,i.transform)(w,n,"right"))}}catch(S){p=!0,h=S}finally{try{m||null==v.return||v.return()}finally{if(p)throw h}}return n}},22429:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(67294),o=n(30617),i=n(85133),a=n(54245),l=n(56603),c=n(31470);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function d(e){return Math.floor(performance.now()-e.startTime)}var f=new WeakSet;function m(e){var t=e.client,n=e.replId,r=e.language;if(!f.has(t)){f.add(t);var o=new Map,i=function(e){return{method:e.method,replId:n,language:r,startTime:Math.floor(e.startTime)}},s=(0,a.Z)((function(e,t){var n=d(t);n>1e4&&l.kg.time("LSP unresponsive request",n,i(t))})),m=setInterval((function(){o.forEach((function(e){s(e.id,e)}))}),2e3);return(0,c.uf)([t.onRequest((function(e){var t=e.id,n=e.data;Math.random()<.01&&o.set(t,{id:t,method:n.method,startTime:performance.now()})})),t.onResponse((function(e){var t=e.id,n=e.error,r=o.get(t);null!=r&&(o.delete(t),l.kg.time("LSP request",d(r),u({},i(r),{result:null==n?"ok":"error"})))})),t.onCancelRequest((function(e){var t=o.get(e);null!=t&&(o.delete(e),l.kg.time("LSP request",d(t),u({},i(t),{result:"cancelled"})))})),function(){return clearInterval(m)},function(){return f.delete(t)}])}}var p=n(15111);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){var t=(0,i.Z)(),n=(0,o.Z)(),a=n.lsp,l=n.lspnix,c=b(r.useState(null),2),s=c[0],u=c[1];return r.useEffect((function(){if(null===t||void 0===t?void 0:t.language){var n,r;if(t.language.startsWith("nix")||t.language.startsWith("html"))n=l.onClient(e,u);else(null===(r=a.getClient())||void 0===r?void 0:r.isSupportedFile(e))?u(a.getClient()):u(null),n=a.onClient((function(t){(null===t||void 0===t?void 0:t.isSupportedFile(e))?u(t):u(null)}));return function(){n(),u(null)}}}),[a,l,e,null===t||void 0===t?void 0:t.language]),r.useEffect((function(){if(s&&t)return m({client:s,replId:t.id,language:(0,p.D)(e)})}),[s,t,e]),s}},18457:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(35944),o=n(67294),i=n(23139),a=n(8286),l=n(7036),c=n(41664),s=n.n(c),u=n(99646),d=n(88534),f=n(44897),m=n(15852),p=n(52295);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=e.content,n=o.useCallback((function(e){return(0,r.tZ)(p.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},e,{asyncHighlighting:!0}))}),[]);return(0,r.tZ)(u.D,{remarkPlugins:[d.Ic,f.Z,m.Z],components:{code:n},children:t})}var v=(0,o.memo)(b),g=function(e){var t=e.message,n=o.useMemo((function(){return(0,l.Z)(t.timeCreated)}),[t]);return t.user?(0,r.BX)(i.G7,{children:[(0,r.BX)(i.G7,{css:[i.l0.flex.row,i.l0.align.center,i.l0.rowWithGap(8),i.l0.pb(4)],children:[(0,r.tZ)(s(),{passHref:!0,href:"/@".concat(t.user.username),children:(0,r.tZ)("a",{children:(0,r.tZ)(i.n5,{small:!0,src:t.user.image,username:t.user.username})})}),(0,r.tZ)("p",{children:(0,r.tZ)("small",{css:[i.l0.color.foregroundDimmer],children:n})})]}),"StatusMessageContentType"===t.content.__typename&&"resolved"===t.content.status&&(0,r.tZ)(i.E_,{colorway:"positive",icon:(0,r.tZ)(a.Z,{}),text:"Thread resolved. Comment again to re-open."}),"TextMessageContentType"===t.content.__typename&&(0,r.tZ)(v,{content:t.content.text})]}):null}},98066:function(e,t,n){var r=n(35944),o=n(23139),i=n(52697),a=n(67294);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(e){var t=e.isOpen,n=c(a.useState(t),2),l=n[0],s=n[1];return(0,r.tZ)(o.hU,{alt:"View threads",size:24,className:"thread-indicator",css:[o.l0.width(20),o.l0.height(20),o.l0.transition.snappy,o.l0.cursor.pointer,o.l0.display.flex,o.l0.borderRadius(4),{borderWidth:o.TV.borderWidthDefault,borderStyle:"solid",borderColor:l?o.TV.accentPrimaryDefault:"transparent",backgroundColor:l?o.TV.accentPrimaryDimmer:o.TV.backgroundHighest},{":hover":{borderColor:o.TV.accentPrimaryDefault,background:o.TV.accentPrimaryDimmest+" !important"},svg:{width:14,height:14}}],onClick:function(){return s(!l)},children:(0,r.tZ)(i.Z,{})})}},70731:function(e,t,n){n.d(t,{No:function(){return G},ZP:function(){return H}});var r=n(34051),o=n.n(r),i=n(35944),a=n(23139),l=n(45734),c=n(92432),s=n(8286),u=n(12325),d=n(67294),f=n(48996),m=n(18457);var p=n(89431),h=n(38880),b=n(88768),v=n(35515),g=n(5560),y=n(5440),x=n(30617),w=n(93914);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){k(e,t,n[t])}))}return e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"===typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}var O=n(24561),E=n(33379),A=n(91131),_=n(55877),I=n.n(_),P=n(74393),R=n(90601),z=n(65684),N=n(64784),M=n(15127);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,o)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){B(i,r,o,a,l,"next",e)}function l(e){B(i,r,o,a,l,"throw",e)}a(void 0)}))}}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"===typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}var F=function(e){var t=e.isCreating,n=e.threadId,r=e.filePath,u=e.isResolved,f=e.isLoading,m=e.isPlaceholder,p=e.onRequestClose,h=void 0===p?function(){}:p,b=e.onResolveThread,v=void 0===b?function(){}:b,g="View inbox",y="Go to next thread",x="Go to previous thread",w="Dismiss thread",Z=(0,M.Z)(null===r?"":r,f,!0,!0),k=d.useMemo((function(){return Object.values(Z).sort((function(e,t){return e.indexStart-t.indexStart}))}),[Z]),S=d.useMemo((function(){return k.findIndex((function(e){return e.id===n}))}),[k,n]),j=(0,A.b9)(E.Q),C=(0,A.b9)(E.c),T=function(){var e=U(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=S===k.length-1?k[0].id:k[S+1].id,j(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=U(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0===S?k[k.length-1].id:k[S-1].id,j(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.BX)(a.Tg,{background:"root",css:[a.l0.flex.row,a.l0.align.center,a.l0.justify.spaceBetween,a.l0.position.relative,a.l0.px(12),a.l0.py(8),{borderBottomWidth:a.TV.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:a.TV.backgroundHigher}],children:[!1,f?(0,i.tZ)(a.G7,{css:[a.l0.height(28),a.l0.flex.row],children:(0,i.tZ)(O.ZP,{viewBox:"0 0 200 10",primaryColor:a.TV.backgroundRoot,secondaryColor:a.TV.backgroundDefault,speed:1.5,children:(0,i.tZ)("rect",{x:"0",y:"0",rx:"2",ry:"2",width:"60",height:"10"})})}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(a.zx,{onClick:function(){return C(!0)},text:g,small:!0}),k.length>1?(0,i.BX)(a.G7,{css:[a.l0.flex.row,a.l0.align.center,a.l0.rowWithGap(4)],children:[(0,i.tZ)(a.hU,{alt:x,onClick:_,children:(0,i.tZ)(l.Z,{})}),(0,i.tZ)(a.hU,{alt:y,onClick:T,children:(0,i.tZ)(c.Z,{})})]}):null,(0,i.BX)(a.G7,{css:[a.l0.flex.row,a.l0.align.center,a.l0.rowWithGap(4)],children:[t||u||m?null:(0,i.tZ)(a.zx,{onClick:v,text:"Resolve",small:!0,colorway:"primary",iconLeft:(0,i.tZ)(s.Z,{})}),!t&&u?(0,i.tZ)(a.DR,{text:"Resolved",colorway:"positive",clickable:!1}):null,(0,i.tZ)(a.hU,{alt:w,onClick:h,children:(0,i.tZ)(P.Z,{})})]})]})]})},G=function(e){var t=e.isResolved,n=e.isCreating,r=e.onMessageChange,o=e.onMessageSubmit,l=L(d.useState(""),2),c=l[0],s=l[1],m=L(d.useState(I().v4()),2),p=m[0],h=m[1],b=L(d.useState(!1),2),v=b[0],g=b[1],y=(0,d.useRef)(null),x=(0,N.Z)().ref,w={input:{placeholder:t?"Reply to re-open thread\u2026":"Reply to thread\u2026"},submit:"Post comment",stylingSupport:(0,i.BX)(i.HY,{children:["Styling with"," ",(0,i.tZ)("a",{ref:y,href:"https://docs.replit.com/teams-edu/reviewing-submissions#leaving-feedback-on-projects-using-annotations",target:"_blank",rel:"noopener noreferrer",children:"Markdown"})," ","is supported."]})},Z=function(){o({message:c,messageId:p}),s(""),h(I().v4())};return(0,d.useEffect)((function(){n&&g(!0)}),[n]),(0,i.BX)(a.Tg,{background:"root",css:[a.l0.px(12),a.l0.pb(12),a.l0.pt(8)],children:[(0,i.BX)(a.G7,{css:[a.l0.flex.row,a.l0.align.start,a.l0.rowWithGap(8),a.l0.width("full")],children:[(0,i.tZ)(a.B,{ref:function(e){x(e)},value:c,onChange:function(e){var t=e.target.value;s(t),r({message:t,messageId:p})},onKeyDown:function(e){"Enter"===e.key&&(0,R.j)(e)&&!e.shiftKey&&(Z(),e.stopPropagation())},placeholder:w.input.placeholder,css:[a.l0.height(32),a.l0.align.start,{resize:"vertical"}],autoFocus:!0,onFocus:function(){g(!0)},onBlur:function(e){e.relatedTarget===y.current?e.preventDefault():g(!1)}}),(0,i.tZ)(a.G7,{css:[a.l0.pt(4)],children:(0,i.tZ)(a.hU,{alt:w.submit,onClick:Z,children:(0,i.tZ)(f.Z,{})})})]}),v&&(0,i.BX)(a.G7,{css:[a.l0.flex.row,a.l0.align.center,a.l0.rowWithGap(4)],children:[(0,i.tZ)(u.Z,{}),(0,i.tZ)("p",{css:[a.l0.color.foregroundDimmer],children:(0,i.tZ)("small",{children:w.stylingSupport})})]}),(0,i.tZ)(a.G7,{css:[a.l0.pt(12),a.l0.flex.row,a.l0.fontSize(12)],children:(0,i.tZ)(z.Z,{feature:"Threads",css:a.l0.flex.shrink(1)})})]})},H=function(e){var t=e.threadId,n=e.isCreating,r=e.isResolved,o=void 0!==r&&r,l=e.onRequestClose,c=void 0===l?function(){}:l,s=e.view,u=e.filePath,f=function(e,t,n){var r=(0,h.Z)().showError,o=(0,g.Z)(),i=(0,p.Z)("flag-typing-indicator"),a=(0,p.Z)("flag-typing-presence"),l=(0,v.Z)().map((function(e){return e.username})),c=(0,x.Z)().fs,s=(0,b.GDQ)({variables:{id:e}}),u=s.data,f=s.error,m=s.loading,Z=s.client,k=!(!u||m||"AnnotationAnchor"===u.thread.__typename),T=d.useMemo((function(){return!u||m?null:"UserError"===u.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===u.thread.__typename?u.thread:null}),[u,e,m]),O=j((0,b.tTj)({onError:function(e){return r(e.message)},update:function(e,t){var n,o;t.errors?t.errors.forEach((function(e){return r(e.message)})):"UserError"!==(null===(n=t.data)||void 0===n||null===(o=n.createThread)||void 0===o?void 0:o.__typename)||r(t.data.createThread.message)}}),1)[0],E=j((0,b.ALh)({onError:function(e){return r(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return r(e.message)}));else{var o=null===(n=t.data)||void 0===n?void 0:n.createThreadMessage;o&&"UserError"===o.__typename&&r(o.message)}}}),1)[0],A=j((0,b.YaW)({onError:function(e){return r(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return r(e.message)}));else{var o=null===(n=t.data)||void 0===n?void 0:n.updateThread;o&&"UserError"===o.__typename&&r(o.message)}}}),1)[0],_=j((0,b.HjV)(),1)[0],I=function(){var e=null===u||void 0===u?void 0:u.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,image:e.image}}:{}};return{thread:T,isPlaceholder:k,error:f,loading:m,updateThread:function(e){var t,n=e.changes,r="AnnotationAnchor"===(null===u||void 0===u||null===(t=u.thread)||void 0===t?void 0:t.__typename)?u.thread:null;if(!r)throw new Error("expected thread");A({variables:{id:r.id,changes:n},optimisticResponse:{updateThread:S({},r,n,{isResolved:"boolean"===typeof n.isResolved?n.isResolved:r.isResolved})}})},finalizeThreadMessage:function(r){var i,a=r.message,s=r.messageId,d=r.highlight,f={id:s,text:a,mentions:(0,y.kW)(a,{users:C(l).concat(["everyone"])}).mentions};if(k&&t&&n){var m=t.state.field(w.ZS),p={id:e,replId:o,indexStart:null===m||void 0===m?void 0:m.indexStart,indexEnd:null===m||void 0===m?void 0:m.indexEnd,otVersion:c.getOTVersion(n),path:n};O({variables:{thread:p,message:f},optimisticResponse:{__typename:"RootMutationType",createThread:S({__typename:"AnnotationAnchor"},p,I(),{messages:[S({id:s,timeCreated:Date.now(),currentUserIsAuthor:!0},I(),{content:{text:a,__typename:"TextMessageContentType"},anchor:{id:p.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),Z.writeQuery({query:b.VOL,variables:{id:e},data:{thread:S({},p,{isResolved:!1,isGeneral:!1},I(),{messages:[S({id:s,timeCreated:Date.now(),currentUserIsAuthor:!0},I(),{content:{text:a,__typename:"TextMessageContentType"},anchor:{id:p.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null===u||void 0===u?void 0:u.currentUser}});var h=Z.readQuery({query:b.JqK,variables:{replId:o,path:n}});if(h){var v,g="ThreadsByFileResult"===(null===(v=h.threadsByFile)||void 0===v?void 0:v.__typename)?h.threadsByFile.threads:[],x=I().user;Z.writeQuery({query:b.JqK,variables:{replId:o,path:n},data:{threadsByFile:{__typename:"ThreadsByFileResult",threads:C(g).concat([S({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:x,isResolved:!1,participants:[x]},p)])}}})}}else{var j="AnnotationAnchor"===(null===u||void 0===u||null===(i=u.thread)||void 0===i?void 0:i.__typename)?u.thread:null;if(!j)throw new Error("expected thread");E({variables:{replId:o,threadId:j.id,threadMessage:f,highlight:d},optimisticResponse:{createThreadMessage:S({},j,{messages:C(j.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([S({},I(),f,{content:{text:f.text,__typename:"TextMessageContentType"},anchor:{id:j.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})}},changeThreadMessage:function(t){var n=t.messageId,r=t.message;i&&_({variables:{threadId:e,messageId:n,message:a?r:null}})}}}(t,s,u),Z=f.thread,k=f.loading,T=f.isPlaceholder,E=f.updateThread,A=f.changeThreadMessage,_=f.finalizeThreadMessage,I=(0,h.Z)().showConfirm,P=(0,d.useRef)(null);d.useEffect((function(){setTimeout((function(){P.current&&(P.current.scrollTop=P.current.scrollHeight)}),0)}),[null===Z||void 0===Z?void 0:Z.messages]);var R=d.useMemo((function(){return(null===Z||void 0===Z?void 0:Z.messages)?X(Z.messages).sort((function(e,t){return Date.parse(e.timeCreated)-Date.parse(t.timeCreated)})):[]}),[null===Z||void 0===Z?void 0:Z.messages]);return(0,i.BX)(a.G7,{css:[a.l0.overflow("hidden"),a.l0.font.default,{borderTopWidth:a.TV.borderWidthDefault,borderBottomWidth:a.TV.borderWidthDefault,borderStyle:"solid",borderColor:a.TV.accentPrimaryDefault}],children:[(0,i.tZ)(F,{isCreating:n,isResolved:o,isLoading:k,threadId:t,filePath:u,isPlaceholder:T,onRequestClose:c,onResolveThread:function(){E({changes:{isResolved:!0}}),I("Thread resolved. You can reopen it from the inbox.")}}),k?(0,i.tZ)(a.G7,{css:[a.l0.p(12),a.l0.height(48)],children:(0,i.BX)(O.ZP,{viewBox:"0 0 200 20",primaryColor:a.TV.backgroundRoot,secondaryColor:a.TV.backgroundDefault,speed:1.5,children:[(0,i.tZ)("rect",{x:"0",y:"0",rx:"2",ry:"2",width:"180",height:"6"}),(0,i.tZ)("rect",{x:"0",y:"10",rx:"2",ry:"2",width:"66",height:"6"})]})}):(0,i.BX)(i.HY,{children:[!n&&R.length>0?(0,i.tZ)("div",{css:[a.l0.px(12),a.l0.py(12),a.l0.maxHeight(300),a.l0.overflowY("scroll"),a.l0.colWithGap(16)],ref:P,children:R.map((function(e){return(0,i.tZ)(m.Z,{message:e},e.id)}))}):null,(0,i.tZ)(G,{isResolved:o,isCreating:n,onMessageChange:A,onMessageSubmit:_})]})]})}},7036:function(e,t,n){var r=n(9917),o=n(35977);t.Z=function(e){var t=new Date(e),n=new Date;return(0,o.Z)(n,t)<60?"now":(0,r.F)(t,!0)}},68342:function(e,t,n){n.d(t,{ZP:function(){return x}});var r=n(35944),o=n(79547),i=n.n(o),a=n(67294),l=n(9917),c=n(35977),s=n(39155),u=n(5440);function d(e){var t=e.message,n=e.messageStyle,o=a.useMemo((function(){return"TextMessageContentType"===t.content.__typename?(0,u.kW)(t.content.text,{}):"PreviewMessageContentType"===t.content.__typename&&"string"===typeof t.content.preview?(0,u.kW)(t.content.preview,{}):null}),[t.content]),l="PreviewMessageContentType"===t.content.__typename&&"string"!==typeof t.content.preview;return t.user&&(o||l)?(0,r.BX)("div",{className:"jsx-e1dab5bcce309da6 "+(n||""),children:[(0,r.BX)("div",{className:"jsx-e1dab5bcce309da6 message",children:[o&&(0,r.tZ)(u.YI,{message:o,codeStyles:{color:"var(--accent-orange-stronger)",background:"var(--background-highest)"}}),l&&(0,r.BX)("span",{className:"jsx-e1dab5bcce309da6 typing-indicator",children:[(0,r.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"}),(0,r.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"}),(0,r.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"})]})]}),(0,r.tZ)(i(),{id:"e1dab5bcce309da6",children:".message.jsx-e1dab5bcce309da6{background:var(--background-higher);padding:var(--space-4)var(--space-8);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);font-size:var(--font-size-default);overflow-wrap:break-word;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:100%;white-space:pre-wrap}.userhighlight.jsx-e1dab5bcce309da6 .message.jsx-e1dab5bcce309da6{background:transparent}.typing-indicator.jsx-e1dab5bcce309da6{min-height:1em;display:grid;grid-auto-flow:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8)}.dot.jsx-e1dab5bcce309da6{width:6px;height:6px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;display:inline-block;background-color:var(--foreground-dimmest);-webkit-animation:pulse.6s infinite;-moz-animation:pulse.6s infinite;-o-animation:pulse.6s infinite;animation:pulse.6s infinite}.dot.jsx-e1dab5bcce309da6:nth-child(1){-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.dot.jsx-e1dab5bcce309da6:nth-child(2){-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}.dot.jsx-e1dab5bcce309da6:nth-child(3){-webkit-animation-delay:.4s;-moz-animation-delay:.4s;-o-animation-delay:.4s;animation-delay:.4s}@-webkit-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@-moz-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@-o-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}"})]}):null}var f=n(17847),m=n(58458),p=n(8286),h=n(8996);function b(e){var t=e.message,n=a.useMemo((function(){var e=t.timeCreated;return e?(0,f.Z)(new Date(e),"do MMM, hh:mm a"):""}),[t]),o=t.user;return(0,r.tZ)("div",{className:"resolved-message",children:(0,r.BX)(h.Ug,{align:"center",spacing:1,children:[o&&(0,r.tZ)(s.Z,{url:o.image,size:"m"}),(0,r.tZ)(p.Z,{color:"var(--foreground-default)",size:24}),(0,r.BX)(m.Z,{size:"xsmall",children:["Resolved ",n]})]})})}function v(e){var t=e.message,n=a.useMemo((function(){var e=t.timeCreated;return e?(0,f.Z)(new Date(e),"do MMM, hh:mm a"):""}),[t]),o=t.user;return(0,r.tZ)("div",{className:"resolved-message",children:(0,r.BX)(h.Ug,{align:"center",spacing:1,children:[o&&(0,r.tZ)(s.Z,{url:o.image,size:"m"}),(0,r.tZ)(p.Z,{size:24,color:"var(--foreground-dimmest)"}),(0,r.BX)(m.Z,{size:"xsmall",children:["Unresolved ",n]})]})})}var g=function(e){var t=new Date(e),n=new Date;return(0,c.Z)(n,t)<60?"now":(0,l.F)(t,!0)};function y(e){var t=e.messageGroup,n=t.messages,o=t.user,a=t.timeCreated;return o?(0,r.BX)("div",{className:"jsx-3469fc8bae278840 message-group",children:[(0,r.BX)("div",{className:"jsx-3469fc8bae278840 message-info",children:[(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 avatar",children:(0,r.tZ)(s.Z,{url:o.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 username",children:o.username}),(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 time",children:g(a)})]}),(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 messages",children:n.map((function(e){return(0,r.tZ)(d,{message:e},e.id)}))}),(0,r.tZ)(i(),{id:"3469fc8bae278840",children:".message-group.jsx-3469fc8bae278840{background-color:var(--background-default);color:var(--foreground-default);display:grid;position:relative;grid-template-rows:auto auto;grid-row-gap:var(--space-8);grid-template-columns:minmax(0,1fr)}.message-info.jsx-3469fc8bae278840{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:var(--font-size-small)}.messages.jsx-3469fc8bae278840{display:grid;grid-row-gap:var(--space-4);grid-template-columns:minmax(0,1fr)}.avatar.jsx-3469fc8bae278840{margin-right:5px}.username.jsx-3469fc8bae278840{color:var(--foreground-dimmer);font-weight:var(--font-weight-medium);margin-right:3px}.time.jsx-3469fc8bae278840{color:var(--foreground-dimmest)}"})]}):null}function x(e){var t=e.messageGroup;if("TextMessageContentType"===t.messageType||"PreviewMessageContentType"===t.messageType)return(0,r.tZ)(y,{messageGroup:t});if("StatusMessageContentType"===t.messageType){var n=t.messages[0];if("StatusMessageContentType"===n.content.__typename&&"resolved"===n.content.status)return(0,r.tZ)(b,{message:n});if("StatusMessageContentType"===n.content.__typename&&"unresolved"===n.content.status)return(0,r.tZ)(v,{message:n})}return null}},21394:function(e,t,n){var r=n(34051),o=n.n(r),i=n(35944),a=n(67294),l=n(79547),c=n.n(l),s=n(44894),u=n(94184),d=n.n(u),f=n(96594),m=n(71171),p=n.n(m),h=n(87349),b=n(39155),v=n(56834),g=n(38380),y=n(88768),x=n(18651),w=n(64784),Z=n(30887);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,o)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=a.forwardRef((function(e,t){var n,r,l=e.annote,u=e.placeholder,m=e.onChangeMessage,k=e.onFinalizeMessage,j=function(){""!==A.trim()&&(k({messageId:M||p()(),message:A.trim()}),D(null),_(""),setTimeout(X),(0,v.j)(v.U3.CONVERSATION_MESSAGE_SENT,{threadMessagesCount:l.messages.length,otherThreadParticipantsCount:Y.length,anchorId:l.id}))},O=null===(n=(0,y.Fqz)().data)||void 0===n||null===(r=n.currentUser)||void 0===r?void 0:r.id,E=T(a.useState(""),2),A=E[0],_=E[1],I=T(a.useState(!1),2),P=I[0],R=I[1],z=a.useRef(null),N=T(a.useState(null),2),M=N[0],D=N[1],B=(0,Z.Z)(),U=(0,w.Z)(),L=U.ref,X=U.update,V=T((0,x.Z)({"@":function(){var e,t=(e=o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=B.filter((function(e){return e.id!==O})),t&&(r=t.toLowerCase(),n=n.filter((function(e){return e.username.toLowerCase().startsWith(r)}))),e.abrupt("return",n.slice(0,5).map((function(e){return{icon:(0,i.tZ)(b.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){S(i,r,o,a,l,"next",e)}function l(e){S(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()}),2),F=V[0].suggestions,G=V[1],H=(0,f.Kb)({items:(null===F||void 0===F?void 0:F.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(null===F||void 0===F?void 0:F.results.length),onSelectedItemChange:function(e){var t=e.selectedItem;if(F&&t){var n=F.applySuggestion({targetValue:A,suggestionValue:t.value}),r=n.fullValue,o=n.cursorIndex;_(r),setTimeout((function(){z.current&&(z.current.setSelectionRange(o,o),z.current.focus(),X())}))}}}),K=H.isOpen,W=H.getInputProps,q=H.getMenuProps,Q=H.getItemProps,J=H.highlightedIndex,$=H.getComboboxProps;a.useEffect((function(){var e="threads/drafts/".concat(l.id),t=s.Z.get(e,"string");t&&_(t);var n=z.current;return function(){if(n){var t=n.value;0!==t.length?s.Z.set(e,t):s.Z.remove(e)}}}),[]),a.useEffect((function(){setTimeout((function(){z.current&&z.current.focus()}))}),[z]);var Y=(0,g.Z)(l).filter((function(e){return e.id!==O})),ee="Add a comment";return 1===Y.length?ee="Reply to @".concat(Y[0].username):Y.length>1&&(ee="Reply"),l.isResolved&&(ee="Reply to unresolve this thread"),u&&(ee=u),(0,i.BX)("div",{className:"jsx-bfbb8b62e7b10f1d",children:[(0,i.BX)("div",C({},$(),{className:"jsx-bfbb8b62e7b10f1d input-group",children:[(0,i.tZ)("textarea",C({},W({autoFocus:!0,placeholder:ee,value:A,onCompositionStart:function(){return R(!0)},onCompositionEnd:function(){return R(!1)},onChange:function(e){var t=e.target.value,n=M||p()();M||D(n),_(t),m({messageId:n,message:t})},onKeyDown:function(e){e.stopPropagation(),K||(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||P||(e.preventDefault(),j()))},rows:1,ref:function(e){z.current=e,t&&"object"===typeof t&&(t.current=e),G(e),L(e)}}),{className:"jsx-bfbb8b62e7b10f1d "+(d()("inputbox",{hasContent:A.length>0})||"")})),(0,i.tZ)("button",{onClick:j,className:"jsx-bfbb8b62e7b10f1d "+(d()("send-button",{isValid:A.length>0})||""),children:(0,i.tZ)(h.Z,{size:12})})]})),(0,i.tZ)("div",C({},q({}),{className:"jsx-bfbb8b62e7b10f1d",children:K&&(0,i.tZ)("div",{className:"jsx-bfbb8b62e7b10f1d mention-suggestions-container",children:F.results.map((function(e,t){return(0,a.createElement)("div",C({},Q({item:e,index:t}),{key:e.value,className:"jsx-bfbb8b62e7b10f1d "+(d()("mention-suggestion",{selected:J===t})||""),children:[e.icon,(0,i.tZ)("div",{className:"jsx-bfbb8b62e7b10f1d",children:e.value})]}))}))})})),(0,i.tZ)(c(),{id:"bfbb8b62e7b10f1d",children:'.input-group.jsx-bfbb8b62e7b10f1d{display:grid;grid-template-columns:1fr -webkit-min-content;grid-template-columns:1fr min-content;grid-gap:10px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start}.inputbox.jsx-bfbb8b62e7b10f1d{background:var(--background-higher);color:var(--foreground-default);border:none;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);padding:var(--space-8);outline:none;resize:none;font-family:"IBM Plex Sans",sans-serif;font-size:var(--font-size-default);line-height:16px;overflow-y:auto;max-height:-webkit-calc(var(--font-size-default)*18);max-height:-moz-calc(var(--font-size-default)*18);max-height:calc(var(--font-size-default)*18)}.inputbox.jsx-bfbb8b62e7b10f1d::-webkit-input-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d:-moz-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d::-moz-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d:-ms-input-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d::-ms-input-placeholder{white-space:pre}.inputbox.jsx-bfbb8b62e7b10f1d::placeholder{white-space:pre}.inputbox.hasContent.jsx-bfbb8b62e7b10f1d{-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.send-button.jsx-bfbb8b62e7b10f1d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:24px;height:24px;background:var(--background-highest);color:var(--foreground-dimmest);border:none;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%}.send-button.jsx-bfbb8b62e7b10f1d:focus{outline:none}.send-button.isValid.jsx-bfbb8b62e7b10f1d{background:var(--accent-primary-default);color:var(--white);cursor:pointer}.send-button.isValid.jsx-bfbb8b62e7b10f1d:hover{background:var(--accent-primary-default)}.send-button.isValid.jsx-bfbb8b62e7b10f1d:active{background:var(--accent-primary-default)}.mention-suggestions-container.jsx-bfbb8b62e7b10f1d{padding-top:1em;display:grid;grid-row-gap:var(--space-4);overflow:hidden}.mention-suggestion.jsx-bfbb8b62e7b10f1d{display:grid;grid-template-columns:-webkit-min-content -webkit-max-content;grid-template-columns:min-content max-content;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-column-gap:var(--space-8);padding:var(--space-8)0;cursor:pointer;color:var(--foreground-default)}.mention-suggestion.selected.jsx-bfbb8b62e7b10f1d{background-color:var(--background-root)}.mention-suggestion.selected.jsx-bfbb8b62e7b10f1d>*.jsx-bfbb8b62e7b10f1d{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}'})]})}));O.displayName="ThreadInputForwarded",t.Z=O},30887:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(88768),o=n(5560);function i(){var e,t=(0,o.Z)(),n=(0,r.OEU)({variables:{replId:t}}).data;if("Repl"!==(null===n||void 0===n?void 0:n.repl.__typename))return[];var i=[];(null===(e=n.repl.owner)||void 0===e?void 0:e.username)&&"User"===n.repl.owner.__typename&&i.push(n.repl.owner);var a=!0,l=!1,c=void 0;try{for(var s,u=n.repl.permissions[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d,f=s.value;(null===(d=f.user)||void 0===d?void 0:d.username)&&i.push(f.user)}}catch(m){l=!0,c=m}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return i}},5440:function(e,t,n){n.d(t,{YI:function(){return z},kW:function(){return R}});var r,o=n(35944),i=n(79547),a=n.n(i),l=(n(67294),n(58458));function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}!function(e){e.TEXT="TEXT",e.MENTION="MENTION",e.LINK="LINK",e.REPL_LINK="REPL_LINK",e.DEEP_LINK="DEEP_LINK",e.CODE="CODE",e.BOLD="BOLD",e.ITALICS="ITALICS",e.STRIKETHROUGH="STRIKETHROUGH",e.QUOTE="QUOTE"}(r||(r={}));var u=function(e){var t=e.fragment,n=e.onClick;return(0,o.tZ)(l.Z,{size:"small",onClick:n,children:t.content})},d=function(e){var t=e.fragment,n=e.onClick;return(0,o.tZ)(l.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},f=function(e){var t=e.fragment,n=e.onClick;return(0,o.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},m=function(e){var t=e.fragment,n=e.onClick;return(0,o.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},p=function(e){var t=e.fragment,n=e.onClick;return(0,o.tZ)("a",{href:t.url,onClick:n,children:t.content})},h=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,o.tZ)("code",{onClick:n,style:r,children:t.content})},b=function(e){var t=e.fragment,n=e.onClick;return(0,o.tZ)("b",{onClick:n,children:t.content})},v=function(e){var t=e.fragment,n=e.onClick;return(0,o.tZ)("i",{onClick:n,children:t.content})},g=function(e){var t=e.fragment,n=e.onClick;return(0,o.BX)("span",{onClick:n,className:"jsx-e2f6e2707e7599fa",children:[t.content,(0,o.tZ)(a(),{id:"e2f6e2707e7599fa",children:"span.jsx-e2f6e2707e7599fa{text-decoration:line-through}"})]})},y=function(e){var t=e.fragment,n=e.onClick;return(0,o.BX)("blockquote",{onClick:n,className:"jsx-8741a91fadaf26be",children:[t.content,(0,o.tZ)(a(),{id:"8741a91fadaf26be",children:"blockquote.jsx-8741a91fadaf26be{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest)}"})]})},x=/(@[0-9a-zA-Z_]+)/,w=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,Z=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,k=/(`.+?`)/,S=/(\*\*.+?\*\*)/,j=/(_.+?_)/,C=/(\*.+?\*)/,T=/(~~.+?~~)/,O=/(^>.+?$\n?)/m,E=/\/@([0-9a-zA-Z_]+)\/(.+)/;function A(e){var t=e.url;return{type:r.LINK,url:t,content:t}}function _(e){var t=e.hash;return{type:r.DEEP_LINK,url:t,content:t}}function I(e,t){if(Z.test(e)){var n={};try{n=new window.URL(e)}catch(i){return{content:e,type:r.TEXT}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?_({hash:n.hash}):E.test(n.pathname)?function(e){var t=e.url,n=E.exec(t.pathname);if(!n)throw new Error("Not a Repl URL");return{type:r.REPL_LINK,url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):A({url:e}):A({url:e})}if(w.test(e))return _({hash:e});if(O.test(e))return function(e){var t=e.text;return{type:r.QUOTE,content:t}}({text:e.slice(1).trim()});if(k.test(e))return function(e){var t=e.code;return{type:r.CODE,content:t}}({code:e.slice(1,-1)});if(S.test(e))return function(e){var t=e.text;return{type:r.BOLD,content:t}}({text:e.slice(2,-2)});if(j.test(e)||C.test(e))return function(e){var t=e.text;return{type:r.ITALICS,content:t}}({text:e.slice(1,-1)});if(T.test(e))return function(e){var t=e.text;return{type:r.STRIKETHROUGH,content:t}}({text:e.slice(2,-2)});if(x.test(e)){var o=e.slice(1);if(!t.users||t.users.includes(o))return function(e){var t=e.username;return{type:r.MENTION,username:t,content:"@".concat(t)}}({username:o})}return{content:e,type:r.TEXT}}var P=new RegExp([k.source,S.source,j.source,C.source,T.source,Z.source,x.source,w.source,O.source].join("|"),"m");function R(e,t){var n=e.split(P),o=[],i=[],a=!0,l=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;if(d){var f=I(d,t);if(f){if(f.type===r.MENTION){if(!f.username)continue;o.push(f.username)}i.push(f)}}}}catch(m){l=!0,c=m}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return{tokens:i,mentions:o}}function z(e){var t=e.message,n=e.onMentionClick,i=void 0===n?function(){}:n,a=e.codeStyles,l=void 0===a?{}:a;return(0,o.tZ)(o.HY,{children:t.tokens.map((function(e,t){var n={fragment:e,key:t};return e.type===r.MENTION?(0,o.tZ)(d,s({},n,{onClick:function(){return i(e)}})):e.type===r.LINK?(0,o.tZ)(f,s({},n)):e.type===r.REPL_LINK?(0,o.tZ)(m,s({},n)):e.type===r.DEEP_LINK?(0,o.tZ)(p,s({},n)):e.type===r.CODE?(0,o.tZ)(h,s({},n,{style:l})):e.type===r.BOLD?(0,o.tZ)(b,s({},n)):e.type===r.ITALICS?(0,o.tZ)(v,s({},n)):e.type===r.STRIKETHROUGH?(0,o.tZ)(g,s({},n)):e.type===r.QUOTE?(0,o.tZ)(y,s({},n)):(0,o.tZ)(u,s({},n))}))})}}}]);
//# sourceMappingURL=700-3dbfe82f70550b91.js.map