"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4933],{15985:function(e,t,n){var r=n(35944),o=n(54929),i=n(3204),l=n(92704),a=n(24388);t.Z=function(e){return(0,r.BX)(o.Z,{css:[i.l0.rowWithGap(2),i.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(l.ZP,{colorway:e.colorway,iconLeft:e.icon,stretch:!0,onClick:e.onClick,text:e.text,css:[i.l0.flex.growAndShrink(1),i.l0.borderRadius(8,0,0,8)]}),(0,r.tZ)(l.ZP,{colorway:e.colorway,onClick:e.onCountClick,text:(0,a.d)(e.count),css:[i.l0.borderRadius(1,8,8,1)]})]})}},23573:function(e,t,n){n.d(t,{Z:function(){return H},S:function(){return U}});var r=n(34051),o=n.n(r),i=n(35944),l=n(67294),a=n(88768),c=n(27291),u=n(16496),s=n.n(u),d=n(18651),p=n(96594);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=n(81193),v=n(96076),y=n(72829),b=n(45309);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t,n,r,o,i,l){try{var a=e[i](l),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,o)}function w(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){var t=(0,l.useRef)(null),n=(0,c.Z)(e.onChange),r=(0,c.Z)(e.onError),i=(0,l.useCallback)((function(e){t.current=e}),[]),a=(0,l.useCallback)(function(){var e,i=(e=o().mark((function e(i){var l,a,c,u,s,d,p,f,m,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.current){e.next=3;break}return e.abrupt("return");case 3:return a=l.value,c=l.selectionStart?l.selectionStart:a.length,u=i.map((function(e){return"![Uploading ".concat(e.name,"...]()")})),s=a.substr(0,c),d=a.substr(c),p=w(u),s&&p.unshift(s),d&&p.push(d),n.current(p.join("\n")),f=[],e.prev=13,e.next=16,(0,v.L0)(i);case 16:f=e.sent,e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(13),r.current(e.t0),e.abrupt("return");case 23:return m=[],e.prev=24,e.next=27,Promise.all(f.map((function(e){return(0,y.mh)(e,b.N.CommunityPost)})));case 27:m=e.sent,e.next=34;break;case 30:return e.prev=30,e.t1=e.catch(24),r.current(e.t1),e.abrupt("return");case 34:if(t.current){e.next=36;break}return e.abrupt("return");case 36:h=u.reduce((function(e,t,n){var r,o,l=i[n].name.replace(/\.[^/.]+$/,""),a=m[n],c=(r=a,(null!=(o=Error)&&"undefined"!==typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](r):r instanceof o)?"Error uploading":a.url);return e.replace(t,"![".concat(l,"](").concat(c,")"))}),t.current.value),n.current(h);case 38:case"end":return e.stop()}}),e,null,[[13,19],[24,30]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){Z(i,r,o,l,a,"next",e)}function a(e){Z(i,r,o,l,a,"throw",e)}l(void 0)}))});return function(e){return i.apply(this,arguments)}}(),[n,r]),u=(0,l.useCallback)((function(e){var t=Array.from(e.clipboardData.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})).filter((function(e){return null!==e}));t.length&&a(t)}),[a]);return{ref:i,handleFiles:a,handlePaste:u}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){var t=e.initialValue,n=e.textTriggers,r=(0,l.useState)(t||""),o=r[0],i=r[1],a=(0,l.useRef)(null),c=function(e){var t=e.textTriggers,n=e.applySuggestion,r=(0,l.useRef)(null),o=m((0,d.Z)(t),2),i=o[0].suggestions,a=o[1],c=(0,p.Kb)({items:(null===i||void 0===i?void 0:i.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(i),onSelectedItemChange:function(e){var t=e.selectedItem;if(i&&t){var o=r.current;if(o){var l=i.applySuggestion({targetValue:o.value,suggestionValue:t.value}),a=l.fullValue,c=l.cursorIndex;n({fullValue:a,cursorIndex:c})}}}}),u=(0,l.useMemo)((function(){if(i&&r.current)return s()(r.current,i.textTrigger.index)}),[i]);return{ref:(0,l.useCallback)((function(e){r.current=e,a(e)}),[a]),suggestions:null===i||void 0===i?void 0:i.results,caretCoordinates:u,combobox:c}}({textTriggers:n,applySuggestion:function(e){var t=e.cursorIndex,n=e.fullValue;i(n),setTimeout((function(){a.current&&a.current.setSelectionRange(t,t)}))}}),u=c.combobox,f=c.caretCoordinates,v=c.suggestions,y=c.ref,b=x({onChange:i,onError:function(){}}),g=b.handleFiles,Z=b.handlePaste,w=b.ref,S=C((0,h.Z)((function(e){null!==e&&g(e)})),2)[1],A=(0,l.useCallback)((function(e){a.current=e,y(e),w(e)}),[y,w]),k=(0,l.useCallback)((function(e,t){var n;null===(n=a.current)||void 0===n||n.setSelectionRange(e,t)}),[]);return{ref:A,value:o,setValue:i,dropZoneHandlers:S,handlePaste:Z,combobox:u,caretCoordinates:f,suggestions:v,setSelectionRange:k}}var k=n(534),T=n(85060),R=n(79162),B=n(45718),O=n(87152),G=n(23139),I=n(37424);function D(e,t,n,r,o,i,l){try{var a=e[i](l),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){D(i,r,o,l,a,"next",e)}function a(e){D(i,r,o,l,a,"throw",e)}l(void 0)}))}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){P(e,t,n[t])}))}return e}var W=(0,G.KD)("div"),X=(0,G.KD)("li");function U(e){return _.apply(this,arguments)}function _(){return(_=j(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O.l){e.next=2;break}throw new Error("Expected apolloClient");case 2:return e.next=4,O.l.query({query:a.ofZ,variables:{query:t,limit:5}});case 4:return n=e.sent.data,e.abrupt("return",n.usernameSearch);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){var t,n=e.onChange,r=e.initialValue,a=e.autoFocus,u=e.placeholder,s=e.onKeyDown,d=e.onBlur,p=e.onFocus,f=e.userSearch,m=e.showLabel,h=(0,l.useRef)(r),v=(0,c.Z)(n),y=function(e){var t=e.initialValue,n=e.userSearch,r=void 0===n?U:n,l=A({initialValue:t,textTriggers:{"@":function(){var e=j(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return{icon:(0,i.tZ)(k.Z,{alt:e.username,src:e.image,size:16}),value:e.username}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}});return l}({initialValue:r,userSearch:f}),b=y.setSelectionRange;(0,T.Z)((function(){v.current(y.value)}),[y.value]),(0,l.useEffect)((function(){if(a&&h.current){var e=h.current.length;b(e,e)}}),[a,b]);var g=(0,I.H)();return(0,i.BX)(W,E({css:{position:"relative"}},y.combobox.getComboboxProps(),{children:[(0,i.BX)(G.G7,{css:[G.l0.colWithGap(4)],children:[m?(0,i.tZ)("label",{htmlFor:g("description"),children:(0,i.tZ)(G.xv,{color:"dimmer",variant:"small",children:"Description"})}):null,(0,i.tZ)(G.B,E({},y.combobox.getInputProps({placeholder:u||"Write something about this post",ref:y.ref,onKeyDown:function(e){y.combobox.isOpen||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.nativeEvent.preventDownshiftDefault=!0),s&&s(e)},onBlur:d,onFocus:p,value:y.value,onChange:function(e){return y.setValue(e.currentTarget.value)},onPaste:y.handlePaste,autoFocus:a}),{css:[G.l0.width("100%"),{minHeight:G.TV.space128,resize:"vertical"}],id:g("description")}))]}),(0,i.tZ)(W,E({},y.combobox.getMenuProps(),{css:[{position:"absolute"},y.caretCoordinates&&{top:y.caretCoordinates.top+y.caretCoordinates.height,left:y.caretCoordinates.left-4}],children:(null===(t=y.suggestions)||void 0===t?void 0:t.length)?(0,i.tZ)(R.Z,{css:{position:"relative",maxWidth:180},children:y.suggestions.map((function(e,t){return(0,i.tZ)(X,E({},y.combobox.getItemProps({item:e,index:t}),{children:(0,i.tZ)(B.Z,{title:e.value,selected:y.combobox.selectedItem===e,highlighted:y.combobox.highlightedIndex===t,icon:e.icon?(0,i.tZ)(G.G7,{children:e.icon}):void 0})}),e.value)}))}):null}))]}))}},21555:function(e,t,n){n.d(t,{EQ:function(){return G},Ex:function(){return B},Sh:function(){return O},Yt:function(){return C},g4:function(){return Z},l0:function(){return T},nQ:function(){return x},pl:function(){return k},tE:function(){return w},wb:function(){return A}});var r=n(35944),o=n(67294),i=n(22546),l=n(64711),a=n(54929),c=n(50553),u=n(7163),s=n(44798),d=n(23573),p=n(46253),f=n(29698),m=n(51095),h=n(81970),v=n(81736),y=n(23589),b=n(58375),g=n(23139);function Z(e){var t=e.onClick;return(0,r.tZ)(g.zx,{small:!0,onClick:t,outlined:!0,text:"Reply",colorway:"primary",css:[g.l0.p(4),{background:"transparent",borderColor:"transparent"}]})}function w(e){var t=e.onClick,n=e.repliesCount,o=e.isExpanded,i="".concat(o?"Hide":"View"," ").concat(n," ").concat((0,l.Z)("reply",n));return(0,r.tZ)(g.zx,{small:!0,onClick:t,outlined:!0,text:i,css:[g.l0.color.foregroundDimmer,g.l0.p(4),{background:"transparent",borderColor:"transparent","&> span":{marginRight:2}}],iconRight:(0,r.tZ)(c.Z,{size:12,rotate:o?0:270})})}var x,S=(0,a.K)("a");function C(e){var t=e.user;return(0,r.tZ)(s.Z,{username:t.username,children:(0,r.tZ)(u.ZP,{user:t,children:(0,r.tZ)(g.qE,{size:32,username:t.username,src:t.image})})})}function A(e){var t=e.user,n=e.action,o=e.timeCreated;return(0,r.BX)(a.Z,{css:[g.l0.flex.row,g.l0.align.center,g.l0.flex.wrap,{maxWidth:"100%",gap:g.TV.space4}],children:[(0,r.tZ)(s.Z,{username:t.username,children:(0,r.tZ)(u.ZP,{user:t,children:(0,r.tZ)(S,{css:[{color:"inherit"}],children:t.username})})}),n?(0,r.tZ)(g.xv,{color:"dimmer",children:n}):null,(0,r.tZ)(g.EK,{date:o,textColor:"dimmest",textVariant:"small"})]})}function k(e){var t=e.canEdit,n=e.canDelete,l=e.canReport,c=e.canEditSettings,u=e.canHideComment,s=e.canShowComment,d=e.onAction,p=e.className,g=(0,o.useState)(!1),Z=g[0],w=g[1],S=[];return t&&S.push({label:x.Edit,icon:(0,r.tZ)(f.Z,{})}),l&&S.push({label:x.Report,icon:(0,r.tZ)(m.Z,{})}),c&&S.push({label:x.Settings,icon:(0,r.tZ)(h.Z,{})}),u&&S.push({label:x.Hide,icon:(0,r.tZ)(v.Z,{})}),s&&S.push({label:x.Show,icon:(0,r.tZ)(y.Z,{})}),n&&S.push({label:x.Delete,isDestructive:!0,icon:(0,r.tZ)(b.Z,{})}),S.length?(0,r.tZ)(a.Z,{className:p,css:[{opacity:Z?1:0,".is-touch-device &":{opacity:1}}],children:(0,r.tZ)(i.Z,{onOpenChange:w,items:S,onItemClick:function(e){d(e.label)}})}):null}!function(e){e.Edit="Edit",e.Delete="Delete",e.Report="Report",e.Settings="Settings",e.Hide="Hide comment",e.Show="Show comment"}(x||(x={}));var T=(0,a.K)("form"),R=o.createContext(void 0);function B(){return o.useContext(R)}var O=R.Provider;function G(e){var t=e.initialValue,n=e.placeholder,i=e.onCancel,l=e.onSubmit,c=e.hideControls,u=e.buttonText,s=void 0===u?"Comment":u,f=e.buttonIcon,m=void 0===f?(0,r.tZ)(p.Z,{}):f,h=e.error,v=(0,o.useState)(!1),y=v[0],b=v[1],Z=(0,o.useState)(t),w=Z[0],x=Z[1],S=B();return(0,r.BX)(T,{css:[g.l0.colWithGap(8)],onSubmit:function(e){e.preventDefault(),l(w)},children:[(0,r.tZ)(d.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&l(w)},initialValue:w,placeholder:n,onChange:x,onFocus:function(){return b(!0)},userSearch:S}),h?(0,r.BX)(a.Z,{css:[g.l0.display.block],children:[(0,r.tZ)(g.xv,{css:[g.l0.color.redDefault],children:h})," ",(0,r.BX)(g.xv,{children:["For more information,"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/browsing-publishing-repls",target:"_blank",children:"check out the guidelines."})]})]}):null,y||!c?(0,r.BX)(a.Z,{css:[g.l0.rowWithGap(8),g.l0.justify.end],children:[(0,r.tZ)(g.zx,{text:"Cancel",onClick:function(e){b(!1),i&&i(e)}}),(0,r.tZ)(g.zx,{type:"submit",text:s,onClick:function(){},iconLeft:m,colorway:"primary",disabled:!w})]}):null]})}},94933:function(e,t,n){n.d(t,{G:function(){return _e},Z:function(){return He}});var r=n(35944),o=n(67294),i=n(88768),l=n(63112),a=n(34051),c=n.n(a),u=n(3204),s=n(11163),d=n(23139),p=n(35013),f=n(54929),m=n(67938),h=n(38880),v=n(64711),y=n(70294);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){var t=e.count;return t>0?(0,r.BX)(f.Z,{css:[u.l0.rowWithGap(4),u.l0.align.center],children:[(0,r.tZ)(m.x,{children:t}),(0,r.tZ)(m.x,{color:"dimmer",children:(0,v.Z)("comment",t)})]}):(0,r.tZ)(m.x,{color:"dimmer",multiline:!0,children:"No comments yet"})}function S(e){var t,n=e.repl,o=(0,h.Z)(),l=o.showConfirm,a=o.showError,c=w((0,i.k2b)({onError:function(e){return a(e.message)},onCompleted:function(e){var t,n=e.setReplCommentSettings;"UserError"!==n.__typename?"Repl"===n.__typename&&l("Comments "+((null===(t=n.commentSettings)||void 0===t?void 0:t.enabled)?"enabled":"disabled")):a(n.message)}}),1)[0],s=!(null===n||void 0===n?void 0:n.commentSettings)||n.commentSettings.enabled;return(0,r.BX)(f.Z,{css:[u.l0.rowWithGap(8),u.l0.justify.spaceBetween,u.l0.align.center],children:[s?(0,r.tZ)(x,{count:n.commentCount}):(0,r.tZ)(m.x,{color:"dimmer",multiline:!0,children:"Adding comments has been turned off for this Repl."}),(null===(t=n.currentUserPermissions)||void 0===t?void 0:t.changeCommentSettings)&&(0,r.BX)(f.Z,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:[(0,r.tZ)(m.x,{children:"Allow comments"}),(0,r.tZ)(y.Z,{isOn:s,onChange:function(){return c({variables:{input:{replId:n.id,enabled:!s}},optimisticResponse:{setReplCommentSettings:Z({},n,{commentSettings:{__typename:"ReplCommentSetting",id:-1,enabled:!s}})}})}})]})]})}var C=n(23573),A=n(21555),k=n(1517);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t,n,r,o,i,l){try{var a=e[i](l),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,o)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){B(e,t,n[t])}))}return e}function G(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e){return function(){var t,n=(t=c().mark((function t(n){var r,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===n||void 0===n?void 0:n.toLowerCase(),!((o=e.filter((function(e){return!r||e.username.toLowerCase().includes(r)}))).length<5&&n)){t.next=7;break}return t.next=5,(0,C.S)(n);case 5:t.sent.forEach((function(e){o.some((function(t){return t.username===e.username}))||o.push(e)}));case 7:return t.abrupt("return",o.slice(0,5));case 8:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function l(e){R(i,r,o,l,a,"next",e)}function a(e){R(i,r,o,l,a,"throw",e)}l(void 0)}))});return function(e){return n.apply(this,arguments)}}()}function D(e){var t,n,l=e.replId,a=(0,s.useRouter)().query,c=(0,i.ex8)({ssr:!1,variables:{replId:l,after:a.after?a.after.toString():void 0,count:25}}),f=c.data,m=c.loading,h=c.fetchMore,v=c.refetch,y="Repl"===(null===f||void 0===f?void 0:f.repl.__typename)?f.repl:null,b=!(!y||"User"!==(null===(t=y.owner)||void 0===t?void 0:t.__typename))&&(null===y||void 0===y?void 0:y.owner.isBlockingCurrentUser),g=null===f||void 0===f?void 0:f.currentUser,Z=null===y||void 0===y?void 0:y.comments.pageInfo,w=(0,o.useMemo)((function(){return y&&g?function(e){var t,n=e.repl,r=e.currentUser,o="User"===(null===(t=n.owner)||void 0===t?void 0:t.__typename)?B({},n.owner.username,n.owner):{};return n.comments.items.forEach((function(e){e.user&&(o[e.user.username]=e.user),e.replies&&e.replies.forEach((function(e){(null===e||void 0===e?void 0:e.user)&&(o[e.user.username]=e.user)}))})),n.multiplayers.forEach((function(e){o[e.username]=e})),r&&delete o[r.username],Object.values(o)}({repl:y,currentUser:g}):[]}),[y,g]),x=!(null===y||void 0===y?void 0:y.commentSettings)||y.commentSettings.enabled,C=I(w);return(0,r.BX)(d.G7,{css:[u.l0.colWithGap(16)],children:[m&&(0,r.BX)(d.G7,{css:[u.l0.rowWithGap(4),u.l0.align.center],children:[(0,r.tZ)(k.Z,{}),(0,r.tZ)(d.xv,{children:"Loading comments..."})]}),y&&!b?(0,r.BX)(r.HY,{children:[(0,r.BX)(A.Sh,{value:C,children:[(0,r.tZ)(S,{repl:y}),g&&x?(0,r.tZ)(p.H,{onComment:function(){return v()},replId:y.id,placeholder:y?"Say something about ".concat(y.title):""}):null,null===(n=y.comments)||void 0===n?void 0:n.items.filter((function(e){var t;return Boolean(null===e||void 0===e||null===(t=e.currentUserPermissions)||void 0===t?void 0:t.canHideComment)||!e.isHidden})).map((function(e){return(0,r.tZ)(p.x,{commentsEnabled:x,comment:e,onReply:function(){return v()},onDelete:function(){return v()}},e.id)}))]}),(null===Z||void 0===Z?void 0:Z.nextCursor)&&y?(0,r.tZ)(d.G7,{children:(0,r.tZ)("a",{href:y.url+"?after="+Z.nextCursor,onClick:function(e){e.preventDefault(),m||h({variables:{after:Z.nextCursor},updateQuery:function(e,t){if(!t||!t.fetchMoreResult)return e;var n="Repl"===e.repl.__typename?e.repl:null;if(!n)return e;var r=t.fetchMoreResult,o="Repl"===r.repl.__typename?r.repl:null;return o?O({},r,{repl:O({},o,{comments:O({},o.comments,{items:G(n.comments.items).concat(G(o.comments.items))})})}):e}})},children:m?"Loading...":"Load more comments"})}):null]}):null,y&&b?(0,r.BX)(d.G7,{css:[u.l0.colWithGap(24),u.l0.align.center,u.l0.textAlign.center],children:[(0,r.tZ)(d.xv,{variant:"subheadBig",multiline:!0,children:"You\u2019re blocked"}),(0,r.BX)(d.xv,{children:["You can\u2019t follow, comment or see"," ",y.owner&&"User"===y.owner.__typename?y.owner.username:"user","\u2019s Repls on their profile."]})]}):null]})}var j=n(56834),P=n(16055),E=n(70917),W=n(92704),X=n(73345),U=n(94590),_=n(73248),H=n(29698),V=n(46253),M=n(44054),z=n(74302),F=n(28747),L=n(7177),q=n(68948),$=n(30666),K=n(41664),N=n.n(K),Q=n(8046),Y=n(53524),J=n(71431),ee=n(7163),te=n(44798),ne=n(22213),re=n(90193),oe=n(53009),ie=n(24388),le=n(25514);function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ae(e,t,n[t])}))}return e}var ue=(0,f.K)("a"),se={template:{background:u.TV.yellowDimmest,foreground:u.TV.yellowStrongest},app:{background:u.TV.accentPrimaryDimmest,foreground:u.TV.accentPrimaryStrongest}};function de(e){var t=e.colorway,n=e.text;return(0,r.tZ)(f.Z,{css:[{backgroundColor:t.background},u.l0.borderRadius(8),u.l0.px(4),u.l0.py(2)],children:(0,r.tZ)(f.Z,{css:[{color:t.foreground,fontSize:u.TV.fontSizeSmall}],children:n})})}function pe(e){var t,n,o,l,a,c,s,d,p=e.repl,h=e.currentUser,v=p.owner,y=p.lastPublishedAt||(null===(t=p.deployment)||void 0===t||null===(n=t.activeRelease)||void 0===n?void 0:n.timeCreated),b=v&&v.id===(null===h||void 0===h?void 0:h.id);return(0,r.BX)(f.Z,{css:[u.l0.colWithGap(32)],children:[(0,r.BX)(f.Z,{css:[u.l0.colWithGap(16)],children:[(0,r.tZ)(f.Z,{css:[u.l0.rowWithGap(8),u.l0.align.start],children:(0,r.BX)(f.Z,{css:[u.l0.colWithGap(8),u.l0.flex.growAndShrink(1)],children:[(0,r.BX)(f.Z,{css:(s={},ae(s,"@media (max-width: ".concat(M.j.tabletMin-1,"px)"),[u.l0.colWithGap(8)]),ae(s,"@media (min-width: ".concat(M.j.tabletMin,"px)"),[u.l0.rowWithGap(8),u.l0.justify.spaceBetween,u.l0.align.center]),s),children:[v?(0,r.tZ)(r.HY,{children:(0,r.BX)(f.Z,{css:[u.l0.flex.row,u.l0.align.center,u.l0.flex.wrap,{gap:u.TV.space8}],children:[(0,r.tZ)(te.Z,{inline:!0,username:v.username,children:(0,r.tZ)(ee.ZP,{user:v,children:(0,r.tZ)(ue,{css:[u.l0.color.foregroundDefault],children:(0,r.tZ)(J.Z,{username:v.username,src:(null===v||void 0===v?void 0:v.image)||null})})})}),!b&&(0,r.tZ)(le.Z,{subtle:!0,small:!0,user:v}),(0,r.tZ)(m.x,{color:"dimmer",children:"User"===v.__typename&&v.followerCount>0?(0,ie.d)(v.followerCount)+(d=v.followerCount,d>1?" followers":" follower"):null})," "]})}):(0,r.tZ)(J.Z,{small:!0,src:null,username:"[deleted]"}),(null===(o=p.source)||void 0===o||null===(l=o.deployment)||void 0===l||null===(a=l.repl)||void 0===a?void 0:a.owner)&&(0,r.BX)(f.Z,{css:[u.l0.rowWithGap(4),u.l0.align.center],children:[(0,r.tZ)(m.x,{color:"dimmest",children:"Made with "}),(0,r.tZ)(N(),ce({},(0,z.aq)(p.source.deployment.repl),{children:(0,r.BX)(ue,{css:[u.l0.rowWithGap(4),u.l0.align.center,u.l0.color.foregroundDefault],children:[(0,r.tZ)(oe.ZP,{size:24,alt:p.source.deployment.repl.templateLabel,iconUrl:p.source.deployment.repl.iconUrl}),(0,r.tZ)(m.x,{children:p.source.deployment.repl.templateLabel})]})}))]})]}),(0,r.BX)(f.Z,{css:[u.l0.rowWithGap(8),u.l0.align.center,ae({},"@media (max-width: ".concat(M.j.tabletMin,"px)"),[u.l0.colWithGap(8),u.l0.align.start])],children:[(0,r.BX)(f.Z,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:[p.publishedAs===i.O2h.Template?(0,r.tZ)(de,{colorway:se.template,text:"Template"}):null,p.publishedAs===i.O2h.App?(0,r.tZ)(de,{colorway:se.app,text:"App"}):null,y?(0,r.BX)(m.x,{color:"dimmer",variant:"small",children:["Published on"," ",new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]}),(null===(c=p.origin)||void 0===c?void 0:c.owner)?(0,r.BX)(m.x,{color:"dimmer",variant:"small",children:["Forked from"," ",(0,r.tZ)(ee.ZP,{user:p.origin.owner,children:(0,r.tZ)("a",{children:p.origin.owner.username})}),"/",(0,r.tZ)(N(),ce({},(0,z.aq)(p.origin),{children:(0,r.tZ)("a",{children:p.origin.title})}))]}):null]})]})}),p.tags.length?(0,r.tZ)(f.Z,{children:(0,r.tZ)(f.Z,{tag:"ul","aria-label":"Tags",css:[{flexWrap:"wrap",margin:"calc(".concat(u.TV.space4," * -1)")},u.l0.flex.row],children:p.tags.map((function(e){var t=(0,ne.M6)(e.id);return(0,r.tZ)("li",{css:{listStyle:"none"},children:(0,r.tZ)(re.Z,{text:"#"+e.id,css:[{margin:u.TV.space4}],href:t.href,as:t.as})},e.id)}))})}):null,p.description?(0,r.tZ)(Y.Z,{children:(0,r.tZ)(f.Z,{children:(0,r.tZ)(Q.Z,{css:{backgroundColor:"transparent"},children:p.description})})}):(0,r.tZ)(m.x,{color:"dimmest",children:"This Repl has no description"})]}),(0,r.tZ)(f.Z,{css:[{borderBottom:"1px solid ".concat(u.TV.outlineDefault)}]})]})}var fe=n(32747),me=n(66552),he=n(41644),ve=n(15985),ye=n(39473),be=n(44262),ge=n(92876);function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xe="b7292411-5efe-4c15-be23-060d48a9a6d6",Se=function(e){var t=e.isLoggedIn,n=(0,o.useState)(!1),i=n[0],l=n[1],a=(0,h.Z)().showError,c=(0,o.useState)(!1),u=c[0],s=c[1],p=we((0,F.Z)({onError:function(){ge.$e((function(e){e.setExtra("templateId",xe),ge.Tb(new Error("RelatedReplsBanner: Failed to fork template"))}))}}),2),f=p[0],m=p[1].loading,v=(0,r.tZ)(be.Z,{});return(0,r.BX)(r.HY,{children:[(0,r.tZ)(d.G7,{css:[d.l0.borderRadius(8),{overflow:"hidden","@media(max-width: 768px)":{borderWidth:1,borderColor:d.TV.backgroundHighest}}],children:(0,r.BX)(d.G7,{css:{position:"relative",background:"url('/public/images/javascript-tutorial-banner-1.jpg')",backgroundPosition:"center",backgroundSize:"cover",height:256,"@media(max-width: 768px)":{height:128}},children:[(0,r.BX)(d.G7,{css:{padding:d.TV.space16,"@media(max-width: 768px)":{padding:d.TV.space8}},children:[(0,r.tZ)(d.G7,{css:{flexDirection:"row",justifyContent:"space-between",gap:d.TV.space8},children:(0,r.tZ)(d.xv,{variant:"headerBig",multiline:!0,css:[d.l0.flex.growAndShrink(1),{paddingRight:d.TV.space8,paddingBottom:d.TV.space8,maxWidth:640,color:d.TV.white,textShadow:"0px 2px 4px rgba(2, 2, 3, 0.32)","@media(max-width: 768px)":{fontSize:d.TV.fontSizeHeaderDefault}}],children:"Build a calculator"})}),(0,r.tZ)(d.xv,{variant:"subheadBig",multiline:!0,css:[{paddingTop:d.TV.space8,color:d.TV.white,maxWidth:640,textShadow:"0px 2px 4px rgba(2, 2, 3, 0.32)","@media(max-width: 768px)":{display:"none"}}],children:""})]}),(0,r.tZ)(d.G7,{css:[d.l0.rowWithGap(8),{position:"absolute",bottom:d.TV.space16,left:d.TV.space16}],children:(0,r.tZ)(d.zx,{onClick:function(){if(!t)return l(!0),void(0,j.j)(j.U3.SIGNUP_REQUESTED,{from:"cover-page",location:"related-repls"});m||f({originId:xe,trackingData:{forkSource:"relatedReplsSection"}})},iconLeft:v,text:"Learn JavaScript",big:!0,css:[{color:d.TV.white,backgroundColor:"rgba(15, 23, 38, 0.7)","&:hover":{backgroundColor:d.TV.black,border:"1px solid var(--black) !important"},"@media(max-width: 768px)":{display:"none"}}]})})]})}),(0,r.tZ)(L.Z,{onRequestClose:function(){return l(!1)},isOpen:i,maxWidth:872,children:(0,r.tZ)(q.Z,{onSuccess:function(){s(!0),f({originId:xe,trackingData:{forkSource:"relatedReplsSection"}})},onFailure:function(e){var t=e.error;s(!1),a(t)},title:u&&m?"Sit tight":"Sign up",showForm:!u||!m,showSuccess:u&&m,description:u&&m?"We\u2019re setting up your workspace\u2026":"Sign up and create your first repl."})})]})};function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||Re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e){return function(e){if(Array.isArray(e))return Ce(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Re(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){if(e){if("string"===typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}var Be,Oe,Ge,Ie,De=function(e){return"@media (max-width: ".concat(e,"px)")},je={mobile:De(M.j.tabletMin),small:(Oe=M.j.tabletMin+1,Ge=M.j.tabletMax,"@media (min-width: ".concat(Oe,"px) and (max-width: ").concat(Ge,"px)")),smallAndMobile:De(M.j.tabletMax),desktop:(Be=M.j.tabletMax+1,"@media (min-width: ".concat(Be,"px)"))},Pe=function(e){return{name:e,gridArea:(0,E.iv)({gridArea:e})}},Ee={header:Pe("header"),cta:Pe("cta"),main:Pe("main"),secondary:Pe("secondary"),auxiliary:Pe("auxiliary")},We={mobile:(0,E.iv)({gridTemplateAreas:'\n      "'.concat(Ee.header.name,'"\n      "').concat(Ee.cta.name,'"\n      "').concat(Ee.main.name,'"\n      "').concat(Ee.auxiliary.name,'"\n      "').concat(Ee.secondary.name,'"\n      ')}),small:(0,E.iv)({gridTemplateColumns:"1fr auto auto 25%",gridTemplateRows:"auto",gridTemplateAreas:'\n      "'.concat(Ee.header.name," ").concat(Ee.header.name," ").concat(Ee.cta.name," ").concat(Ee.cta.name,'"\n      "').concat(Ee.main.name," ").concat(Ee.main.name," ").concat(Ee.main.name," ").concat(Ee.main.name,'"\n      "').concat(Ee.secondary.name," ").concat(Ee.secondary.name," ").concat(Ee.secondary.name," ").concat(Ee.auxiliary.name,'"\n      ')}),desktop:(0,E.iv)({columnGap:u.TV.space32,alignItems:"baseline",gridTemplateColumns:"1fr 25%",gridTemplateRows:"auto auto auto auto 1fr",gridTemplateAreas:'\n      "'.concat(Ee.header.name," ").concat(Ee.cta.name,'"\n      "').concat(Ee.main.name," ").concat(Ee.cta.name,'"\n      "').concat(Ee.main.name," ").concat(Ee.auxiliary.name,'"\n      "').concat(Ee.main.name," ").concat(Ee.auxiliary.name,'"\n      "').concat(Ee.secondary.name," ").concat(Ee.auxiliary.name,'"\n      ')})},Xe=function(e){var t,n=e.withSidebar;return(0,E.iv)([u.l0.px(16),u.l0.py(32),(t={maxWidth:1200,margin:"0 auto",display:"grid",gap:u.TV.space16},Ae(t,je.mobile,We.mobile),Ae(t,je.small,[u.l0.px(16),We.small]),Ae(t,je.desktop,[u.l0.p(32),n?We.desktop:We.small]),t)])};function Ue(e){var t,n=e.repl,l=e.isLoggedIn,a=function(){var e,t;if(!l)return d(Ie.AuthPrompt),void(0,j.j)(j.U3.SIGNUP_REQUESTED,{from:"cover-page",location:"fork"});h||m({originId:n.id,replReleaseId:(null===(e=n.deployment)||void 0===e||null===(t=e.activeRelease)||void 0===t?void 0:t.id)||void 0,trackingData:{forkSource:"replViewHeader",isApp:n.publishedAs===i.O2h.App,isTemplate:n.publishedAs===i.O2h.Template}})},c=ke(o.useState(null),2),s=c[0],d=c[1],p=ke((0,F.Z)(),2),m=p[0],h=p[1].loading,v=(0,z.aq)(n),y=n.currentUserPermissions.containerWrite?(0,r.tZ)(X.Co,{colorway:"primary",iconLeft:(0,r.tZ)(H.Z,{}),stretch:!0,text:"Edit in workspace",as:v.as,href:v.href}):null,b=n.currentUserPermissions.publish&&n.publishedAs&&n.publishedAs!==i.O2h.Template?(0,r.tZ)(W.ZP,{text:"Add an update",type:"button",iconLeft:(0,r.tZ)(V.Z,{}),onClick:function(){return d(Ie.UpdateModal)}}):null,g=n.publishedAs===i.O2h.Template?{text:h?"Forking...":"Use Template",icon:(0,r.tZ)(U.Z,{}),count:n.publicReleasesForkCount}:{text:h?"Forking...":"Fork Repl",icon:(0,r.tZ)(_.Z,{}),count:n.publicForkCount},Z=(0,r.tZ)(ve.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ae(e,t,n[t])}))}return e}({},g,{onClick:a,icon:(0,r.tZ)(_.Z,{}),colorway:null===y?"primary":void 0,onCountClick:function(){return d(Ie.ForksModal)}})),w=(0,r.tZ)(L.Z,{isOpen:"ForksModal"===s,onRequestClose:function(){return d(null)},children:(0,r.tZ)($.Z,{replId:n.id})}),x=(0,r.tZ)(L.Z,{isOpen:"UpdateModal"===s,onRequestClose:function(){return d(null)},children:(0,r.tZ)(ye.Z,{repl:n,onDone:function(){return d(null)},source:"coverPage"})});return y?(0,r.BX)(r.HY,{children:[(0,r.BX)(f.Z,{css:[(t={},Ae(t,je.mobile,[u.l0.colWithGap(8)]),Ae(t,je.small,[u.l0.rowWithGap(8)]),Ae(t,je.desktop,u.l0.colWithGap(8)),t)],children:[(0,r.tZ)(f.Z,{children:y}),(0,r.tZ)(f.Z,{children:b}),(0,r.tZ)(f.Z,{children:Z})]}),w,x]}):(0,r.BX)(r.HY,{children:[Z,(0,r.tZ)(L.Z,{isOpen:s===Ie.AuthPrompt,onRequestClose:function(){d(null)},children:(0,r.tZ)(q.Z,{title:"Sign up or log in to fork this Repl",onSuccess:function(){return a()},source:"fork"})}),w]})}function _e(e){var t=e.title,n=e.withSidebar,o=void 0===n||n;return(0,r.tZ)(f.Z,{css:[u.l0.flex.row,u.l0.flex.growAndShrink(1)],children:(0,r.BX)(f.Z,{css:[u.l0.p(16),u.l0.flex.growAndShrink(1),Xe({withSidebar:o})],children:[(0,r.BX)(f.Z,{css:[Ee.header.gridArea,u.l0.rowWithGap(8),u.l0.align.center],children:[(0,r.tZ)(me.Z,{elevated:!0,css:[u.l0.width(32),u.l0.height(32),u.l0.borderRadius("full")]}),(0,r.tZ)(m.h,{color:"dimmest",variant:"headerBig",level:1,css:[u.l0.flex.growAndShrink(1),{wordBreak:"break-all"}],children:t||"Loading..."})]}),(0,r.tZ)(f.Z,{css:[Ee.cta.gridArea],children:(0,r.tZ)(W.ZP,{disabled:!0,text:" "})}),(0,r.tZ)(f.Z,{css:[Ee.main.gridArea,u.l0.colWithGap(16)],children:(0,r.tZ)(me.Z,{elevated:!0,css:[u.l0.height(500),u.l0.borderRadius(8)]})}),(0,r.tZ)(f.Z,{css:[Ee.auxiliary.gridArea,u.l0.colWithGap(16)],children:(0,r.BX)(f.Z,{css:u.l0.colWithGap(16),children:[(0,r.tZ)(m.x,{color:"dimmest",variant:"subheadDefault",children:"Loading..."}),(0,r.tZ)(f.Z,{css:u.l0.colWithGap(16),children:Te(Array(3)).map((function(e,t){return(0,r.tZ)(me.Z,{elevated:!0,css:[u.l0.height(100),u.l0.borderRadius(8)]},t.toString())}))})]})}),(0,r.tZ)(f.Z,{css:[Ee.secondary.gridArea]})]})})}function He(e){var t=e.repl,n=e.currentUser,a=e.withSidebar,c=void 0===a||a;o.useEffect((function(){n&&!t.currentUserPermissions.containerWrite&&(0,j.j)(j.U3.REPL_GUEST_VIEW,{page:"replView"})}),[n,t.currentUserPermissions.containerWrite]);var s=t.tags.map((function(e){return e.id})).includes("javascript");return(0,r.tZ)(f.Z,{css:[u.l0.flex.row,u.l0.flex.growAndShrink(1)],children:(0,r.BX)(f.Z,{css:[u.l0.p(16),u.l0.flex.growAndShrink(1),Xe({withSidebar:c})],children:[(0,r.tZ)(f.Z,{css:[Ee.header.gridArea],children:(0,r.tZ)(he.Z,{repl:t,iconEditable:t.currentUserPermissions.changeIconUrl,canModerate:(null===n||void 0===n?void 0:n.isModerator)||(null===n||void 0===n?void 0:n.isAdmin)})}),(0,r.tZ)(f.Z,{css:[Ee.cta.gridArea],children:(0,r.tZ)(Ue,{repl:t,isLoggedIn:Boolean(n)})}),(0,r.BX)(f.Z,{css:[Ee.main.gridArea,u.l0.colWithGap(16)],children:[(0,r.tZ)(f.Z,{css:[{height:500,"> *":{height:"100%"}}],children:(0,r.tZ)(l.Z,{repl:t,currentUser:n,enableDeeplinks:!0})}),(0,r.tZ)(pe,{repl:t,currentUser:n})]}),(0,r.BX)(f.Z,{tag:"aside","data-nosnippet":!0,css:[Ee.auxiliary.gridArea,u.l0.colWithGap(16)],children:[s&&(0,r.tZ)(Se,{isLoggedIn:Boolean(n)}),t.relatedRepls.map((function(e){var t=e.name,n=e.repls;return(0,r.BX)(f.Z,{css:u.l0.colWithGap(16),children:[(0,r.tZ)(m.h,{level:3,variant:"subheadDefault",children:t}),(0,r.tZ)(f.Z,{css:u.l0.colWithGap(16),children:n.map((function(e){return e.publishedAs===i.O2h.Template?(0,r.tZ)(fe.Z,{repl:e},e.id):(0,r.tZ)(P.ZP,{showOwner:!0,repl:e,maxVisibleTags:1},e.id)}))})]},t)}))]}),(0,r.tZ)(f.Z,{css:[Ee.secondary.gridArea],children:(0,r.tZ)(D,{replId:t.id})})]})})}!function(e){e.ForksModal="ForksModal",e.AuthPrompt="AuthPrompt",e.UpdateModal="UpdateModal"}(Ie||(Ie={}))},53524:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(35944),o=n(67294),i=n(54929),l=n(3204),a=n(50553),c=n(85252);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=(0,n(70917).iv)([l.l0.py(8),l.l0.rowWithGap(4),{textTransform:"uppercase",cursor:"pointer",fontSize:l.TV.fontSizeSmall,fontWeight:l.TV.fontWeightMedium,border:"0 none",outline:"0",width:"100%",backgroundColor:l.TV.backgroundRoot,textAlign:"left",color:l.TV.foregroundDimmest,":hover":{color:l.TV.foregroundDefault}}]),p=(0,i.K)("div");function f(e){var t=e.children,n=s(o.useState(!0),2),l=n[0],u=n[1],f=s(o.useState(!0),2),m=f[0],h=f[1],v=(0,c.Z)((function(e){var t=e.height;void 0!==t&&u(t>56)}));return(0,r.BX)(i.Z,{css:{position:"relative"},children:[(0,r.tZ)(i.Z,{css:[m&&l&&{height:56,overflow:"hidden"}],children:(0,r.tZ)(p,{ref:v,children:t})}),l?(0,r.BX)(i.Z,{tag:"button",onClick:function(){return h(!m)},css:[d,m&&{position:"absolute",bottom:0,left:0}],children:[(0,r.BX)(i.Z,{children:["Show ",m?"more":"less"," "]}),(0,r.tZ)(a.Z,{rotate:m?0:180})]}):null]})}},8046:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(35944),o=(n(67294),n(88534));function i(e){var t=e.children,n=e.className;return(0,r.tZ)(o.ZP,{background:!1,skipHtml:!0,mentionsLink:!0,unwrapDisallowed:!0,lineBreaks:!0,className:n,allowedElements:["a","pre","code","em","strong","del","ins","p","ul","li","img","blockquote"],children:t})}},30666:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(35944),o=(n(67294),n(67938)),i=n(54929),l=n(3204),a=n(88768),c=n(51281),u=n(64711),s=n(16055),d=n(23139);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}function h(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){var t=e.replId,n=(0,a.zWW)({variables:{replId:t,count:100}}),p=n.data,f=n.fetchMore,v=n.loading,y="Repl"===(null===p||void 0===p?void 0:p.repl.__typename)?p.repl:null,b=y?y.publicForks:null,g=y?y.publicForkCount+y.publicReleasesForkCount:null;return(0,r.BX)(i.Z,{css:[l.l0.colWithGap(8)],children:[(0,r.BX)(i.Z,{children:[null!==g?(0,r.BX)(i.Z,{css:[l.l0.display.block],children:[(0,r.tZ)(o.x,{variant:"subheadDefault",children:g})," ",(0,r.tZ)(o.x,{color:"dimmest",variant:"subheadDefault",children:(0,u.Z)("forks",g)})]}):null,v?(0,r.tZ)(o.x,{color:"dimmest",variant:"subheadDefault",children:"Loading forks..."}):null]}),(0,r.BX)(i.Z,{css:[l.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(i.Z,{css:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:l.TV.space16,gridAutoFlow:"dense"},children:b?b.items.map((function(e){return(0,r.tZ)(d.Tg,{elevated:!0,css:[l.l0.borderRadius(8)],children:(0,r.tZ)(s.ZP,{showOwner:!0,repl:e})},e.id)})):null}),(null===b||void 0===b?void 0:b.pageInfo.nextCursor)?(0,r.tZ)(c.Z,{disabled:v,border:!1,color:"primary",filled:!1,fullWidth:!0,onClick:function(){v||f({variables:{after:b.pageInfo.nextCursor},updateQuery:function(e,t){if(!t||!t.fetchMoreResult)return e;var n="Repl"===e.repl.__typename?e.repl:null;if(!n)return e;var r=t.fetchMoreResult,o="Repl"===r.repl.__typename?r.repl:null;return o?m({},r,{repl:m({},o,{publicForks:m({},o.publicForks,{items:h(n.publicForks.items).concat(h(o.publicForks.items))})})}):e}})},children:v?"Loading...":"Load more"}):null]})]})}},35013:function(e,t,n){n.d(t,{x:function(){return X},H:function(){return j}});var r=n(35944),o=n(79547),i=n.n(o),l=n(67294),a=n(88768),c=n(8286),u=n(38880),s=n(8046),d=n(63292),p=n(23573),f=n(67938),m=n(54929),h=n(3204);function v(e){var t=e.title;return(0,r.BX)(m.Z,{css:[h.l0.rowWithGap(8),h.l0.py(8)],children:[(0,r.tZ)(f.x,{variant:"subheadBig",multiline:!0,css:[{wordBreak:"break-all",flexShrink:1}],children:t}),(0,r.tZ)(f.x,{color:"dimmer",css:[h.l0.borderRadius(16),h.l0.p(4),{border:"1px solid "+h.TV.outlineDimmer,height:"fit-content"}],children:"Post"})]})}var y=n(37424),b=n(23139);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Z(e,t,n[t])}))}return e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=(0,b.KD)("label");function C(e){var t=e.children;return(0,r.tZ)(b.G7,{css:[b.l0.rowWithGap(8),b.l0.align.center],children:t})}function A(e){var t,n=e.postId,o=function(e){p.loading||f&&d({variables:{input:w({id:f.id},e)}})},i=(0,y.H)(),l=(0,a.pDS)({variables:{postId:n}}),c=l.data,u=l.loading,s=x((0,a.dB7)(),2),d=s[0],p=s[1];if(u)return null;var f="Post"===(null===c||void 0===c||null===(t=c.post)||void 0===t?void 0:t.__typename)?c.post:null,m=null===c||void 0===c?void 0:c.boards;if(!f||!m)return(0,r.tZ)(b.xv,{children:"Something went wrong"});var h={isPinned:i("isPinned"),isHidden:i("isHidden"),boardId:i("boardId")};return(0,r.BX)(b.G7,{css:[b.l0.colWithGap(24)],children:[(0,r.tZ)(b.h4,{level:1,variant:"headerDefault",children:"Post settings"}),(0,r.BX)(b.G7,{css:[b.l0.colWithGap(8)],children:[(0,r.BX)(C,{children:[(0,r.tZ)(b.XZ,{id:h.isPinned,checked:Boolean(f.isPinned),onChange:function(){return o({isPinned:!f.isPinned})}}),(0,r.tZ)(S,{htmlFor:h.isPinned,children:"Pin post to Talk feed"})]}),f.canHide?(0,r.BX)(C,{children:[(0,r.tZ)(b.XZ,{id:h.isHidden,checked:Boolean(f.isHidden),onChange:function(e){return o({isHidden:e.target.checked})}}),(0,r.tZ)(S,{htmlFor:h.isHidden,children:"Hide post from listing"})]}):null]}),f.canChangeBoard?(0,r.BX)(C,{children:[(0,r.tZ)(b.Ph,{id:h.boardId,placeholder:"Select a board",items:m.map((function(e){return{value:e,title:e.name}})),initialSelectedItem:f.board?{value:f.board,title:f.board.name}:void 0,onChange:function(e){return o({boardId:e.value.id})}}),(0,r.tZ)(S,{htmlFor:h.isHidden,children:"Change board (requires reload)"})]}):null]})}var k=n(21555),T=n(56834),R=n(81736);function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){O(e,t,n[t])}))}return e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e){var t=e.initialValue,n=e.commentId,o=e.onReply,i=e.onCancel,c=(0,l.useState)(null),u=c[0],s=c[1],d=I((0,a.cTp)({onCompleted:function(e){var t="ReplComment"===e.createReplCommentReply.__typename?e.createReplCommentReply:null;if(t)return(0,T.j)(T.U3.COMMENT_MADE,{source:"spotlight"}),void o(t);var n="UserError"===e.createReplCommentReply.__typename?e.createReplCommentReply.message:null;n&&s(n)}}),2),p=d[0],f=d[1];return(0,r.tZ)(k.EQ,{error:u,initialValue:t,onCancel:i,onSubmit:function(e){f.loading||p({variables:{input:{body:e,replCommentId:n}}})}})}function j(e){var t=e.replId,n=e.placeholder,o=e.onComment,i=e.autoFocus,u=void 0!==i&&i,s=e.onCancel,d=void 0===s?function(){}:s,p=(0,l.useState)(!1),f=p[0],m=p[1],h=(0,l.useState)(null),v=h[0],y=h[1],g=I((0,a.QpW)({onCompleted:function(e){var t="ReplComment"===e.createReplComment.__typename?e.createReplComment:null;if(t)return(0,T.j)(T.U3.COMMENT_MADE,{source:"spotlight"}),m(!0),void o(t);var n="UserError"===e.createReplComment.__typename?e.createReplComment.message:null;n&&y(n)}}),2),Z=g[0],w=g[1];return f?(0,r.tZ)(b.E_,{icon:(0,r.tZ)(c.Z,{}),closable:!0,closeAction:function(){d(),m(!1)},colorway:"positive",text:"Comment added"}):(0,r.tZ)(k.EQ,{autoFocus:u,initialValue:"",placeholder:n,hideControls:!0,error:v,onCancel:function(){d(),y(null)},onSubmit:function(e){w.loading||Z({variables:{input:{body:e,replId:t}}})}})}function P(e){var t=e.comment,n=e.onReply,o=e.onDelete,u=e.replyToId,p=e.toggleRepliesButton,f=e.commentsEnabled,m=I((0,a.gaR)(),2),h=m[0],v=m[1],y=I((0,a.cqY)({variables:{id:t.id},onCompleted:function(){B(null),o(t)}}),2),g=y[0],Z=y[1],w=I((0,a.oYJ)({variables:{commentId:t.id,isHidden:!t.isHidden}}),1)[0],x=(0,l.useState)(!1),S=x[0],C=x[1],A=(0,l.useState)(null),T=A[0],B=A[1],O=T===k.nQ.Edit,j=t.user;if((0,l.useEffect)((function(){T!==k.nQ.Hide&&T!==k.nQ.Show||w()}),[T,w]),!j)return null;var P=t.currentUserPermissions,E=Boolean(P);return(0,r.BX)(b.G7,{css:[b.l0.rowWithGap(8),{":hover .actions":{opacity:1}}],children:[(0,r.tZ)(k.Yt,{user:j}),(0,r.BX)(b.G7,{css:[b.l0.flex.growAndShrink(1),b.l0.colWithGap(4)],children:[(0,r.BX)(b.G7,{css:[b.l0.align.center,b.l0.rowWithGap(16)],children:[(0,r.tZ)(k.wb,{user:j,timeCreated:t.timeCreated}),t.isHidden&&(0,r.tZ)(b.u,{tooltip:"This comment is hidden",children:(0,r.tZ)(R.Z,{size:12,"alt-text":"This comment is hidden"})})]}),O?(0,r.tZ)(k.EQ,{buttonText:"Save",buttonIcon:(0,r.tZ)(c.Z,{}),initialValue:t.body,onSubmit:function(e){v.loading||(h({variables:{input:{id:t.id,body:e}},optimisticResponse:{updateReplComment:G({},t,{body:e})}}),B(null))},onCancel:function(){return B(null)}}):(0,r.tZ)("div",{className:i().dynamic([["f42d4188beffd055",[t.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,r.tZ)(s.Z,{children:t.body})}),S?(0,r.tZ)(b.G7,{css:[b.l0.pt(12)],children:(0,r.tZ)(D,{initialValue:"@".concat(j.username," "),commentId:u,onReply:function(e){n(e),C(!1)},onCancel:function(){return C(!1)}})}):(0,r.BX)(b.G7,{css:[b.l0.rowWithGap(8),{marginLeft:-4}],children:[E&&!t.isHidden&&f?(0,r.tZ)(k.g4,{onClick:function(){return C(!0)}}):null,p]})]}),O?null:(0,r.tZ)(b.G7,{css:[S&&{visibility:"hidden"}],children:(0,r.tZ)(k.pl,{className:"actions",canEdit:Boolean(null===P||void 0===P?void 0:P.edit),canReport:!1,canEditSettings:!1,canDelete:Boolean(null===P||void 0===P?void 0:P.delete),onAction:B,canHideComment:Boolean(null===P||void 0===P?void 0:P.canHideComment)&&!t.isHidden,canShowComment:Boolean(null===P||void 0===P?void 0:P.canHideComment)&&Boolean(t.isHidden)})}),(0,r.tZ)(b.u_,{isOpen:T===k.nQ.Delete,onRequestClose:function(){return B(null)},children:(0,r.tZ)(d.Z,{delete:function(){Z.loading||g({variables:{id:t.id}})},entityType:"comment",hideModal:function(){return B(null)}})}),(0,r.tZ)(i(),{id:"f42d4188beffd055",dynamic:[t.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(t.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function E(e){var t=e.initialTitle,n=e.initialBody,o=e.onSubmit,i=e.onCancel,a=(0,l.useState)(t),u=a[0],s=a[1],d=(0,l.useState)(n),f=d[0],m=d[1],h=(0,k.Ex)(),v=(0,y.H)();return(0,r.BX)(k.l0,{css:[b.l0.colWithGap(8),b.l0.mt(8)],onSubmit:function(e){e.preventDefault(),o({title:u,body:f})},children:[(0,r.BX)(b.G7,{css:[b.l0.colWithGap(16)],children:[(0,r.BX)(b.G7,{css:[b.l0.colWithGap(4)],children:[(0,r.tZ)("label",{htmlFor:v("title"),children:(0,r.tZ)(b.xv,{color:"dimmer",variant:"small",children:"Title"})}),(0,r.tZ)(b.II,{value:u,placeholder:"Give your post a title",onChange:function(e){return s(e.currentTarget.value)},id:v("title")})]}),(0,r.tZ)(p.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&o({title:u,body:f})},initialValue:f,onChange:m,userSearch:h,autoFocus:!1,showLabel:!0})]}),(0,r.BX)(b.G7,{css:[b.l0.rowWithGap(8),b.l0.justify.end],children:[(0,r.tZ)(b.zx,{text:"Cancel",onClick:i}),(0,r.tZ)(b.zx,{type:"submit",iconLeft:(0,r.tZ)(c.Z,{}),text:"Save",onClick:function(){},colorway:"primary",disabled:n===f&&t===u})]})]})}function W(e){var t=e.post,n=e.comment,o=e.onReply,c=e.onDelete,p=e.replyToId,f=e.toggleRepliesButton,m=e.commentsEnabled,h=(0,u.Z)().showError,y=I((0,a.kz4)({onError:function(e){return h(e.message)}}),2),g=y[0],Z=y[1],w=I((0,a.gaR)(),2),x=w[0],S=w[1],C=I((0,a.cqY)({variables:{id:n.id},onCompleted:function(){_(null),c(n)}}),2),T=C[0],B=C[1],O=I((0,a.oYJ)({variables:{commentId:n.id,isHidden:!n.isHidden}}),1)[0],j=(0,l.useState)(!1),P=j[0],W=j[1],X=(0,l.useState)(null),U=X[0],_=X[1],H=U===k.nQ.Edit,V=n.user;if((0,l.useEffect)((function(){U!==k.nQ.Hide&&U!==k.nQ.Show||O()}),[U,O]),!V)return null;var M=n.currentUserPermissions,z=Boolean(M),F=Boolean(t.canPin||t.canChangeBoard||t.canHide);return(0,r.BX)(b.G7,{css:[b.l0.rowWithGap(8),{":hover .actions":{opacity:1}}],children:[(0,r.tZ)(k.Yt,{user:V}),(0,r.BX)(b.G7,{css:[b.l0.flex.growAndShrink(1),b.l0.colWithGap(4),{"& .rendered-markdown":{backgroundColor:"transparent"}}],children:[(0,r.BX)(b.G7,{css:[b.l0.align.center,b.l0.rowWithGap(16)],children:[(0,r.tZ)(k.wb,{user:V,timeCreated:n.timeCreated,action:"shared an update"}),n.isHidden&&(0,r.tZ)(b.u,{tooltip:"This comment is hidden",children:(0,r.tZ)(R.Z,{size:12,"alt-text":"This comment is hidden"})})]}),H?(0,r.tZ)(E,{initialTitle:t.title||"",initialBody:n.body,onSubmit:function(e){var r=e.title,o=e.body;S.loading||Z.loading||(g({variables:{input:{id:t.id,title:r}},optimisticResponse:{updatePost:{post:G({},t,{title:r})}}}),x({variables:{input:{id:n.id,body:o}},optimisticResponse:{updateReplComment:G({},n,{body:o})}}),_(null))},onCancel:function(){return _(null)}}):(0,r.BX)(r.HY,{children:[t.title?(0,r.tZ)(b.G7,{children:(0,r.tZ)(v,{title:t.title})}):null,(0,r.tZ)("div",{className:i().dynamic([["f42d4188beffd055",[n.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,r.tZ)(s.Z,{children:n.body})})]}),P?(0,r.tZ)(b.G7,{css:[b.l0.pt(12)],children:(0,r.tZ)(D,{initialValue:"@".concat(V.username," "),commentId:p,onReply:function(e){o(e),W(!1)},onCancel:function(){return W(!1)}})}):(0,r.BX)(b.G7,{css:[b.l0.rowWithGap(2),{marginLeft:-4}],children:[z&&m?(0,r.tZ)(k.g4,{onClick:function(){return W(!0)}}):null,f]})]}),H?null:(0,r.tZ)(b.G7,{css:[P&&{visibility:"hidden"}],children:(0,r.tZ)(k.pl,{className:"actions",canEdit:Boolean(null===M||void 0===M?void 0:M.edit),canReport:t.canReport,canEditSettings:F,canDelete:Boolean(null===M||void 0===M?void 0:M.delete),onAction:_,canHideComment:Boolean(null===M||void 0===M?void 0:M.canHideComment)&&!n.isHidden,canShowComment:Boolean(null===M||void 0===M?void 0:M.canHideComment)&&Boolean(n.isHidden)})}),(0,r.tZ)(b.u_,{isOpen:U===k.nQ.Delete,onRequestClose:function(){return _(null)},children:(0,r.tZ)(d.Z,{delete:function(){B.loading||T({variables:{id:n.id}})},entityType:"post",hideModal:function(){return _(null)}})}),(0,r.tZ)(b.u_,{isOpen:U===k.nQ.Report,onRequestClose:function(){return _(null)},children:"TODO: Report"}),(0,r.tZ)(b.u_,{isOpen:U===k.nQ.Settings,onRequestClose:function(){return _(null)},children:(0,r.tZ)(A,{postId:t.id})}),(0,r.tZ)(i(),{id:"f42d4188beffd055",dynamic:[n.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(n.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function X(e){var t,n=e.comment,o=e.onReply,i=e.onDelete,a=e.commentsEnabled,c=(0,l.useState)(!1),u=c[0],s=c[1],d=n.replies,p=d.length,f=p?(0,r.tZ)(k.tE,{onClick:function(){return s((function(e){return!e}))},repliesCount:p,isExpanded:u}):null,m=(null===(t=n.post)||void 0===t?void 0:t.title)?n.post:null;return m?(0,r.BX)(b.Tg,{elevated:!0,css:[b.l0.colWithGap(32),b.l0.p(16),b.l0.borderRadius(8)],children:[(0,r.tZ)(W,{replyToId:n.id,post:m,comment:n,toggleRepliesButton:f,onReply:function(e){s(!0),o(e)},onDelete:i,commentsEnabled:a}),u?(0,r.tZ)(b.G7,{css:[b.l0.colWithGap(32),b.l0.pl(32)],children:d.filter((function(e){var t;return Boolean(null===(t=e.currentUserPermissions)||void 0===t?void 0:t.canHideComment)||!e.isHidden})).map((function(e){return(0,r.tZ)(P,{commentsEnabled:a,comment:e,onReply:o,onDelete:i,replyToId:n.id},e.id)}))}):null]}):(0,r.BX)(b.G7,{css:[b.l0.colWithGap(32)],children:[(0,r.tZ)(P,{commentsEnabled:a,replyToId:n.id,comment:n,toggleRepliesButton:f,onReply:function(e){s(!0),o(e)},onDelete:i}),u?(0,r.tZ)(b.G7,{css:[b.l0.colWithGap(32),b.l0.pl(32)],children:d.filter((function(e){var t;return Boolean(null===e||void 0===e||null===(t=e.currentUserPermissions)||void 0===t?void 0:t.canHideComment)||!e.isHidden})).map((function(e){return(0,r.tZ)(P,{commentsEnabled:a,comment:e,onReply:o,onDelete:i,replyToId:n.id},e.id)}))}):null]})}},41644:function(e,t,n){n.d(t,{Z:function(){return ie}});var r=n(35944),o=n(67294),i=n(88768),l=n(3204),a=n(67938),c=n(54929),u=n(28614),s=n(22546),d=n(7177),p=n(23139),f=n(38880),m=n(51095);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=(0,p.KD)("form");function b(e){var t=e.replId,n=e.onDone,l=(0,o.useState)(""),a=l[0],c=l[1],u=(0,f.Z)(),s=u.showConfirm,d=u.showError,h=v((0,i.b3J)({variables:{replId:t,reason:a},onCompleted:function(){s("Repl reported"),n()}}),2),b=h[0],g=h[1].loading;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.xv,{variant:"subheadBig",children:"Report Repl"}),(0,r.BX)(y,{onSubmit:function(e){e.preventDefault(),a?b():d("Not reported. No reason specified.")},css:[p.l0.colWithGap(32)],children:[(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8)],children:(0,r.tZ)(p.B,{placeholder:"Why do you want to report this Repl?",value:a,onChange:function(e){return c(e.currentTarget.value)},css:[p.l0.minHeight(64),p.l0.maxHeight(128),{resize:"vertical"}]})}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(16),p.l0.justify.end],children:[(0,r.tZ)(p.G7,{children:(0,r.tZ)(p.zx,{type:"button",text:"Cancel",onClick:function(){return n()}})}),(0,r.tZ)(p.G7,{children:(0,r.tZ)(p.zx,{disabled:g,text:g?"Reporting":"Report Repl",type:"submit",colorway:"negative",iconLeft:(0,r.tZ)(m.Z,{}),onClick:function(){return n()}})})]})]})]})}var g=n(89431);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=(0,p.KD)("form");function S(e){var t=e.username,n=e.onDone,l=(0,o.useState)(""),a=l[0],c=l[1],s=(0,f.Z)(),d=s.showConfirm,m=s.showError,h=w((0,i.$u1)({onCompleted:function(e){var t=e.warnUser;"UserError"===t.__typename?m(t.message):d("The user has been warned.")}}),2),v=h[0],y=h[1].loading;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.h4,{level:1,variant:"headerDefault",children:"Warn the author of the Repl?"}),(0,r.BX)(x,{onSubmit:function(e){e.preventDefault(),a&&t?(v({variables:{username:t,reason:a}}),n()):m("Please provide a reason.")},css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.B,{placeholder:"Reason for warning the user",value:a,onChange:function(e){return c(e.currentTarget.value)},css:{resize:"none",minHeight:40}}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.justify.end],children:[(0,r.tZ)(p.zx,{type:"button",text:"Cancel",onClick:function(){return n()}}),(0,r.tZ)(p.zx,{disabled:y,colorway:"negative",text:y?"Warning user...":"Yes, warn this user",type:"submit",iconLeft:(0,r.tZ)(u.Z,{})})]})]})]})}var C=n(89957),A=n(32666);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=(0,p.KD)("form");function B(e){var t=e.username,n=e.onDone,l=(0,o.useState)(""),a=l[0],c=l[1],u=(0,f.Z)(),s=u.showConfirm,d=u.showError,m=T((0,i.DHd)({onCompleted:function(e){var t=e.banCommunityUser;"UserError"===t.__typename?d(t.message):s("The user has been banned.")}}),2),h=m[0],v=m[1].loading;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.h4,{level:1,variant:"headerDefault",children:"Ban the author of the Repl?"}),(0,r.tZ)(p.xv,{multiline:!0,children:"Are you sure you want to ban this user? All their Repls will be deleted and they will no longer be able to access their account."}),(0,r.BX)(R,{onSubmit:function(e){e.preventDefault(),a&&t?(h({variables:{username:t,reason:a}}),n()):d("Please provide a reason.")},css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8)],children:(0,r.tZ)(C.B,{placeholder:"Reason for banning the user",value:a,onChange:function(e){return c(e.currentTarget.value)},css:{resize:"none",minHeight:40}})}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.justify.end],children:[(0,r.tZ)(p.zx,{type:"button",text:"Cancel",onClick:function(){return n()}}),(0,r.tZ)(p.zx,{disabled:v,colorway:"negative",text:v?"Banning user...":"Yes, ban this user",type:"submit",iconLeft:(0,r.tZ)(A.Z,{})})]})]})]})}var O=n(44327),G=n(34051),I=n.n(G),D=n(30478);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t,n,r,o,i,l){try{var a=e[i](l),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,o)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var W=(0,p.KD)("form");function X(e){var t=e.replId,n=e.onDone,o=(0,f.Z)(),l=o.showConfirm,a=o.showError,c=E((0,i.e2I)({variables:{input:{replId:t}}}),2),u=c[0],s=c[1];return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.h4,{level:1,variant:"headerDefault",children:"Unpublish Template from Community?"}),(0,r.BX)(W,{onSubmit:function(){var e,t=(e=I().mark((function e(t){var r,o,i,c;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=3,e.next=6,u();case 6:c=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a("Something went wrong. Please try again.");case 12:if("Repl"!==(null===c||void 0===c||null===(r=c.data)||void 0===r?void 0:r.deleteReplDeployment.__typename)){e.next=16;break}l("Template successfully unpublished"),e.next=19;break;case 16:if("NotFoundError"!==(null===c||void 0===c||null===(o=c.data)||void 0===o?void 0:o.deleteReplDeployment.__typename)&&"UserError"!==(null===c||void 0===c||null===(i=c.data)||void 0===i?void 0:i.deleteReplDeployment.__typename)){e.next=19;break}return a(c.data.deleteReplDeployment.message),e.abrupt("return");case 19:n();case 20:case"end":return e.stop()}}),e,null,[[3,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){P(i,r,o,l,a,"next",e)}function a(e){P(i,r,o,l,a,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}(),css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.xv,{multiline:!0,children:"Unpublishing a Template will remove it from the Templates page. The Repl itself will not be deleted, and you can always re-publish the Template again later."}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.justify.end],children:[(0,r.tZ)(p.zx,{type:"button",text:"Cancel",onClick:function(){return n()}}),(0,r.tZ)(p.zx,{disabled:s.loading,colorway:"negative",text:s.loading?"Unpublishing Template...":"Yes, unpublish this Template",type:"submit",iconLeft:(0,r.tZ)(D.EyeOff,{})})]})]})]})}var U=n(19689),_=n(97443);function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t,n,r,o,i,l){try{var a=e[i](l),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,o)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var z=(0,p.KD)("form");function F(e){var t=e.replId,n=e.reviewType,o=e.onDone,l=(0,f.Z)(),a=l.showConfirm,c=l.showError,u="Something went wrong ".concat("promote"===n?"promoting":"demoting"," this Template"),s=M((0,i.bcJ)({variables:{input:{replId:t,shouldPromote:"promote"===n}},onError:function(){c(u)},onCompleted:function(e){"TemplateReview"===e.reviewTemplate.__typename?(a("Template successfully ".concat("promote"===n?"promoted":"demoted")),o()):"UnauthorizedError"===e.reviewTemplate.__typename||"UserError"===e.reviewTemplate.__typename?c(e.reviewTemplate.message):c(u)}}),2),d=s[0],m=s[1];return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.h4,{level:1,variant:"headerDefault",children:"promote"===n?"Promote Template":"Demote Template?"}),(0,r.BX)(z,{onSubmit:function(){var e,t=(e=I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),d();case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){V(i,r,o,l,a,"next",e)}function a(e){V(i,r,o,l,a,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}(),css:[p.l0.colWithGap(24)],children:["promote"===n?(0,r.tZ)(p.xv,{multiline:!0,children:"Promoting a Template will show the Template in the Create Repl modal."}):(0,r.tZ)(p.xv,{multiline:!0,children:"Demoting a Template will remove the Template from the Create Repl modal."}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.justify.end],children:[(0,r.tZ)(p.zx,{type:"button",text:"Cancel",onClick:function(){return o()}}),"promote"===n?(0,r.tZ)(p.zx,{disabled:m.loading,colorway:"primary",iconLeft:(0,r.tZ)(U.Z,{}),text:m.loading?"Promoting Template...":"Promote Template"}):(0,r.tZ)(p.zx,{disabled:m.loading,colorway:"negative",iconLeft:(0,r.tZ)(_.Z,{}),text:m.loading?"Demoting Template...":"Demote Template"})]})]})]})}var L,q=n(81736);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e){var t,n=e.repl,l=e.canModerate,a=e.owner,c=K(o.useState(null),2),f=c[0],h=c[1],v=[];((0,g.Z)("flag-report-repl-spotlight")&&v.push({label:"Report",isDestructive:!0,key:L.reportRepl,icon:(0,r.tZ)(m.Z,{})}),l)&&(v.push({label:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(u.Z,{}),(0,r.tZ)(p.xv,{children:"Warning"}),(0,r.tZ)(p.DR,{text:"mod",css:[p.l0.color.foregroundDefault,{textTransform:"uppercase"}],clickable:!1})]}),key:L.warnAuthor,isDestructive:!0}),v.push({label:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(A.Z,{}),(0,r.tZ)(p.xv,{children:"Ban author"}),(0,r.tZ)(p.DR,{text:"mod",css:[p.l0.color.foregroundDefault,{textTransform:"uppercase"}],clickable:!1})]}),key:L.banAuthor,isDestructive:!0}),n.publishedAs===i.O2h.Template&&((null===(t=n.templateReview)||void 0===t?void 0:t.promoted)?v.push({label:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(_.Z,{}),(0,r.tZ)(p.xv,{children:"Demote Template"}),(0,r.tZ)(p.DR,{text:"mod",css:[p.l0.color.foregroundDefault,{textTransform:"uppercase"}],clickable:!1})]}),isDestructive:!0,key:L.modDemoteTemplate}):v.push({label:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(U.Z,{}),(0,r.tZ)(p.xv,{children:"Promote Template"}),(0,r.tZ)(p.DR,{text:"mod",css:[p.l0.color.foregroundDefault,{textTransform:"uppercase"}],clickable:!1})]}),isDestructive:!1,key:L.modPromoteTemplate})));return n.currentUserPermissions.publish&&null!==n.lastPublishedAt&&v.push({label:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(q.Z,{}),(0,r.tZ)(p.xv,{children:"Unpublish from Community"}),(0,r.tZ)(p.DR,{text:"mod",css:[p.l0.color.foregroundDefault,{textTransform:"uppercase"}],clickable:!1})]}),isDestructive:!0,key:L.unpublish}),n.publishedAs===i.O2h.Template&&n.currentUserPermissions.publish&&v.push({label:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(q.Z,{}),(0,r.tZ)(p.xv,{children:"Unpublish Template"}),(0,r.tZ)(p.DR,{text:"mod",css:[p.l0.color.foregroundDefault,{textTransform:"uppercase"}],clickable:!1})]}),isDestructive:!0,key:L.unpublishTemplate}),v.length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(s.Z,{items:v,onItemClick:function(e){h(e.key)}}),(0,r.tZ)(d.Z,{isOpen:f===L.reportRepl,onRequestClose:function(){return h(null)},children:(0,r.tZ)(b,{replId:n.id,onDone:function(){return h(null)}})}),(0,r.tZ)(d.Z,{isOpen:f===L.unpublish,onRequestClose:function(){return h(null)},children:(0,r.tZ)(O.Z,{repl:n,onDone:function(){return h(null)},source:"coverPage"})}),(0,r.tZ)(d.Z,{isOpen:f===L.warnAuthor,onRequestClose:function(){return h(null)},children:(0,r.tZ)(S,{username:a,onDone:function(){return h(null)}})}),(0,r.tZ)(d.Z,{isOpen:f===L.banAuthor,onRequestClose:function(){return h(null)},children:(0,r.tZ)(B,{username:a,onDone:function(){return h(null)}})}),(0,r.tZ)(d.Z,{isOpen:f===L.unpublishTemplate,onRequestClose:function(){return h(null)},children:(0,r.tZ)(X,{replId:n.id,onDone:function(){return h(null)}})}),(0,r.tZ)(d.Z,{isOpen:f===L.modDemoteTemplate,onRequestClose:function(){return h(null)},children:(0,r.tZ)(F,{replId:n.id,reviewType:"demote",onDone:function(){return h(null)}})}),(0,r.tZ)(d.Z,{isOpen:f===L.modPromoteTemplate,onRequestClose:function(){return h(null)},children:(0,r.tZ)(F,{replId:n.id,reviewType:"promote",onDone:function(){return h(null)}})})]}):null}!function(e){e.warnAuthor="warnAuthor",e.banAuthor="banAuthor",e.reportRepl="reportRepl",e.unpublish="unpublish",e.unpublishTemplate="unpublishTemplate",e.modPromoteTemplate="modPromoteTemplate",e.modDemoteTemplate="modDemoteTemplate"}(L||(L={}));var Q=n(56408),Y=n(53009),J=n(11935),ee=n(45309);function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ne(e,t,n[t])}))}return e}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e){var t,n=e.repl,o=e.iconEditable,s=e.canModerate,d=oe((0,i.cuO)(),1)[0],p=(0,Q.W)((function(e){return d({variables:{input:{id:n.id,iconUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:re({},n,{iconUrl:e})}}})}));return(0,r.BX)(c.Z,{css:[l.l0.colWithGap(8)],children:[(0,r.BX)(c.Z,{css:[l.l0.rowWithGap(8),l.l0.align.center],children:[o?null:(0,r.tZ)(Y.ZP,{iconUrl:n.iconUrl,alt:"",size:32}),o?(0,r.tZ)(Q.Z,{size:32,value:p.previewUrl||n.iconUrl,onUpload:function(e){return p.uploadImage(e,ee.N.ReplIcon)},isUploading:Boolean(p.previewUrl)}):null,(0,r.tZ)(a.h,{variant:"headerBig",level:1,css:[l.l0.flex.growAndShrink(1),{wordBreak:"break-all"}],children:n.title}),(0,r.tZ)(N,{repl:n,canModerate:s,owner:null===(t=n.owner)||void 0===t?void 0:t.username})]}),p.error?(0,r.tZ)(c.Z,{css:[l.l0.align.start],children:(0,r.tZ)(J.Z,{icon:(0,r.tZ)(u.Z,{}),colorway:"negative",text:p.error,closable:!0,closeAction:p.clearError})}):null]})}}}]);
//# sourceMappingURL=4933-854c3fa333b381d2.js.map