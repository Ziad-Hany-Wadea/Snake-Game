"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6571,7541,3308,8215],{54920:function(e,t,n){var r=n(67294).createContext({activeFile:null,users:[],annotations:[],generalThread:void 0,onRequestCloseThread:function(){},handleFinalizeMessage:function(){},handleChangeMessage:function(){},setResolvedAnnotation:function(){},createAnnotationAnchorPlaceholder:function(){},markAllMessagesInReplAsSeenByUser:function(){},jumpToThread:function(){}});t.Z=r},33630:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(67294),o=n(88768),i=n(54920);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){var t=r.useContext(i.Z).users,n=l(r.useState({}),2),a=n[0],s=n[1],u=r.useRef(null),d=r.useCallback((function(){var e={};for(var t in a)Date.now()-a[t].time<1e3&&(e[t]=a[t]);s(e)}),[a,s]);return(0,o.ig3)({variables:{threadId:e},onSubscriptionData:function(n){var r,o,i=n.subscriptionData;if(null===(r=i.data)||void 0===r?void 0:r.threadPreview){var a=null===(o=i.data)||void 0===o?void 0:o.threadPreview;if("number"===typeof a.userId){var l=new Date,f=l.toJSON();s((function(n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}({},n,c({},a.userId,{time:l.getTime(),user:t.find((function(e){return e.id===a.userId})),id:a.messageId,currentUserIsAuthor:!1,timeCreated:f,timeUpdated:f,anchor:{id:e},content:{__typename:"PreviewMessageContentType",preview:a.message}}))})),u.current&&clearTimeout(u.current),u.current=setTimeout(d,2e3)}}},skip:!e}),r.useMemo((function(){return Object.values(a)}),[a])}},35864:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(47421),o=n(78120),i=n(3204),a=n(64711);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function u(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}var h=new(function(e){s(n,e);var t=p(n);function n(){var e;return c(this,n),(e=t.call(this)).elementClass="cm-gutterElement-hidden",e}return n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var t=document.createElement("span");return t.classList.add("cm-dot"),e.appendChild(t),e},n}(r.SJ)),m=function(e){s(n,e);var t=p(n);function n(e){var r;return c(this,n),(r=t.call(this)).numLines=e,r}var r=n.prototype;return r.eq=function(e){return e.numLines===this.numLines},r.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,a.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(r.l9),v=r.p.mark({class:"cm-searchResultMatch"}),g=r.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:i.TV.foregroundDefault,backgroundColor:i.TV.accentPrimaryDimmest,outline:i.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:i.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,padding:"0 !important",width:"var(--space-24) !important",textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}});function b(e,t){var n=e.sort((function(e,t){return e.from-t.from})),i=n.map((function(e){var t=e.from,n=e.to;return v.range(t,n)})),a=r.lg.define((function(){return{}}),{decorations:function(){return r.p.set(i)}}),c=function(e,t){var n=[],i=1;e.forEach((function(r,o){var a=t.lineAt(r.from),c=t.lineAt(r.to);i<a.number-2&&n.push({startLine:i,endLine:a.number-2}),i=c.number+2,o===e.length-1&&i<t.lines&&n.push({startLine:i,endLine:t.lines})}));var a=n.map((function(e){var n=t.line(e.startLine),o=t.line(e.endLine);return r.p.replace({widget:new m(e.endLine-e.startLine+1)}).range(n.from,o.to)})),c=n.map((function(e){var n=t.line(e.startLine);return r.p.line({class:"cm-line-hidden"}).range(n.from)})),l=o.QQ.define({create:function(){return r.p.set(a)},update:function(e){return e},provide:function(e){return r.tk.decorations.from(e)}}),s=o.QQ.define({create:function(){return r.p.set(c)},update:function(e){return e},provide:function(e){return r.tk.decorations.from(e)}}),u=n.map((function(e){var n=t.line(e.startLine);return h.range(n.from)})),d=r.p2.of(o.Xs.of(u));return[l,s,g,d]}(n,t);return[a,c]}},91898:function(e,t,n){var r=n(67294).createContext(null);t.Z=r},87139:function(e,t,n){var r=n(35944),o=n(79547),i=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}t.Z=function(e){var t=c({},e);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(i(),{id:"fcfe85a13ecbf46b",children:".one.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.two.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s}.three.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-moz-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-o-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }"}),(0,r.tZ)("span",l({},t,{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"one"),children:"."})),(0,r.tZ)("span",l({},t,{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"two"),children:"."})),(0,r.tZ)("span",l({},t,{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"three"),children:"."}))]})}},62424:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(35944),o=n(79547),i=n.n(o),a=n(67294),c=n(37026),l=n(29698),s=n(1517),u=n(38956),d=n(8996),f=n(52620),p=n(72829),h=n(45309);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){var t=a.useRef(null),n=v(a.useState(e.value),2),o=n[0],m=n[1],g=v(a.useState(null),2),b=g[0],y=g[1],x=(0,u.Z)({onUpload:function(t){var n=t.url;e.onChange(n)},onUploadPreview:function(e){var t=e.dataUrl;m(t)},onError:function(e){y(e.message)}});a.useEffect((function(){m(e.value)}),[e.value]);var w=null===o||void 0===o?void 0:o.startsWith("data:"),k=32;return(0,r.BX)(d.gC,{spacing:"var(--space-4)",children:[(0,r.BX)("div",{onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":o?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",className:i().dynamic([["b924c5ea7169ca0d",[k,k]]])+" "+((o?"update-icon":"add-icon")||""),children:[o?(0,r.BX)(r.HY,{children:[(0,r.tZ)(c.Z,{iconUrl:o,size:k,alt:"icon"}),w?(0,r.tZ)("div",{className:i().dynamic([["b924c5ea7169ca0d",[k,k]]])+" loading-state",children:(0,r.tZ)("div",{className:i().dynamic([["b924c5ea7169ca0d",[k,k]]])+" loading-icon",children:(0,r.tZ)(s.Z,{})})}):(0,r.tZ)("div",{className:i().dynamic([["b924c5ea7169ca0d",[k,k]]])+" hover-state",children:(0,r.tZ)(l.Z,{})})]}):(0,r.tZ)(f.Z,{}),(0,r.tZ)("input",{ref:t,accept:p.W9.join(","),type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&(null===r||void 0===r?void 0:r.length)&&(y(null),x.uploadImage(r[0],h.N.TemplateIcon))},className:i().dynamic([["b924c5ea7169ca0d",[k,k]]])})]}),b?(0,r.tZ)("div",{className:i().dynamic([["b924c5ea7169ca0d",[k,k]]])+" error",children:b}):null,(0,r.tZ)(i(),{id:"b924c5ea7169ca0d",dynamic:[k,k],children:".add-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px dashed var(--foreground-dimmest);background-color:var(--background-root);width:".concat(k,"px;height:").concat(k,"px}.add-icon.__jsx-style-dynamic-selector:hover{color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.add-icon.__jsx-style-dynamic-selector,.update-icon.__jsx-style-dynamic-selector{position:relative;cursor:pointer;background-color:var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:2px}.update-icon.__jsx-style-dynamic-selector:hover .hover-state.__jsx-style-dynamic-selector{opacity:.8}.hover-state.__jsx-style-dynamic-selector{opacity:0}.loading-state.__jsx-style-dynamic-selector{opacity:.8}.loading-icon.__jsx-style-dynamic-selector{-webkit-animation:rotate 1s linear infinite;-moz-animation:rotate 1s linear infinite;-o-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotate{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.hover-state.__jsx-style-dynamic-selector,.loading-state.__jsx-style-dynamic-selector{color:var(--accent-primary-default);position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);background-color:var(--background-root);overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}input.__jsx-style-dynamic-selector{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.error.__jsx-style-dynamic-selector{font-size:var(--font-size-default);color:var(--accent-negative-default)}")})]})}},83308:function(e,t,n){n.d(t,{a:function(){return R},Z:function(){return I}});var r=n(34051),o=n.n(r),i=n(35944),a=n(79547),c=n.n(a),l=n(67294),s=n(80796),u=n(48966),d=n(48010);function f(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){f(i,r,o,a,c,"next",e)}function c(e){f(i,r,o,a,c,"throw",e)}a(void 0)}))}}var h={isEmail:[[u.isEmail,"Invalid email address"]],email:[[u.isEmail,"Invalid email address"],[function(){var e=p(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.uz)("/data/user/exists",{email:t});case 2:return n=e.sent.exists,e.abrupt("return",!n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"Email already in use"]],username:[[function(e){return(0,u.isByteLength)(e,2,15)},"Your username must be between 2 and 15 characters"],[function(e){return!!e.match(/^[0-9a-zA-Z]+$/)},"Your username can only contain alphanumeric characters (letters A-Z, numbers 0-9)"],[function(){var e=p(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.uz)("/data/user/exists",{username:t});case 2:return n=e.sent.exists,e.abrupt("return",!n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"Username is taken"]],name:[[function(e){return(0,u.isByteLength)(e,1,255)},"Your name must be at least 1 character long"]],classroomName:[[function(e){return(0,u.isByteLength)(e,1,255)},"Classroom name must be at least 1 character long"]],replTitle:[[function(e){return(0,u.isByteLength)(e,1,60)},"Titles must be between 1 and 60 characters"]],replDescription:[[function(e){return(0,u.isByteLength)(e,0,255)},"Description should not be longer than 255 characters"]],notEmpty:[[function(e){return!(0,u.isEmpty)(e)},"Cannot be empty"]],postTitle:[[function(e){return(0,u.isByteLength)(e,1,100)&&!!e.match(/[0-9a-zA-Z]+/)},"Your post title must be less than 100 characters and contain at least one alphanumeric character"]],replTag:[[function(e){return(0,u.isByteLength)(e,2,15)},"Tag must be between 2 and 15 characters"],[function(e){return!!e.match(/^[0-9a-zA-Z_]+$/)},"Tag must be alphanumeric characters"]],replFolderName:[[function(e){return(0,u.isByteLength)(e.trim(),1,60)},"Folder name must be between 1 and 60 characters"],[function(e){return!e.match(/[/*?"\\]+/)},'Folder name cannot contain /, *, ", ? \\']]},m=n(28593),v=n(57541);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}function j(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function O(e,t){return!t||"object"!==P(t)&&"function"!==typeof t?b(e):t}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}var I=function(e){E(n,e);var t=A(n);function n(){return x(this,n),t.apply(this,arguments)}return k(n,[{key:"focus",value:function(){this.input&&this.input.focus()}},{key:"select",value:function(){this.input&&this.input.select()}},{key:"blur",value:function(){this.input&&this.input.blur()}},{key:"render",value:function(){var e=this,t=this.props,n=t.error,r=t.isLoading,o=j(t,["error","isLoading"]),a=n?[{message:n,state:"error"}]:void 0;return(0,i.BX)("div",{className:"jsx-ac5406405936ddf form-input-with-ui",children:[(0,i.tZ)(v.ZP,_({},o,{validationResults:a,ref:function(t){return e.input=t}})),r?(0,i.tZ)(m.Z,{style:{right:"8px",top:"12px",height:"16px",width:"16px",position:"absolute"}}):null,(0,i.tZ)(c(),{id:"ac5406405936ddf",children:".form-input-with-ui.jsx-ac5406405936ddf{position:relative;width:100%}"})]})}}]),n}(l.Component);S(I,"defaultProps",{isLoading:!1,type:"text",value:"",required:!1});var R=function(e){E(n,e);var t=A(n);function n(e){var r;x(this,n),S(b(r=t.call(this,e)),"onBlur",(function(e){r.props.onBlur&&r.props.onBlur(e),r.validateNow()})),S(b(r),"onChange",(function(e){r.props.onChange(e),r.clearErrTimeout=setTimeout((function(){return r.setState({error:null})}),200),r.validate()})),S(b(r),"validateNow",(function(){r.validate.cancel(),r._validate()}));var i,a=b(r);return S(b(r),"_validate",(i=o().mark((function e(){var t,n,r,i,c,l,s,u,d,f,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,n=a.props.validators||h[a.props.validator]){e.next=4;break}throw new Error("Please supply validators or a type of validator");case 4:r=!0,i=!1,c=void 0,e.prev=5,l=n[Symbol.iterator]();case 7:if(r=(s=l.next()).done){e.next=25;break}if(u=T(s.value,2),d=u[0],f=u[1],!(p=d(a.props.value)).then){e.next=16;break}return a.setState({isLoading:!0}),e.next=14,p;case 14:p=e.sent,a.setState({isLoading:!1});case 16:if(p){e.next=22;break}return a.props.onValidation(f),t=!1,a.setState({error:f}),a.clearErrTimeout&&clearTimeout(a.clearErrTimeout),e.abrupt("break",25);case 22:r=!0,e.next=7;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(5),i=!0,c=e.t0;case 31:e.prev=31,e.prev=32,r||null==l.return||l.return();case 34:if(e.prev=34,!i){e.next=37;break}throw c;case 37:return e.finish(34);case 38:return e.finish(31);case 39:t&&(a.setState({error:null}),a.props.onValidation(null));case 40:case"end":return e.stop()}}),e,null,[[5,27,31,39],[32,,34,38]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){y(o,n,r,a,c,"next",e)}function c(e){y(o,n,r,a,c,"throw",e)}a(void 0)}))})),S(b(r),"validate",(0,s.Z)((function(){return r._validate()}),r.props.debounceTime)),r.state={error:null,isLoading:!1},r}return k(n,[{key:"focus",value:function(){this.input&&this.input.focus()}},{key:"select",value:function(){this.input&&this.input.select()}},{key:"blur",value:function(){this.input&&this.input.blur()}},{key:"render",value:function(){var e=this,t=this.props,n=(t.onValidation,t.validator,t.validators,t.debounceTime,_({},j(t,["onValidation","validator","validators","debounceTime"]),{onChange:this.onChange,onBlur:this.onBlur,ref:function(t){return e.input=t},error:this.state.error,isLoading:this.state.isLoading}));return(0,i.tZ)(I,_({},n))}}]),n}(l.Component);S(R,"defaultProps",{debounceTime:1e3})},70192:function(e,t,n){var r=n(35944),o=n(79547),i=n.n(o),a=n(67294);t.Z=function(){return(0,r.tZ)(a.Fragment,{children:(0,r.tZ)(i(),{id:"cf42b6e1693787e8",children:"body .Select{font-size:16px}body .Select-control{color:var(--foreground-default)!important;background-color:var(--background-default)!important;border:1px solid var(--foreground-dimmest)!important;-webkit-border-radius:var(--border-radius-4)!important;-moz-border-radius:var(--border-radius-4)!important;border-radius:var(--border-radius-4)!important;-webkit-transition:all.1s;-moz-transition:all.1s;-o-transition:all.1s;transition:all.1s}body .Select-control:hover{border-color:var(--foreground-default)!important}body .Select.is-focused .Select-control,body .Select.is-open .Select-control{border-color:var(--foreground-dimmer)!important}body .Select.is-focused.is-open .Select-control{-webkit-border-bottom-left-radius:0!important;-moz-border-radius-bottomleft:0!important;border-bottom-left-radius:0!important;-webkit-border-bottom-right-radius:0!important;-moz-border-radius-bottomright:0!important;border-bottom-right-radius:0!important}body .Select-control .Select-value{height:38px!important;background-color:var(--background-default)!important;color:var(--foreground-default)!important;cursor:pointer}body .Select.is-open .Select-value,body .Select.is-focused .Select-value{background-color:var(--background-default)!important}body .Select .Select-control .Select-placeholder{color:var(--foreground-dimmest)!important}body .Select-menu-outer{border:1px solid var(--foreground-dimmer)!important;border-top:0 none!important;-webkit-border-bottom-left-radius:var(--border-radius-4)!important;-moz-border-radius-bottomleft:var(--border-radius-4)!important;border-bottom-left-radius:var(--border-radius-4)!important;-webkit-border-bottom-right-radius:var(--border-radius-4)!important;-moz-border-radius-bottomright:var(--border-radius-4)!important;border-bottom-right-radius:var(--border-radius-4)!important;background-color:var(--background-root)!important}body .Select-value-label{color:var(--foreground-default)!important}body .Select-option{color:var(--foreground-default)!important;background-color:var(--background-default)!important}body .Select-option.is-disabled{color:var(--foreground-dimmest)!important}body .Select .Select-option.is-focused{background-color:var(--accent-primary-dimmest)!important;color:var(--foreground-default)!important}body .Select .Select-option.is-selected{background-color:var(--accent-primary-dimmer)!important}body .Select-input input{color:var(--foreground-default)!important}"})})}},95722:function(e,t,n){var r=n(34051),o=n.n(r),i=n(35944),a=n(79547),c=n.n(a),l=n(67294),s=n(30617),u=n(62774),d=n(37510),f=n(93770),p=n(27740),h=n.n(p),m=n(38880),v=n(56834),g=n(67289),b=n(36793),y=n(27464),x=n(22429),w=n(82053),k=n(1517),S=n(3204),Z=n(43151);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){_(i,r,o,a,c,"next",e)}function c(e){_(i,r,o,a,c,"throw",e)}a(void 0)}))}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}var P=36,A=function(){return(0,i.BX)("div",{className:"jsx-3e741e4d889c73d "+c().dynamic([["37ffd3a19c5ebe03",[P]]])+" file-header-format-button",children:[(0,i.tZ)("div",{className:"jsx-3e741e4d889c73d "+c().dynamic([["37ffd3a19c5ebe03",[P]]])+" file-header-format-icon",children:(0,i.BX)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16.581 16.428",className:"jsx-3e741e4d889c73d "+c().dynamic([["37ffd3a19c5ebe03",[P]]]),children:[(0,i.tZ)("path",{d:"M13.26.747H3.323A2.569,2.569,0,0,0,.754,3.316h0v9.795a2.569,2.569,0,0,0,2.568,2.57h9.937a2.569,2.569,0,0,0,2.569-2.569h0V3.316A2.569,2.569,0,0,0,13.26.747Z",className:"jsx-3e741e4d889c73d "+c().dynamic([["37ffd3a19c5ebe03",[P]]])+" cls-1"}),(0,i.tZ)("path",{d:"M13.118,11.269a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.759-.759V11.23a.671.671,0,0,1,.689-.653l.07.006h8.438a.671.671,0,0,1,.753.578.7.7,0,0,1,.006.069ZM3.161,5.111V5.073a.759.759,0,0,1,.759-.759h8.439a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.76-.758ZM3.148,8.2a.759.759,0,0,1,.758-.76H8.4a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.907a.759.759,0,0,1-.759-.759Z",className:"jsx-3e741e4d889c73d "+c().dynamic([["37ffd3a19c5ebe03",[P]]])+" cls-2"})]})}),(0,i.tZ)(c(),{id:"3e741e4d889c73d",children:".file-header-format-button.jsx-3e741e4d889c73d .cls-1{fill:var(--foreground-default)}.file-header-format-button.jsx-3e741e4d889c73d .cls-2{fill:var(--background-default)}"}),(0,i.tZ)(c(),{id:"37ffd3a19c5ebe03",dynamic:[P],children:".file-header-format-button.__jsx-style-dynamic-selector{padding:0 10px;height:100%;width:".concat(P,"px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;opacity:.7}.file-header-format-button.__jsx-style-dynamic-selector:hover{opacity:1}.file-header-format-icon.__jsx-style-dynamic-selector{height:16px;width:16px;cursor:pointer}")})]})};function I(e){var t=e.filePath,n=e.replLanguage,r=(0,s.Z)(),i=r.fs,a=r.container,c=(0,u.Z)({container:a,service:"format",skip:!h().supportsFormatting(n)}).channel,p=O(l.useState(!1),2),v=p[0],g=p[1],b=(0,m.Z)().showError,y=function(){return g(!1)};return l.useEffect((function(){if(v&&c){var e=!1,n=[],r=i.watchOtFile(t,{onReady:function(e){!function(e,t){a.apply(this,arguments)}(e.initialContent,e.writeOp)},onChange:function(e){var t=e.op;n=d.compose(t,n)},onError:function(){y()},onMoveOrDelete:function(){y()}});return function(){e=!0,r()}}function a(){return(a=j(o().mark((function r(i,a){var l,s,u,p;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e&&c){r.next=2;break}return r.abrupt("return");case 2:if(0!==i.length){r.next=5;break}return y(),r.abrupt("return");case 5:return r.next=7,c.request({file:{path:t,content:i.toBuffer()}});case 7:if(l=r.sent,!e){r.next=10;break}return r.abrupt("return");case 10:if(!l.error&&l.file){r.next=14;break}return b("Failed to format ".concat(t),1500),y(),r.abrupt("return");case 14:if(0!==(s=f.Z.from(l.file.content)).length){r.next=18;break}return y(),r.abrupt("return");case 18:if(0!==(u=d.diffStr(i.toString(),s.toString())).length){r.next=22;break}return y(),r.abrupt("return");case 22:if(0!==(p=n.length>0?d.transform(u,n,"left"):u).length){r.next=26;break}return y(),r.abrupt("return");case 26:a(p),y();case 28:case"end":return r.stop()}}),r)})))).apply(this,arguments)}}),[c,t,i,v,b]),l.useEffect(y,[t]),h().supportsFormatting(n)?function(){return g(!0)}:null}function R(e){var t=e.formatWithLsp,n=e.formatWithService,r=e.replLanguage,o=e.filePath,i=(null===t||void 0===t?void 0:t.fn)||n;if(!i)throw new Error("Expected format function");(0,v.j)(v.U3.AUTO_FORMAT_USED,{language:r,extension:(0,g.r6)(o)}),i()}t.Z=function(e){var t=e.filePath,n=e.replLanguage,r=I({filePath:t,replLanguage:n}),a=function(e){var t,n=e.filePath,r=(0,b.Z)().preferences,i=(0,s.Z)().fs,a=(0,x.Z)(n),c=Boolean(null===(t=null===a||void 0===a?void 0:a.getServerCapabilities())||void 0===t?void 0:t.documentFormattingProvider),u=(0,l.useState)([]),f=u[0],p=u[1],h=(0,m.Z)(),v=h.showError,g=h.showConfirm;return c?{fn:function(){if(!f.includes(n)){p((function(e){return C(e).concat([n])}));var e=[],t=function(e){e?v("Sorry, formatting ".concat(n," failed"),1500):g("Formatted ".concat(n," successfully"),1500),c(),p((function(e){return e.filter((function(e){return e!==n}))}))},c=i.watchOtFile(n,{onReady:function(){var i=j(o().mark((function i(c){var l,s,u,f,p;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(l=c.initialContent,s=c.writeOp,a){o.next=3;break}throw new Error("LSP client not found");case 3:return o.next=5,a.request.format(n,{insertSpaces:r.indentIsSpaces,tabSize:r.indentSize});case 5:if(!("error"in(u=o.sent))){o.next=9;break}return t(!0),o.abrupt("return");case 9:if(!u.cancelled){o.next=12;break}return t(!0),o.abrupt("return");case 12:if(u.result){o.next=15;break}return t(!0),o.abrupt("return");case 15:if(f=(0,w.Z)(u.result,l.toString()),0!==(p=e.length>0?d.transform(f,e,"left"):f).length){o.next=20;break}return t(),o.abrupt("return");case 20:s(p),t();case 22:case"end":return o.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}(),onChange:function(t){var n=t.op;e=d.compose(n,e)}})}},isFormatting:f.includes(n)}:null}({filePath:t});if((0,Z.x)({cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"},{enabled:Boolean((0,g.Mb)(t)&&(a||r)),run:function(){R({formatWithLsp:a,formatWithService:r,replLanguage:n,filePath:t})}}),!(0,g.Mb)(t)||!a&&!r)return null;var c=(0,g.eb)(t);return(0,i.tZ)(y.Z,{css:[S.l0.zIndex(1),{alignSelf:"center"}],alt:(null===a||void 0===a?void 0:a.isFormatting)?"Formatting ".concat(c,", please wait"):"Format ".concat(c," code"),tooltipPlacement:"left-end",onClick:function(){R({formatWithLsp:a,formatWithService:r,replLanguage:n,filePath:t})},children:(null===a||void 0===a?void 0:a.isFormatting)?(0,i.tZ)(k.Z,{}):(0,i.tZ)(A,{})})}},28593:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(35944),o=n(79547),i=n.n(o);n(67294);function a(e){var t=e.style;return(0,r.tZ)("div",{style:t,className:"jsx-c09452bedc697c5e spinner",children:(0,r.tZ)(i(),{id:"c09452bedc697c5e",children:'@-webkit-keyframes replit-logo-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes replit-logo-spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes replit-logo-spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes replit-logo-spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.spinner.jsx-c09452bedc697c5e{width:40px;height:40px;background-image:url("/public/images/logo-grayscale.png");-webkit-background-size:contain;-moz-background-size:contain;-o-background-size:contain;background-size:contain;background-position:center;background-repeat:no-repeat;-webkit-animation:replit-logo-spin 1.5s linear infinite;-moz-animation:replit-logo-spin 1.5s linear infinite;-o-animation:replit-logo-spin 1.5s linear infinite;animation:replit-logo-spin 1.5s linear infinite}'})})}},85264:function(e,t,n){n.d(t,{F:function(){return f},Y:function(){return d}});var r=n(35944),o=n(79547),i=n.n(o),a=n(67294),c=n(58458),l=n(40425),s=n(8996),u=n(56834);function d(){return a.useEffect((function(){(0,u.j)(u.U3.WS_REPLCO_UNREACHABLE)}),[]),(0,r.BX)("div",{className:"jsx-88c49dc4f1cb807b unreachable",children:[(0,r.BX)(s.gC,{align:"center",spacing:4,children:[(0,r.BX)(s.gC,{align:"center",children:[(0,r.tZ)(l.Z,{level:1,children:"\ud83d\ude48"}),(0,r.tZ)(l.Z,{level:4,children:"This Repl link isn\u2019t broken!"}),(0,r.tZ)(l.Z,{level:4,foreground:2,children:"It\u2019s just blocked."})]}),(0,r.BX)(s.gC,{spacing:2,className:"why",children:[(0,r.tZ)(c.Z,{foreground:2,children:"Why this might be happening:"}),(0,r.tZ)(c.Z,{foreground:2,children:(0,r.BX)("ul",{className:"jsx-88c49dc4f1cb807b",children:[(0,r.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,r.tZ)(c.Z,{fontWeight:"medium",foreground:1,children:"blocked by a firewall,"})," ","so contact your IT administrator"]}),(0,r.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,r.tZ)(c.Z,{fontWeight:"medium",foreground:1,children:"blocked by your ISP,"})," ","so try getting in touch with them"]})]})})]}),(0,r.BX)(c.Z,{foreground:2,align:"center",children:["If you have any other questions, please check out"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/teams-edu/it-administrators-toolkit",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"our IT docs"})," ","or"," ",(0,r.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"contact support"}),"."]})]}),(0,r.tZ)(i(),{id:"88c49dc4f1cb807b",children:".unreachable.jsx-88c49dc4f1cb807b{padding:var(--space-32)}.unreachable.jsx-88c49dc4f1cb807b ul.jsx-88c49dc4f1cb807b{list-style-position:inside}.unreachable.jsx-88c49dc4f1cb807b li.jsx-88c49dc4f1cb807b{padding-bottom:var(--space-16)}"})]})}var f=a.createContext(!1)},17825:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(91131),o=n(64824),i=n(88768),a=n(88215),c=n(36793);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=new Date("2022-07-08"),d=(0,o.O4)("useCelebrateFirstReplPlay",!1);function f(){var e,t,n=(0,i.Tq7)(),o=(0,c.Z)().preferences.extraDelight,l=(0,a.$0)().fireCircularBurstFrom,f=s((0,r.KO)(d),2),p=f[0],h=f[1],m=null!==(t=null===(e=n.data)||void 0===e?void 0:e.currentUser)&&void 0!==t?t:null,v=!p&&m&&m.hasNewCoderOnboardingFlag&&new Date(m.timeCreated)>=u;return{hasCelebrated:p,celebrate:function(e){(o||v)&&l({element:e}),v&&h(!0)}}}},12603:function(e,t,n){n.d(t,{f6:function(){return u},oj:function(){return s},xZ:function(){return f}});var r=n(67294),o=n(30617),i=n(93577);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){var t=c(r.useState(!1),2),n=t[0],i=t[1],a=(0,o.Z)().dotReplit;return r.useEffect((function(){var t=!1;return a.getConfig().then((function(n){t||n.error||n.config.language===e&&i(!0)})),function(){t=!0}}),[e,a]),n}function s(){return l("kaboom")}function u(){return l("kaboomdraw")}var d=/^draw.[tj]s$/;function f(){var e=(0,i.Z)();return u()&&Boolean(null===e||void 0===e?void 0:e.match(d))}},91449:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(11163),o=n.n(r),i=n(30617),a=n(67294),c=n(46846),l=n(33605),s="You have unsaved changes";function u(){var e=(0,i.Z)().fs,t=(0,r.useRouter)(),n=(0,a.useState)(!1),u=n[0],d=n[1],f=(0,a.useRef)(!1),p=function(){if(!f.current&&!window.confirm(s))throw o().events.emit("routeChangeError"),o().replace(o(),o().asPath),new Error("Abort route change. Please ignore this error.")};return(0,a.useEffect)((function(){return d(e.getStatus()===c.kO.Syncing),e.onStatusChange((function(e){d(e===c.kO.Syncing)}))}),[e]),(0,a.useEffect)((function(){var e=function(e){if(!f.current)return e.preventDefault(),e.returnValue=s,s};if(u)return window.addEventListener("beforeunload",e),l.g||t.events.on("routeChangeStart",p),function(){window.removeEventListener("beforeunload",e),l.g||t.events.off("routeChangeStart",p)}}),[u,t.events]),function(e){return f.current=e}}},59936:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(67294),o=n(88768),i=n(98772),a=n(85133),c=n(30617);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(){var e=s((0,o.yuJ)(),1)[0],t=(0,c.Z)().fs,n=(0,a.Z)(),l=null===n||void 0===n?void 0:n.currentUserPermissions.containerWrite,u=null===n||void 0===n?void 0:n.id;(0,r.useEffect)((function(){if(l&&u){var n=(0,i.Z)((function(){return e({variables:{replId:u}})}),{wait:6e4,maxWait:6e5}),r=t.onStatusChange((function(){n()}));return function(){n.isScheduled()&&n.flush(),r()}}}),[t,u,l,e])}},73433:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(67294),o=n(63805);function i(){var e=(0,r.useRef)(0),t=(0,r.useState)(!1),n=t[0],i=t[1],a=window.visualViewport;return(0,r.useEffect)((function(){if(a&&(0,o.isMobile)({tablet:!1})){var t=function(){var t=a.height<.8*e.current;i(t)};return e.current=a.height,a.addEventListener("resize",t),function(){a.removeEventListener("resize",t)}}}),[a]),n}},84403:function(e,t,n){n.d(t,{V:function(){return f},Q:function(){return b}});var r=n(9571);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=.5*(Math.sqrt(3)-1),a=(3-Math.sqrt(3))/6,c=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;o(this,e);var n="function"===typeof t?t:u(t);this.p=s(n),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var r=0;r<512;r++)this.perm[r]=this.p[255&r],this.permMod12[r]=this.perm[r]%12}return e.prototype.noise2D=function(e,t){var n,r,o=this.permMod12,l=this.perm,s=0,u=0,d=0,f=(e+t)*i,p=Math.floor(e+f),h=Math.floor(t+f),m=(p+h)*a,v=e-(p-m),g=t-(h-m);v>g?(n=1,r=0):(n=0,r=1);var b=v-n+a,y=g-r+a,x=v-1+2*a,w=g-1+2*a,k=255&p,S=255&h,Z=.5-v*v-g*g;if(Z>=0){var E=3*o[k+l[S]];s=(Z*=Z)*Z*(c[E]*v+c[E+1]*g)}var _=.5-b*b-y*y;if(_>=0){var j=3*o[k+n+l[S+r]];u=(_*=_)*_*(c[j]*b+c[j+1]*y)}var O=.5-x*x-w*w;if(O>=0){var C=3*o[k+1+l[S+1]];d=(O*=O)*O*(c[C]*x+c[C+1]*w)}return 70*(s+u+d)},e}();function s(e){for(var t=new Uint8Array(256),n=0;n<256;n++)t[n]=n;for(var r=0;r<255;r++){var o=r+~~(e()*(256-r)),i=t[r];t[r]=t[o],t[o]=i}return t}function u(e){var t=0,n=0,r=0,o=1,i=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();return t=i(" "),n=i(" "),r=i(" "),(t-=i(e))<0&&(t+=1),(n-=i(e))<0&&(n+=1),(r-=i(e))<0&&(r+=1),function(){var e=2091639*t+2.3283064365386963e-10*o;return t=n,n=r,r=e-(o=0|e)}}var d=new l;function f(e){var t=!1,n=0,r=0,o=null,i=function(c){if(t){var l=c-n;r+=l,n=c,o=window.requestAnimationFrame(i),e({elapsedTime:r,deltaTime:l,stop:a})}},a=function(){t&&(t=!1,o&&window.cancelAnimationFrame(o))};return{start:function(){t||(r=0,n=performance.now(),t=!0,o=window.requestAnimationFrame(i))},stop:a}}var p=function(){return(0,r.hd)(600,1200)},h=function(){return(0,r.hd)(1,3)},m=function(){return{width:(0,r.hd)(5,20),height:(0,r.hd)(5,20)}},v=function(){return(0,r.vF)()};function g(e){return Array.isArray(e)?(0,r.DQ)(e):(t=e,(null!=(n=Function)&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)?e():e);var t,n}function b(){var e=!1,t=null,n=null,o=[],i=null;return{getIsInstalled:function(){return e},addParticles:function(e){for(var t=e.x,n=e.y,a=e.numParticles,c=void 0===a?150:a,l=e.spread,s=void 0===l?60:l,u=e.heading,d=void 0===u?90:u,f=e.airDrag,b=void 0===f?.9:f,y=e.color,x=void 0===y?v:y,w=e.gravity,k=void 0===w?800:w,S=e.velocity,Z=void 0===S?p:S,E=e.size,_=void 0===E?m:E,j=e.lifetime,O=void 0===j?h:j,C=g(s),T=g(d),P=(0,r.Id)(C),A=(0,r.Id)(-T),I=g(c),R=0;R<I;R++){var D=A+(0,r.hd)(-P/2,P/2),N=g(Z),U=g(_),B=U.width,z=U.height,L=g(O),M=g(x),F=g(b);o.push({type:(0,r.DQ)(["rectangle","ellipse"]),seed:(0,r.hd)(0,1e5),x:t,y:n,gravity:k,airDrag:F,scaleX:1,scaleY:1,rotation:(0,r.hd)(0,(0,r.Id)(360)),velocityX:Math.cos(D)*N,velocityY:Math.sin(D)*N,angularVelocity:(0,r.hd)((0,r.Id)(-400),(0,r.Id)(400)),color:M,alpha:1,width:B,height:z,lifetime:L,lifetimeRemaining:L})}null===i||void 0===i||i.start()},clearParticles:function(){o=[]},uninstall:function(){e&&(t&&document.body.contains(t)&&document.body.removeChild(t),i&&i.stop(),t=null,n=null,e=!1)},install:function(){e||(t=function(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex="999999",e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight,e.id="replit-particles-simulation",e.setAttribute("role","image"),e.ariaHidden="true",e}(),(n=t.getContext("2d"))&&(document.body.appendChild(t),i=f((function(e){var i=e.deltaTime,a=e.stop;if(t&&n){var c=n,l=window.scrollX,s=window.scrollY;t.width!==document.documentElement.clientWidth&&(t.width=document.documentElement.clientWidth),t.height!==document.documentElement.clientHeight&&(t.height=document.documentElement.clientHeight),n.clearRect(0,0,t.width,t.height),o.map((function(e){return function(e){var t=e.particle,n=e.deltaTime;t.velocityY+=t.gravity*n/1e3,t.x+=t.velocityX*n/1e3,t.y+=t.velocityY*n/1e3,t.rotation+=t.angularVelocity*n/1e3,t.velocityX*=t.airDrag,t.velocityY*=t.airDrag,t.scaleY=2*(0,r.WE)(t.lifetimeRemaining,.5);var o=(0,r.NC)(t.velocityX,t.velocityY),i=(0,r.$G)(t.velocityX,t.velocityY),a=o+.05*d.noise2D(t.seed,t.lifetimeRemaining);t.velocityX=Math.cos(a)*i,t.velocityY=Math.sin(a)*i,t.lifetimeRemaining-=n/1e3,t.lifetimeRemaining<=0?t.alpha=0:t.alpha=1-(t.lifetime-t.lifetimeRemaining)/t.lifetime}({particle:e,deltaTime:i})})),o.map((function(e){return function(e){var t=e.particle,n=e.ctx,r=e.scrollX,o=e.scrollY,i=t.width*t.scaleX,a=t.height*t.scaleY,c=t.x-r,l=t.y-o;n.save(),n.translate(c,l),n.rotate(t.rotation),n.globalAlpha=t.alpha,"image"===t.type?n.drawImage(t.image,-i/2,-a/2,i,a):"rectangle"===t.type?(n.fillStyle=t.color,n.fillRect(-i/2,-a/2,i,a)):"ellipse"===t.type&&(n.fillStyle=t.color,n.beginPath(),n.ellipse(0,0,i/2,a/2,0,0,2*Math.PI),n.fill()),n.restore()}({particle:e,ctx:c,scrollX:l,scrollY:s})})),0===(o=o.filter((function(e){return e.lifetimeRemaining>0}))).length&&a()}})),e=!0))}}}},88215:function(e,t,n){n.d(t,{su:function(){return p},hd:function(){return o.hd},$0:function(){return v}});var r=n(67294),o=n(9571),i=n(84403),a=n(91131),c=n(3846);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p,h=(0,i.Q)(),m=(0,a.cn)(h);function v(){var e=f((0,a.KO)(m),1)[0],t=(0,c.T)();r.useEffect((function(){return e.install(),function(){e.uninstall()}}),[e]);var n=function(n){t||e.addParticles(n)},i=function(n){t||e.addParticles(u({numParticles:125,spread:360,velocity:function(){return(0,o.hd)(400,900)},size:function(){return{width:(0,o.hd)(5,15),height:(0,o.hd)(5,25)}}},n))};return{fireBurst:n,fireBurstFrom:function(e){var r=e.element,i=d(e,["element"]);if(!t){var a=(0,o.tj)(r),c=a.x,l=a.y;n(u({x:c,y:l},i))}},fireCircularBurst:i,fireCircularBurstFrom:function(e){var n=e.element,r=d(e,["element"]);if(!t){var a=(0,o.tj)(n),c=a.x,l=a.y;i(u({x:c,y:l},r))}},fireDirectionalBurst:function(n){var r=n.direction,o=d(n,["direction"]);t||e.addParticles(u({heading:r},o))},fireDirectionalBurstFrom:function(n){var r=n.element,i=n.direction,a=d(n,["element","direction"]);if(!t){var c=(0,o.tj)(r),l=c.x,s=c.y;e.addParticles(u({x:l,y:s,numParticles:100,velocity:function(){return(0,o.hd)(400,1500)},spread:60,size:function(){return{width:(0,o.hd)(5,15),height:(0,o.hd)(5,25)}},heading:i},a))}}}}!function(e){e[e.East=0]="East",e[e.NorthEast=45]="NorthEast",e[e.North=90]="North",e[e.NorthWest=135]="NorthWest",e[e.West=180]="West",e[e.SouthWest=225]="SouthWest",e[e.South=270]="South"}(p||(p={}))},9571:function(e,t,n){n.d(t,{$G:function(){return d},DQ:function(){return a},Id:function(){return s},NC:function(){return u},WE:function(){return p},hd:function(){return c},tj:function(){return o},vF:function(){return l}});var r=n(80140);function o(e){var t=function(e){var t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}}(e);return{x:t.x+window.scrollX,y:t.y+window.scrollY}}function i(e,t){return(0,r.Z)(e,t,!1)}function a(e){return e[i(0,e.length-1)]}function c(e,t){return(0,r.Z)(e,t,!0)}function l(){return"hsl(".concat(i(0,360),", 100%, 70%)")}function s(e){return e*Math.PI/180}function u(e,t){return Math.atan2(t,e)}function d(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function f(e,t){return(e%t+t)%t}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(f(e,2*t)-t)}},13649:function(e,t,n){function r(e){if(!e)return!1;try{var t=new URL(e);return Boolean(t)}catch(n){return!1}}n.d(t,{Z:function(){return r}})},76543:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(35944),o=n(79547),i=n.n(o),a=n(67294),c=n(56834),l=n(51281),s=n(58458),u=n(38880),d=n(88768),f=n(57541),p=n(8996),h=n(17632),m=n(35060),v=n(57170);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){var t,n,o,g=e.replId,y=(0,u.Z)(),x=y.showConfirm,w=y.showError,k=(0,d.hA$)({variables:{replId:g}}),S=k.data,Z=k.loading,E=k.error,_=b((0,d.QNZ)({variables:{replId:g},onError:function(e){return w(e.message)}}),2),j=_[0],O=_[1],C=b((0,d.ooK)({variables:{replId:g},optimisticResponse:{deleteMultiplayerInviteLink:{id:g,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return w(e.message)},onCompleted:function(e){"UserError"!==e.deleteMultiplayerInviteLink.__typename?"Repl"===e.deleteMultiplayerInviteLink.__typename&&x("Join link deleted"):w(e.deleteMultiplayerInviteLink.message)}}),2),T=C[0],P=C[1],A=O.loading||P.loading,I=a.useRef(null),R="Repl"===(null===S||void 0===S||null===(t=S.repl)||void 0===t?void 0:t.__typename)&&"Team"===(null===(n=S.repl.owner)||void 0===n?void 0:n.__typename),D="Repl"===(null===S||void 0===S||null===(o=S.repl)||void 0===o?void 0:o.__typename)&&S.repl.inviteUrl?window.location.origin+S.repl.inviteUrl:null;a.useEffect((function(){O.error&&w(O.error.message),O.data&&(0,c.j)(c.U3.MP2_REFRESHED_LINK,{replId:g})}),[O.error,O.data,g,w]);var N=function(){I&&I.current&&I.current.select()},U=function(){return(0,r.BX)("div",{"aria-label":"Anyone on the internet with this link can join and edit this repl","data-microtip-position":"top","data-microtip-size":"medium",role:"tooltip","data-micro":!0,className:"jsx-e33ed68cec233d59 information-icon-container",children:[(0,r.tZ)(h.Z,{}),(0,r.tZ)(i(),{id:"e33ed68cec233d59",children:".information-icon-container.jsx-e33ed68cec233d59{margin-left:5px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;text-align:center}"})]})};return Z?(0,r.tZ)(s.Z,{children:"loading..."}):E?(0,r.tZ)(s.Z,{children:"Error: please contact support"}):D?(0,r.BX)(p.gC,{align:"stretch",spacing:1,children:[(0,r.tZ)(s.Z,{foreground:2,size:"small",children:(0,r.BX)(p.Ug,{align:"center",children:["Invite ",R?"guests":"friends"," with a join link",U()]})}),(0,r.BX)(p.Ug,{wrap:"nowrap",align:"center",spacing:1,children:[(0,r.tZ)("div",{className:"jsx-1dd1818beded4b33 input-link",children:(0,r.tZ)(f.ZP,{ref:I,readOnly:!0,onChange:function(){return null},value:A?"loading...":D,onClick:N})}),(0,r.tZ)("div",{"aria-label":"Copy","data-microtip-position":"bottom",role:"tooltip",className:"jsx-1dd1818beded4b33",children:(0,r.tZ)(l.Z,{color:"primary",Icon:v.Z,onClick:function(){N(),document.execCommand("copy"),x("Link copied")}})}),(0,r.tZ)("div",{"aria-label":"Delete link","data-microtip-position":"bottom",role:"tooltip",className:"jsx-1dd1818beded4b33",children:(0,r.tZ)(l.Z,{color:"red",Icon:m.Z,onClick:function(e){e.preventDefault(),A||T()}})})]}),(0,r.BX)(s.Z,{size:"small",foreground:2,children:[(0,r.tZ)("a",{onClick:function(e){e.preventDefault(),A||j()},className:"jsx-1dd1818beded4b33",children:"Generate a new link"})," ","(The current one will stop working)"]}),(0,r.tZ)(i(),{id:"1dd1818beded4b33",children:".input-link.jsx-1dd1818beded4b33{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.input-link.jsx-1dd1818beded4b33 input{cursor:text!important}"})]}):(0,r.tZ)("div",{style:{marginTop:"var(--space-8)"},children:(0,r.tZ)(l.Z,{fullWidth:!0,color:"default",onClick:function(){A||j()},children:(0,r.BX)(p.Ug,{align:"center",children:["Generate a join link",U()]})})})}},94982:function(e,t,n){n.d(t,{Z:function(){return N}});var r=n(34051),o=n.n(r),i=n(35944),a=n(67294),c=n(23139),l=n(37424),s=n(88768),u=n(33108),d=n(28614),f=n(1769);var p=n(94692);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){m(i,r,o,a,c,"next",e)}function c(e){m(i,r,o,a,c,"throw",e)}a(void 0)}))}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){if(!e.data)return null;var t=e.data;if("revertReplRelease"in t){if("NotFoundError"===t.revertReplRelease.__typename||"UnauthorizedError"===t.revertReplRelease.__typename||"UserError"===t.revertReplRelease.__typename)return t.revertReplRelease.message;if("Repl"!==t.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}var y=n(1517),x=n(55681),w=n(79399),k=n(67289),S=n(17847),Z=n(58843);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){_(i,r,o,a,c,"next",e)}function c(e){_(i,r,o,a,c,"throw",e)}a(void 0)}))}}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=(0,c.KD)("form");function P(e){if(0===e.length)return{message:"You cannot leave this empty."}}function A(e){var t,n,r=e.changeType;return r===s.J53.NewFile?(t=c.TV.accentPositiveStronger,n="Added"):r===s.J53.DeletedFile?(t=c.TV.accentNegativeStronger,n="Deleted"):(t=c.TV.foregroundDefault,n="Changed"),(0,i.tZ)(c.xv,{variant:"small",css:[{color:t}],children:n})}function I(e){var t=e.pendingChangesState;if(t.loading)return(0,i.tZ)(c.G7,{css:[c.l0.center],children:(0,i.tZ)(y.Z,{})});if(t.error)return(0,i.tZ)(c.E_,{icon:(0,i.tZ)(d.Z,{}),text:t.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!t.pendingChanges||0===t.pendingChanges.length)return(0,i.tZ)(c.xv,{multiline:!0,children:"No changes to publish. Come back when you have made changes to your Repl."});var n=t.pendingChanges,r=n.slice(0,15);return(0,i.BX)(c.G7,{css:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:c.TV.space8}],children:[r.map((function(e){return(0,i.BX)(a.Fragment,{children:[(0,i.BX)(c.G7,{css:[c.l0.rowWithGap(4),c.l0.align.center],children:[(0,i.tZ)(x.Z,{size:12,path:e.fileName}),(0,i.tZ)(c.xv,{children:e.fileName})]},e.fileName),(0,i.tZ)(A,{changeType:e.changeType})]},e.fileName)})),n.length>r.length&&(0,i.BX)(c.xv,{children:["And ",n.length-r.length," other files..."]})]})}function R(e){var t=function(e){var t,n,r=e.replId,o=(0,s.fNr)({variables:{replId:r},fetchPolicy:"cache-and-network"}),i=o.data,a=o.loading,c=o.error;if(a)return{loading:a,pendingChanges:null,error:null};if(c)return{loading:!1,pendingChanges:null,error:c};var l="Repl"===(null===i||void 0===i?void 0:i.repl.__typename)?i.repl:null;return l?{loading:!1,pendingChanges:(null===(t=l.deployment)||void 0===t||null===(n=t.activeRelease)||void 0===n?void 0:n.pendingChanges)||[],error:c}:{loading:!1,pendingChanges:null,error:new Error("Repl not found")}}({replId:e.replId}),n=a.useMemo((function(){return t.pendingChanges?t.pendingChanges.slice().sort((function(e,t){return e.fileName.localeCompare(t.fileName)})).map((function(e){return{file:e,pathDepth:(0,k.U$)(e.fileName)}})).sort((function(e,t){return e.pathDepth-t.pathDepth})).map((function(e){return e.file})):[]}),[t.pendingChanges]);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){O(e,t,n[t])}))}return e}({},t,{pendingChanges:n})}function D(e){var t=e.repl,n=function(){var e=g((0,s.IOf)({refetchQueries:["ReplEnvironmentHeader"]}),2),t=e[0];function n(){return(n=v(o().mark((function e(n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.input,e.next=3,t({variables:{input:r}});case 3:return i=e.sent,e.abrupt("return",{data:i.data,error:b(i)});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{revertTemplateRelease:function(e){return n.apply(this,arguments)},state:e[1]}}(),r=function(){var e=j(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.revertTemplateRelease({input:{replId:t.id,releaseId:r}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,i.BX)(c.G7,{children:[(0,i.tZ)(c.h4,{level:1,variant:"subheadBig",css:[c.l0.mb(16)],children:"Existing Releases"}),(0,i.tZ)(c.G7,{css:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:c.TV.space8}],children:t.releases.items.map((function(e){var n,o;return(0,i.BX)(a.Fragment,{children:[(0,i.tZ)("span",{children:(0,S.Z)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,i.tZ)("span",{children:e.description}),(0,i.tZ)("span",{style:{justifySelf:"end"},children:e.id===(null===(n=t.deployment)||void 0===n||null===(o=n.activeRelease)||void 0===o?void 0:o.id)?(0,i.tZ)("span",{css:[c.l0.p(4),{display:"flex"}],children:"(active)"}):(0,i.tZ)(c.zx,{text:"revert",colorway:"primary",small:!0,onClick:function(t){t.preventDefault(),r(e.id)}})})]},e.id)}))})]})}function N(e){var t,n,r=e.repl,s=(0,l.H)(),h=C(a.useState(!1),2),m=h[0],v=h[1],g=C(a.useState(!1),2),b=g[0],y=g[1],x=R({replId:r.id}),k=(0,p.r)(),S=(0,u.Y)("",P),E=0!==(null===(t=x.pendingChanges)||void 0===t?void 0:t.length),_=Boolean(S.error||!E||k.loading),O=(0,Z.c)("flag-revert-template-release").enabled&&r.releases.items.length>1,A="";return S.error?A="Please fill out the form":E||(A="No changes to publish in this release"),m?(0,i.tZ)(w.q,{repl:r,isUpdate:!0}):b?(0,i.tZ)(c.G7,{css:[c.l0.p(16),c.l0.colWithGap(16)],children:(0,i.tZ)(D,{repl:r})}):(0,i.BX)(T,{onSubmit:function(){var e=j(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!_&&!S.validate()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,k.createRelease({input:{replId:r.id,description:S.value}});case 5:if(!e.sent.error){e.next=8;break}return e.abrupt("return");case 8:v(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),css:[c.l0.colWithGap(24)],children:[(0,i.tZ)(c.h4,{level:1,variant:"headerDefault",children:"Publish a new release"}),(0,i.BX)(c.G7,{css:[c.l0.colWithGap(8)],children:[(0,i.tZ)(c.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,i.tZ)(I,{pendingChangesState:x})]}),!x.loading&&x.pendingChanges.length>0&&(0,i.BX)(c.G7,{css:[c.l0.colWithGap(4)],children:[(0,i.tZ)("label",{htmlFor:s("description"),css:[c.l0.color.foregroundDimmer,{fontSize:c.TV.fontSizeSmall,lineHeight:c.TV.lineHeightSmall}],children:"Description"}),(0,i.tZ)(c.B,{id:s("description"),onChange:function(e){return S.setValue(e.target.value)},css:[c.l0.width("100%"),c.l0.minHeight(64),c.l0.maxHeight(128),{resize:"vertical"}],placeholder:"Explain what has changed about your template"}),S.error&&(0,i.tZ)(c.E_,{icon:(0,i.tZ)(d.Z,{}),text:null===(n=S.error)||void 0===n?void 0:n.message,colorway:"negative"})]}),(0,i.tZ)(c.G7,{children:k.error&&(0,i.tZ)(c.E_,{icon:(0,i.tZ)(d.Z,{}),text:k.error,colorway:"negative"})}),(0,i.BX)(c.G7,{css:[c.l0.rowWithGap(12),c.l0.justify.end],children:[O&&(0,i.tZ)(c.zx,{text:"Revert to older",colorway:"negative",onClick:function(){return y(!0)}}),(0,i.tZ)(c.u,{tooltip:A,placement:"bottom",isDisabled:!A,children:(0,i.tZ)(c.zx,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,i.tZ)(f.Z,{}),disabled:_})})]})]})}},81605:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(36793),o=n(30617),i=n(67294);function a(){var e=(0,o.Z)(),t=e.lspnix,n=e.lsp,a=(0,r.Z)().preferences.codeIntelligence;(0,i.useEffect)((function(){if(!a)return n.stop(),void t.disable();n.start(),t.enable()}),[t,n,a])}},68906:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(56603),o=n(93577),i=n(5560),a=n(67294),c=n(67289),l=n(30617),s=n(32117);function u(e){var t=Boolean(window.performance.getEntriesByName(r.Iy.pageNavStart,"mark").length),n="time to code";window.performance.measure(n,t?r.Iy.pageNavStart:void 0);var o=window.performance.getEntriesByName(n,"measure")[0];if(o){var i="page invisible fetch connection metadata",a=o.duration;if(Boolean(window.performance.getEntriesByName(r.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length))window.performance.measure(i,r.Iy.fetchConnectionMetadataPageInvisibleStart,r.Iy.fetchConnectionMetadataPageInvisibleEnd),a-=window.performance.getEntriesByName(i,"measure")[0].duration,window.performance.clearMeasures(i),window.performance.clearMarks(r.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(r.Iy.fetchConnectionMetadataPageInvisibleEnd);r.kg.time("time to code minus page invisible",a,{ssr:!t,workspaceType:e}),r.kg.time("time to code with page invisible",o.duration,{ssr:!t,workspaceType:e}),window.performance.clearMeasures(n),s.v.addTiming("time_to_code_minus_page_invisible",a),s.v.addTiming("time_to_code_with_page_invisible",o.duration)}else r.kg.info("Could not obtain measure for time to code",{workspaceType:e})}var d=new Set;function f(e){var t=e.workspaceType,n=(0,i.Z)(),r=(0,o.Z)(),s=(0,l.Z)().fs;(0,a.useEffect)((function(){var e;if(r&&!d.has(n))return d.add(n),e=(0,c.Mb)(r)?s.watchOtFile(r,{onReady:function(){u(t),e()}}):s.watchFile(r,{onChange:function(){u(t),e()}})}),[r,n,t,s])}},43151:function(e,t,n){n.d(t,{h:function(){return d},x:function(){return u}});var r=n(67294),o=n(33539),i=n(90601),a=n(91131);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=(0,a.cn)([]);function u(e,t){var n=t.run,o=t.enabled,i=void 0===o||o,c=(0,a.b9)(s);(0,r.useEffect)((function(){if(i){var t={shortcut:e,run:n};return c((function(e){return l(e).concat([t])})),function(){c((function(e){return e.filter((function(e){return e!==t}))}))}}}),[e,n,c,i])}function d(){var e=(0,a.Dv)(s);return(0,r.useEffect)((function(){var t=function(t){(0,o.b)(t);var n=!0,r=!1,a=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var s,u=c.value,d=u.shortcut,f=u.run;d.cmdOrCtrlKey===Boolean((0,i.j)(t))&&d.altKey===Boolean(t.altKey)&&d.shiftKey===Boolean(t.shiftKey)&&(null===(s=d.key)||void 0===s?void 0:s.toLowerCase())===t.key.toLowerCase()&&(t.preventDefault(),f())}}catch(p){r=!0,a=p}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[e]),null}},3831:function(e,t,n){n.d(t,{bG:function(){return a},lx:function(){return c},pl:function(){return l}});var r=n(55877),o=n.n(r),i=n(18584);function a(e,t){var n={protocolVersion:i.Wj,messageDirection:i.s1.TO_NATIVE,messageId:t,payload:e};null!=window.ReactNativeWebView?window.ReactNativeWebView.postMessage(JSON.stringify(n)):window.postMessage(n)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o()(),t={messageType:i.cF.RESET};a(t,e)}function l(e){var t=null!==e&&void 0!==e?e:o()();a({messageType:i.cF.ERROR},t)}},18584:function(e,t,n){var r,o;n.d(t,{Ak:function(){return v},CF:function(){return b},Se:function(){return d},Wj:function(){return i},ac:function(){return p},cF:function(){return r},fz:function(){return u},m7:function(){return f},nO:function(){return h},q$:function(){return m},s1:function(){return o},to:function(){return g}}),function(e){e.ERROR="ERROR",e.ACK="ACK",e.RESET="RESET",e.TEXT_EDITOR_STATE="WORKSPACE_STATE",e.TEXT_EDITOR_STATE_REQUEST="WORKSPACE_STATE_REQUEST",e.WORKSPACE_STATE="WORKSPACE_STATE1",e.WORKSPACE_STATE_REQUEST="WORKSPACE_STATE_REQUEST1",e.WORKSPACE_REQUEST_TOGGLE_DRAWER="WORKSPACE_REQUEST_TOGGLE_DRAWER",e.WORKSPACE_REQUEST_TOGGLE_ALLPANES="WORKSPACE_REQUEST_TOGGLE_ALLPANES",e.WORKSPACE_REQUEST_TOGGLE_RUN_STATE="WORKSPACE_REQUEST_TOGGLE_RUN_STATE",e.REQUEST_SET_SELECTION="REQUEST_SET_SELECTION",e.REQUEST_REPLACE_SELECTION="REQUEST_REPLACE_SELECTION",e.REQUEST_SET_TEXT="REQUEST_SET_TEXT",e.REQUEST_INSERT_TEXT="REQUEST_INSERT_TEXT",e.REQUEST_UNDO="REQUEST_UNDO",e.REQUEST_REDO="REQUEST_REDO",e.REQUEST_FOCUS="REQUEST_FOCUS",e.REQUEST_BLUR="REQUEST_BLUR"}(r||(r={})),function(e){e.FROM_NATIVE="FROM_NATIVE",e.TO_NATIVE="TO_NATIVE"}(o||(o={}));var i="1";function a(e){return null!==e&&void 0!==e&&"string"===typeof e}function c(e){return null!=e&&"number"===typeof e&&!Number.isNaN(e)&&Number.isFinite(e)&&Number.isSafeInteger(e)&&e>=0}function l(e){return null!=e&&("object"===typeof e&&null!=e&&("location"in e&&"length"in e&&c(e.location)&&c(e.length)))}function s(e){return null!=e&&(!!Array.isArray(e)&&!!e.every((function(e){return l(e)})))}function u(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"revisionId"in e&&"text"in e&&e.messageType===r.REQUEST_REPLACE_SELECTION&&a(e.filePath)&&a(e.revisionId)&&a(e.text)))}function d(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"selections"in e&&"revisionId"in e&&e.messageType===r.REQUEST_SET_SELECTION&&a(e.filePath)&&s(e.selections)&&a(e.revisionId)))}function f(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"text"in e&&"selections"in e&&"revisionId"in e&&e.messageType===r.REQUEST_SET_TEXT&&a(e.filePath)&&a(e.text)&&s(e.selections)&&a(e.revisionId)))}function p(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"text"in e&&"insertionRange"in e&&"selections"in e&&"revisionId"in e&&e.messageType===r.REQUEST_INSERT_TEXT&&a(e.filePath)&&a(e.text)&&l(e.insertionRange)&&s(e.selections)&&a(e.revisionId)))}function h(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"revisionId"in e&&e.messageType===r.REQUEST_UNDO&&a(e.filePath)&&a(e.revisionId)))}function m(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"revisionId"in e&&e.messageType===r.REQUEST_REDO&&a(e.filePath)&&a(e.revisionId)))}function v(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"revisionId"in e&&e.messageType===r.REQUEST_FOCUS&&a(e.revisionId)))}function g(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"revisionId"in e&&"filePath"in e&&e.messageType===r.REQUEST_BLUR&&a(e.revisionId)&&a(e.filePath)))}function b(e){return null!=e&&("object"===typeof e&&null!=e&&("protocolVersion"in e&&"messageDirection"in e&&"messageId"in e&&"payload"in e&&a(e.protocolVersion)&&a(e.messageDirection)&&a(e.messageId)&&function(e){if(null==e)return!1;if("object"!==typeof e||null==e)return!1;if(!("messageType"in e)||!a(e.messageType))return!1;switch(e.messageType){case r.ERROR:case r.ACK:case r.RESET:case r.TEXT_EDITOR_STATE:case r.TEXT_EDITOR_STATE_REQUEST:case r.WORKSPACE_STATE:case r.WORKSPACE_STATE_REQUEST:case r.WORKSPACE_REQUEST_TOGGLE_DRAWER:case r.WORKSPACE_REQUEST_TOGGLE_ALLPANES:case r.WORKSPACE_REQUEST_TOGGLE_RUN_STATE:return!0;case r.REQUEST_SET_SELECTION:return d(e);case r.REQUEST_SET_TEXT:return f(e);case r.REQUEST_INSERT_TEXT:return p(e);case r.REQUEST_REPLACE_SELECTION:return u(e);case r.REQUEST_UNDO:return h(e);case r.REQUEST_REDO:return m(e);case r.REQUEST_FOCUS:return v(e);case r.REQUEST_BLUR:return g(e);default:return!1}}(e.payload)))}},50348:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(67294),o=n(30617);function i(){var e=(0,o.Z)().container,t=(0,r.useState)(e.getConnectionState()),n=t[0],i=t[1];return(0,r.useEffect)((function(){return e.onConnectionStateChanged(i)}),[e]),n}},21644:function(e,t,n){n.d(t,{D3:function(){return a},EX:function(){return d},HS:function(){return v},If:function(){return o},KQ:function(){return r},MY:function(){return s},PW:function(){return m},Rr:function(){return l},XF:function(){return p},cU:function(){return u},mO:function(){return h},px:function(){return i},qR:function(){return c},xz:function(){return f}});var r=function(e){return{op:"add",path:"run",value:JSON.stringify(e)}},o=function(e){return{op:"add",path:"entrypoint",value:JSON.stringify(e)}},i=function(e){return{op:"add",path:"hidden",value:JSON.stringify(e)}},a=function(e){return{op:"add",path:"compile",value:JSON.stringify(e)}},c=function(e){return{op:"add",path:"onBoot",value:JSON.stringify(e)}},l=function(e){return{op:"add",path:"audio",value:JSON.stringify(e)}},s=function(e){return{op:"add",path:"unitTest/language",value:JSON.stringify(e)}},u=function(e){return{op:"add",path:"nix/channel",value:JSON.stringify(e)}},d=function(e){return{op:"add",path:"env",value:JSON.stringify(e)}},f=function(e){return{op:"remove",path:e,value:""}},p=function(e,t){return{op:"add",path:"languages/".concat(e,"/languageServer/start"),value:JSON.stringify(t)}},h=function(e,t){return{op:"add",path:"languages/".concat(e,"/pattern"),value:JSON.stringify(t)}},m=function(e){var t=e.regex,n=e.index;return{op:"add",path:"hints/".concat(n,"/regex"),value:JSON.stringify(t)}},v=function(e){var t=e.message,n=e.index;return{op:"add",path:"hints/".concat(n,"/message"),value:JSON.stringify(t)}}},36377:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(67294),o=n(57923),i=n(12873),a=n(41045);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){var t=e.path,n=e.initialExpanded,c=e.fs,s=l(r.useState(null),2),u=s[0],d=s[1],f=l(r.useState(null),2),p=f[0],h=f[1],m=l(r.useState(Boolean(n)),2),v=m[0],g=m[1],b=(0,o.Z)();r.useEffect((function(){if(v){var e=c.watchDir(t,{onChange:function(e){d(e.filter((function(e){return!(0,i.C)(t===a.Ql?e.filename:t+"/"+e.filename)})))},onError:function(e){h(e)}});return function(){b.current&&d(null),e()}}}),[c,t,v,d,h]);var y=r.useCallback((function(){g(!0)}),[]),x=r.useCallback((function(){g(!1)}),[]);return v?p?{collapse:x,expand:y,children:null,expanded:v,loading:!1,error:p}:u?{collapse:x,expand:y,children:u,loading:!1,error:p,expanded:v}:{collapse:x,expand:y,children:u,loading:!0,error:p,expanded:v}:{collapse:x,expand:y,children:null,loading:!1,error:null,expanded:v}}},24799:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(67294);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n=i(r.useState(null),2),o=n[0],a=n[1];return r.useEffect((function(){var n=!1;return e.readFile(t).then((function(e){n||a(e)})),function(){n=!0}}),[e,t]),o}},49337:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(67294);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){var t=e.presence,n=i(r.useState(t.getActiveUsers()),2),o=n[0],a=n[1];return r.useEffect((function(){return a(t.getActiveUsers()),t.onActiveUsersChange((function(e){return a(e)}))}),[t]),o}},39550:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(67294),o=n(30617);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(){var e=(0,o.Z)().presence,t=a(r.useState(e.getFollowedUser()),2),n=t[0],i=t[1];return r.useEffect((function(){return i(e.getFollowedUser()),e.onFollowedUserChanged(i)}),[e]),n}},90039:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(39550);function o(){var e=(0,r.Z)();return e?e.color:null}},60818:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(30617),o=n(67294),i=n(67289);function a(e){var t=(0,r.Z)(),n=t.session,a=t.fs,c=(0,o.useCallback)((function(t){var r=t.code,o=t.insertAt,c=t.newLine,l=void 0===c||c;if(!e||(0,i.T3)(e)||(0,i.sL)(e)||(0,i.IQ)(e))throw new Error("Invalid file, this should never happen");if(0!==r.length)var s=a.watchOtFile(e,{onReady:function(e){var t,i=e.initialContent,c=e.writeOp,u=i.toString(),d=n.getCursorPosition().offset;t="end"===o?u.length:"number"===typeof o?o:d;var f=r;l&&(0!==t&&t!==u.length&&-1===(t=u.indexOf("\n",t))&&(t=u.length),0!==t&&"\n"!==u[t-1]&&(f="\n"+f),"\n"!==u[t]&&(f+="\n"));var p=[f];t>0&&p.unshift(t),c(p),a.flush().finally((function(){s()}))}})}),[e,n,a]);return!e||(0,i.T3)(e)||(0,i.sL)(e)?null:c}},56718:function(e,t,n){var r;n.d(t,{z:function(){return r}}),function(e){e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB",e.Code="CODE",e.Pane="PANE"}(r||(r={}))},57541:function(e,t,n){n.d(t,{P3:function(){return S},QE:function(){return E}});var r=n(35944),o=n(79547),i=n.n(o),a=n(67294),c=n(94184),l=n.n(c),s=n(86677),u=n(8286),d=n(28614),f=n(58458),p=n(8996),h=n(11542),m=n(28593),v=n(17632),g=n(37424);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y(e,t,n[t])}))}return e}function w(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S={default:"default",loading:"default",error:"negative",success:"positive",warning:"default"},Z=a.forwardRef((function(e,t){var n,o,c,s=e.label,b=e.description,y=e.icon,Z=e.id,_=e.onChange,j=e.large,O=e.placeholder,C=void 0===O?"":O,T=e.validationResults,P=e.onValidationError,A=w(e,["label","description","icon","id","onChange","large","placeholder","validationResults","onValidationError"]),I=(0,g.H)(),R=Z||I("input"),D=b?I("input-description"):void 0,N=k(a.useState(!1),2),U=N[0],B=N[1];(null===T||void 0===T?void 0:T.some((function(e){return"loading"===e.state})))?(n="loading",o=(0,r.tZ)(m.Z,{style:{width:"24px",height:"24px"}})):(null===T||void 0===T?void 0:T.some((function(e){return"error"===e.state})))?(n="error",c="var(--accent-negative-default)",o=(0,r.tZ)(d.Z,{}),U&&(null===P||void 0===P||P())):(null===T||void 0===T?void 0:T.some((function(e){return"warning"===e.state})))?(n="warning",c="var(--foreground-dimmest)",o=(0,r.tZ)(v.Z,{})):(null===T||void 0===T?void 0:T.every((function(e){return"success"===e.state})))?(n="success",c="var(--accent-positive-default)",o=(0,r.tZ)(u.Z,{})):n="default";var z=S[n],L=j?"var(--font-size-subhead-default)":"var(--font-size-default)";return(0,r.BX)("div",{className:i().dynamic([["8596e7f04cb3da62",[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"]]])+" container",children:[s&&(0,r.BX)(r.HY,{children:[A.required?(0,r.BX)(p.Ug,{spacing:"2px",children:[(0,r.tZ)(f.Z,{tag:"label",foreground:U?1:2,size:j?"small":"xsmall",htmlFor:R,children:s}),(0,r.tZ)("span",{className:i().dynamic([["8596e7f04cb3da62",[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"]]])+" required",children:"*"})]}):(0,r.tZ)(f.Z,{tag:"label",foreground:U?1:2,size:j?"small":"xsmall",htmlFor:R,children:s}),(0,r.tZ)(h.Z,{height:"4px"})]}),(0,r.BX)("div",{className:i().dynamic([["8596e7f04cb3da62",[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"]]])+" input-container",children:[y&&(0,r.tZ)("div",{className:i().dynamic([["8596e7f04cb3da62",[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"]]])+" icon-container left",children:y}),(0,r.tZ)("input",x({id:R,ref:t,required:A.required||!1,onChange:_,placeholder:C,"aria-busy":"loading"===n,"aria-invalid":"error"===n,"aria-describedby":D},A,{onFocus:function(e){B(!0),A.onFocus&&A.onFocus(e)},onBlur:function(e){B(!1),A.onBlur&&A.onBlur(e)},className:i().dynamic([["8596e7f04cb3da62",[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"]]])+" "+(l()(z,A.className)||"")})),o&&(0,r.tZ)("div",{onMouseEnter:function(){return B(!0)},onMouseLeave:function(){return B(!1)},className:i().dynamic([["8596e7f04cb3da62",[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"]]])+" icon-container right",children:o})]}),b&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(h.Z,{height:"4px"}),(0,r.tZ)(f.Z,{id:D,tag:"span",foreground:3,size:j?"medium":"small",children:b})]}),(null===T||void 0===T?void 0:T.some((function(e){return!!e.message})))&&U&&(0,r.tZ)(E,{validationResults:T}),(0,r.tZ)(i(),{id:"8596e7f04cb3da62",dynamic:[c,L,A.monospace?"var(--font-family-code)":"var(--font-family-default)",L,y?"var(--space-24)":"auto"],children:".container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%}.required.__jsx-style-dynamic-selector{color:var(--accent-negative-default);font-size:var(--font-size-small)}.spacer.row.__jsx-style-dynamic-selector{width:var(--space-4)}.spacer.col.__jsx-style-dynamic-selector{height:var(--space-4)}.input-container.__jsx-style-dynamic-selector{position:relative}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);-o-transform:translateY(-50%);transform:translateY(-50%);background-color:var(--background-default);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;padding:var(--space-4)}.icon-container.right.__jsx-style-dynamic-selector{right:var(--space-8);color:".concat(c,"}.icon-container.left.__jsx-style-dynamic-selector{left:var(--space-4);background-color:transparent;color:var(--foreground-dimmest)}input.__jsx-style-dynamic-selector{font-size:").concat(L,";font-family:").concat(A.monospace?"var(--font-family-code)":"var(--font-family-default)",";line-height:").concat(L,";background-color:var(--background-default);color:var(--foreground-default);padding:var(--space-8);padding-left:").concat(y?"var(--space-24)":"auto",";border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);outline:none;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:color.1s,background-color.1s;-moz-transition:color.1s,background-color.1s;-o-transition:color.1s,background-color.1s;transition:color.1s,background-color.1s}input.__jsx-style-dynamic-selector:disabled{opacity:.5}input.default.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}input.success.__jsx-style-dynamic-selector{border-color:var(--accent-positive-stronger)}input.success.__jsx-style-dynamic-selector:hover{border-color:var(--accent-positive-dimmer)}input.negative.__jsx-style-dynamic-selector{border-color:var(--accent-negative-default)}input.negative.__jsx-style-dynamic-selector:hover{border-color:var(--accent-negative-dimmer)}input.__jsx-style-dynamic-selector:active,input.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}")})]})})),E=function(e){var t=e.validationResults;return(0,r.BX)("div",{"aria-live":"polite",className:"jsx-717f837fe0108fc4 container",children:[t.map((function(e,t){var n;switch(e.state){case"success":n=(0,r.tZ)(u.Z,{color:"var(--accent-positive-default)"});break;case"error":n=(0,r.tZ)(d.Z,{color:"var(--accent-negative-default)"});break;case"warning":n=(0,r.tZ)(v.Z,{color:"var(--foreground-dimmest)"});break;default:n=(0,r.tZ)(s.Z,{color:"var(--foreground-dimmest)"})}return(0,r.BX)("div",{className:"jsx-717f837fe0108fc4 validation-row",children:[(0,r.tZ)("div",{className:"jsx-717f837fe0108fc4 validation-icon-container",children:n}),(0,r.tZ)(h.Z,{width:"4px"}),(0,r.tZ)(f.Z,{foreground:2,size:"small",children:e.message})]},e.state+t.toString())})),(0,r.tZ)(i(),{id:"717f837fe0108fc4",children:".container.jsx-717f837fe0108fc4{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:absolute;top:-webkit-calc(100% + var(--space-4));top:-moz-calc(100% + var(--space-4));top:calc(100% + var(--space-4));background-color:var(--background-default);padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);z-index:9999;-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}.validation-row.jsx-717f837fe0108fc4{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;width:100%;padding-bottom:var(--space-4)}.validation-icon-container.jsx-717f837fe0108fc4{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;padding-right:var(--space-4)}"})]})};t.ZP=Z},86923:function(e,t,n){var r=n(35944),o=n(79547),i=n.n(o),a=n(67294),c=n(64784),l=n(28614),s=n(8286),u=n(58458),d=n(8996),f=n(11542),p=n(57541),h=n(18055),m=n(37424);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=a.forwardRef((function(e,t){var n,o,v,g=e.label,w=e.id,k=e.description,S=e.onChange,Z=e.fontFamily,E=void 0===Z?"sans-serif":Z,_=e.fontSize,j=void 0===_?"medium":_,O=e.fontWeight,C=void 0===O?"regular":O,T=e.foreground,P=void 0===T?1:T,A=e.placeholder,I=void 0===A?"":A,R=e.validationResults,D=e.value,N=y(e,["label","id","description","onChange","fontFamily","fontSize","fontWeight","foreground","placeholder","validationResults","value"]),U=(0,c.Z)().ref,B=(0,m.H)(),z=w||B("input"),L=k?B("input-description"):void 0,M=x(a.useState(!1),2),F=M[0],G=M[1];(null===R||void 0===R?void 0:R.some((function(e){return"loading"===e.state})))?n="loading":(null===R||void 0===R?void 0:R.some((function(e){return"error"===e.state})))?(n="error",v="var(--accent-negative-default)",o=(0,r.tZ)(l.Z,{})):(null===R||void 0===R?void 0:R.every((function(e){return"success"===e.state})))?(n="success",v="var(--accent-positive-default)",o=(0,r.tZ)(s.Z,{})):n="default";var X=p.P3[n],W=(N.className?N.className+" ":"")+X;return(0,r.BX)("div",{className:i().dynamic([["759177b91500d369",[v,h.Z.fontSize[j],h.Z.fontFamily[E],h.Z.fontWeight[C],h.Z.foreground[P],h.Z.lineHeight[j]]]])+" container",children:[g&&(0,r.BX)(r.HY,{children:[N.required?(0,r.BX)(d.Ug,{spacing:"2px",children:[(0,r.tZ)(u.Z,{tag:"label",foreground:F?1:2,size:"large"===j?"small":"xsmall",htmlFor:z,children:g}),(0,r.tZ)("span",{className:i().dynamic([["759177b91500d369",[v,h.Z.fontSize[j],h.Z.fontFamily[E],h.Z.fontWeight[C],h.Z.foreground[P],h.Z.lineHeight[j]]]])+" required",children:"*"})]}):(0,r.tZ)(u.Z,{tag:"label",foreground:F?1:2,size:"large"===j?"small":"xsmall",htmlFor:z,children:g}),(0,r.tZ)(f.Z,{height:"4px"})]}),(0,r.BX)("div",{className:i().dynamic([["759177b91500d369",[v,h.Z.fontSize[j],h.Z.fontFamily[E],h.Z.fontWeight[C],h.Z.foreground[P],h.Z.lineHeight[j]]]])+" textarea-container",children:[(0,r.tZ)("textarea",b({id:z,placeholder:I,value:D,onChange:S,"aria-busy":"loading"===n,"aria-invalid":"error"===n,"aria-describedby":L},N,{ref:function(e){U(e),t&&("function"!==typeof t?t.current=e:t(e))},onFocus:function(e){G(!0),N.onFocus&&N.onFocus(e)},onBlur:function(e){G(!1),N.onBlur&&N.onBlur(e)},className:i().dynamic([["759177b91500d369",[v,h.Z.fontSize[j],h.Z.fontFamily[E],h.Z.fontWeight[C],h.Z.foreground[P],h.Z.lineHeight[j]]]])+" "+(W||"")})),o&&(0,r.tZ)("div",{onMouseEnter:function(){return G(!0)},onMouseLeave:function(){return G(!1)},className:i().dynamic([["759177b91500d369",[v,h.Z.fontSize[j],h.Z.fontFamily[E],h.Z.fontWeight[C],h.Z.foreground[P],h.Z.lineHeight[j]]]])+" icon-container right",children:o})]}),k&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(f.Z,{height:"4px"}),(0,r.tZ)(u.Z,{id:L,tag:"span",foreground:3,size:j,children:k})]}),R&&F&&(0,r.tZ)(p.QE,{validationResults:R}),(0,r.tZ)(i(),{id:"759177b91500d369",dynamic:[v,h.Z.fontSize[j],h.Z.fontFamily[E],h.Z.fontWeight[C],h.Z.foreground[P],h.Z.lineHeight[j]],children:".container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%}.textarea-container.__jsx-style-dynamic-selector{position:relative}.required.__jsx-style-dynamic-selector{color:var(--accent-negative-default);font-size:var(--font-size-small)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:var(--space-8);right:var(--space-8);background-color:var(--background-default);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;padding:var(--space-4)}.icon-container.right.__jsx-style-dynamic-selector{right:var(--space-8);color:".concat(v,"}textarea.__jsx-style-dynamic-selector{resize:none;font-size:").concat(h.Z.fontSize[j],";font-family:").concat(h.Z.fontFamily[E],";font-weight:").concat(h.Z.fontWeight[C],";color:").concat(h.Z.foreground[P],";line-height:").concat(h.Z.lineHeight[j],";background-color:transparent;padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);outline:none;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:.1s;-moz-transition:.1s;-o-transition:.1s;transition:.1s;line-height:1.4}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.default.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.success.__jsx-style-dynamic-selector{border-color:var(--accent-positive-default)}textarea.success.__jsx-style-dynamic-selector:hover{border-color:var(--accent-positive-dimmer)}textarea.negative.__jsx-style-dynamic-selector{border-color:var(--accent-negative-default)}textarea.negative.__jsx-style-dynamic-selector:hover{border-color:var(--accent-negative-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}")})]})}));t.Z=w},85106:function(e,t,n){var r=n(67294).createContext(null);t.Z=r},42723:function(e,t,n){n.d(t,{Dq:function(){return d},En:function(){return y},FG:function(){return i},H2:function(){return x},Rl:function(){return v},aY:function(){return g},aq:function(){return s},eJ:function(){return c},fc:function(){return b},fv:function(){return l},hq:function(){return a},mT:function(){return m},qg:function(){return f},sC:function(){return p},tK:function(){return r},wP:function(){return o},yY:function(){return h},zT:function(){return u}});var r="OPEN_SIDEPANE_BY_TYPE",o="NEW_CONSOLE_MESSAGE",i="LOADING_ENGINE_COMPLETE",a="LOADING_EXECUTION_ENGINE_STARTED",c="RESIZE_TERMINAL",l="CLEAR_CONSOLE",s="STOP_EVAL",u="WORKSPACE_WILL_UNMOUNT",d="UPDATE_WORKSPACE_PREFERENCES",f="@@INIT",p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return{data:e,type:t,raw:!!n}};function h(e){var t=e.wid,n=e.message,r=e.type,i=void 0===r?"":r,a=e.raw;return{wid:t,type:o,message:p(n,i,!!a)}}function m(e){return{type:"RUN_REPL",wid:e.wid}}function v(e){var t=e.wid;return{type:s,wid:t}}function g(e){return{type:"EVAL_CODE",wid:e.wid,code:e.code,clean:e.clean}}function b(e){return{type:"UPDATE_LAYOUT",wid:e.wid,path:e.path,to:e.to,property:e.property}}function y(e){var t=e.wid,n=e.pud;return{type:l,wid:t,pud:n}}function x(e){var t=e.wid,n=e.cols,r=e.rows;return{type:c,wid:t,cols:n,rows:r}}},20730:function(e,t,n){n.d(t,{jz:function(){return E},yC:function(){return S}});var r=n(34051),o=n.n(r),i=n(35944),a=(n(67294),n(92876)),c=n(88503),l=n(56834),s=n(18690),u=n(10611),d=n(66754),f=n(8996),p=n(80796),h=n(48015),m=n(17877);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){g(i,r,o,a,c,"next",e)}function c(e){g(i,r,o,a,c,"throw",e)}a(void 0)}))}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=100,w="signal: broken pipe",k=["exit status 1",w];function S(e){return Z.apply(this,arguments)}function Z(){return(Z=b(o().mark((function e(t){var n,r,i,c,s,u,d,f,p,h,m,v,g,b,S,Z,E,_,j,O,C,T,P,A,I,R;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,r=t.container,i=window.performance.now(),e.next=4,r.exec("ag","--noaffinity","--context=0","--workers=1","--literal","--ackmate","--pager","head -".concat(300),"--",n);case 4:if(c=e.sent,s=c.output,u=c.error,d=u&&!k.includes(u),(0,l.j)(l.U3.COMMAND_BAR_SEARCH,{duration:window.performance.now()-i,failed:d}),!d){e.next=12;break}return a.Tb(new Error("Search command failed with error: ".concat(u))),e.abrupt("return",{error:u,results:null,isPartialResult:!1});case 12:if(s){e.next=14;break}return e.abrupt("return",{error:null,results:{},isPartialResult:!1});case 14:f=s.split("\n"),p={},h="",m=0,v=u===w,g=!0,b=!1,S=void 0,e.prev=20,Z=f[Symbol.iterator]();case 22:if(g=(E=Z.next()).done){e.next=46;break}if(_=E.value){e.next=26;break}return e.abrupt("continue",43);case 26:if(!_.startsWith(":")){e.next=30;break}return h=_.slice(1),p[h]=[],e.abrupt("continue",43);case 30:if(!(m>=x)){e.next=33;break}return v=!0,e.abrupt("break",46);case 33:j=_.indexOf(";"),O=parseInt(_.slice(0,j),10),C=_.slice(j+1),T=C.indexOf(":"),P=C.slice(0,T).split(","),A=P.map((function(e){var t=y(e.split(" "),2),n=t[0],r=t[1];return{column:parseInt(n,10),length:parseInt(r,10)}})),I=C.slice(T+1),R=I.length>151?I.substring(0,149)+"\u2026":I,m++,p[h].push({content:R,lineNumber:O,matches:A});case 43:g=!0,e.next=22;break;case 46:e.next=52;break;case 48:e.prev=48,e.t0=e.catch(20),b=!0,S=e.t0;case 52:e.prev=52,e.prev=53,g||null==Z.return||Z.return();case 55:if(e.prev=55,!b){e.next=58;break}throw S;case 58:return e.finish(55);case 59:return e.finish(52);case 60:return e.abrupt("return",{error:null,results:p,isPartialResult:v});case 61:case"end":return e.stop()}}),e,null,[[20,48,52,60],[53,,55,59]])})))).apply(this,arguments)}function E(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).keyboardShortcut;return function(t){var n,r=t.container,a=t.onSelect,l=(0,p.Z)((function(e,t,n){S(e).then(t).catch(n)}),200);return{data:{type:"basic",label:"Search",icon:(0,i.tZ)(c.Z,{}),description:"Search through your files",keyboardShortcut:e},config:{callOnLeave:!0},commands:function(){var e=b(o().mark((function e(t){var c,p,v,g,b,x,w,k,S,Z,E,_,j;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p={},!(0,m.sA)(t)){e.next=4;break}return e.abrupt("return",p);case 4:if(!(0!==t.relativeSearchDepth&&t.searchValue.length<4)){e.next=6;break}return e.abrupt("return",p);case 6:if(v=t.searchPath?t.searchPath.join(" "):null){e.next=9;break}return e.abrupt("return",p);case 9:if(1!==(null===(c=t.searchPath)||void 0===c?void 0:c.length)||"files"!==t.searchPath[0]&&"search"!==t.searchPath[0]){e.next=11;break}return e.abrupt("return",p);case 11:return g=Math.random(),n=g,e.next=15,new Promise((function(e,t){l({query:v,container:r},e,t)}));case 15:if(b=e.sent,x=b.results,!(w=b.error)){e.next=20;break}return e.abrupt("return",{Error:{data:{type:"error",label:w}}});case 20:if(g===n){e.next=22;break}return e.abrupt("return",p);case 22:if(x){e.next=24;break}return e.abrupt("return",p);case 24:for(k=!0,S=!1,Z=void 0,e.prev=25,E=function(e,t){var n=y(t.value,2),r=n[0];n[1].forEach((function(e){p["".concat(r,":").concat(e.lineNumber)]={config:{match:function(){var t;return{score:(null===(t=h.Z.match(v,e.content))||void 0===t?void 0:t.score)||1,render:function(t){var n=t.isActive,o=(0,i.tZ)(s.JI,{path:r,isActive:n});return(0,i.BX)(f.gC,{spacing:"4px",wrap:"nowrap",children:[(0,i.BX)(u.W,{isActive:n,icon:o,children:[r,":",e.lineNumber]}),(0,i.tZ)(d.xK,{source:e.content,matches:e.matches})]})}}}},data:{label:r,description:"".concat(r,":").concat(e.lineNumber),icon:(0,i.tZ)(s.JI,{path:r}),type:"action",run:function(){a(r,e.lineNumber,e.matches[0].column)}}}}))},_=Object.entries(x)[Symbol.iterator]();!(k=(j=_.next()).done);k=!0)E(0,j);e.next=34;break;case 30:e.prev=30,e.t0=e.catch(25),S=!0,Z=e.t0;case 34:e.prev=34,e.prev=35,k||null==_.return||_.return();case 37:if(e.prev=37,!S){e.next=40;break}throw Z;case 40:return e.finish(37);case 41:return e.finish(34);case 42:return e.abrupt("return",p);case 43:case"end":return e.stop()}}),e,null,[[25,30,34,42],[35,,37,41]])})));return function(t){return e.apply(this,arguments)}}()}}}var _=E({keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"F"}});t.ZP=_},18690:function(e,t,n){n.d(t,{JI:function(){return h},a2:function(){return m}});var r=n(34051),o=n.n(r),i=n(35944),a=n(67294),c=n(48015),l=n(94157),s=n(55681),u=n(10611),d=n(17877);function f(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){f(i,r,o,a,c,"next",e)}function c(e){f(i,r,o,a,c,"throw",e)}a(void 0)}))}}function h(e){var t=e.path,n=e.isActive;return(0,i.tZ)(s.Z,{path:t,fill:n?"var(--white)":void 0,fillDefaultFileIcon:n})}function m(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).keyboardShortcut;return function(t){var n=t.fs,r=t.onSelect,s=t.onCreateNewFile,f=t.session;return{data:{type:"basic",label:"Files",icon:(0,i.tZ)(l.Z,{}),description:"Find a file",keyboardShortcut:e},config:{callOnLeave:!0},commands:function(){var e=p(o().mark((function e(t){var l,p,m,v,g,b,y,x,w,k,S,Z,E,_;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p={},!(0,d.sA)(t)){e.next=4;break}return e.abrupt("return",p);case 4:if(m=t.searchPath?t.searchPath.join(" ").toLowerCase():void 0,0===t.relativeSearchDepth||m&&!(m.length<2)){e.next=7;break}return e.abrupt("return",p);case 7:if(t.callStage!==d.xS.Leave||0!==t.relativeSearchDepth&&!t.getCurrentOptions().some((function(e){return e.token.value===m}))){e.next=9;break}return e.abrupt("return",p);case 9:return e.next=11,n.listFiles();case 11:if(!(v=e.sent).error||!(null===(l=t.searchPath)||void 0===l?void 0:l.length)){e.next=15;break}return g=t.searchPath.join(" "),e.abrupt("return",{newFile:{data:{label:g,description:"Create a new file",icon:(0,i.tZ)(h,{path:g}),type:"action",run:function(){return s(g)}},config:{match:function(){return{score:1}}}}});case 15:if("exit status 1"!==v.error){e.next=17;break}return e.abrupt("return",p);case 17:if(b=v.files){e.next=20;break}throw new Error("Expected files");case 20:for(y=f.getRecentFiles(),x=!0,w=!1,k=void 0,e.prev=22,S=function(e,t){var n=t.value,o=!m||c.Z.match(m,n);if(!o)return"continue";var l=y.includes(n);p[n]={config:{match:function(){return!0===o?{score:l?2:1}:{score:l?2*o.score:o.score,render:function(e){var t=e.isActive,r=(0,i.tZ)(h,{path:n,isActive:t});return(0,i.tZ)(u.W,{isActive:t,icon:r,children:(0,i.tZ)(i.HY,{children:a.Children.map(o.elements,(function(e,t){return(0,i.tZ)(a.Fragment,{children:e},t)}))})})}}}},data:{label:n,description:"",icon:(0,i.tZ)(h,{path:n}),type:"action",run:function(){return r(n)}}}},Z=b[Symbol.iterator]();!(x=(E=Z.next()).done);x=!0)S(0,E);e.next=31;break;case 27:e.prev=27,e.t0=e.catch(22),w=!0,k=e.t0;case 31:e.prev=31,e.prev=32,x||null==Z.return||Z.return();case 34:if(e.prev=34,!w){e.next=37;break}throw k;case 37:return e.finish(34);case 38:return e.finish(31);case 39:return t.searchPath&&(_=t.searchPath.join(" "),Object.values(p).some((function(e){var t;return(null===(t=e.data)||void 0===t?void 0:t.label)===_}))||(p.newFile={data:{label:_,description:"Create a new file",icon:(0,i.tZ)(h,{path:_}),type:"action",run:function(){return s(_)}},config:{match:function(){return{score:1}}}})),e.abrupt("return",p);case 41:case"end":return e.stop()}}),e,null,[[22,27,31,39],[32,,34,38]])})));return function(t){return e.apply(this,arguments)}}()}}}var v=m({keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"P"}});t.ZP=v},15770:function(e,t,n){n.d(t,{n:function(){return g},x:function(){return v}});var r=n(35944),o=n(67294),i=n(23139),a=n(16911),c=n(1517),l=n(30478),s=n(31705),u=n(31284),d=n(69987),f=n(67642);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.counter=0,this.enabled=!1,this.logs=(0,d.u)([]),this.clear=function(){t.logs.current=[]}}var t=e.prototype;return t.toggle=function(e){this.enabled=e},t.add=function(e){if(!this.enabled)return{id:-1};var t=this.counter++,n={id:t,request:e,requestTime:Date.now()};return this.logs.update((function(e){return[n].concat(e).slice(0,10)})),{id:t}},t.update=function(e,t){this.enabled&&this.logs.update((function(n){var r=n.findIndex((function(t){return t.id===e.id}));if(-1===r)return n;var o=n.slice();return o[r]=t(o[r]),o}))},t.complete=function(e,t){this.update(e,(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},e,{response:t,responseTime:Date.now()})}))},t.abort=function(e){this.logs.update((function(t){return t.filter((function(t){return t.id!==e.id}))}))},e}()),g=function(){var e,t=(0,u.Z)(v.logs);return(0,r.BX)(i.G7,{css:[i.l0.flex.column],children:[(0,r.BX)(i.G7,{css:[i.l0.flex.row,i.l0.align.center,i.l0.m(4),i.l0.position.sticky,i.l0.top(0),i.l0.backgroundColor.backgroundDefault,i.l0.zIndex(1)],children:[(0,r.tZ)(i.xv,{css:i.l0.flex.grow(1),children:"Requests"}),(0,r.tZ)(a.Z,{onClick:v.clear})]}),(0,r.BX)(i.G7,{css:[i.l0.flex.grow(1),i.l0.flex.column,i.l0.overflow("auto")],children:[t.map((function(t){return(0,r.tZ)(b,{log:t},null!==(e=t.id)&&void 0!==e?e:t.requestTime.valueOf())})),!t.length&&(0,r.tZ)(i.G7,{css:i.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},b=(0,o.memo)((function(e){var t=e.log,n=t.requestTime,o=t.responseTime,a=t.request,c=t.response,l=m((0,s.Z)(!0),2),u=l[0],d=l[1],p=a.code.length>20?"...".concat(a.code.slice(-20)):a.code;return(0,r.BX)(i.G7,{css:[i.l0.my(4),i.l0.mx(4)],children:[(0,r.BX)(i.G7,{role:"button",onClick:d,onKeyDown:d,tabIndex:0,css:[i.l0.flex.row,i.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,r.BX)(i.G7,{css:[i.l0.flex.grow(1),i.l0.rowWithGap(2)],children:[(0,r.tZ)(i.xv,{children:y(t)}),(0,r.tZ)(i.xv,{children:(0,r.tZ)("code",{children:p})})]}),(0,r.tZ)(i.G7,{css:{opacity:.5},children:null!=o&&(0,r.BX)(i.xv,{css:i.l0.fontSize(13),children:[o.valueOf()-n.valueOf()," ms"]})})]}),!u&&(0,r.BX)(r.HY,{children:[void 0!==a&&(0,r.tZ)(f.g,{name:"request",src:a}),void 0!==c&&("SuggestCodeResult"===c.__typename?(0,r.BX)("details",{children:[(0,r.tZ)("summary",{children:"Response"}),(0,r.tZ)("pre",{css:[i.l0.overflow("scroll"),i.l0.borderRadius(4),i.l0.p(4),{border:"1px solid ".concat(i.TV.outlineDimmest)}],children:c.code})]}):(0,r.tZ)(f.g,{name:"response",src:c}))]})]})}));function y(e){var t=e.response;return t?"SuggestCodeResult"===t.__typename?(0,r.tZ)(l.Check,{}):(0,r.tZ)(l.Frown,{}):(0,r.tZ)(c.Z,{})}},67642:function(e,t,n){n.d(t,{L:function(){return E},g:function(){return j}});var r=n(35944),o=n(5152),i=n.n(o),a=n(67294),c=n(37424),l=n(93577),s=n(22429),u=n(23139),d=n(16911),f=n(6529),p=n(70294),h=n(1517),m=n(30478),v=n(69271),g=n(31705),b=n(31470),y=n(25108);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z=i()((function(){return n.e(367).then(n.t.bind(n,55171,23))}),{loadableGenerated:{webpack:function(){return[55171]}}}),E=function(){var e,t=(0,l.Z)(),n=(0,s.Z)(t||""),o=(0,c.H)(),i=S((0,g.Z)(!0),2),h=i[0],v=i[1],y=(0,a.useState)(""),x=y[0],w=y[1],Z=(0,a.useState)((function(){return[]})),E=Z[0],j=Z[1],C=S((0,g.Z)(!0),2),T=C[0],P=C[1],A=S((0,g.Z)(!0),2),I=A[0],R=A[1],D=(0,a.useCallback)((function(e){j((function(t){return[e].concat(t)}))}),[]),N=(0,a.useCallback)((function(e,t){j((function(n){return n.map((function(n){return n.id===e?t(n):n}))}))}),[]),U=(0,a.useCallback)((function(){j([])}),[]),B=(0,a.useMemo)((function(){var e=x.split(",").map((function(e){return e.trim()})),t=E;return T||(t=t.filter((function(e){return null==e.notification}))),I||(t=t.filter((function(e){return null==e.request}))),x&&(t=t.filter((function(t){return e.some((function(e){var n;return null===(n=t.request||t.notification)||void 0===n?void 0:n.method.toLowerCase().includes(e.toLowerCase())}))}))),t}),[E,T,I,x]);return(0,a.useEffect)((function(){return(0,b.uf)([null===n||void 0===n?void 0:n.onRequest((function(e){h&&D({id:e.id,canceled:!1,request:e.data,requestTime:new Date})})),null===n||void 0===n?void 0:n.onResponse((function(e){h&&N(e.id,(function(t){return k({},t,{responseTime:new Date},void 0!==e.result?{response:e.result}:{error:e.error})}))})),null===n||void 0===n?void 0:n.onCancelRequest((function(e){h&&N(e,(function(e){return k({},e,{canceled:!0})}))})),null===n||void 0===n?void 0:n.onSendNotification((function(e){h&&D({canceled:!1,notification:e,requestTime:new Date})}))])}),[n,D,N,h]),(0,r.BX)(u.G7,{css:[u.l0.flex.column],children:[(0,r.BX)(u.G7,{css:[u.l0.flex.row,u.l0.align.center,u.l0.m(4),u.l0.position.sticky,u.l0.top(0),u.l0.backgroundColor.backgroundDefault,u.l0.zIndex(1)],children:[(0,r.tZ)(u.xv,{css:u.l0.flex.grow(1),children:n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(O,{})," logs for ",(0,r.tZ)("code",{children:t})]}):"No LSP"}),(0,r.tZ)(p.Z,{isOn:h,onChange:v}),(0,r.tZ)(d.Z,{onClick:U})]}),(0,r.BX)(u.G7,{css:[u.l0.rowWithGap(8),u.l0.m(4),u.l0.mb(8)],children:[(0,r.BX)(u.G7,{css:u.l0.rowWithGap(4),children:[(0,r.tZ)(m.Filter,{}),(0,r.tZ)(u.xv,{children:"Show"})]}),(0,r.BX)(u.G7,{css:u.l0.rowWithGap(4),children:[(0,r.tZ)(f.Z,{id:o("showNotifications"),checked:T,onChange:P}),(0,r.tZ)("label",{htmlFor:o("showNotifications"),children:" Notifications"})]}),(0,r.BX)(u.G7,{css:u.l0.rowWithGap(4),children:[(0,r.tZ)(f.Z,{id:o("showRequests"),checked:I,onChange:R}),(0,r.tZ)("label",{htmlFor:o("showRequests"),children:" Requests"})]})]}),(0,r.tZ)(u.G7,{css:u.l0.rowWithGap(4),children:(0,r.tZ)(u.II,{id:o("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return w(e.target.value)},value:x})}),(0,r.BX)(u.G7,{css:[u.l0.flex.grow(1),u.l0.flex.column,u.l0.overflow("auto")],children:[B.map((function(t){return(0,r.tZ)(_,{log:t},null!==(e=t.id)&&void 0!==e?e:t.requestTime.valueOf())})),!B.length&&(0,r.tZ)(u.G7,{css:u.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},_=a.memo((function(e){var t,n=e.log,o=n.requestTime,i=n.responseTime,a=n.request,c=n.response,l=n.notification,s=n.id,d=S((0,g.Z)(!0),2),f=d[0],p=d[1];return(0,r.BX)(u.G7,{css:[u.l0.my(4),u.l0.mx(4)],children:[(0,r.BX)(u.G7,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:[u.l0.flex.row,u.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,r.BX)(u.G7,{css:[u.l0.flex.grow(1),u.l0.rowWithGap(2)],children:[(0,r.tZ)(u.xv,{className:"lspLog-emoji",children:C(n)}),(0,r.BX)(u.xv,{className:"lspLog-requestMethod",children:[(0,r.tZ)("code",{children:null===(t=a||l)||void 0===t?void 0:t.method}),null!=s&&(0,r.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",s]})]})]}),(0,r.tZ)(u.G7,{css:{opacity:.5},children:null!=i&&(0,r.BX)(u.xv,{css:u.l0.fontSize(13),children:[i.valueOf()-o.valueOf()," ms"]})})]}),!f&&(0,r.BX)(r.HY,{children:[void 0!==a&&(0,r.tZ)(j,{name:"request.params",src:a.params}),void 0!==l&&(0,r.tZ)(j,{name:"notification.params",src:l.params}),void 0!==c&&(0,r.tZ)(j,{name:"response",src:c})]})]})}),(function(e,t){return e.log.id===t.log.id})),j=(0,a.memo)((function(e){var t=e.name,n=e.src,o=(0,v.Z)();return(0,r.tZ)(u.G7,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,r.tZ)(Z,{iconStyle:"triangle",style:{backgroundColor:"transparent"},displayDataTypes:!1,theme:o,collapseStringsAfterLength:40,collapsed:1,displayObjectSize:!1,name:t,enableClipboard:function(e){var t=k({},e.src);Object.assign(globalThis,{$msg:t}),y.log("$msg"),y.log(t),navigator.clipboard.writeText(JSON.stringify(t,null,2)).finally((function(){}))},src:"object"===typeof n&&null!==n?n:{value:n}})})})),O=function(){return(0,r.tZ)(u.xv,{css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(u.TV.redDimmer," 2px 2px")},children:"LSP"})};function C(e){var t=e.canceled,n=e.response,o=e.notification;return t?(0,r.tZ)(m.Close,{}):o?(0,r.tZ)(m.Info,{}):void 0!==n?(0,r.tZ)(m.Check,{}):(0,r.tZ)(h.Z,{})}},69271:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(55551);function o(){return"replitDark"===(0,r.Z)()?"bright":"bright:inverted"}},31705:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(67294);function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.useState)(e),n=t[0],o=t[1],i=(0,r.useCallback)((function(){return o((function(e){return!e}))}),[]);return[n,i]}},17518:function(e,t,n){n.d(t,{Z:function(){return ju}});var r=n(35944),o=n(79547),i=n.n(o),a=n(67294),c=n(73935),l=n(24039),s=n(30617),u=n(90039),d=n(34051),f=n.n(d),p=n(24865),h=n(22429);function m(e){var t,n=e.getServerCapabilities();return{isAutoCompleteSupported:Boolean(null===n||void 0===n?void 0:n.completionProvider),isCompletionItemResolveSupported:Boolean(null===n||void 0===n||null===(t=n.completionProvider)||void 0===t?void 0:t.resolveProvider),isDocumentSymbolSupported:Boolean(null===n||void 0===n?void 0:n.documentSymbolProvider),isFindReferencesSupported:Boolean(null===n||void 0===n?void 0:n.referencesProvider),isFindDefinitionSupported:Boolean(null===n||void 0===n?void 0:n.definitionProvider),isFindTypeDefinitionSupported:Boolean(null===n||void 0===n?void 0:n.typeDefinitionProvider),isFindImplementationSupported:Boolean(null===n||void 0===n?void 0:n.implementationProvider),isTextDocumentSyncSupported:Boolean(null===n||void 0===n?void 0:n.textDocumentSync),isHoverSupported:Boolean(null===n||void 0===n?void 0:n.hoverProvider),isRenameSupported:Boolean(null===n||void 0===n?void 0:n.renameProvider),isCodeActionsSupported:Boolean(null===n||void 0===n?void 0:n.codeActionProvider),isSignatureHelpSupported:Boolean(null===n||void 0===n?void 0:n.signatureHelpProvider)}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){var t=g(a.useState(null),2),n=t[0],r=t[1];return a.useEffect((function(){if(e)return r(m(e)),e.onServerCapabilitiesChange((function(){r(m(e))}));r(null)}),[e]),n}var y=n(36793),x=n(89431),w=n(63805),k=n(80796),S=n(78120),Z=n(34790),E=n(47421),_=n(39453),j=n(3204),O=n(1712);var C=n(54929),T=n(23139),P=n(88534),A=n(91674),I=n(52295);function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D={p:{fontSize:"calc(".concat(T.TV.fontSizeDefault," + 1px)"),padding:"".concat(T.TV.space2," ").concat(T.TV.space8),lineHeight:1.4,marginBottom:"".concat(T.TV.space8," !important")},"p:last-child":{marginBottom:"".concat(T.TV.space4," !important")},pre:{margin:"".concat(T.TV.space2," ").concat(T.TV.space8," ").concat(T.TV.space2," ").concat(T.TV.space4," !important")},"pre + p":{borderTop:"1px solid ".concat(T.TV.outlineDimmest),paddingTop:T.TV.space4}},N=a.memo((function(e){var t=e.content;return(0,r.tZ)(P.ZP,{css:D,components:{code:function(e){return(0,r.tZ)(I.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){R(e,t,n[t])}))}return e}({minimal:!0,disableCopy:!0},e))}},children:t})}));function U(e){var t=e.content;return"string"===typeof t?(0,r.tZ)(N,{content:t}):t.kind===A.MarkupKind.PlainText?(0,r.tZ)(T.G7,{children:(0,r.tZ)(T.xv,{multiline:!0,children:t.value})}):(0,r.tZ)(N,{content:t.value})}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){z(i,r,o,a,c,"next",e)}function c(e){z(i,r,o,a,c,"throw",e)}a(void 0)}))}}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){M(e,t,n[t])}))}return e}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=S.Py.define(),r=S.QQ.define({create:function(){return t},update:function(t,r){return(0,O.j)(r,n,(function(n){t=e(n.value,t)})),t}});return{effect:n,state:r}}(),W=S.Py.define(),H=S.QQ.define({create:function(){return null},update:function(e,t){if(!t.isUserEvent("input.type"))return e;if(t.changes.empty)return e;var n="";return t.changes.iterChanges((function(e,t,r,o,i){n=i.sliceString(0,1)})),n||null}});function V(e){var t=e.lspClient,n=e.path,o=e.setDecoration,i=function(e){return c.createPortal((0,r.tZ)($,F({},e)),a)},a=document.createElement("div"),l={};function s(e,t){return u.apply(this,arguments)}function u(){return u=L(f().mark((function e(r,o){var i,a,c,l,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=(null===(i=t.getServerCapabilities())||void 0===i||null===(a=i.signatureHelpProvider)||void 0===a?void 0:a.triggerCharacters)||[]){e.next=4;break}return e.abrupt("return",null);case 4:if(l=r.field(d,!1),s=r.field(H,!1),l||null!=s&&c.includes(s)){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,K(r,o,t,n);case 10:if((u=e.sent)&&u.signatures.length){e.next=13;break}return e.abrupt("return",null);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}var d=S.QQ.define({create:function(){return null},update:function(e,t){return t.isUserEvent("select.pointer")?null:(e&&t.newSelection.main.from!==e.pos&&(e=F({},e,{pos:t.newSelection.main.from})),(0,O.j)(t,X.effect,(function(n){var c=n.value;e=c?{pos:t.newSelection.main.from,create:function(){return function(e){var t=0,n=function(n){o((0,r.tZ)(i,{help:e,index:t,onLayout:n}))};return n(),l.dom=a,l.update=function(r){(0,O.j)(r,W,(function(o){t=(t+o.value+e.signatures.length)%e.signatures.length,n((function(){(0,E.E2)(r.view)}))}))},l}(c)},above:!0}:null})),e)},provide:function(e){return E.hJ.from(e)}}),p=E.lg.define((function(){var e=(0,k.Z)(function(){var e=L(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.state.selection.main).empty){e.next=7;break}return e.next=4,s(t.state,n.from);case 4:(r=e.sent)&&(0,Z._B)(t),t.dispatch({effects:X.effect.of(r)});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),0);return{update:function(t){t.transactions.some((function(e){return e.selection}))&&t.state.selection.main.empty&&e(t.view)}}})),h=function(e){return function(t){return!!function(e){var t=e.state.field(X.state,!1);return null!=t&&t.signatures.length>1}(t)&&(t.dispatch({effects:W.of(e)}),!0)}},m=[{key:"ArrowDown",run:h(1)},{key:"ArrowUp",run:h(-1)},{key:"Escape",run:function(e){return!!e.state.field(X.state,!1)&&(e.dispatch({effects:X.effect.of(null)}),!0)}}];return[d,X.state,H,p,S.Wl.high(E.$f.of(m))]}var $=function(e){var t,n,o=e.help,i=e.index,c=e.onLayout,l="1px solid ".concat(j.TV.outlineDimmest),s="min(425px, 80vw)";a.useLayoutEffect((function(){return null===c||void 0===c?void 0:c()}),[c]);var u=o.signatures[i],d=o.signatures.length>1;if(!u)return null;var f=u.documentation,p=null!=o.activeParameter&&(null===(t=u.parameters)||void 0===t||null===(n=t[o.activeParameter])||void 0===n?void 0:n.documentation);return(0,r.BX)(C.Z,{css:[j.l0.flex.row,{width:"max-content"}],children:[d&&(0,r.tZ)(C.Z,{css:[j.l0.flex.row,j.l0.pl(4),{borderRight:l,paddingBottom:5}],children:(0,r.BX)("span",{css:[{alignSelf:"flex-end"},j.l0.p(4)],children:[i+1,"/",o.signatures.length]})}),(0,r.BX)(C.Z,{children:[(0,r.tZ)(C.Z,{css:[j.l0.py(4),j.l0.pl(d?4:8),j.l0.pr(8),j.l0.maxHeight(100),j.l0.overflowY("scroll"),j.l0.font.code,{lineHeight:j.TV.lineHeightSmall,maxWidth:s}],children:(0,r.tZ)(q,{signature:u,activeParameter:o.activeParameter})}),Boolean(f||p)&&(0,r.BX)(C.Z,{css:[j.l0.px(d?4:8),j.l0.py(2),j.l0.maxHeight(200),j.l0.overflow("scroll"),{borderTop:l,maxWidth:s}],children:[p?(0,r.tZ)(U,{content:p}):null,f?(0,r.tZ)(U,{content:f}):null]})]})]})};function q(e){var t,n=e.signature,o=n.label,i=n.parameters,a=e.activeParameter;if(null==a||!i)return(0,r.tZ)("span",{children:o});var c=null===(t=i[a])||void 0===t?void 0:t.label;if(!c)return(0,r.tZ)("span",{children:o});var l=G("string"===typeof c?[o.indexOf(c),o.indexOf(c)+c.length]:c,2),s=l[0],u=l[1];return(0,r.BX)("div",{children:[(0,r.tZ)("span",{children:o.slice(0,s)}),(0,r.tZ)("strong",{children:c}),(0,r.tZ)("span",{children:o.slice(u)})]})}function K(e,t,n,r){return Y.apply(this,arguments)}function Y(){return Y=L(f().mark((function e(t,n,r,o){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request.signatureHelp(o,(0,_.s)(t.doc,n));case 2:if(!("error"in(i=e.sent))){e.next=5;break}throw new Error("Something went wrong fetching signature help results: ".concat(i.error.message));case 5:return e.abrupt("return",i.result);case 6:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}var Q=n(28468);function J(e){var t=e.lspClient,n=e.path;return E.tk.updateListener.of((function(e){var r;if(e.docChanged){var o=null===(r=t.getServerCapabilities())||void 0===r?void 0:r.textDocumentSync;if(o!==Q.TextDocumentSyncKind.None&&t.isOpen(n))if(o!==Q.TextDocumentSyncKind.Full)t.notify.didChange(n,function(e,t){var n=[],r=t;return e.iterChanges((function(e,t,o,i,a){var c=a.sliceString(0),l=t-e,s=l+o;n.push({range:{start:(0,_.s)(r,o),end:(0,_.s)(r,s)},rangeLength:l,text:c}),r=r.replace(o,s,a)})),n}(e.changes,e.startState.doc));else{var i=e.view.state.doc.toString();t.notify.didChange(n,[{text:i}])}}}))}var ee=n(28519);function te(e){var t=e.lspClient,n=e.path;return E.lg.define((function(e){var r=t.onDiagnostics((function(t){if(t.path===n){var r=function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value,s=(0,_.R)(t.doc,l.range.start),u=(0,_.R)(t.doc,l.range.end);if(s===u){var d=t.wordAt(u);if(d)s=d.from,u=d.to;else{if(!(u<t.doc.length))continue;u+=1}}var f="info";switch(l.severity){case A.DiagnosticSeverity.Error:f="error";break;case A.DiagnosticSeverity.Warning:f="warning";break;case A.DiagnosticSeverity.Hint:case A.DiagnosticSeverity.Information:f="info"}n.push({from:s,to:u,severity:f,message:l.message,source:l.source})}}catch(p){o=!0,i=p}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t.diagnostics,e.state);e.dispatch((0,ee.p0)(e.state,r))}}));return{destroy:function(){r()}}}))}var ne=n(1864),re=n(59119);function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&ae(e.prototype,t),n&&ae(e,n),e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t,n){return(se="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ue(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}function fe(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function pe(e,t){return!t||"object"!==ye(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ge,be,ye=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function xe(e,t){if(e){if("string"===typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}function we(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ue(e);if(t){var o=ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pe(this,n)}}!function(e){e[e.Dollar=0]="Dollar",e[e.Colon=1]="Colon",e[e.Comma=2]="Comma",e[e.CurlyOpen=3]="CurlyOpen",e[e.CurlyClose=4]="CurlyClose",e[e.Backslash=5]="Backslash",e[e.Forwardslash=6]="Forwardslash",e[e.Pipe=7]="Pipe",e[e.Int=8]="Int",e[e.VariableName=9]="VariableName",e[e.Format=10]="Format",e[e.Plus=11]="Plus",e[e.Dash=12]="Dash",e[e.QuestionMark=13]="QuestionMark",e[e.EOF=14]="EOF"}(ge||(ge={})),function(e){e[e.DollarSign=36]="DollarSign",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.QuestionMark=63]="QuestionMark",e[e.A=65]="A",e[e.Z=90]="Z",e[e.Backslash=92]="Backslash",e[e.Underline=95]="Underline",e[e.a=97]="a",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace"}(be||(be={}));var ke,Se=function(){function e(){ie(this,e),this.value="",this.pos=0}var t=e.prototype;return t.text=function(e){this.value=e,this.pos=0},t.tokenText=function(e){return this.value.substr(e.pos,e.len)},t.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,r=0,o=this.value.charCodeAt(n);if("number"===typeof(t=e._table[o]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(o)){t=8;do{r+=1,o=this.value.charCodeAt(n+r)}while(e.isDigitCharacter(o));return this.pos+=r,{type:t,pos:n,len:r}}if(e.isVariableCharacter(o)){t=9;do{o=this.value.charCodeAt(n+ ++r)}while(e.isVariableCharacter(o)||e.isDigitCharacter(o));return this.pos+=r,{type:t,pos:n,len:r}}t=10;do{r+=1,o=this.value.charCodeAt(n+r)}while(!isNaN(o)&&"undefined"===typeof e._table[o]&&!e.isDigitCharacter(o)&&!e.isVariableCharacter(o));return this.pos+=r,{type:t,pos:n,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();Se._table=(le(ke={},36,0),le(ke,58,1),le(ke,44,2),le(ke,123,3),le(ke,125,4),le(ke,92,5),le(ke,47,6),le(ke,124,7),le(ke,43,11),le(ke,45,12),le(ke,63,13),ke);var Ze=function(){function e(){var t;ie(this,e),this._children=[],t=this,["parent"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,writable:!0})}))}var t=e.prototype;return t.appendChild=function(e){return fe(e,Ee)&&fe(this._children[this._children.length-1],Ee)?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},t.replace=function(e,t){var n,r=e.parent,o=r.children.indexOf(e),i=r.children.slice(0);(n=i).splice.apply(n,[o,1].concat(ve(t))),r._children=i,function e(t,n){var r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value;l.parent=n,e(l.children,l)}}catch(s){o=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}}(t,r)},t.toString=function(){return this.children.reduce((function(e,t){return e+t.toString()}),"")},t.len=function(){return 0},t.match=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=Object.entries(De)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=me(o.value,2),c=a[0];if(fe(this,a[1])&&c in e)return e[c](this)}}catch(l){n=!0,r=l}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},ce(e,[{key:"children",get:function(){return this._children}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(fe(e,Ie))return e;e=e.parent}}}]),e}(),Ee=function(e){de(n,e);var t=we(n);function n(e){var r;return ie(this,n),(r=t.call(this)).value=e,r}var r=n.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return n.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(Ze),_e=function(e){de(n,e);var t=we(n);function n(){return ie(this,n),t.apply(this,arguments)}return n}(Ze),je=function(e){de(n,e);var t=we(n);function n(e){var r;return ie(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},n.compareByIndex=function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0},ce(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&fe(this._children[0],Oe)?this._children[0]:void 0}}]),n}(_e),Oe=function(e){de(n,e);var t=we(n);function n(){var e;return ie(this,n),(e=t.apply(this,arguments)).options=[],e}var r=n.prototype;return r.appendChild=function(e){return fe(e,Ee)&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map((function(e){return e.value.replace(/\||,/g,"\\$&")})).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(Ze),Ce=function(e){de(n,e);var t=we(n);function n(){var e;return ie(this,n),(e=t.apply(this,arguments)).regexp=new RegExp(""),e}var r=n.prototype;return r.resolve=function(e){var t=this,n=!1,r=e.replace(this.regexp,(function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n=!0,t._replace(r.slice(0,-2))}));return!n&&this._children.some((function(e){return fe(e,Te)&&Boolean(e.elseValue)}))&&(r=this._replace([])),r},r._replace=function(e){var t="",n=!0,r=!1,o=void 0;try{for(var i,a=this._children[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;if(fe(c,Te)){var l=e[c.index]||"";t+=l=c.resolve(l)}else t+=c.toString()}}catch(s){r=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map((function(e){return e.toTextmateString()})),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((function(e){return e.clone()})),e},n}(Ze),Te=function(e){de(n,e);var t=we(n);function n(e,r,o,i){var a;return ie(this,n),(a=t.call(this)).index=e,a.shorthandName=r,a.ifValue=o,a.elseValue=i,a}var r=n.prototype;return r.resolve=function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"===typeof this.ifValue?this.ifValue:e||"string"!==typeof this.elseValue?e||"":this.elseValue},r._toPascalCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r._toCamelCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(Ze),Pe=function(e){de(n,e);var t=we(n);function n(e){var r;return ie(this,n),(r=t.call(this)).name=e,r}var r=n.prototype;return r.resolve=function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new Ee(t)],!0)},r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0===this.children.length?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}")},r.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},n}(_e);function Ae(e,t){for(var n=ve(e);n.length>0;){var r,o=n.shift();if(!t(o))break;(r=n).unshift.apply(r,ve(o.children))}}var Ie=function(e){de(n,e);var t=we(n);function n(){return ie(this,n),t.apply(this,arguments)}var r=n.prototype;return r.offset=function(e){var t=0,n=!1;return this.walk((function(r){return r===e?(n=!0,!1):(t+=r.len(),!0)})),n?t:-1},r.fullLen=function(e){var t=0;return Ae([e],(function(e){return t+=e.len(),!0})),t},r.enclosingPlaceholders=function(e){for(var t=[],n=e.parent;n;)fe(n,je)&&t.push(n),n=n.parent;return t},r.resolveVariables=function(e){var t=this;return this.walk((function(n){return fe(n,Pe)&&n.resolve(e)&&delete t._placeholders,!0})),this},r.appendChild=function(e){return delete this._placeholders,se(ue(n.prototype),"appendChild",this).call(this,e)},r.replace=function(e,t){return delete this._placeholders,se(ue(n.prototype),"replace",this).call(this,e,t)},r.toTextmateString=function(){return this.children.reduce((function(e,t){return e+t.toTextmateString()}),"")},r.clone=function(){var e=new n;return this._children=this.children.map((function(e){return e.clone()})),e},r.walk=function(e){Ae(this.children,e)},ce(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk((function(n){return fe(n,je)&&(t.push(n),e=!e||e.index<n.index?n:e),!0})),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(Ze),Re=function(){function e(){ie(this,e),this._scanner=new Se,this._token={type:14,pos:0,len:0}}var t=e.prototype;return t.text=function(e){return this.parse(e).toString()},t.parse=function(e,t,n){this._scanner.text(e),this._token=this._scanner.next();for(var r=new Ie;this._parse(r););var o=new Map,i=[],a=0;r.walk((function(e){return fe(e,je)&&(a+=1,e.isFinalTabstop?o.set(0,void 0):!o.has(e.index)&&e.children.length>0?o.set(e.index,e.children):i.push(e)),!0}));var c=!0,l=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var f=u.value,p=o.get(f.index);if(p){var h=new je(f.index);h.transform=f.transform;var m=!0,v=!1,g=void 0;try{for(var b,y=p[Symbol.iterator]();!(m=(b=y.next()).done);m=!0){var x=b.value;h.appendChild(x.clone())}}catch(w){v=!0,g=w}finally{try{m||null==y.return||y.return()}finally{if(v)throw g}}r.replace(f,[h])}}}catch(w){l=!0,s=w}finally{try{c||null==d.return||d.return()}finally{if(l)throw s}}return n||(n=a>0&&t),!o.has(0)&&n&&r.appendChild(new je(0)),r},t._accept=function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1},t._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},t._until=function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},t._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},t._parseEscaped=function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Ee(t)),!0)},t._parseTabstopOrVariableName=function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new je(Number(t)):new Pe(t)),!0):this._backTo(n)},t._parseComplexPlaceholder=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var r=new je(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new Ee("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else{if(!(r.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n);for(var o=new Oe;;){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(o),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}}},t._parseChoiceElement=function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(r)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new Ee(n.join(""))),!0)},t._parseComplexVariable=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var r=new Pe(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n);for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new Ee("${"+t+":")),r.children.forEach(e.appendChild,e),!0}},t._parseTransform=function(e){for(var t=new Ce,n="",r="";!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))n+=o=this._accept(6,!0)||o;else{if(14===this._token.type)return!1;n+=this._accept(void 0,!0)}}for(;!this._accept(6);){var i=void 0;if(i=this._accept(5,!0))i=this._accept(5,!0)||this._accept(6,!0)||i,t.appendChild(new Ee(i));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;r+=this._accept(void 0,!0)}try{t.regexp=new RegExp(n,r)}catch(a){return!1}return e.transform=t,!0},t._parseFormatString=function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var r=this._accept(8,!0);if(!r)return this._backTo(t),!1;if(!n)return e.appendChild(new Te(Number(r))),!0;if(this._accept(4))return e.appendChild(new Te(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var o=this._accept(9,!0);return o&&this._accept(4)?(e.appendChild(new Te(Number(r),o)),!0):(this._backTo(t),!1)}if(this._accept(11)){var i=this._until(4);if(i)return e.appendChild(new Te(Number(r),void 0,i,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new Te(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var c=this._until(1);if(c){var l=this._until(4);if(l)return e.appendChild(new Te(Number(r),void 0,c,l)),!0}}else{var s=this._until(4);if(s)return e.appendChild(new Te(Number(r),void 0,void 0,s)),!0}return this._backTo(t),!1},t._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new Ee(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),De={Text:Ee,Placeholder:je,Variable:Pe,FormatString:Te,Choice:Oe};function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Me(e,t){return!t||"object"!==Xe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){return function(e){if(Array.isArray(e))return Ne(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ne(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Xe=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function We(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ze(e);if(t){var o=ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Me(this,n)}}function He(e,t){var n=t.mapPos(e.from,-1,S.gc.TrackDel),r=t.mapPos(e.to,1,S.gc.TrackDel);return null==n||null==r?null:{field:e.field,from:n,to:r}}var Ve=function(){function e(t){Ue(this,e),this.lines=t.split(/\r\n?|\n/).map((function(e){return(new Re).parse(e).children}))}return e.prototype.apply=function(t){var n=t.view,r=t.from,o=t.to,i=e.instantiate(this.lines,t),a=i.text,c=i.ranges,l={from:r,to:o,insert:S.xv.of(a)},s={changes:l,scrollIntoView:!0};if(c.length&&(s.selection=et(c,0)),c.length>1){var u=new Ke(c,0),d=s.effects=[Ye.of(u)];void 0===n.state.field(Je,!1)&&d.push(S.Py.appendConfig.of([Je,nt,rt]))}if(r===o&&!c.length){var f=S.as.of(l,n.state.doc.length),p=n.state.selection.ranges.map((function(e){return e.map(f,0)}));s.selection=S.jT.create(p,n.state.selection.mainIndex)}return s},e.resolveVariable=function(e,t){var n=t.view,r=t.from,o=t.path;switch(e){case"TM_FILENAME":return(0,ne.basename)(o);case"TM_FILENAME_BASE":return(0,ne.basename)(o,(0,ne.extname)(o));case"TM_DIRECTORY":return(0,ne.dirname)(o);case"TM_FILEPATH":return o;case"TM_LINE_INDEX":return(n.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return n.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(t,n){var r,o=n.view,i=n.from,a=o.state,c=[],l=[],s=a.doc.lineAt(i),u=/^\s*/.exec(s.text)[0],d=a.facet(re.c),f=!0,p=!1,h=void 0;try{for(var m,v=t[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value,b=0,y="",x=function(e){var t=0,n=b;if(0===b&&(t=/^\t*/.exec(e)[0].length)){var r=u+d.repeat(t);e=r+e.slice(t),n+=r.length}return y+=e,b+=e.length,{line:c.length,from:n,to:b}},w=function(t){var r=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){s.value.match({Text:function(e){x(e.value)},Variable:function(t){var r=t.name,o=t.transform,i=e.resolveVariable(r,n);o&&(i=i.replace(o.regexp,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.children.map((function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(t[e.index])}})})).filter(Boolean).join("")}))),x(i)},Choice:function(e){x(e.options[0].value)},Placeholder:function(e){var t,n=c.length?i+c.map((function(e){return e.length})).reduce((function(e,t){return e+t})):i;if(null===(t=e.children)||void 0===t?void 0:t.length){var r={field:e.index,from:n+b,to:null};l.push(r),w(e.children),r.to=n+b}else{x("");var o=n+b;l.push({field:e.index,from:o,to:o})}}})}}catch(d){o=!0,a=d}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}};w(g),c.push(y)}}catch(S){p=!0,h=S}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}var k=(r=Math).max.apply(r,Ge(l.map((function(e){return e.field}))));return{text:c,ranges:l.map((function(e){var t=e.field;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Be(e,t,n[t])}))}return e}({},Le(e,["field"]),{field:0===t?k:t-1})}))}},e}(),$e=E.p.widget({widget:new(function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(n,e);var t=We(n);function n(){return Ue(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},n}(E.l9))}),qe=E.p.mark({class:"cm-snippetField"}),Ke=function(){function e(t,n){Ue(this,e),this.ranges=t,this.active=n,this.deco=E.p.set(t.map((function(e){return(e.from===e.to?$e:qe).range(e.from,e.to)})))}var t=e.prototype;return t.map=function(t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=this.ranges[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=He(a.value,t);if(!l)return null;n.push(l)}}catch(s){o=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return new e(n,this.active)},t.isSelectionInsideField=function(e){var t=this;return e.ranges.every((function(e){return t.ranges.some((function(n){return n.field===t.active&&n.from<=e.from&&n.to>=e.to}))}))},e}(),Ye=S.Py.define({map:function(e,t){return null===e||void 0===e?void 0:e.map(t)}}),Qe=S.Py.define(),Je=S.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=t.effects[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;if(c.is(Ye))return c.value;if(c.is(Qe)&&e)return new Ke(e.ranges,c.value)}}catch(l){r=!0,o=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.isSelectionInsideField(t.selection)&&(e=null),e},provide:function(e){return E.tk.decorations.from(e,(function(e){return e?e.deco:E.p.none}))}});function et(e,t){return S.jT.create(e.filter((function(e){return e.field===t})).map((function(e){return S.jT.range(e.from,e.to)})))}function tt(e){return function(t){var n,r=t.state,o=t.dispatch,i=r.field(Je,!1);if(!i||e<0&&0===i.active)return!1;var a=i.active+e,c=(n=Math).max.apply(n,Ge(i.ranges.map((function(e){return e.field})))),l=e>0&&i.active>=c;return o(r.update({selection:et(i.ranges,a),effects:Ye.of(l?null:new Ke(i.ranges,a))})),!0}}var nt=S.Wl.highest(E.$f.of([{key:"Tab",run:tt(1),shift:tt(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(Je,!1)&&(n(t.update({effects:Ye.of(null)})),!0)}}])),rt=E.tk.domEventHandlers({mousedown:function(e,t){var n,r=t.state.field(Je,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var o=r.ranges.find((function(e){return e.from<=n&&e.to>=n}));return!(!o||o.field===r.active)&&(t.dispatch({selection:et(r.ranges,o.field),effects:Ye.of(r.ranges.some((function(e){return e.field>o.field}))?new Ke(r.ranges,o.field):null)}),!0)}});function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function it(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function at(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){it(i,r,o,a,c,"next",e)}function c(e){it(i,r,o,a,c,"throw",e)}a(void 0)}))}}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ct(e,t,n[t])}))}return e}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||dt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e){return function(e){if(Array.isArray(e))return ot(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){if(e){if("string"===typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(e,t):void 0}}function ft(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")}function pt(e,t){var n=e.state,r=e.pos;if(e.explicit)return{triggerKind:Q.CompletionTriggerKind.Invoked};var o=n.doc.lineAt(r),i=o.text[r-o.from-1],a=o.text.substring(0,r-o.from);if(null===t||void 0===t?void 0:t.includes(i)){var c=i;return{triggerKind:Q.CompletionTriggerKind.TriggerCharacter,triggerCharacter:c}}return a.match(/\w$/)?{triggerKind:Q.CompletionTriggerKind.Invoked}:null}var ht=Object.entries(A.CompletionItemKind).reduce((function(e,t){var n=st(t,2),r=n[0];return lt(ct({},n[1],r.toLowerCase()),e)}),{});function mt(e,t){var n=(0,_.R)(e.state.doc,t.range.start),r=(0,_.R)(e.state.doc,t.range.end);if(null!==n&&null!==r)return{from:n,to:r,insert:t.newText}}function vt(e){var t=e.context,n=e.items,o=e.client,i=e.path,a=e.setDecoration,l=n.filter((function(e){return Boolean(e.label)})).map((function(e){var t,n=e.additionalTextEdits,l={label:e.label,detail:e.detail,apply:function(t,r,o,a){if(e.insertTextFormat!==A.InsertTextFormat.Snippet){var c=function(e){var t,n=e.view,r=e.item,o=e.from,i=e.to,a=n.state,c=a.doc,l=a.selection,s=[];if(r.textEdit){var u=r.textEdit,d=u.range,f=u.newText,p=(0,_.R)(c,d.start),h=(0,_.R)(c,d.end);if(null===p||null===h)return;s.push({from:p,insert:f,to:Math.max(h,l.main.to)})}else{var m=r.insertText||r.label;s.push({from:o,to:i,insert:m})}var v=st(s,1)[0],g="";null===(t=r.additionalTextEdits)||void 0===t||t.forEach((function(e){var t=mt(n,e);t&&("from"in v&&t.from===v.from&&(g=t.insert),s.push(t))}));var b=i-o;l.ranges.forEach((function(e){if(e!==l.main){if(!("insert"in v)||!v.insert)throw new Error("Expected insert in mainChange");var t=e.from-b,n=g+v.insert;s.push({from:t,to:e.to,insert:n})}}));var y=s.map((function(e){return"from"in e&&"undefined"!==typeof e.to?lt({},e,{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e})),x=S.as.of(y,c.length),w=l.ranges.map((function(e){return e.map(x,0)}));return{changes:x,selection:S.jT.create(w,l.mainIndex)}}({view:t,item:lt({},e,{additionalTextEdits:n}),to:a,from:o});c&&t.dispatch({changes:c.changes,selection:c.selection,annotations:Z.Jv.of(r)})}else{var l,s,u,d,f=[];n&&f.push({changes:n.map((function(e){return mt(t,e)}))});var p=null!==(d=null!==(u=null===(s=e.textEdit)||void 0===s?void 0:s.newText)&&void 0!==u?u:e.insertText)&&void 0!==d?d:e.label,h=new Ve(p);e.textEdit&&"range"in e.textEdit&&(o=(0,_.R)(t.state.doc,e.textEdit.range.start),a=Math.max(a,(0,_.R)(t.state.doc,e.textEdit.range.end)));var m=h.apply({view:t,from:o,to:a,path:i});(l=t).dispatch.apply(l,ut(f).concat([m]))}},type:e.kind&&ht[e.kind],filterText:(null!==(t=e.filterText)&&void 0!==t?t:e.label).toLowerCase(),sortText:e.sortText||e.label},s=m(o).isCompletionItemResolveSupported;return o&&s?l.info=at(f().mark((function t(){var l,s,u,d,p,h;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.request.resolveCompletionItem(e);case 2:if(l=t.sent,s="cancelled"in l&&l.cancelled,u="result"in l?l.result:null,!s&&u){t.next=7;break}return t.abrupt("return",null);case 7:if(u.additionalTextEdits&&(n=u.additionalTextEdits),d=[],u.detail&&u.detail!==e.detail&&u.detail!==e.label&&(p="```"+(0,ne.extname)(i).slice(1)+"\n"+u.detail+"\n```",d.push((0,r.tZ)(U,{content:{value:p,kind:"markdown"}}))),u.documentation&&d.push((0,r.tZ)(U,{content:u.documentation})),0!==d.length){t.next=13;break}return t.abrupt("return",null);case 13:return h=document.createElement("div"),a(c.createPortal((0,r.tZ)(r.HY,{children:d}),h)),t.abrupt("return",h);case 16:case"end":return t.stop()}}),t)}))):e.documentation&&(l.info=function(){if(!e.documentation)return null;var t=document.createElement("div");return a(c.createPortal((0,r.tZ)(U,{content:e.documentation}),t)),t}),l})),s=st(function(e){var t=Object.create(null),n=Object.create(null),r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value.label;t[l[0]]=!0;for(var s=1;s<l.length;s++)n[l[s]]=!0}}catch(d){o=!0,i=d}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}var u=ft(t)+ft(n)+"*$";return[new RegExp("^"+u),new RegExp(u)]}(l),2),u=s[0],d=s[1],p=t.matchBefore(d),h=t.pos;if(p){h=p.from;var v=p.text.toLowerCase();/^\w+$/.test(v)&&(l=l.filter((function(e){return e.filterText.startsWith(v)})).sort((function(e,t){var n=e.sortText,r=t.sortText;return n.startsWith(p.text)&&!r.startsWith(p.text)?-1:!n.startsWith(p.text)&&r.startsWith(p.text)?1:0})))}return{from:h,options:l,validFor:u}}var gt=n(31284),bt=n(62473),yt=n(58843);function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wt(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function kt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){wt(i,r,o,a,c,"next",e)}function c(e){wt(i,r,o,a,c,"throw",e)}a(void 0)}))}}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){St(e,t,n[t])}))}return e}function Et(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e){var t=e.content,n=e.className,o=e.showHoveredVariable;if("string"!==typeof t&&"kind"in t)return(0,r.tZ)(U,{content:t});var i=(Array.isArray(t)?t:[t]).map((function(e){return"string"===typeof e?e:"```"+e.language+"\n"+e.value+"\n```"})).join("\n");return(0,r.tZ)(P.ZP,{css:o?[j.l0.maxHeight(Ct),j.l0.overflowY("auto")]:void 0,className:n,components:{code:function(e){return(0,r.tZ)(I.Z,Zt({minimal:!0,disableCopy:!0},e))}},children:i})}function Ot(e){var t=e.dom,n=Et(e,["dom"]);return c.createPortal((0,r.tZ)(Tt,Zt({},n)),t)}var Ct=100;function Tt(e){var t=e.className,n=e.content,o=e.textHovered,i=(0,yt.c)("flag-debugger-hover-variable").enabled,c=(0,s.Z)().debuggest,l=(0,gt.Z)(c.mainClient),u=l&&("running"===l.state.current||"paused"===l.state.current),d=_t(a.useState(!1),2),p=d[0],h=d[1],m=_t(a.useState(void 0),2),v=m[0],g=m[1],b=i&&u&&v;return a.useEffect((function(){function e(){return(e=kt(f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!u){e.next=11;break}return h(!0),e.prev=2,e.next=6,l.evaluate({expression:o,context:"hover"});case 6:n=e.sent,(null===(t=n.body)||void 0===t?void 0:t.result)&&(r=Zt({name:o,value:n.body.result},n.body),g(r));case 8:return e.prev=8,h(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[2,,8,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i,l,u,o]),(0,r.BX)(C.Z,{css:[D,j.l0.maxWidth(400),b?j.l0.maxHeight(Ct+190):j.l0.maxHeight(190),j.l0.minHeight(30),j.l0.overflowY("auto"),j.l0.borderRadius(4),j.l0.backgroundColor.backgroundDefault],children:[p?void 0:(0,r.tZ)(jt,{content:n,className:t,showHoveredVariable:Boolean(b)}),b?(0,r.tZ)(C.Z,{css:[j.l0.maxHeight(190),j.l0.overflowY("auto")],children:(0,r.tZ)(bt._,{depth:0,client:l,variable:v})}):void 0]})}function Pt(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function At(e){var t,n,o=e.hover,i=e.state,a=e.offset,c=e.setDecoration;if((Array.isArray(o.contents)||"string"===typeof o.contents)&&0===o.contents.length)return c(null),null;var l="",s=i.doc;if(o.range)t=(0,_.R)(s,o.range.start),n=(0,_.R)(s,o.range.end),l=s.sliceString(t,n);else if(n=a+1,(t=a)<=i.doc.length){var u=i.wordAt(t);l=u?s.sliceString(u.from,u.to):s.sliceString(t,n)}return{pos:t,end:n,create:function(){var e=document.createElement("div");return e.classList.add("hover-tooltip"),e.style.padding="0",c((0,r.tZ)(Ot,{dom:e,content:o.contents,textHovered:l})),{dom:e,mount:function(e){var t;t=function(){(0,E.E2)(e)},[0,50,200,1e3].forEach((function(e){return setTimeout(t,e)}))}}},above:!0}}function It(e){var t=e.lspClient,n=e.path,r=e.setDecoration,o=(0,E.bF)(function(){var e,o=(e=f().mark((function e(o,i){var a,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,_.s)(o.state.doc,i),e.next=3,t.request.hover(n,a);case 3:if(!("error"in(c=e.sent))){e.next=7;break}throw r(null),new Error("Something went wrong fetching hover results: ".concat(c.error.message));case 7:if(null!==(l=c.result)){e.next=11;break}return r(null),e.abrupt("return",null);case 11:return e.abrupt("return",At({hover:l,offset:i,state:o.state,setDecoration:r}));case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Pt(i,r,o,a,c,"next",e)}function c(e){Pt(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e,t){return o.apply(this,arguments)}}());return o}var Rt,Dt=n(51281),Nt=n(35060),Ut=n(28593),Bt=n(32378),zt=n(35864),Lt=n(67938),Mt=n(13475);function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gt(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function Xt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Gt(i,r,o,a,c,"next",e)}function c(e){Gt(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Wt(e,t,n[t])}))}return e}function Vt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||Kt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e){return function(e){if(Array.isArray(e))return Ft(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Kt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e,t){if(e){if("string"===typeof e)return Ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(e,t):void 0}}function Yt(e){var t=e.dom,n=Vt(e,["dom"]);return c.createPortal((0,r.tZ)(Jt,Ht({},n)),t)}function Qt(e){var t=e.matchesMap,n=e.fileToContents,o=e.type,i=e.onClose,a=Object.keys(t),c=(0,s.Z)().session;if(0===a.length){var l=o===Rt.REFERENCES?"No references found":"No definitions found";return(0,r.tZ)(Lt.x,{color:"dimmer",css:[j.l0.pl(4),j.l0.py(8)],children:l})}return(0,r.tZ)(C.Z,{children:a.map((function(e){var o=t[e],l=n[e],s=(0,zt.Z)(o,l);return(0,r.tZ)(C.Z,{css:[j.l0.p(4)],children:(0,r.tZ)(Bt.Vw,{path:e,extensions:[s],doc:l,numMatches:o.length,initiallyExpanded:1===a.length,onNavigateToCode:function(t){if(null!==t)c.updateDeeplink({path:e,line:t.line+1,col:t.character});else{var n=$t(o,1)[0],r=l.lineAt(n.from),a=n.from-r.from;c.updateDeeplink({path:e,line:r.number,col:a})}i()}})},e)}))})}function Jt(e){var t=e.files,n=e.onClose,o=e.references,i=e.definitions,c=e.currentFile,l=e.currentFileContents,u=function(e,t){if(!p)throw new Error("Expected LSP Client");var n=p.documentUriToPath(e.uri),r=e.range,o=r.start,i=r.end;n in t||(t[n]=[]);var a=g[n],c=a.line(o.line+1),l=a.line(i.line+1);t[n].push({from:c.from+o.character,to:l.from+i.character})},d=(0,s.Z)().fs,p=(0,h.Z)(c),m=(0,Mt.Z)(n,[]),v=$t(a.useState(Wt({},c,S.xv.of(l.split("\n")))),2),g=v[0],b=v[1];a.useEffect((function(){if(t.length){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return n=Xt(f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={},n.next=3,Promise.all(t.map(function(){var e=Xt(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.readFile(t);case 2:if(!(n=e.sent).error){e.next=5;break}throw new Error("Something went wrong reading file with path ".concat(t,". Received error: ").concat(n.error));case 5:r[t]=S.xv.of(n.content.toString().split("\n"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:if(!e){n.next=5;break}return n.abrupt("return");case 5:b((function(e){return Ht({},e,r)}));case 6:case"end":return n.stop()}}),n)}))),n.apply(this,arguments)}}),[d,t]);var y=qt(o).concat(qt(i));if(!p||y.some((function(e){return!(p.documentUriToPath(e.uri)in g)})))return(0,r.tZ)(C.Z,{style:{width:j.TV.space128,height:j.TV.space128,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.tZ)(Ut.Z,{style:{padding:"10px auto",width:"35px",height:"35px"}})});var x={},w={};return o.forEach((function(e){u(e,x)})),i.forEach((function(e){u(e,w)})),(0,r.BX)(C.Z,{innerRef:m,css:[j.l0.minWidth("375px"),j.l0.maxWidth("500px"),j.l0.pt(4)],children:[(0,r.tZ)(C.Z,{css:{borderBottom:"1px solid var(--background-highest)"},children:(0,r.BX)(C.Z,{css:[j.l0.p(4)],children:[(0,r.BX)(C.Z,{css:[j.l0.flex.row,j.l0.justify.spaceBetween,j.l0.align.center,j.l0.pr(4)],children:[(0,r.tZ)(Lt.h,{level:2,variant:"subheadDefault",css:[j.l0.p(4),j.l0.pl(8)],children:"Definitions"}),(0,r.tZ)(Dt.Z,{filled:!1,border:!1,onClick:n,children:(0,r.tZ)(Nt.Z,{})})]}),(0,r.tZ)(Qt,{matchesMap:w,fileToContents:g,type:Rt.DEFINITION,onClose:n})]})}),(0,r.tZ)(C.Z,{children:(0,r.BX)(C.Z,{css:[j.l0.p(4)],children:[(0,r.tZ)(Lt.h,{level:2,variant:"subheadDefault",css:[j.l0.p(4),j.l0.pl(8)],children:"References"}),(0,r.tZ)(Qt,{matchesMap:x,fileToContents:g,type:Rt.REFERENCES,onClose:n})]})})]})}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tn(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rn(e){return function(e){if(Array.isArray(e))return en(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.DEFINITION="DEFINITION",e.REFERENCES="REFERENCES"}(Rt||(Rt={}));var on=S.Py.define();function an(e){var t=e.setDecoration,n=e.lspClient,o=e.path,i=S.Py.define(),a=S.Py.define(),c=E.tk.updateListener.of(function(){var e,t=(e=f().mark((function e(t){var r,c,l,s,u,d,p,h,v,g,b,y,x,w,k,S,Z,E,j,O,C,T,P,A,I,R,D,N,U,B;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w=function(){t.view.dispatch({effects:a.of(null)})},r=null,c=!0,l=!1,s=void 0,e.prev=3,u=t.transactions[Symbol.iterator]();case 5:if(c=(d=u.next()).done){e.next=27;break}for(p=d.value,h=!0,v=!1,g=void 0,e.prev=8,b=p.effects[Symbol.iterator]();!(h=(y=b.next()).done);h=!0)(x=y.value).is(on)&&(r=x.value);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),v=!0,g=e.t0;case 16:e.prev=16,e.prev=17,h||null==b.return||b.return();case 19:if(e.prev=19,!v){e.next=22;break}throw g;case 22:return e.finish(19);case 23:return e.finish(16);case 24:c=!0,e.next=5;break;case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(3),l=!0,s=e.t1;case 33:e.prev=33,e.prev=34,c||null==u.return||u.return();case 36:if(e.prev=36,!l){e.next=39;break}throw s;case 39:return e.finish(36);case 40:return e.finish(33);case 41:if(r){e.next=43;break}return e.abrupt("return");case 43:if(k=m(n),S=t.state.doc,Z=(0,_.s)(S,r),!k.isFindReferencesSupported){e.next=53;break}return e.next=50,n.request.findReferences(o,Z,{includeDeclaration:!1});case 50:e.t2=e.sent,e.next=54;break;case 53:e.t2={result:null};case 54:if(E=e.t2,!k.isFindDefinitionSupported){e.next=61;break}return e.next=58,n.request.findDefinitions(o,Z);case 58:e.t3=e.sent,e.next=62;break;case 61:e.t3={result:null};case 62:if(j=e.t3,!("error"in E)){e.next=65;break}throw new Error("Something went wrong fetching references: ".concat(E.error.message));case 65:if(!("error"in j)){e.next=67;break}throw new Error("Something went wrong fetching definition: ".concat(j.error.message));case 67:if(O=E.result,C=j.result,T=O&&O.length>0,P=C&&C.length>0,T||P){e.next=74;break}return w(),e.abrupt("return");case 74:A=[],I=[],O&&O.length>0&&(R=A).push.apply(R,rn(O)),C&&C.length>0&&(D=I).push.apply(D,rn(C)),N=rn(A).concat(rn(I)).map((function(e){return n.documentUriToPath(e.uri)})).filter((function(e){return e!==o})),U=rn(new Set(N)),B=S.toJSON().join("\n"),t.view.dispatch({effects:i.of({references:A,definitions:I,currentFile:o,currentFileContents:B,files:U})});case 82:case"end":return e.stop()}}),e,null,[[3,29,33,41],[8,12,16,24],[17,,19,23],[34,,36,40]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){tn(i,r,o,a,c,"next",e)}function c(e){tn(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()),l=S.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,o=!1,c=void 0;try{for(var l,s=t.effects[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;u.is(i)&&(n=u.value),u.is(a)&&(n=null)}}catch(d){o=!0,c=d}finally{try{r||null==s.return||s.return()}finally{if(o)throw c}}return n},provide:function(e){return E.hJ.compute([e],(function(n){var o=n.field(e);if(!o)return t(null),null;var i=n.selection.asSingle().main;return{pos:i.from,end:i.to,create:function(e){var n=document.createElement("div");return n.classList.add("cm-lsp-tooltip"),n.classList.add("replit-tooltip"),n.style.padding="0",t((0,r.tZ)(Yt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){nn(e,t,n[t])}))}return e}({},o,{onClose:function(){e.dispatch({effects:a.of(null)})},dom:n}))),{dom:n}}}}))}});return[c,l]}var cn=n(57541),ln=n(33108),sn=n(92704),un=n(27464),dn=n(8286);function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function hn(e){var t=e.dom,n=pn(e,["dom"]);return c.createPortal((0,r.tZ)(mn,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){fn(e,t,n[t])}))}return e}({},n)),t)}function mn(e){var t=e.onRename,n=e.closeInput,o=e.variable,i=(0,Mt.Z)(n,[]),c=a.useRef(null),l=(0,ln.Y)(o,(function(e){return e?e===o?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}}));return a.useEffect((function(){var e=function(e){"Escape"===e.key&&n()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[n]),a.useEffect((function(){setTimeout((function(){c.current&&c.current.focus()}))}),[l]),(0,r.tZ)(C.Z,{innerRef:i,css:[j.l0.backgroundColor.backgroundDefault,j.l0.flex.column,j.l0.justify.center,j.l0.borderRadius(4),j.l0.shadow(2),j.l0.width(200)],children:(0,r.tZ)("form",{onSubmit:function(e){e.preventDefault(),l.error||(n(),t(l.value))},children:(0,r.BX)(C.Z,{css:[j.l0.justify.center],children:[(0,r.BX)(C.Z,{css:[j.l0.flex.row,j.l0.align.center,j.l0.pr(4)],children:[(0,r.tZ)(Lt.h,{level:2,variant:"subheadDefault",css:[j.l0.p(4),j.l0.pl(8)],children:"Rename"}),(0,r.tZ)(Lt.h,{level:2,variant:"subheadDefault",color:"dimmer",css:[j.l0.maxWidth(100),j.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],children:o}),(0,r.tZ)(un.Z,{alt:"Close rename input",tooltipHidden:!0,onClick:n,css:[j.l0.position.absolute,j.l0.top(4),j.l0.right(4)],children:(0,r.tZ)(Nt.Z,{})})]}),(0,r.tZ)(C.Z,{css:[j.l0.justify.center,j.l0.align.center,j.l0.p(8),j.l0.pt(4)],children:(0,r.tZ)(cn.ZP,{name:"rename",ref:c,onBlur:l.handleBlur,onChange:function(e){return l.setValue(e.target.value)},value:l.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:l.error?[{message:l.error.message,state:"error"}]:void 0,style:{padding:j.TV.space4,borderRadius:j.TV.borderRadius4}})}),(0,r.tZ)(C.Z,{css:[j.l0.flex.rowReverse,j.l0.p(8),j.l0.pt(0)],children:(0,r.tZ)(sn.ZP,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,r.tZ)(dn.Z,{}),disabled:Boolean(l.error)||!l.value})})]})})})}var vn=S.Py.define();var gn=n(98772),bn=n(69987),yn=n(70917),xn=n(63051),wn=n(56834),kn=n(55681),Sn=n(22307);function Zn(e,t,n){var r=n.find((function(n){var r=n.range;return(0,_.R)(e,r.end)>=t&&(0,_.R)(e,r.start)<=t}));return null==r?[]:r.children?[r].concat(Zn(e,t,r.children)):[r]}var En=n(69219);function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){jn(e,t,n[t])}))}return e}function Cn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pn(e){var t=e.currentSymbol,n=e.value;return(0,r.BX)(T.G7,{css:T.l0.rowWithGap(2),children:[(0,r.tZ)(En.u,{kind:n.kind}),(0,r.tZ)(T.xv,{css:[T.l0.fontSize(14),T.l0.maxWidth(175),n===t&&{fontWeight:T.TV.fontWeightMedium}],children:n.name})]})}var An=(0,yn.iv)([T.l0.flex.row,T.l0.align.center]),In=[T.l0.backgroundColor.backgroundDefault,T.l0.height(20),T.l0.p(2),{span:[T.l0.mr(0),T.l0.maxWidth(175)],svg:T.l0.mr(4)}],Rn=[T.l0.color.foregroundDefault,T.l0.maxHeight("40vh"),T.l0.overflowY("auto"),{"&::-webkit-scrollbar":{width:0},scrollbarWidth:"none"}];function Dn(e){var t,n;return(null!==(n=null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.length)&&void 0!==n?n:0)>0}function Nn(e){return e.sort((function(e,t){return e.range.start.line-t.range.start.line||e.range.start.character-t.range.start.character}))}function Un(){(0,wn.j)(wn.U3.CODE_NAVIGATION_USED,{action:"opened"})}function Bn(e){var t=e.values,n=void 0===t?[]:t,o=e.symbol,i=e.getKey,c=e.onClick,l=a.useMemo((function(){return Nn(n)}),[n]);return(0,r.tZ)(T.ZE,{cssProps:[In,!l.length&&{pointerEvents:"none"}],icon:(0,r.tZ)(En.u,{kind:o.kind}),label:o.name,onAction:c,menuCssProps:Rn,onOpen:Un,items:l,children:function(e){return(0,r.tZ)(Sn.ck,{textValue:e.name,children:(0,r.tZ)(Pn,{currentSymbol:o,value:e})},i(e))}})}var zn=function(){return(0,r.tZ)(T.G7,{css:{marginLeft:-4,marginRight:-4},children:(0,r.tZ)(xn.Z,{})})};function Ln(e){var t=e.filePath,n=e.dom,o=Cn(e,["filePath","dom"]);return c.createPortal((0,r.BX)(T.G7,{css:[T.l0.flex.row,T.l0.color.foregroundDimmer,T.l0.px(4),T.l0.py(4),T.l0.maxWidth("100%"),T.l0.overflowX("auto"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}],children:[(0,r.tZ)(Gn,{path:t}),(0,r.tZ)(Mn,On({},o))]}),n)}function Mn(e){var t=e.doc,n=e.cursor,o=e.symbols,i=Cn(e,["doc","cursor","symbols"]),c=Tn(a.useState((function(){return Zn(t,n,o)})),2),l=c[0],s=c[1];return a.useEffect((function(){var e=Zn(t,n,o);(e.length!==l.length||e.some((function(e,t){return e!==l[t]})))&&s(e)}),[l,t,n,o]),(0,r.tZ)(Fn,On({symbolPath:l,symbols:o},i))}var Fn=a.memo((function(e){var t=e.symbols,n=e.moveCursor,o=e.symbolPath,i=function(e){var t=e.items;return(0,r.tZ)(T.G7,{css:An,children:(0,r.tZ)(T.ZE,{icon:(0,r.tZ)("span",{}),onAction:u,cssProps:In,label:"...",menuCssProps:Rn,onOpen:Un,items:Nn(t),children:function(e){return(0,r.tZ)(Sn.ck,{textValue:e.name,children:(0,r.tZ)(Pn,{value:e})},s(e))}})})},a=o.length-1,c=o[a],l=[],s=function(e){return l.push(e)-1},u=function(e){n(l[e].selectionRange.start),(0,wn.j)(wn.U3.CODE_NAVIGATION_USED,{action:"jumped"})},d=null;return Dn(c)?d=(0,r.tZ)(i,{items:c.children}):!o.length&&t.length&&(d=(0,r.tZ)(i,{items:t})),(0,r.BX)(T.G7,{css:[T.l0.flex.row],children:[o.map((function(e,n){return(0,r.BX)(T.G7,{css:An,children:[(0,r.tZ)(Bn,{getKey:s,onClick:u,symbol:e,values:0===n?t:o[n-1].children}),(n!==a||Dn(e))&&(0,r.tZ)(zn,{})]},n)})),d]})})),Gn=a.memo((function(e){var t=e.path;return(0,r.BX)(T.G7,{css:An,children:[(0,r.tZ)(T.ZE,{cssProps:[In,{pointerEvents:"none"}],icon:(0,r.tZ)(kn.Z,{path:t}),label:"",children:[]}),(0,r.tZ)(zn,{})]})}));function Xn(e){var t=e.path,n=e.debounce,o=e.setDecoration,i=e.documentSymbols;return[E.mH.of((function(e){var a=document.createElement("div"),c=(0,bn.u)({doc:e.state.doc,cursor:e.state.selection.main.head}),l=(0,k.Z)(c.set,n);function s(t){e.dispatch({scrollIntoView:!0,selection:S.jT.cursor((0,_.R)(e.state.doc,t))}),e.focus()}function u(){var e=(0,gt.Z)(i),n=(0,gt.Z)(c),o=n.doc,l=n.cursor;return e?(0,r.tZ)(Ln,{filePath:t,moveCursor:s,dom:a,symbols:e,cursor:l,doc:o}):null}return{dom:a,top:!0,mount:function(){o((0,r.tZ)(u,{}))},update:function(e){e.selectionSet&&i.current&&l({doc:e.view.state.doc,cursor:e.state.selection.main.head})}}})),E.tk.baseTheme({".cm-panels":{border:"none",zIndex:"1 !important"},".cm-panel:not(:empty)":{background:T.TV.backgroundDefault}})]}function Wn(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function Hn(e){var t,n=e.lspClient,r=e.path,o=e.setDecoration,i=(0,bn.u)(null),a=(0,k.Z)(i.set,200),c=(0,gn.Z)((t=f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.request.documentSymbol(r);case 2:(t=e.sent)&&"result"in t&&t.result.length&&"range"in t.result[0]?a(t.result):a(null);case 4:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){Wn(i,r,o,a,c,"next",e)}function c(e){Wn(i,r,o,a,c,"throw",e)}a(void 0)}))}),{wait:200}),l=E.lg.define((function(){return c(),{update:function(e){e.docChanged&&c()}}}));return[Xn({path:r,setDecoration:o,documentSymbols:i,debounce:200}),l]}var Vn=n(12220),$n=n(91762),qn=n(66715),Kn=n(93577),Yn=n(84109);function Qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jn(e){var t=e.containerProps,n=e.codeActions,o=e.onExecuted,i=(0,s.Z)().fs,a=(0,Kn.Z)(),c=(0,h.Z)(a||"");return n.length&&c?(0,r.tZ)(qn.XZ,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Qn(e,t,n[t])}))}return e}({},t,{children:n.map((function(e,t){return(0,r.tZ)(Yn.Z,{onClick:function(t){if(t.stopPropagation(),A.Command.is(e))return c.request.executeCommand(e.command,e.arguments),void o();var n=e.edit,r=e.command;n&&(0,$n.w)({edit:n,fs:i,client:c}),r&&c.request.executeCommand(r.command,r.arguments),o()},children:(0,r.tZ)(qn.sN,{isFirst:0===t,isLast:t===n.length-1,children:(0,r.tZ)(Lt.x,{children:e.title})})},t)}))})):null}var er=n(92876);function tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nr(e){return function(e){if(Array.isArray(e))return tr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return tr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rr=new Map;var or="undefined"===typeof WeakRef?function(e){return{deref:function(){return e}}}:WeakRef,ir=n(57923);function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cr(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ar(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(e){var t=e.path,n=e.range,r=e.lspClient;n=function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify)(e),r=null===(t=rr.get(n))||void 0===t?void 0:t.deref();return null!=r?r:(rr.set(n,new or(e)),e)}(n);var o,i=(0,ir.Z)(),c=lr(function(e,t){var n=a.useRef(),r=a.useMemo((function(){return(0,k.Z)((function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];e.apply(void 0,nr(r)).then((function(e){var t;null===(t=n.current)||void 0===t||t.call(n,e)}))}),t)}),[e,t]);return[r,a.useCallback((function(e){n.current=e}),[])]}(r.request.codeActions,1e3),2),l=c[0],s=c[1],u=lr(a.useState([]),2),d=u[0],p=u[1],h=a.useCallback((o=f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&t){e.next=2;break}return e.abrupt("return");case 2:s((function(e){i.current&&((0,wn.j)(wn.U3.EDITOR_CONTEXT_MENU_CODE_ACTIONS_REQUESTED,{success:!("error"in e),numActions:"result"in e&&e.result?e.result.length:null}),"error"in e?(p([]),er.Tb(new Error(e.error.message))):null===e.result||0===e.result.length?p([]):p(e.result))})),l(t,n);case 4:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){cr(i,n,r,a,c,"next",e)}function c(e){cr(i,n,r,a,c,"throw",e)}a(void 0)}))}),[r,t,l,n,s,i]);return a.useEffect((function(){return h(),function(){l.cancel()}}),[h,l]),[d,h]}function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){fr(e,t,n[t])}))}return e}function mr(e,t){return!t||"object"!==yr(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vr(e,t){return(vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ur(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ur(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var br,yr=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function xr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pr(e);if(t){var o=pr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mr(this,n)}}function wr(e){var t=e.state,n=t.doc,r=t.selection.main,o=r.from,i=r.to;return{start:(0,_.s)(n,o),end:(0,_.s)(n,i)}}var kr=function(e){var t=e.view,n=e.path,o=e.lspClient,i=e.visible,c=gr(a.useState({x:0,y:0}),2),l=c[0],s=c[1],u=gr(sr({path:n,lspClient:o,range:wr(t)}),2),d=u[0],f=u[1],p=(0,gt.Z)(i),h=a.useCallback((function(){i.current=!1}),[i]);if(!d.length)return null;var m=d.some((function(e){return"kind"in e&&"quickfix"===e.kind}))?"#75bdff":"#ffcc00";return(0,r.BX)("div",{role:"presentation",onMouseDown:function(e){p||(e.stopPropagation(),e.preventDefault(),s({x:e.nativeEvent.pageX,y:e.nativeEvent.pageY}),i.current=!p)},children:[(0,r.tZ)(Vn.Z,{css:{fill:m,color:m},className:"lightbulb"}),p&&(0,r.tZ)(Jn,{containerProps:{view:t,verticalOffset:qn.R$*d.length,closeMenu:h,width:"auto",coords:l},onExecuted:function(){h(),f()},codeActions:d})]})},Sr=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}(n,e);var t=xr(n);function n(){var e;return dr(this,n),(e=t.apply(this,arguments)).visible=(0,bn.u)(!1),e.container=a.createRef(),e}var o=n.prototype;return o.toDOM=function(e){var t=document.createElement("div");return t.setAttribute("aria-hidden","true"),t.className="cm-code-action",this.visible.current=!1,this.props.setDecoration(c.createPortal((0,r.tZ)("span",{ref:this.container,children:(0,r.tZ)(kr,hr({},this.props,{view:e,visible:this.visible}))}),t)),t},o.contains=function(e){var t;return(null===(t=this.container.current)||void 0===t?void 0:t.contains(e))||!1},o.ignoreEvent=function(){return!1},n}(E.l9);var Zr=function(e){return E.lg.fromClass(function(){function t(e){dr(this,t),this.updateDecorations(e)}var n=t.prototype;return n.update=function(e){(e.docChanged||e.viewportChanged||e.focusChanged||e.selectionSet)&&this.updateDecorations(e.view)},n.updateDecorations=function(t){var n,r,o=t.state,i=o.doc,a=o.selection,c=i.lineAt(a.main.from);n=function(e){return/^( {2}|\u3000|\t){2}/.test(e)}(c.text)||1===c.number&&1===i.lines?c.from:1===c.number?Math.min(i.length-1,c.to+1):i.lineAt(c.from-1).from,null!==(r=(br=this).widget)&&void 0!==r||(br.widget=new Sr),this.widget.props=e;var l=E.p.widget({widget:this.widget,side:0});this.decorations=E.p.set([l.range(n)])},t}(),{decorations:function(e){return e.decorations},eventHandlers:{mousedown:function(e){this.widget.visible.current&&this.widget.contains(e.target)&&(e.stopPropagation(),e.preventDefault())},keyup:function(e){"Escape"===e.key&&(this.widget.visible.current=!1)},scroll:function(){this.widget.visible.current=!1}}})},Er=E.tk.baseTheme({".cm-code-action":{background:"transparent",fontFamily:T.TV.fontFamilyDefault,position:"absolute",cursor:"pointer",zIndex:101,top:0}});function _r(e){var t,n=e.lspClient,o=e.path,i=e.decorations,a=e.rename,c=e.flagBreadcrumb,l=m(n),s=function(e){return function(t){setTimeout((function(){i.update((function(n){return n.set(e,t)}))}))}},u=[J({lspClient:n,path:o}),te({lspClient:n,path:o})];return l.isAutoCompleteSupported&&u.push(function(e){var t=e.lspClient,n=e.path,r=e.setDecoration;function o(){return(o=at(f().mark((function e(o){var i,a,c,l,s,u,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getServerCapabilities()){e.next=4;break}return e.abrupt("return",null);case 4:if(c=(null===a||void 0===a||null===(i=a.completionProvider)||void 0===i?void 0:i.triggerCharacters)||[],l=pt(o,c)){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,t.request.completion(n,(0,_.s)(o.state.doc,o.pos),l);case 10:if(!("error"in(s=e.sent))){e.next=13;break}throw new Error("Something went wrong fetching autocompletion results: ".concat(s.error.message));case 13:if(u=s.result,!o.aborted){e.next=16;break}return e.abrupt("return",null);case 16:if(u){e.next=18;break}return e.abrupt("return",null);case 18:return d=Array.isArray(u)?u:u.items,e.abrupt("return",vt({context:o,items:d,client:t,path:n,setDecoration:r}));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,Z.ys)({defaultKeymap:!1,closeOnBlur:!1,override:[(0,Z.eC)(["LineComment","BlockComment","String"],(function(e){return o.apply(this,arguments)}))]})}({setDecoration:s("autocomplete"),lspClient:n,path:o})),l.isSignatureHelpSupported&&u.push(V({setDecoration:s("signatureSuggestion"),lspClient:n,path:o})),l.isHoverSupported&&!(0,w.isMobile)()&&u.push(It({setDecoration:s("hoverTooltip"),lspClient:n,path:o})),l.isDocumentSymbolSupported&&c&&u.push(Hn({setDecoration:s("codeNavigation"),lspClient:n,path:o})),l.isCodeActionsSupported&&u.push((t={setDecoration:s("codeActions"),lspClient:n,path:o},[Er,Zr(t)])),(l.isFindDefinitionSupported||l.isFindReferencesSupported)&&u.push(an({setDecoration:s("tooltip"),lspClient:n,path:o})),l.isRenameSupported&&u.push(function(e){var t=e.setDecoration,n=e.hook;return S.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,o=!1,i=void 0;try{for(var a,c=t.effects[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value;l.is(vn)&&(n=l.value)}}catch(s){o=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n},provide:function(e){return E.hJ.compute([e],(function(o){var i=o.field(e);if(null===i)return t(null),null;var a=o.wordAt(i);return a?{pos:i,create:function(){var e=document.createElement("div");e.classList.add("cm-lsp-rename-tooltip"),e.classList.add("replit-tooltip"),e.style.padding="0";var c=o.sliceDoc(a.from,a.to);return t((0,r.tZ)(hn,{variable:c,dom:e,onRename:function(e){return n.onRename(e,i)},closeInput:n.closeRenameInput})),{dom:e}}}:null}))}})}({setDecoration:s("renameInput"),hook:a})),u}var jr=n(90601),Or=n(32181),Cr=n(53451);function Tr(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function Pr(e){var t=e.view,n=e.filePath,r=a.useRef(null),o=(0,s.Z)().fs,i=(0,h.Z)(n),c=a.useCallback(function(){var e,a=(e=f().mark((function e(a,c){var l,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Expected view");case 2:if(i){e.next=4;break}throw new Error("Expected client");case 4:if(n){e.next=6;break}throw new Error("Expected non-null file path");case 6:if(null!=c){e.next=8;break}throw new Error("Expected rename input params");case 8:return r.current&&i.notify.cancelRequest(r.current),l=i.generateId(),r.current=l,e.next=13,i.request.rename(n,(0,_.s)(t.state.doc,c),a,{id:l,tap:(0,Cr.M)(t)});case 13:if(s=e.sent,r.current=null,!("error"in s)){e.next=17;break}throw new Error("Something went wrong renaming ".concat(s.error.message));case 17:if(!s.cancelled){e.next=19;break}return e.abrupt("return");case 19:if(u=s.result){e.next=22;break}return e.abrupt("return");case 22:(0,$n.w)({edit:u,fs:o,client:i}),t.dispatch({effects:[vn.of(null)]});case 24:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Tr(i,r,o,a,c,"next",e)}function c(e){Tr(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e,t){return a.apply(this,arguments)}}(),[i,t,n,o]),l=a.useCallback((function(){if(!t)throw new Error("Expected view");t.dispatch({effects:[vn.of(null)]}),t.focus()}),[t]);return a.useMemo((function(){return{onRename:c,closeRenameInput:l}}),[c,l])}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ir(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function Rr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ir(i,r,o,a,c,"next",e)}function c(e){Ir(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ar(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(){return(Nr=Rr(f().mark((function e(t){var n,r,o,i,a,c,l,s,u,d,p,h,v,g,b,y,x,w;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.event,r=t.view,o=t.client,i=t.session,a=t.filePath,c=t.requestIdRef,(0,jr.j)(n)){e.next=3;break}return e.abrupt("return");case 3:if(r){e.next=5;break}throw new Error("Expected view");case 5:if(l=n.clientX,s=n.clientY,null!==(u=r.posAtCoords({x:l,y:s}))){e.next=9;break}return e.abrupt("return");case 9:if(o){e.next=11;break}throw new Error("Expected LSP Client");case 11:if(a){e.next=13;break}throw new Error("Expected filePath");case 13:if(m(o).isFindDefinitionSupported){e.next=16;break}return e.abrupt("return");case 16:return c.current&&o.notify.cancelRequest(c.current),c.current=o.generateId(),d=(0,_.s)(r.state.doc,u),e.next=21,o.request.findDefinitions(a,d,{id:c.current,tap:(0,Cr.M)(r)});case 21:if(p=e.sent,c.current=null,!("error"in p)){e.next=25;break}throw new Error("Something went wrong fetching definition location: ".concat(p.error.message));case 25:if(h=p.result,!p.cancelled&&h&&0!==h.length){e.next=28;break}return e.abrupt("return");case 28:v=Dr(h,1),g=v[0],b=g.uri,y=g.range,x=y.start,w=o.documentUriToPath(b),i.updateDeeplink({path:w,line:x.line+1,col:x.character});case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ur(e){var t=e.view,n=e.filePath,r=e.isLoading,o=e.decorations,i=(0,y.Z)().preferences.codeIntelligence,c=(0,s.Z)().session,l=(0,h.Z)(n),u=b(l),d=(0,x.Z)("flag-code-navigation");!function(e){var t=e.filePath,n=(0,s.Z)().fs,r=(0,h.Z)(t);a.useEffect((function(){if(r)return r.onWorkspaceEdit((function(e){var t=e.edit;return(0,$n.w)({edit:t,fs:n,client:r}),{applied:!0}}))}),[n,r])}({filePath:n}),function(e){var t=e.filePath,n=(0,s.Z)().fs,r=(0,h.Z)(t);a.useEffect((function(){if(r&&m(r).isTextDocumentSyncSupported)return n.watchOtFile(t,{onFlush:function(){r.isOpen(t)&&r.notify.didSave(t)}})}),[n,t,r])}({filePath:n});var f=Pr({view:t,filePath:n}),v=(0,Or.Z)({view:t});a.useEffect((function(){if(!r&&i&&t&&l&&u&&l.isSupportedFile(n)){l.notify.didOpen(n,t.state.doc.toString());var e=u.isFindDefinitionSupported,a={current:null};return t.dispatch({effects:v.reconfigure([_r({lspClient:l,path:n,decorations:o,rename:f,flagBreadcrumb:d}),e?E.tk.domEventHandlers({click:function(e){return function(e){Nr.apply(this,arguments)}({event:e,view:t,filePath:n,client:l,session:c,requestIdRef:a}),!1}}):[]])}),function(){l.getServerState()===p.a.INITIALIZED&&l.isOpen(n)&&l.notify.didClose(n),t.dispatch({effects:v.reconfigure([])}),o.unmount()}}}),[l,t,u,v,n,r,c,i,o,f,d])}var Br=n(6763);function zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lr(e){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mr(e,t){return!t||"object"!==Gr(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fr(e,t){return(Fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gr=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Xr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lr(e);if(t){var o=Lr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mr(this,n)}}var Wr=new(function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fr(e,t)}(n,e);var t=Xr(n);function n(){return zr(this,n),t.apply(this,arguments)}return n.prototype.toDOM=function(){return document.createTextNode("\u25cf")},n}(E.SJ)),Hr=S.Py.define({}),Vr=S.Py.define({}),$r=E.p.line({attributes:{class:"cm-debuggerLine"}}),qr=S.Py.define({}),Kr=S.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=t.effects[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;if(c.is(qr))return c.value}}catch(l){r=!0,o=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e}});function Yr(e){var t=new S.f_,n=e.state.field(Kr);if(null!==n){var r=e.state.doc.line(n);t.add(r.from,r.from,$r)}return t.finish()}var Qr=E.lg.fromClass(function(){function e(t){zr(this,e),this.decorations=Yr(t)}return e.prototype.update=function(e){this.decorations=Yr(e.view)},e}(),{decorations:function(e){return e.decorations}});function Jr(e,t){e.dispatch({effects:Vr.of({pos:t})})}var eo=S.QQ.define({create:function(){return S.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,o=void 0;try{for(var i,a=function(n,r){var o=r.value;if(o.is(Vr)){var i=!1;e.between(o.value.pos,o.value.pos+1,(function(){i=!0})),e=i?e.update({filter:function(e){return e!==o.value.pos}}):e.update({add:[Wr.range(o.value.pos)]})}o.is(Hr)&&(e=S.Xs.of(o.value.lines.map((function(e){return Wr.range(t.state.doc.line(e).from)})),!0))},c=t.effects[Symbol.iterator]();!(n=(i=c.next()).done);n=!0)a(0,i)}catch(l){r=!0,o=l}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return e}});function to(e,t){var n;return e&&0!==e.length?null===t||(null===(n=e[0].source)||void 0===n?void 0:n.path)!==t?null:e[0].line:null}var no=n(85133);function ro(e){var t=e.view,n=e.debuggest,r=e.filePath,o=e.isLoading,i=(0,s.Z)().fs,c=(0,no.Z)(),l=(0,gt.Z)(n.mainClient),u=(0,Or.Z)({view:t});a.useEffect((function(){if(!o&&c&&l&&t){var e=(0,Br.ZF)("/home/runner/".concat(c.slug,"/").concat(r)),n=function(e,t,n,r){var o,i=[];i.push(t.breakpoints.subscribe((function(t){var r=t.get(n);e.dispatch({effects:Hr.of({lines:r?r.map((function(e){return e.line})):[]})})})));var a=E.tk.updateListener.of((function(o){o.transactions.forEach((function(o){o.effects.forEach((function(o){if(o.is(Vr)){var i=(0,Br.om)(n);if(!i)throw new Error("Expected relative path");t.toggleBreakpoint(n,{line:e.state.doc.lineAt(o.value.pos).number,otVersion:r.getOTVersion(i),otIndex:o.value.pos})}}))}))}));i.push(t.stackFrames.subscribe((function(t){var r=to(t,n);e.dispatch({effects:qr.of(r)})})));var c=(0,E.v5)({class:"cm-breakpoint-gutter",markers:function(e){return e.state.field(eo)},initialSpacer:function(){return Wr},domEventHandlers:{mousedown:function(e,t){return Jr(e,t.from),!0}}}),l=(null===(o=t.breakpoints.current.get(n))||void 0===o?void 0:o.map((function(e){return e.line})))||[],s=[S.Wl.highest(c),eo.init((function(e){return S.Xs.of(l.filter((function(t){return t<=e.doc.lines})).map((function(t){return Wr.range(e.doc.line(t).from)})),!0)})),a,E.tk.baseTheme({".cm-breakpoint-gutter .cm-gutterElement":{color:j.TV.accentPrimaryDefault,paddingLeft:j.TV.space4,paddingRight:j.TV.space2,cursor:"default"}}),Kr.init((function(){return to(t.stackFrames.current,n)})),Qr,E.tk.baseTheme({".cm-debuggerLine":{backgroundColor:j.TV.accentPrimaryDimmest,borderRadius:j.TV.borderRadius4,marginRight:j.TV.space4}})];return{extensions:s,dispose:function(){return i.forEach((function(e){return e()}))}}}(t,l,e,i),a=n.extensions,s=n.dispose;return t.dispatch({effects:u.reconfigure(a)}),function(){t.dispatch({effects:u.reconfigure([])}),s()}}}),[l,t,c,r,o,i,u])}var oo=n(27740),io=n.n(oo),ao=n(7177),co=n(60818),lo=n(88768),so=n(44054),uo=n(5426),fo=n(1517);function po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ho(e){var t=e.name,n=e.children,o=e.onClick;return(0,r.BX)(T.G7,{onClick:function(){return o()},css:[T.gU.nofill,T.l0.p(8)],children:[(0,r.tZ)(T.xv,{variant:"subheadDefault",css:T.l0.pb(16),children:t}),(0,r.tZ)(T.G7,{css:[T.l0.backgroundColor.backgroundDefault,T.l0.p(8),T.l0.borderRadius(8)],children:n})]})}var mo="@media (min-width: ".concat(so.j.tabletMax,"px)"),vo=(0,yn.iv)([T.l0.colWithGap(16),po({},mo,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function go(e){var t=e.children;return(0,r.tZ)(T.G7,{css:[po({},mo,[T.l0.rowWithGap(16)])],children:t})}function bo(e){var t=e.mainFile,n=e.examples,o=e.onSelect;return(0,r.BX)(T.G7,{css:[T.l0.colWithGap(24)],children:[(0,r.tZ)(T.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,r.tZ)(T.xv,{multiline:!0,children:"Get started with some program examples."}),(0,r.BX)(go,{css:[T.l0.colWithGap(16)],children:[(0,r.tZ)(T.G7,{css:vo,children:n.slice(0,(n.length+1)/2).map((function(e){return(0,r.tZ)(ho,{name:e.name,onClick:function(){return o(e)},children:(0,r.tZ)(uo.Z,{hideGutter:!0,filePath:t,code:e.code,fontSize:12})},e.name)}))}),(0,r.tZ)(T.G7,{css:vo,children:n.slice((n.length+1)/2).map((function(e){return(0,r.tZ)(ho,{name:e.name,onClick:function(){return o(e)},children:(0,r.tZ)(uo.Z,{hideGutter:!0,filePath:t,code:e.code,fontSize:12})},e.name)}))})]})]})}function yo(e){var t=e.replId,n=e.onSelect,o=(0,lo.h6q)({variables:{replId:t}}),i=o.data,a=o.loading,c=o.error;if(a)return(0,r.tZ)(T.G7,{css:[T.l0.colWithGap(0),T.l0.justify.center,T.l0.align.center,T.l0.pt(32),T.l0.pb(32)],children:(0,r.tZ)(fo.Z,{})});if(c)return(0,r.tZ)(T.G7,{css:[T.l0.colWithGap(0),T.l0.justify.center,T.l0.align.center,T.l0.pt(32),T.l0.pb(32)],children:c.message});var l="Repl"===(null===i||void 0===i?void 0:i.repl.__typename)?i.repl:null;if(!l)return null;var s=l.deprecatedLanguageConfig,u=s.mainFile,d=s.examples;return(null===d||void 0===d?void 0:d.length)?(0,r.tZ)(bo,{mainFile:u,examples:d,onSelect:n}):(0,r.tZ)(T.G7,{css:[T.l0.colWithGap(0),T.l0.justify.center,T.l0.align.center,T.l0.pt(32),T.l0.pb(32)],children:(0,r.BX)(T.xv,{multiline:!0,children:["Sorry, this language doesn\u2019t have any examples. Want to add some? Contact us at ",(0,r.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})})}var xo=n(5560),wo=n(61069),ko=n(44660);function So(){var e=(0,xo.Z)(),t=(0,lo.AIW)({variables:{replId:e}}).data;return"Repl"===(null===t||void 0===t?void 0:t.repl.__typename)&&t.repl.hasGenerateCode}function Zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Eo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Zo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jo(e){var t=e.onRequestClose,n=(0,wo.e)(ko.H.Examples),o=(0,wo.e)(ko.H.Editor),i=_o(a.useState(!1),2),c=i[0],l=i[1],s=(0,Kn.Z)(),u=(0,co.Z)(s),d=(0,xo.Z)(),f=a.useRef(null===n||void 0===n?void 0:n.isActive),p=a.useRef();p.current=null===n||void 0===n?void 0:n.isActive;var h=a.useRef(null===n||void 0===n?void 0:n.goto);return h.current=null===n||void 0===n?void 0:n.goto,a.useEffect((function(){return function(){var e;p.current&&(null===(e=h.current)||void 0===e||e.call(h,ko.H.Editor))}}),[]),a.useEffect((function(){(null===o||void 0===o?void 0:o.isActive)&&!f.current&&(c?o.goto(ko.H.Examples):l(!0))}),[o,t,c]),a.useEffect((function(){(null===n||void 0===n?void 0:n.isActive)?f.current=!0:f.current&&t(null)}),[null===n||void 0===n?void 0:n.isActive]),u?(0,r.tZ)("div",{ref:null===n||void 0===n?void 0:n.delegateTooltip,children:(0,r.tZ)(yo,{replId:d,onSelect:function(e){u({code:e.code,insertAt:0}),t({exampleName:e.name})}})}):(0,r.tZ)("div",{children:"Please make sure you have a file open"})}var Oo=function(e){var t=e.onShowGenerateCodeModal,n=(0,no.Z)(),o=_o(a.useState(!1),2),c=o[0],l=o[1],s=So(),u=(null===n||void 0===n?void 0:n.language)||"",d=io().getDocs(u),f=a.useCallback((function(e){(0,wn.j)(wn.U3.LANGUAGE_EXAMPLES_VIEWED,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Eo(e,t,n[t])}))}return e}({language:null===n||void 0===n?void 0:n.language,replId:null===n||void 0===n?void 0:n.id},e)),l(!1)}),[n]);return(0,r.BX)("div",{className:"jsx-761223062c9d62b5 placeholder",children:[(0,r.tZ)(ao.Z,{maxWidth:872,isOpen:c,onRequestClose:function(){return f(null)},children:(0,r.tZ)(jo,{onRequestClose:f})}),"Not sure what to do? Run some"," ",(0,r.tZ)("a",{"data-cy":"ws-editor-examples",onClick:function(){l(!0)},onKeyDown:function(){l(!0)},role:"button",tabIndex:0,className:"jsx-761223062c9d62b5 link",children:"examples"}),s&&!(0,w.isMobile)()?(0,r.BX)(r.HY,{children:[d?", ":" or ",(0,r.tZ)("a",{onClick:t,onKeyDown:t,role:"button",tabIndex:0,className:"jsx-761223062c9d62b5 link",children:"generate code"})]}):null,d&&(0,r.BX)(r.HY,{children:[", or view"," ",(0,r.tZ)("a",{target:"_blank",href:d,className:"jsx-761223062c9d62b5 link",children:"documentation"})]})," ","(start typing to dismiss)",(0,r.tZ)(i(),{id:"761223062c9d62b5",children:".placeholder.jsx-761223062c9d62b5{font-family:var(--font-family-code);color:var(--foreground-dimmest)}.link.jsx-761223062c9d62b5{cursor:pointer;pointer-events:all;color:var(--accent-primary-default);text-decoration:none}.link.jsx-761223062c9d62b5:hover{text-decoration:underline}"})]})};function Co(e){var t=e.dom,n=e.onShowGenerateCodeModal;return c.createPortal((0,r.tZ)(Oo,{onShowGenerateCodeModal:n}),t)}var To=n(73433),Po=n(47547),Ao=n(30555),Io=n(45383),Ro=n(33605);function Do(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function No(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||Bo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uo(e){return function(e){if(Array.isArray(e))return Do(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bo(e,t){if(e){if("string"===typeof e)return Do(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Do(e,t):void 0}}var zo=function(e){var t=e.buttons,n=e.onClick,o=e.onUndo,a=e.onRedo;return(0,r.BX)("nav",{className:"jsx-43582faf24448cbd",children:[t.map((function(e){return(0,r.tZ)("button",{onClick:function(t){t.stopPropagation(),t.preventDefault(),n(e)},className:"jsx-43582faf24448cbd",children:void 0!==e.label?e.label:e.value},e.value)})),(0,r.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),o()},className:"jsx-43582faf24448cbd",children:(0,r.tZ)(Po.Z,{})}),(0,r.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),a()},className:"jsx-43582faf24448cbd",children:(0,r.tZ)(Ao.Z,{})}),(0,r.tZ)(i(),{id:"43582faf24448cbd",children:'nav.jsx-43582faf24448cbd{font-family:Monaco,Menlo,"Ubuntu Mono",Consolas,source-code-pro,monospace;height:48px;background-color:var(--background-root);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}button.jsx-43582faf24448cbd{color:var(--foreground-default);padding:10px;font-family:inherit;font-size:16px;background-color:transparent;border:0 none;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}'})]})},Lo=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],Mo=function(e){var t=e.path,n=Uo(Lo).concat([{value:"= ",cursorOffset:2}]);return t.endsWith(".html")&&(n.unshift({value:"<>",cursorOffset:1}),n.unshift({label:"div",value:"<div></div>",cursorOffset:5})),n},Fo="visualViewport"in window;function Go(e){var t=e.view,n=e.filePath,o=e.isLoading,i=(0,To.Z)();a.useEffect((function(){i&&t&&t.requestMeasure({read:function(){return{cursor:t.coordsAtPos(t.state.selection.main.head),scroller:t.scrollDOM.getBoundingClientRect()}},write:function(e){var n=e.cursor,r=e.scroller;if(n){var o=(n.top+n.bottom)/2,i=(r.top+r.bottom)/2;Math.abs(o-i)>5&&(t.scrollDOM.scrollTop+=o-i+(Ro.g?50:0))}}})}),[i,t]);var c=No(a.useState(0),2),l=c[0],s=c[1];if(a.useEffect((function(){if(Ro.g&&Fo){var e=(0,k.Z)((function(){s(window.innerHeight-window.visualViewport.height-window.visualViewport.offsetTop)}),100);return window.visualViewport.addEventListener("scroll",e),window.visualViewport.addEventListener("resize",e),function(){window.visualViewport.removeEventListener("scroll",e),window.visualViewport.removeEventListener("resize",e)}}}),[]),!i||o)return null;if(!(0,w.isMobile)({tablet:!1}))return null;var u=(0,r.tZ)(zo,{onUndo:function(){t&&((0,Io.Yw)(t),t.focus())},onRedo:function(){t&&((0,Io.KX)(t),t.focus())},onClick:function(e){if(t){var n,r=null!==(n=t.state.selection.ranges[0].from)&&void 0!==n?n:0;t.dispatch({changes:{from:r,insert:e.value},selection:{anchor:r+e.cursorOffset}}),t.focus()}},buttons:Mo({path:n})});return!Ro.g||Fo?(0,r.tZ)(C.Z,{css:[j.l0.position.fixed,j.l0.width("100%"),j.l0.zIndex(100),j.l0.bottom(l),j.l0.left(0)],children:u}):u}var Xo=n(49892);function Wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ho(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Vo=S.Py.define();var $o=n(66552),qo=n(89957),Ko=n(6529),Yo=n(85252);function Qo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],o=e.getCursor(t),i=o.next();!i.done&&r.length<n;)r.push(i.value),i=o.next();return r}function Jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Jo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ti(e){return e>500?"large":e>350?"medium":"small"}var ni=(0,C.K)("div");function ri(e){var t=e.view,n=function(){if(!t)throw new Error("Expected view");(0,Xo.g)(t),N<=1||A((function(e){if(null===e){var n=t.state.selection.main,r=_.findIndex((function(e){return e.from===n.from&&e.to===n.to}));return-1===r?1:r+1}return e>=N?1:e+1}))},o=function(){if(!t)throw new Error("Expected view");(0,Xo.a7)(t),N<=1||A((function(e){if(null===e){var n=t.state.selection.main,r=_.findIndex((function(e){return e.from===n.from&&e.to===n.to}));return-1===r?1:r+1}return e<=1?N||1:e-1}))},i=function(e){var n=e;return!!t&&(0,E.$1)(t,n,"search-panel")},c=ei(a.useState(!1),2),l=c[0],s=c[1],u=ei(a.useState(!1),2),d=u[0],f=u[1],p=ei(a.useState(!1),2),h=p[0],m=p[1],v=ei(a.useState(""),2),g=v[0],b=v[1],y=ei(a.useState(""),2),x=y[0],w=y[1],Z=ei(a.useState([]),2),_=Z[0],O=Z[1],T=ei(a.useState(null),2),P=T[0],A=T[1],I=(0,ir.Z)(),R=a.useRef(new Xo.Jb({search:""})),D=(0,Kn.Z)(),N=_.length,U=a.useCallback((function(e){e.eq(R.current)||(b(e.search),w(e.replace),f(e.caseSensitive),m(e.regexp),R.current=e)}),[]),B=a.useCallback((function(){s(!0)}),[]),z=a.useCallback((0,k.Z)((function(e){I.current&&(O(Qo(R.current,e)),A(null))}),250),[]);a.useEffect((function(){return function(){return z.cancel()}}),[]),function(e){var t=e.view,n=e.onDocChanged,r=e.onSearchQuery,o=e.onExpandSearchPanel;a.useEffect((function(){t&&t.dispatch({effects:S.Py.appendConfig.of([E.tk.updateListener.of((function(e){e.transactions.forEach((function(e){e.effects.forEach((function(e){e.is(Xo.ql)&&r(e.value),e.is(Vo)&&o()}))}))})),E.tk.updateListener.of((function(e){e.docChanged&&n(e.view.state.doc)}))])})}),[t,r,o])}({view:t,onSearchQuery:U,onExpandSearchPanel:B,onDocChanged:z}),a.useEffect((function(){if(t){var e=(0,Xo.uP)(t.state);b(e.search),w(e.replace),f(e.caseSensitive),m(e.regexp),R.current=e}}),[t]),a.useEffect((function(){if(t){var e=new Xo.Jb({search:g,replace:x,caseSensitive:d,regexp:h}),n=R.current;e.eq(n)||(R.current=e,t.dispatch({effects:Xo.ql.of(e)}),O(Qo(e,t.state.doc)),A(null))}}),[t,g,x,d,h]),a.useEffect((function(){t&&D&&z(t.state.doc)}),[t,D,z]);var L=ei(a.useState(ti(0)),2),M=L[0],F=L[1],G=(0,Yo.Z)((function(e){e.width&&F(ti(e.width))}));if(!t)return null;var X=N>0,W=X?"".concat(P||1," / ").concat(N):null,H=W?8*W.length:null,V=(0,r.BX)(C.Z,{css:[j.l0.flex.row,j.l0.align.center,j.l0.rowWithGap(8)],children:[(0,r.tZ)(Ko.Z,{id:"Match case",name:"case",checked:d,onChange:function(){f((function(e){return!e}))}}),(0,r.tZ)(Lt.x,{variant:"small",color:d?"default":"dimmer",children:"Match case"}),(0,r.tZ)(Ko.Z,{id:"Regexp",name:"re",checked:h,onChange:function(){m((function(e){return!e}))}}),(0,r.tZ)(Lt.x,{variant:"small",color:h?"default":"dimmer",children:"Regexp"})]});return(0,r.tZ)(ni,{ref:G,onKeyDown:function(e){i(e)&&e.preventDefault()},children:(0,r.BX)($o.Z,{elevated:!0,css:[j.l0.rowWithGap(8),j.l0.px(4),j.l0.py(8),{borderBottom:"1px solid",borderColor:j.TV.outlineDimmest}],children:[(0,r.tZ)(C.Z,{css:[j.l0.center,j.l0.height(28)],children:(0,r.tZ)(un.Z,{alt:l?"Close replace panel":"Show replace panel",onClick:function(){s((function(e){return!e}))},children:(0,r.tZ)(xn.Z,{rotate:l?90:0,style:{transition:"200ms ease"}})})}),(0,r.BX)(C.Z,{css:[j.l0.flex.growAndShrink(1),j.l0.colWithGap(16)],children:[(0,r.BX)(C.Z,{css:["large"===M?j.l0.rowWithGap(16):j.l0.colWithGap(8)],children:[(0,r.BX)(C.Z,{css:[j.l0.flex.growAndShrink(1),"small"===M?j.l0.colWithGap(8):[j.l0.rowWithGap(8),j.l0.align.center]],children:[(0,r.BX)(C.Z,{css:[j.l0.flex.growAndShrink(1),j.l0.position.relative],children:[(0,r.tZ)(qo.ZP,{css:[j.l0.p(4),H&&{paddingRight:H}],placeholder:"Find",value:g,name:"search","main-field":"true",onKeyDown:function(e){e.metaKey&&"f"===e.key?e.currentTarget.select():"enter"===e.key.toLowerCase()&&(i(e)||(e.preventDefault(),e.shiftKey?o():n()))},onChange:function(e){b(e.target.value)}}),X?(0,r.tZ)(C.Z,{css:[j.l0.position.absolute,j.l0.top(0),j.l0.right(0),j.l0.height("100%"),j.l0.center,j.l0.pr(4)],children:(0,r.tZ)(Lt.x,{variant:"small",color:"dimmest",children:W})}):null]}),(0,r.BX)(C.Z,{css:[j.l0.rowWithGap(4),j.l0.align.center],children:[(0,r.tZ)(un.Z,{alt:"Previous",onClick:function(){o()},children:(0,r.tZ)(xn.Z,{rotate:-90})}),(0,r.tZ)(un.Z,{alt:"Next",onClick:function(){n()},children:(0,r.tZ)(xn.Z,{rotate:90})}),(0,r.tZ)(sn.ZP,{small:!0,text:"Select all",onClick:function(){(0,Xo.i3)(t),t.focus()}})]})]}),V]}),l?(0,r.BX)(C.Z,{css:["small"===M?j.l0.colWithGap(8):[j.l0.rowWithGap(8),j.l0.align.center,{marginRight:"large"===M?162:-19}]],children:[(0,r.tZ)(C.Z,{css:[j.l0.flex.growAndShrink(1)],children:(0,r.tZ)(qo.ZP,{css:[j.l0.p(4)],placeholder:"Replace",name:"replace",value:x,onKeyDown:function(e){"enter"===e.key.toLowerCase()&&(i(e)||(e.preventDefault(),(0,Xo.K9)(t)))},onChange:function(e){w(e.target.value)}})}),(0,r.BX)(C.Z,{css:[j.l0.rowWithGap(4),j.l0.align.center],children:[(0,r.tZ)(sn.ZP,{small:!0,text:"Replace",onClick:function(){(0,Xo.K9)(t)}}),(0,r.tZ)(sn.ZP,{small:!0,text:"Replace all",onClick:function(){(0,Xo.ko)(t)}})]})]}):null]}),(0,r.tZ)(C.Z,{css:[j.l0.center,j.l0.height(28)],children:(0,r.tZ)(un.Z,{alt:"Close Search Panel",tooltipHidden:!0,onClick:function(){(0,Xo.N$)(t)},children:(0,r.tZ)(Nt.Z,{})})})]})})}function oi(e){var t=e.dom,n=e.view;return c.createPortal((0,r.tZ)(ri,{view:n}),t)}var ii=n(67289),ai=n(98647),ci=n(56603),li=n(87152),si="import tokenize\nimport io\nimport re\nimport sys\nimport json\n\ndef get_ranges(code_snippet):\n    \"\"\"\n\n    Wrapper function that takes a code_snippet, and checks for\n    - The first instance of a variable name (we keep track of this in already_seen)\n    - The first instance of a function name (we keep track of this in already_seen)\n    - The first instance of a builtins (we keep track of this in already_seen)\n    - Every instance of strings, comments, and whitespace\n\n    It first tries to use python's \"tokenize\" module on the entire code snippet, which hilariously fails if there's a missing parens. If that fails, then it falls back to running \"tokenize\" line-by-line. If that fails, regexes.\n\n    Inputs:\n        - code_snippet, a string\n\n    Outputs:\n        - character_ranges_to_suppress, a list of tuples\n    \n    \"\"\"\n\n    ranges_to_suppress = {}\n    tokens_to_suppress = []\n    already_seen = [\n        'False', 'def', 'if', 'raise', 'None', 'del', 'import', 'return',\n        'True', 'elif', 'in', 'try', 'and', 'else', 'is', 'while', 'as',\n        'except', 'lambda', 'with', 'assert', 'finally', 'nonlocal', 'yield',\n        'break', 'for', 'not', 'class', 'from', 'or', 'continue', 'global',\n        'pass'\n    ]\n\n    try:\n        ranges_to_add, _, tokens_to_suppress = get_line_and_character_ranges_to_suppress(code_snippet, already_seen)\n        ranges_to_suppress = add_ranges_to_line_and_character_ranges_to_suppress(ranges_to_suppress, ranges_to_add, code_snippet)\n\n    except:\n         ranges_to_suppress, tokens_to_suppress = get_ranges_line_by_line(code_snippet, ranges_to_suppress, tokens_to_suppress)\n\n    line_number2character_offset_at_start = get_line_number2character_offset_at_start(code_snippet)\n    character_ranges_to_suppress = get_character_ranges_to_suppress(ranges_to_suppress, line_number2character_offset_at_start)\n\n    return character_ranges_to_suppress\n\ndef add_ranges_to_line_and_character_ranges_to_suppress(line_and_character_ranges_to_suppress, ranges_to_add, code_snippet):\n    \n    for (start_line, start_char), (end_line, end_char) in ranges_to_add:\n\n        # Python's tokenizer lines are 1-indexed \n        start_line = start_line - 1\n        end_line = end_line - 1\n        \n        if start_line not in line_and_character_ranges_to_suppress:\n            line_and_character_ranges_to_suppress[start_line] = []\n\n        if start_line == end_line:\n            line_and_character_ranges_to_suppress[start_line].append((start_char, end_char))\n        else: # If the starting and ending lines are different\n            line_and_character_ranges_to_suppress[start_line].append((start_char, len(code_snippet.split('\\n')[start_line]) + 1))\n            line_and_character_ranges_to_suppress[end_line].append((0, end_char))\n\n    return line_and_character_ranges_to_suppress\n    \n\n# def test(line_number2character_offset_at_start, code_snippet, character_ranges_to_suppress, tokens_to_suppress):\n# assert max(line_number2character_offset_at_start.values()) == len(code_snippet) - len(code_snippet.split('\\n')[-1])\n# for idx, range in enumerate(character_ranges_to_suppress):\n# try:\n# assert code_snippet[range[0]:range[1]] == tokens_to_suppress[idx]\n# except:\n# print(code_snippet[range[0]:range[1]], tokens_to_suppress[idx])\n\ndef get_ranges_line_by_line(code_snippet, ranges_to_suppress, tokens_to_suppress):\n\n    \"\"\"\n    This is a fallback function that will be used if the python tokenizer throws an \"EOF Multiline Error\"\n    And gets the ranges of the code to suppress line by line\n\n    Inputs\n        - code_snippet, a string\n        - ranges_to_suppress, a dict\n        - tokens_to_suppress, a list of strings\n\n    Outputs:\n        - ranges_to_suppress, a dict\n        - tokens_to_suppress, a list of strings\n    \n    \"\"\"\n    \n    already_seen = ['False', 'def', 'if', 'raise', 'None', 'del', 'import', 'return', 'True',\n                    'elif', 'in', 'try', 'and', 'else', 'is', 'while', 'as', 'except', 'lambda',\n                    'with', 'assert', 'finally', 'nonlocal', 'yield', 'break', 'for', 'not',\n                    'class', 'from', 'or', 'continue', 'global', 'pass']\n\n\n    for line_number, line in enumerate(code_snippet.split('\\n')):\n        line = line + '\\n'\n        try:\n            ranges_to_add, already_seen, _tokens = get_line_and_character_ranges_to_suppress(line, already_seen)\n            ranges_to_suppress[line_number] = [(start[1], end[1]) for start, end in ranges_to_add]\n            tokens_to_suppress.extend(_tokens)\n        except:\n            # The fallback is to use some regexps\n            ranges_to_suppress[line_number], already_seen, _tokens = get_fallback_ranges_to_suppress(line, already_seen)\n            tokens_to_suppress.extend(_tokens)\n\n    return ranges_to_suppress, tokens_to_suppress\n\n\ndef get_line_and_character_ranges_to_suppress(\n        code_snippet, variable_and_function_names_already_seen):\n    \"\"\"\n    Takes a line of code and checks to see if there are any\n    - Variable names that haven't been seen before\n    - Functions that haven't been seen before\n    - Strings\n    - Comments\n    - Indents\n\n    As all of these are frequent contributors of false positives.\n\n    A future version would be less \"greedy\" in checking, because this means we don't catch (1) typos (though a linter should call this) and (2) when the wrong function is called.\n\n    Inputs:\n        - line, string\n        - variable_and_function_names_already_seen, a list of strings\n\n    Outputs:\n        - ranges_to_suppress, a list of tuples\n        - variable_and_function_names_already_seen, a list of strings\n        - _tokens, a list of tokens for testing\n    \n    \"\"\"\n\n    ranges_to_suppress = []\n    _tokens = []\n    # This will throw an \"Token error: EOF in multi-line statement\" if there are unbalanced\n    # strings or parentheses!\n    for toktuple in tokenize.generate_tokens(io.StringIO(code_snippet).readline):\n        # From the documentation: The *numbers* of different types might change from version to version, but the names themselves shouldn't\n        # https://docs.python.org/3/library/token.html#token.OP\n        # https://github.com/python/cpython/blob/3.10/Lib/token.py\n\n        # type \"NAME\": functions and variables\n        if toktuple.type == tokenize.NAME and toktuple.string not in variable_and_function_names_already_seen:\n            ranges_to_suppress.append((toktuple.start, toktuple.end))\n            variable_and_function_names_already_seen.append(toktuple.string)\n            _tokens.append(toktuple.string)\n        # type INDENT, STRING, COMMENT (local python version), COMMENT (python version on replit)\n        elif toktuple.type in [\n                tokenize.INDENT, tokenize.STRING, tokenize.COMMENT\n        ]:\n            _tokens.append(toktuple.string)\n            ranges_to_suppress.append((toktuple.start, toktuple.end))\n\n    return ranges_to_suppress, variable_and_function_names_already_seen, _tokens\n\n\ndef get_fallback_ranges_to_suppress(line,\n                                    variables_and_function_names_already_seen):\n    # Some of these patterns are kind of greedy\n    # But the risk is limited to a single line\n    # Because this only runs as a fallback if the python tokenizer throws an \"EOF Multiline Error\"\n\n    func_pattern = re.compile('def .*\\(')\n    var_pattern = re.compile('^(.*?)=')\n    multi_space_pattern = re.compile('\\s\\s\\s*')\n    double_quote_pattern = re.compile('\".*\"')\n    single_quote_pattern = re.compile(\"'.*'\")\n    comment_pattern = re.compile(\"#.*\\n\")\n\n    spans = []\n    _tokens = []\n    for pattern in [\n            func_pattern, var_pattern, multi_space_pattern,\n            double_quote_pattern, single_quote_pattern, comment_pattern\n    ]:\n        for m in pattern.finditer(line):\n            if m.group() not in variables_and_function_names_already_seen:\n                spans.append(m.span())\n                _tokens.append(m.group())\n\n                if pattern in [func_pattern, var_pattern]:\n                    variables_and_function_names_already_seen.append(m.group())\n\n    return spans, variables_and_function_names_already_seen, _tokens\n\n\ndef get_line_number2character_offset_at_start(code_snippet):\n    \"\"\"\n    Takes a code snippet and returns the character offset for the start of each line.\n\n    Inputs:\n        - code_snippet, a string\n\n    Outputs:\n        - line_number2character_offset_at_start, a dictionary of {line number : character offset to start the line}\n    \n    \"\"\"\n\n    line_number2character_offset_at_start = {0: 0}\n    previous_line_length = len(code_snippet.split(\n        '\\n')[0]) + 1  # Have to add a char because of the newline\n    for idx, line_text in enumerate(code_snippet.split('\\n')):\n        if idx == 0:\n            continue\n        line_number2character_offset_at_start[\n            idx] = line_number2character_offset_at_start[\n                idx - 1] + previous_line_length\n        previous_line_length = len(\n            line_text) + 1  # Have to add a char because of the newline\n\n    return line_number2character_offset_at_start\n\n\ndef get_character_ranges_to_suppress(line_and_character_ranges_to_suppress,\n                                     line_number2character_offset_at_start):\n    \"\"\"\n    Gets the character ranges to suppress by adding the character ranges from each tokenizer/regex pattern match to the character offset to start each line\n    \n    Input:\n        - line_and_character_ranges_to_suppress, a list of tuples\n        - line_number2character_offset_at_start, a dictionary of {line number : character offset to start the line}\n\n    Outputs:\n        - character_ranges_to_suppress, a list of tuples\n    \n    \n    \"\"\"\n    character_ranges_to_suppress = []\n    for line_number, ranges in line_and_character_ranges_to_suppress.items():\n        for range in ranges:\n            character_ranges_to_suppress.append(\n                (line_number2character_offset_at_start[line_number] + range[0],\n                 line_number2character_offset_at_start[line_number] +\n                 range[1]))\n\n    return character_ranges_to_suppress\n\n\n\nprint(json.dumps(get_ranges(sys.argv[1])))",ui=n(42650),di=n(17632),fi=n(47845);function pi(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function hi(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){pi(i,r,o,a,c,"next",e)}function c(e){pi(i,r,o,a,c,"throw",e)}a(void 0)}))}}function mi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vi(e){return(vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gi(e,t){return!t||"object"!==yi(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bi(e,t){return(bi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yi=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function xi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vi(e);if(t){var o=vi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gi(this,n)}}var wi=S.Py.define({map:function(e,t){return e.map(t)}});function ki(e){var t=e.isLoading,n=e.close,o=(0,a.useState)(!1),i=o[0],c=o[1],l=a.useCallback(function(){var e=hi(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return");case 2:c(!0),(0,wn.j)(wn.U3.CODEX_FEEDBACK_SUBMITTED,{language:"python",feedback:t,feature:"look-for-errors"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]);return(0,r.BX)(T.Tg,{background:"higher",css:[T.l0.height(50),T.l0.px(4),T.l0.rowWithGap(0),T.l0.justify.spaceBetween,T.l0.align.center,{borderTop:"1px solid",borderBottom:"1px solid",borderColor:T.TV.outlineDimmer}],children:[(0,r.BX)(T.G7,{css:[T.l0.rowWithGap(16),T.l0.align.center],children:[(0,r.tZ)(ui.Z,{}),(0,r.tZ)(T.h4,{level:3,children:"Look for Errors"}),t?(0,r.tZ)(fo.Z,{}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(T.xv,{variant:"small",children:"Is this guess useful?"}),i?(0,r.tZ)(T.zx,{disabled:!0,iconLeft:(0,r.tZ)(fi.Z,{}),onClick:function(){},small:!0,text:"Thanks!"}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(T.zx,{iconLeft:(0,r.tZ)(Nt.Z,{}),text:"No",onClick:function(){return l(lo.TYv.No)}}),(0,r.tZ)(T.zx,{iconLeft:(0,r.tZ)(dn.Z,{}),text:"Yes",colorway:"positive",onClick:function(){return l(lo.TYv.Yes)}})]})]})]}),(0,r.BX)(T.G7,{css:[T.l0.rowWithGap(16),T.l0.align.center],children:[(0,r.tZ)("a",{href:"https://blog.replit.com/codex",target:"_blank",css:T.l0.color.foregroundDefault,children:(0,r.tZ)(T.hU,{alt:"Learn more",tooltipDelay:0,tooltipText:"This beta feature uses Codex by OpenAI. Click to learn more.",type:"button",children:(0,r.tZ)(di.Z,{color:T.TV.foregroundDefault})})}),(0,r.tZ)(T.hU,{alt:"Close",onClick:function(){n()},children:(0,r.tZ)(Nt.Z,{})})]})]})}var Si=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bi(e,t)}(n,e);var t=xi(n);function n(e){var r,o=e.close,i=e.isLoading;return mi(this,n),(r=t.call(this)).isLoading=i,r.close=o,r}return n.prototype.toDOM=function(){var e=document.createElement("div");return c.render((0,r.tZ)(ki,{isLoading:this.isLoading,close:this.close}),e),e},n}(E.l9),Zi=S.Py.define({map:function(e,t){return e.map(t)}}),Ei=S.QQ.define({create:function(){return E.p.none},update:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=t.effects[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;if(c.is(Zi))return c.value}}catch(l){r=!0,o=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t.docChanged?e.map(t.changes):e},provide:function(e){return E.tk.decorations.from(e)}});function _i(e){function t(e){return n.apply(this,arguments)}function n(){return(n=hi(f().mark((function t(n){var r,o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.exec("python","-c",si,n);case 2:if(!(r=t.sent).error){t.next=5;break}throw new Error("Error getting suppressed ranges: ".concat(r.error));case 5:if(r.output){t.next=7;break}return t.abrupt("return",[]);case 7:if(t.prev=7,o=JSON.parse(r.output),Array.isArray(o)){t.next=11;break}throw new Error("Expected array of ranges");case 11:return t.abrupt("return",o);case 14:return t.prev=14,t.t0=t.catch(7),t.abrupt("return",[]);case 17:case"end":return t.stop()}}),t,null,[[7,14]])})))).apply(this,arguments)}return E.lg.fromClass(function(){function e(t){mi(this,e),this.view=t,this.lastRequestRef=null,this.missedChanges=null}var n=e.prototype;return n.update=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e.transactions[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,c=!0,l=!1,s=void 0;try{for(var u,d=a.effects[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var f=u.value;if(f.is(wi))return void this.onLookupRange(f.value,e.state.doc)}}catch(p){l=!0,s=p}finally{try{c||null==d.return||d.return()}finally{if(l)throw s}}}}catch(p){n=!0,r=p}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}e.docChanged&&this.missedChanges&&(this.missedChanges=this.missedChanges.compose(e.changes))},n.onLookupRange=function(e,n){var r=this;return hi(f().mark((function o(){var i,a,c,l,s,u,d,p,h,m,v,g,b,y,x,w,k,Z,_,j,O,C,P,A,I,R,D,N,U;return f().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(c=new S.f_,l=e.from;l<=e.to;)s=n.lineAt(l),l===e.from&&c.add(s.from,s.from,E.p.widget({widget:new Si({isLoading:!0,close:function(){r.lastRequestRef=null,r.missedChanges=null,r.view.dispatch({effects:Zi.of(E.p.none)})}}),block:!0})),c.add(s.from,s.from,E.p.line({attributes:{style:"background: "+T.TV.backgroundHigher+";"}})),l=s.to+1;return u=Zi.of(c.finish()),setTimeout((function(){r.view.dispatch({effects:u})})),r.missedChanges=S.as.empty(n.length),d={},r.lastRequestRef=d,o.next=10,t(r.view.state.doc.sliceString(e.from,e.to));case 10:return p=o.sent,o.next=13,null===li.l||void 0===li.l?void 0:li.l.query({query:lo.BR,variables:{code:r.view.state.doc.sliceString(e.from,e.to),language:"python",rangesToSuppress:p}});case 13:if(h=o.sent,m="LookForErrorsResult"===(null===h||void 0===h||null===(i=h.data)||void 0===i||null===(a=i.lookForErrors)||void 0===a?void 0:a.__typename)?h.data.lookForErrors.highlights:null,d===r.lastRequestRef){o.next=17;break}return o.abrupt("return");case 17:if(v=r.missedChanges,r.lastRequestRef=null,r.missedChanges=null,null===m||void 0===m?void 0:m.length){o.next=23;break}return r.view.dispatch({effects:Zi.of(E.p.none)}),o.abrupt("return");case 23:for(g=[],b=e.map(v),g.push(E.p.widget({widget:new Si({isLoading:!1,close:function(){r.lastRequestRef=null,r.missedChanges=null,r.view.dispatch({effects:Zi.of(E.p.none)})}}),block:!0}).range(r.view.state.doc.lineAt(b.from).from)),y=b.from;y<=b.to;)x=r.view.state.doc.lineAt(y),g.push(E.p.line({attributes:{style:"background: "+T.TV.backgroundHigher+";"}}).range(x.from)),y=x.to+1;w=n.lineAt(e.from),k=w.number,Z=w.from,_=!0,j=!1,O=void 0,o.prev=29,C=m[Symbol.iterator]();case 31:if(_=(P=C.next()).done){o.next=44;break}if(0!==(A=P.value).weight){o.next=35;break}return o.abrupt("continue",41);case 35:I=1===A.start.line?e.from-Z:0,R=n.line(k+A.start.line-1),D=v.mapPos(R.from+A.start.character-1+I),N=n.line(k+A.end.line-1),U=v.mapPos(N.from+A.end.character-1+I),g.push(E.p.mark({attributes:{title:"".concat(Math.floor(A.weight),"% chance of inaccuracy"),style:"background: green; background: hsl(0, 100%, ".concat(Math.max(100-A.weight,20),"%);")}}).range(D,U));case 41:_=!0,o.next=31;break;case 44:o.next=50;break;case 46:o.prev=46,o.t0=o.catch(29),j=!0,O=o.t0;case 50:o.prev=50,o.prev=51,_||null==C.return||C.return();case 53:if(o.prev=53,!j){o.next=56;break}throw O;case 56:return o.finish(53);case 57:return o.finish(50);case 58:r.view.dispatch({effects:Zi.of(S.Xs.of(g,!0))});case 59:case"end":return o.stop()}}),o,null,[[29,46,50,58],[51,,53,57]])})))()},e}())}function ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oi(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function Ci(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Oi(i,r,o,a,c,"next",e)}function c(e){Oi(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Ti(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ji(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ji(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Pi=function(){var e=Ci(f().mark((function e(t){var n,r,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.code,r=t.language,e.next=3,null===li.l||void 0===li.l?void 0:li.l.query({query:lo.nFn,variables:{code:n,language:r}});case 3:if("ExplainCodeResult"!==(null===(o=e.sent)||void 0===o?void 0:o.data.explainCode.__typename)){e.next=6;break}return e.abrupt("return",o.data.explainCode.explanation);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Ai={js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",java:"java",go:"go"},Ii={rs:"rust",lsp:"lisp",sh:"bash",cpp:"c++",hs:"haskell",go:"go",rb:"ruby"};function Ri(e){var t=(0,ii.r6)(e);return Ai[t]?Ai[t]:Ii[t]?Ii[t]:t}function Di(e){var t=(0,ii.r6)(e);return Ai[t]?Ai[t]:"unknown"}function Ni(e){var t=e.filePath,n=e.replId,r=(0,lo.gs8)({variables:{replId:n}}).data,o=function(e,t){if(!e)return!1;var n=(0,ii.r6)(e);return!(!t&&"java"===n)&&Boolean(Ai[n])}(t,(0,x.Z)("flag-codex-java"));return"Repl"===(null===r||void 0===r?void 0:r.repl.__typename)&&r.repl.hasExplainCode&&o}var Ui=n(64758);var Bi=function(e){var t=e.children,n=e.title,o=e.newInferenceAlt,i=e.learnMoreLink,a=e.width,c=e.onRequestClose,l=e.onRequestNewInference;return(0,r.BX)($o.Z,{background:"higher",css:[j.l0.borderRadius(8),j.l0.width(a||320),{background:j.TV.backgroundHigher,boxShadow:j.TV.shadow1,borderWidth:1,borderColor:j.TV.backgroundHighest,borderStyle:"solid"}],children:[(0,r.BX)("div",{css:[j.l0.display.flex,j.l0.justify.spaceBetween,j.l0.flex.row,j.l0.rowWithGap(2),j.l0.p(8),{borderBottom:"1px solid",borderBottomColor:j.TV.backgroundHighest}],children:[(0,r.BX)("div",{css:[j.l0.display.grid,j.l0.align.center,{gridAutoFlow:"column",gridGap:j.TV.space8}],children:[(0,r.tZ)(ui.Z,{}),(0,r.tZ)("div",{css:[{color:j.TV.foregroundDefault}],children:n}),i?(0,r.tZ)("a",{href:i,target:"_blank",css:j.l0.color.foregroundDefault,children:(0,r.tZ)(un.Z,{alt:"Learn more",tooltipDelay:0,tooltipText:"This feature is powered by artificial intelligence. Click to learn more.",type:"button",children:(0,r.tZ)(di.Z,{color:j.TV.foregroundDefault})})}):null,l?(0,r.tZ)(un.Z,{alt:o||"Try again",onClick:l,type:"button",children:(0,r.tZ)(Ui.Z,{})}):null]}),(0,r.tZ)("div",{className:"right",children:(0,r.tZ)(un.Z,{alt:"Close",tooltipHidden:!0,onClick:c,type:"button",children:(0,r.tZ)(Nt.Z,{})})})]}),t]})},zi=n(24561);var Li=function(){return(0,r.tZ)("div",{css:[j.l0.p(16)],children:(0,r.BX)(zi.ZP,{viewBox:"0 0 100 10",primaryColor:"var(--background-higher)",secondaryColor:"var(--background-highest)",speed:1.5,children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"2",ry:"2",width:"100",height:"4"}),(0,r.tZ)("rect",{x:"0",y:"6",rx:"2",ry:"2",width:"33",height:"4"})]})})},Mi=n(65684);var Fi=function(e){var t=e.explanation,n=e.errorMessage,o=e.loading,i=e.codexFeedback,a=e.onRequestClose,c=e.onRequestExplainAgain,l=e.onExplainFail,s=e.onExplainSuccess,u=null;return o?u=(0,r.tZ)(Li,{}):t?u=(0,r.BX)("div",{css:[j.l0.p(8),j.l0.display.grid,{gridGap:j.TV.space8}],children:[(0,r.tZ)("pre",{css:{fontFamily:j.TV.fontFamilyCode,whiteSpace:"pre-wrap",lineHeight:j.TV.lineHeightDefault,fontSize:j.TV.fontSizeDefault,color:j.TV.foregroundDefault,backgroundColor:j.TV.backgroundHighest,padding:j.TV.space8,borderRadius:j.TV.borderRadius8},children:t}),(0,r.tZ)("div",{css:[{color:j.TV.foregroundDefault}],children:"Is this a good explanation?"}),o?null:(0,r.BX)(C.Z,{css:[j.l0.rowWithGap(8),j.l0.justify.start,j.l0.align.center],children:[i?(0,r.tZ)(sn.ZP,{disabled:!0,iconLeft:(0,r.tZ)(fi.Z,{}),onClick:function(){},small:!0,text:"Thanks!"}):(0,r.BX)(C.Z,{css:[j.l0.rowWithGap(8),j.l0.justify.start,j.l0.align.center],children:[(0,r.tZ)(sn.ZP,{text:"No",colorway:"negative",outlined:"no"!==i,onClick:l,small:!0,iconLeft:(0,r.tZ)(Nt.Z,{})}),(0,r.tZ)(sn.ZP,{text:"Yes",colorway:"positive",onClick:s,small:!0,outlined:"yes"!==i,iconLeft:(0,r.tZ)(dn.Z,{})})]}),(0,r.tZ)(Mi.Z,{feature:"Code Explanation"})]})]}):n&&(u=(0,r.tZ)("div",{css:[j.l0.p(8),j.l0.display.grid,{gridGap:j.TV.space8}],children:n})),(0,r.tZ)(Bi,{title:"Explain Code",newInferenceAlt:"Generate new explanation",learnMoreLink:"https://blog.replit.com/codex",onRequestNewInference:c,onRequestClose:a,children:u})};function Gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Xi(e,t,n[t])}))}return e}function Hi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Vi=S.Py.define({map:function(e,t){if(e)return e.map(t)}}),$i=E.tk.baseTheme({".explain-code-decoration":{background:T.TV.purpleDimmest}});function qi(e){var t=e.filePath,n=e.setExplainCodeParams,o=e.view,i=function(e){var n=e.getSelection,o=e.requestClose,i=e.onLayout;a.useLayoutEffect((function(){null===i||void 0===i||i()}),[i]);var s=function(e){var t,n,r,o,i,c,l,s,u,d,p,h=e.language,m=e.code,v=(0,xo.Z)(),g=(0,lo.LxS)({fetchPolicy:"no-cache",variables:{code:m,language:h,replId:v},skip:!h||!m,notifyOnNetworkStatusChange:!0});a.useEffect((function(){(0,wn.j)(wn.U3.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!1,language:h})}),[]);var b=Ti((0,lo.fvV)(),2),y=b[0],x=b[1],w=function(){var e=Ci(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ExplainCodeResult"===(null===(n=g.data)||void 0===n?void 0:n.explainCode.__typename)&&!g.loading&&!x.loading){e.next=3;break}return e.abrupt("return");case 3:y({variables:{input:{feedback:t,inferenceClass:lo.SgB.Explanation,inferenceId:null===(r=g.data)||void 0===r?void 0:r.explainCode.id}}}),(0,wn.j)(wn.U3.CODEX_FEEDBACK_SUBMITTED,{language:h,feedback:t,feature:"explanation"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k="ExplainCodeResult"===(null===(t=g.data)||void 0===t||null===(n=t.explainCode)||void 0===n?void 0:n.__typename)?g.data.explainCode.explanation:void 0,S="UserError"===(null===(r=g.data)||void 0===r||null===(o=r.explainCode)||void 0===o?void 0:o.__typename)||"UnauthorizedError"===(null===(i=g.data)||void 0===i||null===(c=i.explainCode)||void 0===c?void 0:c.__typename)?g.data.explainCode.message:null,Z="ExplainCodeResult"===(null===(l=g.data)||void 0===l||null===(s=l.explainCode)||void 0===s?void 0:s.__typename)&&"CodexFeedback2"===(null===(u=x.data)||void 0===u||null===(d=u.giveCodexFeedback2)||void 0===d?void 0:d.__typename)&&g.data.explainCode.id===(null===(p=x.data.giveCodexFeedback2)||void 0===p?void 0:p.id)?x.data.giveCodexFeedback2.feedback:null;return{getCodeExplanation:Pi,loading:g.loading,explanation:k,errorMessage:S,refetchExplanation:Ci(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,wn.j)(wn.U3.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!0,language:h}),e.abrupt("return",g.refetch());case 2:case"end":return e.stop()}}),e)}))),giveCodexFeedback:w,codexFeedback:Z}}({code:n(),language:Di(t)}),u=s.explanation,d=s.errorMessage,p=s.loading,h=s.refetchExplanation,m=s.codexFeedback,v=s.giveCodexFeedback,g={explanation:u,errorMessage:d,loading:p,onRequestClose:o,onRequestExplainAgain:h,codexFeedback:m,onExplainFail:function(){return v(lo.TYv.No)},onExplainSuccess:function(){return v(lo.TYv.Yes)}};return c.createPortal((0,r.tZ)("div",{css:{left:"2em",position:"fixed"},children:(0,r.tZ)(Fi,Wi({},g))}),l)},l=document.createElement("div");l.className="cm-explain-code-tooltip";var s={},u=S.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,O.j)(t,Vi,(function(e){n=e.value})),n&&!t.changes.empty&&(n=n.map(t.changes)),n},provide:function(e){return[E.hJ.compute([e],(function(t){var a=t.field(e);return a?{pos:a.from,end:a.to,create:function(){return function(e,t){var a=function(a){n({node:(0,r.tZ)(i,{getSelection:function(){return e.doc.sliceString(t.from,t.to)},requestClose:function(){o.dispatch({effects:[Vi.of(null)]}),n(null)},onLayout:a})})};return a(),s.dom=l,s.update=function(e){a((function(){(0,E.E2)(e.view)}))},s}(t,a)}}:null})),E.tk.decorations.compute([e],(function(t){var n=t.field(e);return n?E.p.set(E.p.mark({class:"explain-code-decoration"}).range(n.from,n.to)):E.p.none}))]}});return[u,$i]}function Ki(){var e,t=(0,xo.Z)(),n=(0,lo.z$4)({variables:{replId:t}}).data;return"Repl"===(null===n||void 0===n?void 0:n.repl.__typename)&&(null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.hasSearchCode)}var Yi=n(13649);function Qi(e){var t=e.activeFile,n=e.view,r=e.event,o=e.clipboardText,i=n.state.selection,a=function(){r||(i.main.empty?n.dispatch({changes:[{from:i.main.from,insert:o}]}):n.dispatch(n.state.replaceSelection(o||"")))};if(t&&"md"===(0,ii.r6)(t))if(i.ranges.length>1)a();else if(i.main.from!==i.main.to)if(o&&(0,Yi.Z)(o)){r&&r.preventDefault();var c=n.state.sliceDoc(i.main.from,i.main.to),l="[".concat(c,"](").concat(o,")");n.dispatch({changes:{from:i.main.from,to:i.main.to,insert:l}})}else a();else a();else a()}var Ji=S.Py.define(),ea=E.tk.baseTheme({".cm-tooltip.cm-generate-code-tooltip":{backgroundColor:"transparent",boxShadow:"none",border:"0 none",padding:"0px"},"& .cm-generate-code-tooltip .cm-content":{paddingBottom:"0px"}});function ta(e){var t=e.view,n=e.setGenerateCodePortalProps,r=S.QQ.define({create:function(){return null},update:function(e,r){return(0,O.j)(r,Ji,(function(o){e=o.value?function(e){return{pos:e.selection.main.head,above:!1,create:function(){var r=document.createElement("div");return r.className="cm-generate-code-tooltip",n({dom:r,onRequestClose:function(){t.dispatch({effects:Ji.of(!1)})},selectedCode:e.doc.sliceString(e.selection.main.from,e.selection.main.to)}),{dom:r,offset:{x:-14,y:5}}}}}(r.state):null})),null==e||r.changes.empty||(e.pos=r.changes.mapPos(e.pos)),e},provide:function(e){return E.hJ.compute([e],(function(t){return t.field(e)}))}});return[r,ea]}var na=S.Py.define(),ra=E.tk.baseTheme({".cm-tooltip.cm-search-code-tooltip":{backgroundColor:"transparent",boxShadow:"none",border:"0 none",padding:"0px"},"& .cm-search-code-tooltip .cm-content":{paddingBottom:"0px"}});function oa(e){var t=e.view,n=e.setSearchCodePortalProps,r=S.QQ.define({create:function(){return null},update:function(e,r){return(0,O.j)(r,na,(function(o){e=o.value?function(e){return{pos:e.selection.main.head,above:!1,create:function(){var r=document.createElement("div");return r.className="cm-search-code-tooltip",n({dom:r,onRequestClose:function(){t.dispatch({effects:na.of(!1)})},selectedCode:e.doc.sliceString(e.selection.main.from,e.selection.main.to),context:e.doc.toString()}),{dom:r,offset:{x:-14,y:5}}}}}(r.state):null})),null==e||r.changes.empty||(e.pos=r.changes.mapPos(e.pos)),e},provide:function(e){return E.hJ.compute([e],(function(t){return t.field(e)}))}});return[r,ra]}var ia=n(55877),aa=n.n(ia);function ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function la(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ca(e,t,n[t])}))}return e}var sa=S.Py.define(),ua=S.Py.define(),da=S.Py.define(),fa=S.Py.define(),pa=E.tk.baseTheme({".replit-thread-highlight":{background:T.TV.purpleDimmest}}),ha=S.QQ.define({create:function(){return{}},update:function(e,t){var n=e;return(0,O.j)(t,sa,(function(e){n=e.value})),t.changes.empty?n:n=Object.values(n).map((function(e){return la({},e,{indexStart:t.changes.mapPos(e.indexStart),indexEnd:t.changes.mapPos(e.indexEnd)})})).reduce((function(e,t){return e[t.id]=t,e}),{})}}),ma=S.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,O.j)(t,ua,(function(){var e=t.state,r=e.selection.main;n={id:aa().v4(),indexStart:r.from,indexEnd:r.empty?Math.min(r.to+1,e.doc.length):r.to}})),(0,O.j)(t,da,(function(){n=null})),null!==n&&(0,O.j)(t,sa,(function(e){if(!n)throw new Error("expected newPlaceholder");e.value[n.id]&&(n=null)})),!t.changes.empty&&n&&(n=la({},n,{indexStart:t.changes.mapPos(n.indexStart),indexEnd:t.changes.mapPos(n.indexEnd)})),n}}),va=n(93914),ga=n(71171),ba=n.n(ga),ya=n(73049);function xa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wa(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function ka(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){wa(i,r,o,a,c,"next",e)}function c(e){wa(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Sa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Za(e){var t=e.view,n=e.filePath,r=(0,h.Z)(n),o=a.useRef(null),i=a.useRef(0),c=(0,s.Z)(),l=c.anchorer,u=c.session,d=c.fs,p=Sa(a.useState(null),2),m=p[0],v=p[1],g=(0,xo.Z)(),y=Ni({filePath:n,replId:g}),x=function(e){var t,n=e.filePath,r=e.replId,o=(0,lo.$sK)({variables:{replId:r},skip:!n.endsWith(".py")}).data;return"Repl"===(null===o||void 0===o?void 0:o.repl.__typename)&&o.repl.hasExplainCode&&(null===(t=o.currentUser)||void 0===t?void 0:t.hasLookForErrors)&&n.endsWith(".py")}({filePath:n,replId:g}),k=So(),Z=Ki(),j=(0,Kn.Z)(),O=a.useCallback((function(){v(null)}),[]);a.useEffect((function(){var e=function(e){"Escape"===e.key&&v(null)};if(m)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[m]),a.useEffect((function(){if(t&&m)return t.scrollDOM.addEventListener("scroll",O),function(){t.scrollDOM.removeEventListener("scroll",O)}}),[t,m,O]);var C=(0,Yo.Z)((function(){if(t&&m){var e=t.coordsAtPos(i.current);v((function(t){return e?{x:e.left,y:e.top}:t}))}}),{type:"throttle",wait:25}),T=a.useCallback(function(){var e=ka(f().mark((function e(i){var a,c,s,p,h,m,v,g,b,y,x,w,k,S,Z;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=function(e){return m.apply(this,arguments)},m=function(){return(m=ka(f().mark((function e(i){var c,l,d,p,h,m,v,g,b;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&t){e.next=2;break}throw new Error("Expected client");case 2:return o.current&&r.notify.cancelRequest(o.current),o.current=r.generateId(),c=(0,_.s)(a.doc,s),e.next=7,i(n,c,{id:o.current,tap:(0,Cr.M)(t)});case 7:if(l=e.sent,o.current=null,!("error"in l)){e.next=11;break}throw new Error("Something went wrong fetching location: ".concat(l.error.message));case 11:if(d=l.result,!l.cancelled&&d&&0!==d.length){e.next=14;break}return e.abrupt("return");case 14:p=Sa(d,1),h=p[0],m=h.uri,v=h.range,g=v.start,b=r.documentUriToPath(m),u.updateDeeplink({path:b,line:g.line+1,col:g.character});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)},t){e.next=4;break}throw new Error("Expected view");case 4:a=t.state,c=a.selection.main,s=c.head,p=function(){return{path:n,indexStart:c.from,indexEnd:c.empty?Math.min(c.to+1,a.doc.length):c.to,otVersion:d.getOTVersion(n)}},(0,wn.j)(wn.U3.EDITOR_CONTEXT_MENU_ACTION_RAN,{action:i}),e.t0=i,e.next=e.t0===qn.D2.Cut?14:e.t0===qn.D2.Copy?18:e.t0===qn.D2.Paste?21:e.t0===qn.D2.JumpToDefinition?34:e.t0===qn.D2.JumpToTypeDefinition?39:e.t0===qn.D2.JumpToImplementation?44:e.t0===qn.D2.FindReferences?49:e.t0===qn.D2.Rename?51:e.t0===qn.D2.SelectAllOccurrences?53:e.t0===qn.D2.CodeActions?61:e.t0===qn.D2.ToggleBreakpoint?62:e.t0===qn.D2.StartThread?65:e.t0===qn.D2.ExplainCode?68:e.t0===qn.D2.GenerateCode?70:e.t0===qn.D2.SearchCode?72:e.t0===qn.D2.LookForErrors?74:e.t0===qn.D2.CopyLinkToPos?77:81;break;case 14:return v=a.doc.sliceString(c.from,c.to),(0,ai.Z)(v),t.dispatch(a.replaceSelection("")),e.abrupt("break",82);case 18:return g=a.doc.sliceString(c.from,c.to),(0,ai.Z)(g),e.abrupt("break",82);case 21:return b="",e.prev=22,e.next=25,window.navigator.clipboard.readText();case 25:b=e.sent,e.next=32;break;case 28:return e.prev=28,e.t1=e.catch(22),ci.kg.error("CodeMirror context menu paste failed",{message:e.t1.message}),e.abrupt("break",82);case 32:return Qi({activeFile:j,view:t,clipboardText:b}),e.abrupt("break",82);case 34:if(r){e.next=36;break}throw new Error("Expected client");case 36:return e.next=38,h(r.request.findDefinitions);case 38:return e.abrupt("break",82);case 39:if(r){e.next=41;break}throw new Error("Expected client");case 41:return e.next=43,h(r.request.findTypeDefinitions);case 43:return e.abrupt("break",82);case 44:if(r){e.next=46;break}throw new Error("Expected client");case 46:return e.next=48,h(r.request.findImplementations);case 48:return e.abrupt("break",82);case 49:return t.dispatch({effects:[on.of(s)]}),e.abrupt("break",82);case 51:return t.dispatch({effects:[vn.of(s)]}),e.abrupt("break",82);case 53:if(!a.selection.main.empty){e.next=58;break}if(y=a.wordAt(s)){e.next=57;break}return e.abrupt("return");case 57:t.dispatch({selection:y});case 58:return(0,Xo.tm)(t),t.focus(),e.abrupt("break",82);case 61:return e.abrupt("break",82);case 62:return x=a.doc.lineAt(s),Jr(t,x.from),e.abrupt("break",82);case 65:return l.createThread(p()),t.dispatch({effects:[ua.of(null),va.UQ.of(ba()())]}),e.abrupt("break",82);case 68:return t.dispatch({effects:Vi.of(t.state.selection.main)}),e.abrupt("break",82);case 70:return t.dispatch({effects:Ji.of(!0)}),e.abrupt("break",82);case 72:return t.dispatch({effects:na.of(!0)}),e.abrupt("break",82);case 74:return(0,wn.j)(wn.U3.CODEX_FEATURE_USED,{feature:"look-for-errors",language:"python"}),t.dispatch({effects:wi.of(t.state.selection.main)}),e.abrupt("break",82);case 77:return w=(0,_.s)(a.doc,s),k=w.line,S=w.character,Z=(0,ya.dr)({path:n,line:k+1,col:S}),(0,ai.Z)(Z),e.abrupt("break",82);case 81:throw new Error("Unexpected action: ".concat(i));case 82:case"end":return e.stop()}}),e,null,[[22,28]])})));return function(t){return e.apply(this,arguments)}}(),[t,r,n,u,l,d,j]),P=Sa(a.useState(!1),2),A=P[0],I=P[1];(0,Or.Z)({view:t,initialExtension:E.tk.updateListener.of((function(e){e.transactions.some((function(e){return e.reconfigured}))&&I("undefined"!==typeof e.view.state.field(eo,!1))}))});var R=b(r),D=a.useMemo((function(){if(!t)return[];var e=[];return R&&(R.isFindDefinitionSupported&&e.push(qn.D2.JumpToDefinition),R.isFindTypeDefinitionSupported&&e.push(qn.D2.JumpToTypeDefinition),R.isFindImplementationSupported&&e.push(qn.D2.JumpToImplementation),(R.isFindDefinitionSupported||R.isFindReferencesSupported)&&e.push(qn.D2.FindReferences),R.isRenameSupported&&e.push(qn.D2.Rename),R.isCodeActionsSupported&&e.push(qn.D2.CodeActions)),e.push(qn.D2.SelectAllOccurrences),e.push(qn.JJ),e.push(qn.D2.CopyLinkToPos),A&&e.push(qn.D2.ToggleBreakpoint),e.push(qn.D2.StartThread),x&&e.push(qn.D2.LookForErrors),y&&e.push(qn.D2.ExplainCode),k&&e.push(qn.D2.GenerateCode),Z&&e.push(qn.D2.SearchCode),e.push(qn.JJ),e.push(qn.D2.Cut),e.push(qn.D2.Copy),window.navigator.clipboard&&"readText"in window.navigator.clipboard&&e.push(qn.D2.Paste),e}),[t,R,A,y,x,k,Z]),N=(0,Or.Z)({view:t});return a.useEffect((function(){if(t){var e=D.filter((function(e){return!(0,qn.s3)(e)})).filter((function(e){return"keyboardShortcut"in qn.Wo[e]})).filter((function(e){return e!==qn.D2.Cut&&e!==qn.D2.Copy&&e!==qn.D2.Paste})).map((function(e){var t=qn.Wo[e].keyboardShortcut,n={key:t.key,preventDefault:!0,run:function(){return T(e),!0}};return t.altKey&&(n.key="Alt-".concat(n.key)),t.shiftKey&&(n.key="Shift-".concat(n.key)),t.cmdOrCtrlKey&&(n.key="Mod-".concat(n.key)),n}));return t.dispatch({effects:N.reconfigure(E.$f.of(e))}),function(){t.dispatch({effects:N.reconfigure([])})}}}),[t,T,D,N]),{onAction:T,actions:D,contextMenuCoords:m,onContextMenu:function(e){if(!(0,w.isMobile)({tablet:!1})&&t){e.preventDefault();var r=e.clientX,o=e.clientY,a=t.state.selection.main,c=t.posAtCoords({x:r,y:o}),l=t.state.doc.length,s=null===c?l:c;if(i.current=s,s<a.from||s>a.to){var u=S.jT.cursor(s);t.dispatch({selection:u})}var d=(0,ii.r6)(n);(0,wn.j)(wn.U3.EDITOR_CONTEXT_MENU_OPENED,{ext:d}),v({x:r,y:o})}},closeMenu:O,resizeRef:C}}function Ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ea(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ea(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ja(e){var t=e.view,n=e.filePath,r=e.isLoading,o=function(e){var t=e.replId,n=(0,lo._Lw)({variables:{replId:t}}).data;return"Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl.deprecatedLanguageConfig:null}({replId:(0,xo.Z)()}),i=_a(a.useState(null),2),c=i[0],l=i[1],s=(0,Or.Z)({view:t});return a.useEffect((function(){if(t&&o&&!r&&n===o.mainFile){var e=document.createElement("div");return l(e),t.dispatch({effects:s.reconfigure((0,E.W$)(e))}),function(){t.dispatch({effects:s.reconfigure([])}),l(null)}}}),[t,o,n,r,s]),c}function Oa(e){var t=e.view,n=e.line,r=e.col,o=t.state.doc,i=Math.min(n,o.lines),a=o.line(i),c=a.to,l=a.from,s=r||0,u=Math.min(l+s,c),d=S.jT.cursor(u);t.dispatch({selection:d,scrollIntoView:!0}),t.focus()}var Ca=n(6119),Ta=n(91131),Pa=n(33379);function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ra(e){return function(e){if(Array.isArray(e))return Aa(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Aa(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Da=E.tk.baseTheme({".replit-code-anchor":{background:"var(--accent-purple-dimmest)"}}),Na=S.Py.define(),Ua=S.Py.define(),Ba=S.Py.define(),za=S.Py.define(),La=function(e){var t={};return S.QQ.define({create:function(){return[]},update:function(e,t){t.changes.empty||(e=e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ia(e,t,n[t])}))}return e}({},e,{indexStart:t.changes.mapPos(e.indexStart),indexEnd:t.changes.mapPos(e.indexEnd)})})));var n=!0,r=!1,o=void 0;try{for(var i,a=function(t,n){var r=n.value;if(r.is(Na))e=r.value;else if(r.is(Ua))e=Ra(e).concat(Ra(r.value.filter((function(t){return!e.find((function(e){return e.id===t.id}))}))));else if(r.is(Ba)){var o=r.value.map((function(e){return e.id}));e=e.filter((function(e){return!o.includes(e.id)}))}else r.is(Ca.R)&&(e=Ra(e))},c=t.effects[Symbol.iterator]();!(n=(i=c.next()).done);n=!0)a(0,i)}catch(l){r=!0,o=l}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return e},provide:function(n){return[E.tk.decorations.compute([n],(function(e){var t=e.field(n);return E.p.set(t.map((function(e){return t=e.id,n=e.indexStart,r=e.indexEnd,n===r?null:E.p.mark({class:"replit-code-anchor ".concat(t),id:t}).range(n,r);var t,n,r})).filter((function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length})),!0)})),E.hJ.computeN([n],(function(r){return r.field(n).map((function(n){var r,o,i=n.id;return{pos:Math.min(n.indexStart,n.indexEnd),above:!0,create:(r=i,o=function(t){var r=document.createElement("div");r.classList.add("cm-anchor","cm-anchor-".concat(i));var o=document.createElement("div");o.classList.add("cm-anchor-portal"),o.style.position="absolute",r.appendChild(o);var a={id:i,dom:o,getEditorRight:function(){return t.dom.getBoundingClientRect().right},getContent:function(){return t.state.doc.sliceString(n.indexStart,n.indexEnd)}};return e.setAnchorPortal(a),{dom:r,update:function(){e.setAnchorPortal(a)}}},t[r]||(t[r]=o),t[r])}}))}))]}})};var Ma=n(38098),Fa=n(91898);function Ga(e){var t=e.view,n=e.filePath,r=e.isLoading,o=function(){var e=(0,a.useContext)(Fa.Z);if(!e)throw new Error("Expected codemirror state to be in codemirror state context");return e}(),i=(0,Or.Z)({view:t});(0,a.useEffect)((function(){if(t&&!r){var e,a=o.current.fileMap.get(n);if(a&&t.state.doc.eq(a.doc)){if(t.state.field(Io.cE,!1))throw new Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view");var c=[];a.foldedRanges.between(0,t.state.doc.length,(function(e,t){c.push(re.SW.of({from:e,to:t}))})),t.dispatch({effects:c,selection:a.selection}),t.scrollDOM.scrollTop=a.scrollTop,e=[Io.cE.init((function(){return a.history})),(0,Io.m8)()]}else e=(0,Io.m8)();t.dispatch({effects:i.reconfigure([e,E.tk.updateListener.of((function(e){o.current.fileMap.set(n,{history:e.state.field(Io.cE,!1),foldedRanges:(0,re.q2)(e.state),scrollTop:t.scrollDOM.scrollTop,selection:e.state.selection,doc:e.state.doc})}))])});var l=o.current.fileMap.get(n);return function(){l&&(l.scrollTop=t.scrollDOM.scrollTop),t.dispatch({effects:i.reconfigure([])})}}}),[t,n,o,r,i])}var Xa=n(46846),Wa=n(37510),Ha=/\r\n?|\n/;function Va(e){return e.replace(new RegExp(Ha,"g"),"\n")}function $a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return e.slice(t,n+1).split(/\r\n/g).length-1}function qa(e,t){var n=t,r=0,o=0;do{o=$a(e,r,n),r=n,n+=o}while(o);return n}function Ka(e,t){var n=[],r=t;return e.iterChanges((function(e,o,i,a,c){var l=[];i>0&&l.push(qa(r,i)),e<o&&l.push({d:qa(t,o)-qa(t,e)}),c.length&&l.push(c.sliceString(0)),r=(0,Wa.apply)(r,l),n=(0,Wa.compose)(n,l)})),n}function Ya(e,t){var n=[],r=0,o=0,i=!0,a=!0,c=!1,l=void 0;try{for(var s,u=e[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;if("string"===typeof d){var f=d;if(d.endsWith("\r")&&"\n"===t.slice(r,r+1)&&0===(f=d.slice(0,-1)).length)continue;if(f=Va(f),i)n.push({from:o,insert:f});else{var p=n[n.length-1];p.insert=p.insert?p.insert+f:f}i=!1}else if("number"===typeof d){var h=$a(t,r,r+d);r+=d,o+=d-h,i=!0}else if("object"===typeof d&&"number"===typeof d.d){var m=d.d;if("\r\n"===t.slice(r-1,r+1)&&(o+=1,m-=1),(m-=$a(t,r,r+d.d))>0)if(i)n.push({from:o,to:o+m});else{var v=n[n.length-1];v.insert&&!v.to?v.to=o+m:v.to&&(v.to+=m)}r+=d.d,o+=m,i=!1}}}catch(g){c=!0,l=g}finally{try{a||null==u.return||u.return()}finally{if(c)throw l}}return n}var Qa=S.q6.define();function Ja(e,t){var n=t;return E.tk.updateListener.of((function(t){if(t.docChanged){var r=[],o=!0,i=!1,a=void 0;try{for(var c,l=t.transactions[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var s=c.value,u=Ka(s.changes,n);n=(0,Wa.apply)(n,u),s.annotation(S.YW.remote)||s.annotation(Qa)||(r=(0,Wa.compose)(r,u))}}catch(d){i=!0,a=d}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}r.length&&e(r,n)}}))}var ec=S.QQ.define({create:function(){return 0},update:function(e,t){var n=t.annotation(Qa);return n?n.version:e}}),tc=n(50658);function nc(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function rc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){nc(i,r,o,a,c,"next",e)}function c(e){nc(i,r,o,a,c,"throw",e)}a(void 0)}))}}function oc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){oc(e,t,n[t])}))}return e}function ac(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=n[0],o=n[n.length-1],i=new Set(n.map((function(e){return e.userId}))),a=new Map(n.map((function(e){return[e.userId,e.version]})));return{firstKnownOp:r,recentKnownOp:o,receivedLocalOp:e,receivedRemoteOp:t,clientKnownPlayers:i.size,hasPlayerZero:i.has(0),knownUserIds:i,recentVersionByUserId:a}}function cc(e){var t=e.view,n=e.fs,r=e.filePath,o=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rc(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));if(!h.current.has(r)&&t){var i=t.state.doc.toString(),a=e===i;a||(h.current.add(r),o().then((function(t){ci.kg.error("Mismatch between otClient and codemirror",ic({otcrlf:e.indexOf("\r")>-1,ot:e,cm:i,path:r,changeSource:n},t))})).catch((function(e){er.Tb(e),ci.kg.error("Mismatch between otClient and CodeMirror, but I swallowed up an error and lost all the metadata, sorry.",{err:e})})))}},i=(0,a.useState)(null),c=i[0],l=i[1],s=(0,ir.Z)(),u=(0,a.useRef)({local:0,codemirror:0,container:0}),d=(0,a.useRef)(Date.now()),p=(0,Or.Z)({view:t}),h=(0,a.useRef)(new Set),m=(0,tc.Z)().trackTimeToLoadFileEnd,v=(0,a.useRef)("");(0,a.useEffect)((function(){if(t&&n&&r){var e=n.watchOtFile(r,{onChange:function(){var e=rc(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.latestContent,v.current=n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return e}}),[t,r,n]);var g=(0,a.useRef)(),b=(0,a.useRef)();return(0,a.useEffect)((function(){if(t){var e="",i=n.watchOtFile(r,{onReady:function(i){var a=i.initialContent,c=i.fetchOps,s=i.writeOp,h=i.version;g.current=c,b.current=h,m(r),u.current.codemirror++,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:Va(a.toString())},annotations:[S.YW.addToHistory.of(!1),S.YW.remote.of(!0)]}),t.dispatch({effects:p.reconfigure([ec.init((function(){return h})),Ja((function(t,i){e=i,s(t),u.current.codemirror++,o(v.current,"CODEMIRROR",rc(f().mark((function e(){var o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.getOTVersion(r),e.t0=ic,e.t1={origin:"view-writer",readyVersion:h,knownVersion:o,countOpsSinceLoad:u.current,timeInitialized:d.current},e.t2=ac,e.t3=t,e.next=7,c(1,o);case 7:return e.t4=e.sent,e.t5=(0,e.t2)(e.t3,null,e.t4),e.abrupt("return",(0,e.t0)(e.t1,e.t5));case 10:case"end":return e.stop()}}),e)}))))}),a.toString())])}),e=a.toString(),l(r)},onChange:function(i){var a=i.op,c=i.changeSource,l=i.version,s=i.latestContent;t.dispatch(function(e){var t=e.op,n=e.version,r=e.changeSource;return{changes:Ya(t,e.replitDoc),annotations:[S.YW.remote.of(r===Xa.Fl.Container),S.YW.addToHistory.of(r===Xa.Fl.Local),Qa.of({op:t,version:n,changeSource:r})]}}({op:a,changeSource:c,version:l,replitDoc:e})),e=s,"LOCAL"===c?u.current.local++:"CONTAINER"===c&&u.current.container++,o(s,c,rc(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.getOTVersion(r),e.t0=ic,e.t1={origin:"fs-change",changeVersion:l,readyVersion:b.current,knownVersion:t,countOpsSinceLoad:u.current,timeInitialized:d.current},e.t2=ac,e.t3=a,!g.current){e.next=11;break}return e.next=8,g.current(1,t);case 8:e.t4=e.sent,e.next=14;break;case 11:return e.next=13,Promise.resolve([]);case 13:e.t4=e.sent;case 14:return e.t5=e.t4,e.t6=(0,e.t2)(null,e.t3,e.t5),e.abrupt("return",(0,e.t0)(e.t1,e.t6));case 17:case"end":return e.stop()}}),e)}))))},onError:function(){t.dispatch({effects:p.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:p.reconfigure([])})}});return function(){i(),t.dispatch({effects:[p.reconfigure([])]}),s.current&&l(null)}}}),[t,r,n,s,p]),{loadedFile:c}}var lc=n(49337);function sc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){uc(e,t,n[t])}))}return e}function fc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return sc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pc={"#1BC47D":"rgba(27, 196, 125, 0.2)","#EF5533":"rgba(239, 85, 51, 0.2)","#18A0FB":"rgba(24, 160, 251, 0.2)","#FFC700":"rgba(255, 199, 0, 1)","#907CFF":"rgba(144, 124, 255, 0.2)","#00B5CE":"rgba(0, 181, 206, 0.2)","#EE46D3":"rgba(238, 70, 211, 0.2)"};var hc=S.Py.define(),mc=S.Py.define(),vc=S.Py.define();function gc(e){return{pos:e.position,strictSide:!0,above:!0,create:e.createCursorTooltipFunction}}var bc=S.QQ.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){var n={},r=!0,o=!1,i=void 0;try{for(var a,c=Object.values(e)[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value;n[l.id]=dc({},l,{position:t.changes.mapPos(l.position),selectionStart:t.changes.mapPos(l.selectionStart),selectionEnd:t.changes.mapPos(l.selectionEnd)})}}catch(m){o=!0,i=m}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}e=n}var s=!0,u=!1,d=void 0;try{for(var f,p=function(n,r){var o=r.value;if(o.is(Ca.R)&&(e=dc({},e)),o.is(hc)&&o.value.position<=t.newDoc.length&&((e=dc({},e))[o.value.id]=dc({},o.value,{createCursorTooltipFunction:function(e){var t=o.value,n=document.createElement("div");n.textContent=t.username,n.style.backgroundColor=t.color.cursor,n.style.color="white",n.classList.add("multiplayer-label");var r=document.createElement("div");r.style.backgroundColor=t.color.cursor,r.classList.add("multiplayer-cursor");var i=document.createElement("div");return i.classList.add("multiplayer-tooltip"),i.appendChild(r),i.appendChild(n),{dom:i,overlap:!0,positioned:function(){r.style.height=e.defaultLineHeight+"px"}}}})),o.is(mc)&&(e=dc({},e),o.is(mc)&&delete e[o.value]),o.is(vc)){e=dc({},e);var i=!0,a=!1,c=void 0;try{for(var l,s=Object.entries(e)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=fc(l.value,2),d=u[0];u[1].username===o.value&&delete e[d]}}catch(m){a=!0,c=m}finally{try{i||null==s.return||s.return()}finally{if(a)throw c}}}},h=t.effects[Symbol.iterator]();!(s=(f=h.next()).done);s=!0)p(0,f)}catch(m){u=!0,d=m}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return e},provide:function(e){return[E.hJ.computeN([e],(function(t){return Object.values(t.field(e)).map(gc)})),E.tk.decorations.computeN([e],(function(t){var n=t.field(e);return Object.values(n).map((function(e){var t=e.selectionStart<e.selectionEnd?e.selectionStart:e.selectionEnd,n=e.selectionStart>e.selectionEnd?e.selectionStart:e.selectionEnd;return t===n?null:E.p.set(E.p.mark({attributes:{style:"background-color: ".concat(e.color.selection,"; display: inline-block;")},cursor:e}).range(t,n))})).filter((function(e){return null!==e}))}))]}});function yc(e){return E.tk.updateListener.of((function(t){var n=t.state.selection;n!==t.startState.selection&&(t.transactions.every((function(e){return e.annotation(S.YW.remote)}))||e(n.ranges.map((function(e){var n=t.state.doc.lineAt(e.head);return{position:e.head,line:n.number,column:e.head-n.from+1,selectionStart:e.from,selectionEnd:e.to}})),n.mainIndex))}))}function xc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wc(e){var t=e.view,n=e.presence,r=e.session,o=e.fs,i=e.filePath,c=(0,a.useState)(null),l=c[0],s=c[1],u=(0,lc.Z)({presence:n}),d=(0,a.useRef)({}),f=(0,ir.Z)();(0,a.useEffect)((function(){var e=u.reduce((function(e,t){return t.username&&t.color?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xc(e,t,n[t])}))}return e}({},e,xc({},t.username,t.color)):e}),{});d.current=e}),[u]);var p=(0,Or.Z)({view:t});return(0,a.useEffect)((function(){if(t){var e=n.onUserLeave((function(e){t.dispatch({effects:vc.of(e.username)})})),a=o.watchOtFile(i,{onReady:function(e){var n=e.updateSelections;t.dispatch({effects:p.reconfigure([bc,yc((function(e,t){n(e);var o=e[t];o&&r.setCursorPosition({column:o.column,lineNumber:o.line,offset:o.position})}))])}),s(i)},onCursor:function(e){var n=function(e){var t,n=e.cursor,r=e.usernameColorsMap,o=null===(t=n.user)||void 0===t?void 0:t.name;if(o){var i,a=n.id,c=n.position,l=n.selectionStart,s=n.selectionEnd,u=r[o];if(u&&a&&"number"===typeof c&&"number"===typeof l&&"number"===typeof s)return hc.of({id:a,username:o,position:c,color:{cursor:u,selection:(i=u,pc[i]||"")},selectionStart:l,selectionEnd:s})}}({cursor:e,usernameColorsMap:d.current});n&&t.dispatch({effects:n})},onRemoveCursor:function(e){t.dispatch({effects:mc.of(e)})},onError:function(){t.dispatch({effects:p.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:p.reconfigure([])})}});return function(){e(),a(),t.dispatch({effects:p.reconfigure([])}),f.current&&s(null)}}}),[t,i,o,n,r,p]),{loadedFile:l}}var kc=n(39550);function Sc(e){var t=e.view,n=e.presence,r=e.session,o=e.fs,i=e.filePath,c=cc({view:t,fs:o,filePath:i}).loadedFile,l=wc({view:t,fs:o,filePath:i,presence:n,session:r}).loadedFile;!function(e){var t=e.view,n=(0,s.Z)().presence,r=(0,kc.Z)(),o=(0,Or.Z)({view:t});a.useEffect((function(){if(r&&t){var e=function(){n.getFollowedUser()&&n.unfollowUser()};return t.dispatch({effects:o.reconfigure(E.tk.domEventHandlers({wheel:e,keydown:function(t){"Control"!==t.key&&"Meta"!==t.key&&e()},click:e}))}),function(){t.dispatch({effects:o.reconfigure([])})}}}),[r,t,n,o]);var i=(0,Or.Z)({view:t});a.useEffect((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t){var n=S.jT.cursor(e);t.dispatch({effects:[E.tk.scrollIntoView(n,{x:"center",y:"center"})]})}};if(t&&r){var n=t.state.field(bc,!1);if(n){var o=Object.values(n).find((function(e){return e.username===r.username}));o&&e(o.position)}return t.dispatch({effects:i.reconfigure(E.tk.updateListener.of((function(t){var n,o=!0,i=!1,a=void 0;try{for(var c,l=t.transactions[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var s=c.value,u=!0,d=!1,f=void 0;try{for(var p,h=s.effects[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var m=p.value;m.is(hc)&&m.value.username===r.username&&(n=m.value)}}catch(v){d=!0,f=v}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}}}catch(v){i=!0,a=v}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}n&&e(n.position)})))}),function(){t.dispatch({effects:i.reconfigure([])})}}}),[t,r,i])}({view:t});var u=i!==c||i!==l,d=(0,Or.Z)({view:t});return(0,a.useEffect)((function(){t&&t.dispatch({effects:d.reconfigure([E.tk.editable.of(!u),S.yy.readOnly.of(u)])})}),[t,u,d]),{isLoading:u}}var Zc=n(12603),Ec=n(56718),_c=n(43421);function jc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return jc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Tc=[{img:"/public/images/kaboomdraw/rect.png",code:"\ndrawRect({\n\tpos: vec2(80, 80),\n\twidth: 120,\n\theight: 80,\n\tcolor: rgb(250, 242, 164),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/triangle.png",code:"\ndrawTriangle({\n\tpos: vec2(100, 100),\n\tp1: vec2(0, -48),\n\tp2: vec2(-60, 48),\n\tp3: vec2(60, 48),\n\tcolor: rgb(164, 250, 204),\n})\n  ".trim()},{img:"/public/images/kaboomdraw/circle.png",code:"\ndrawCircle({\n\tpos: vec2(100, 100),\n\tradius: 48,\n\tcolor: rgb(181, 164, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/ellipse.png",code:"\ndrawEllipse({\n\tpos: vec2(120, 100),\n\tradiusX: 64,\n\tradiusY: 40,\n\tcolor: rgb(164, 209, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/polygon.png",code:"\ndrawPolygon({\n\tpos: vec2(100, 100),\n\tpts: [\n\t\tvec2(0, -48),\n\t\tvec2(-64, 0),\n\t\tvec2(-32, 64),\n\t\tvec2(32, 64),\n\t\tvec2(64, 0),\n\t],\n\tcolor: rgb(250, 164, 226),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/text.png",code:'\ndrawText({\n\ttext: "hi",\n\tpos: vec2(60, 60),\n})\n    '.trim()}],Pc=function(e){var t=e.img,n=e.code,o=Cc((0,_c.c)({item:{type:Ec.z.Code,code:n},type:Ec.z.Code}),2)[1];return(0,r.tZ)("img",{ref:o,src:t,css:[j.l0.p(12),{userDrag:"none",height:"100%",cursor:"pointer",transition:"0.1s transform",":hover":{transform:"scale(1.2)"}}]})},Ac=function(){return(0,r.tZ)(C.Z,{css:[j.l0.flex.row,j.l0.justify.spaceEvenly,j.l0.backgroundColor.backgroundHigher,j.l0.borderRadius(8),j.l0.width("calc(100% - 32px)"),j.l0.height("64px"),j.l0.position.absolute,j.l0.overflow("scroll"),{zIndex:5,left:16,bottom:16,border:"solid 1px var(--outline-dimmest)"}],children:Tc.map((function(e){return(0,r.tZ)(Pc,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Oc(e,t,n[t])}))}return e}({},e),e.img)}))})};var Ic=n(62808);function Rc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Rc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Nc=RegExp("vec2\\((?<x>-?\\b\\d+\\.?\\d*\\b)\\s*(,\\s*(?<y>-?\\b\\d+\\.?\\d*\\b))?\\)"),Uc=RegExp("rgb\\((?<r>\\d+)\\s*,\\s*(?<g>\\d+)\\s*,\\s*(?<b>\\d+)\\)"),Bc={regexp:/-?\b\d+\.?\d*\b/g,cursor:"ew-resize",onDrag:function(e,t,n){var r=Number(e)+n.movementX;isNaN(r)||t(r.toString())}},zc={regexp:/true|false/g,cursor:"pointer",onClick:function(e,t){switch(e){case"true":return t("false");case"false":return t("true")}}},Lc={regexp:/vec2\(-?\b\d+\.?\d*\b\s*(,\s*-?\b\d+\.?\d*\b)?\)/g,cursor:"move",onDrag:function(e,t,n){var r,o,i=Nc.exec(e),a=Number(null===i||void 0===i||null===(r=i.groups)||void 0===r?void 0:r.x),c=Number(null===i||void 0===i||null===(o=i.groups)||void 0===o?void 0:o.y);isNaN(a)||(isNaN(c)&&(c=a),t("vec2(".concat(a+n.movementX,", ").concat(c+n.movementY,")")))}},Mc={regexp:/rgb\(.*\)/g,cursor:"pointer",onClick:function(e,t){var n,r,o,i=Uc.exec(e),a=Number(null===i||void 0===i||null===(n=i.groups)||void 0===n?void 0:n.r),c=Number(null===i||void 0===i||null===(r=i.groups)||void 0===r?void 0:r.g),l=Number(null===i||void 0===i||null===(o=i.groups)||void 0===o?void 0:o.b),s=document.createElement("input");s.type="color",isNaN(a+c+l)||(s.value=function(e,t,n){return"#"+e.toString(16)+t.toString(16)+n.toString(16)}(a,c,l)),s.addEventListener("input",(function(e){var n=e.target;if(n.value){var r=Dc(function(e){var t=parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]}(n.value),3),o=r[0],i=r[1],a=r[2];t("rgb(".concat(o,", ").concat(i,", ").concat(a,")"))}})),s.click()}},Fc={regexp:/https?:\/\/[^\s)"]+/g,cursor:"pointer",onClick:function(e){(0,Yi.Z)(e)&&window.open(e,"_blank")}};var Gc=n(51739),Xc=n(42166),Wc=n(96076);function Hc(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function Vc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Hc(i,r,o,a,c,"next",e)}function c(e){Hc(i,r,o,a,c,"throw",e)}a(void 0)}))}}var $c=RegExp("_(?<num>\\d+)$");function qc(e,t){return Kc.apply(this,arguments)}function Kc(){return(Kc=Vc(f().mark((function e(t,n){var r,o,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,ii.Il)(n),e.next=3,t.readDir(r||".");case 3:if(!(o=e.sent).error){e.next=6;break}return e.abrupt("return",n);case 6:return a=(i=function(e){if(o.children.find((function(t){return"FILE"===t.type&&t.filename===e}))){var t,n=(0,ii.eb)(e),r=(0,ii.r6)(e),a=n.match($c);if(null===a||void 0===a||null===(t=a.groups)||void 0===t?void 0:t.num){var c=Number(a.groups.num);return i("".concat(n.replace($c,""),"_").concat(c+1,".").concat(r))}return i("".concat(n,"_2.").concat(r))}return e})((0,ii.UO)(n)),e.abrupt("return",r?r+"/"+a:a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yc=n(93770);function Qc(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}var Jc=function(){var e,t=(e=f().mark((function e(t,n,r){var o,i,a,c,l,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=encodeURI(t.name),i=(0,ii.Il)(r),e.next=4,qc(n,i?i+"/"+o:o);case 4:return a=e.sent,e.next=7,(0,Wc.pV)(t);case 7:return c=e.sent,e.next=10,n.writeFile(a,Yc.Z.from(c));case 10:return l=(0,ii.eb)(t.name),s=(0,ii.UO)(a),e.abrupt("return","![".concat(l,"](").concat(s,")"));case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Qc(i,r,o,a,c,"next",e)}function c(e){Qc(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}();function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return el(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return el(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nl(e){return(nl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rl(e,t){return!t||"object"!==il(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ol(e,t){return(ol=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var il=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function al(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nl(e);if(t){var o=nl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rl(this,n)}}var cl=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ol(e,t)}(n,e);var t=al(n);function n(e,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this)).src=e,o.pos=r,o}var r=n.prototype;return r.eq=function(e){return this.src===e.src&&this.pos===e.pos},r.toDOM=function(){var e=document.createElement("img");return e.src=this.src,e.dataset.pos=this.pos.toString(),e.style.maxHeight="64px",e.style.maxWidth="256px",e},r.ignoreEvent=function(){return!1},n}(E.l9),ll=/"data:image\/\w+;base64,[^"\s]+"/g,sl=Number.MAX_VALUE,ul=E.lg.define((function(e){var t=new E.Y1({regexp:ll,decoration:function(e,t,n){if(void 0===e[0])throw new Error("Failed to match image");var r=e[0].substring(1,e[0].length-1);return E.p.replace({widget:new cl(r,n)})},maxLength:sl});return{matcher:t,deco:t.createDeco(e),update:function(e){e.docChanged&&(this.deco=t.updateDeco(e,this.deco))}}}),{decorations:function(e){return e.deco},provide:function(e){return E.tk.atomicRanges.of((function(t){var n=t.plugin(e);return n?n.deco:E.p.none}))}});var dl=n(35932);function fl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return fl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ml(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return hl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var vl=n(46829),gl=n(96486);var bl=n(74115);function yl(e){var t=e.onComplete,n=e.onEscape,r=null,o=null;return E.tk.domEventHandlers({touchstart:function(e){o=null,r=e.targetTouches[0].clientX},touchmove:function(e){o=e.targetTouches[0].clientX},touchend:function(e,i){if(r&&o)return r-o<-50&&t(i),n(i),!0}})}function xl(e){var t;return(null===(t=e.match(/^\s*/))||void 0===t?void 0:t[0].length)||0}function wl(e,t){var n=xl(e.doc.lineAt(e.selection.main.head).text),r=t.split("\n"),o=r[1]&&xl(r[1])===n?r.findIndex((function(e,t){return t>0&&xl(e)<n})):r.findIndex((function(e,t){return t>0&&xl(e)<=n}));return-1===o?r.length>15?r.slice(0,15).join("\n"):t:r.slice(0,o+1).join("\n")}function kl(e,t){var n=e.doc.lineAt(e.selection.main.head);if(e.doc.sliceString(e.selection.main.head,n.to).replace(/[\s)\]}"'`]/g,"").length)return!1;var r="";if(t.iterChanges((function(e,t,n,o,i){r=i.toString()})),!r)return!1;if(/\n\s*\n/.test(r)||[":","(","[","{",'"',"'"," "].includes(r[0]))return!0;var o=(0,re.qz)(e),i=o.resolveInner(e.selection.main.head);return"Script"===i.type.name&&(i=o.resolveInner(e.selection.main.head-1)),!0}function Sl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zl(e){return(Zl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function El(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Sl(e,t,n[t])}))}return e}function _l(e,t){return!t||"object"!==Ol(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jl(e,t){return(jl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ol=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Cl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zl(e);if(t){var o=Zl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _l(this,n)}}var Tl=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jl(e,t)}(n,e);var t=Cl(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this)).code=e,r}var r=n.prototype;return r.eq=function(e){return e.code===this.code},r.toDOM=function(){var e=document.createElement("span");return e.className="gray-text",e.innerText=this.code,e},r.updateDOM=function(e){return e.innerText=this.code,!0},r.ignoreEvent=function(){return!1},n}(E.l9);function Pl(e,t){return E.p.widget({widget:new Tl(e),side:1}).range(t)}var Al=E.tk.baseTheme({".gray-text":{color:T.TV.foregroundDimmest}}),Il=new Set(["()","[]","{}",'""',"''"]);function Rl(e,t){var n=e.selection.main.head;if(null==t)return null;var r={activeTextCursor:0,activeTextIndex:0,texts:[{text:t,startPos:n}]},o=(0,re.qz)(e).resolveInner(n),i=function(){if("String"===o.type.name)return{from:o.to-1,to:o.to,bracket:e.doc.sliceString(o.to-1,o.to)};var t,r=null!==(t=(0,re.Um)(e,n-1,1))&&void 0!==t?t:(0,re.Um)(e,n,1);return(null===r||void 0===r?void 0:r.end)?El({},r.end,{bracket:e.doc.sliceString(r.end.from,r.end.to)}):void 0}();if(!i)return r;var a=e.update({changes:{from:i.from,to:e.doc.length,insert:t}}).state,c=function(){var e=(0,re.Um)(a,n-1,1);if(!(null===e||void 0===e?void 0:e.end)){var t=function(e,t){var n=-1;for(;-1!==(n=e.indexOf(t,n+1));)if("\\"!==e[n-1])return n;return-1}(a.sliceDoc(n),i.bracket);return-1===t?void 0:{from:n+t,to:n+t+1}}return e.end}();if(!c)return r;var l=c.from-n;return{activeTextCursor:0,activeTextIndex:0,texts:[{text:t.slice(0,l),startPos:n,endBracket:i.bracket},{text:t.slice(l+i.bracket.length),startPos:i.to}]}}function Dl(e){var t=e.setCodeSuggestion,n=e.fetchCodeSuggestion,r=S.Py.define(),o=S.QQ.define({create:function(){return null},update:function(e,n){var o=!0,i=!1,a=void 0;try{for(var c,l=n.effects[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var s=c.value;s.is(r)?e=s.value:s.is(t)&&(e=Rl(n.startState,s.value))}}catch(u){i=!0,a=u}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return e},provide:function(e){return E.tk.decorations.from(e,(function(e){return function(){if(!e)return E.p.none;var t=e.activeTextIndex,n=e.activeTextCursor,r=e.texts.map((function(e,r){var o=e.text,i=e.startPos;return r<t||!o?null:r===t?Pl(o.slice(n),i+n):Pl(o,i)})).filter(Boolean);return E.p.set(r)}}))}}),i=E.tk.updateListener.of((function(e){var t=e.view;t.state.field(o)&&e.state.selection.main.empty||(e.docChanged?t.dispatch({effects:[r.of(null),n.of(kl(t.state,e.changes))]}):e.selectionSet&&t.dispatch({effects:[r.of(null),n.of(!1)]}))})),a=S.yy.transactionExtender.of((function(e){var t=e.startState.field(o);if(!t)return null;var i=[];return e.isUserEvent("delete.backward")?i.push(function(e){var t=e.activeTextCursor,n=e.activeTextIndex,o=e.texts;if(t>0)return r.of(El({},e,{activeTextCursor:t-1,texts:o.map((function(e,t){return t>n?El({},e,{startPos:e.startPos-1}):e}))}));if(0===n)return r.of(null);var i,a=o.map((function(e,t){return t<n-1?e:t===n-1?(i=e.text.length,El({},e,{text:e.text+(e.endBracket||"")+o[n].text,endBracket:o[n].endBracket})):t===n?null:El({},e,{startPos:e.startPos-1})})).filter(Boolean);return r.of(El({},e,{activeTextIndex:n-1,activeTextCursor:i,texts:a}))}(t)):e.isUserEvent("input")&&e.changes.iterChanges((function(o,a,c,l,s){i=i.concat(function(e,t,o,i){var a,c=t.activeTextIndex,l=t.activeTextCursor,s=t.texts,u=s[c],d=u.text.slice(l);if(u.text[l]===i[0]&&Il.has(i)){var f=i[1],p=e.update({changes:{from:o,insert:u.text.slice(l)}}).state,h=(0,re.Um)(p,o,1);if(!(null===h||void 0===h?void 0:h.end))return null;var m=h.end.to-u.startPos,v=[{text:u.text.slice(0,m-1),endBracket:f,startPos:u.startPos},{text:u.text.slice(m),startPos:o+i.length,endBracket:u.endBracket}];return r.of(El({},t,{activeTextCursor:l+1,texts:s.flatMap((function(e,t){return t===c?v:t>c?El({},e,{startPos:e.startPos+i.length}):e}))}))}if(/^\n\s+\n\s*$/.test(i)&&(a=i.match(/^\n(\s+)$/))){var g=a[1].length;return r.of(El({},t,{activeTextCursor:l+i.length-1,texts:s.map((function(e,t){return t>c?El({},e,{startPos:e.startPos+g+1}):e}))}))}return d.startsWith(i)?r.of(El({},t,{activeTextCursor:l+i.length,texts:s.map((function(e,t){return t>c?El({},e,{startPos:e.startPos+i.length}):e}))})):i?[r.of(null),n.of(!0)]:null}(e.state,t,c,s.toString()))})),(i=i.filter(Boolean)).length?{effects:i}:null})),c=E.tk.inputHandler.of((function(e,t,n,i){var a=e.state.field(o);if(!a)return!1;var c=a.activeTextIndex,l=a.activeTextCursor,s=a.texts[c];return s.text.length===l&&i===s.endBracket&&e.dispatch({effects:r.of(El({},a,{activeTextCursor:0,activeTextIndex:c+1}))}),!1})),l=[i,a,o,Al,S.Wl.high(c)];return{grayTextState:o,grayTextExtension:l}}function Nl(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function Ul(e){var t,n=e.path,r=e.suggestCode,o=S.Py.define(),i=S.Py.define(),a=Dl({setCodeSuggestion:i,fetchCodeSuggestion:o}),c=a.grayTextState,l=a.grayTextExtension,s=function(){var e;return{abort:function(){null===e||void 0===e||e.abort()},requestSignal:function(){var t=new AbortController;return null===e||void 0===e||e.abort(),e=t,t.signal}}}(),u=(0,gl.debounce)(function(){var e,n=(e=f().mark((function e(n){var o,a,c,l,u,d,p,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.state,a=o.doc,c=o.selection,0!==(l=c.main.head)){e.next=4;break}return e.abrupt("return");case 4:if((u=a.sliceString(0,l))&&!(u.length<4)){e.next=7;break}return e.abrupt("return");case 7:return t=(0,bl.Fz)(),e.prev=8,e.next=11,r({code:u,suffix:a.sliceString(l),signal:s.requestSignal()});case 11:if(null===(d=e.sent)||void 0===d?void 0:d.trim()){e.next=14;break}return e.abrupt("return");case 14:if((p=wl(n.state,d)).length){e.next=17;break}return e.abrupt("return");case 17:n.dispatch({effects:i.of(p)}),e.next=26;break;case 20:if(e.prev=20,e.t0=e.catch(8),"AbortError"!==(null===(h=e.t0)||void 0===h?void 0:h.name)){e.next=25;break}return e.abrupt("return");case 25:er.Tb(e.t0);case 26:case"end":return e.stop()}}),e,null,[[8,20]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Nl(i,r,o,a,c,"next",e)}function c(e){Nl(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}(),125),d=function(e){var r=e.state,o=r.field(c);if(!o)return!1;(0,wn.j)(wn.U3.CODE_SUGGESTION_USED,{type:"suggestionAccepted",language:Di(n),engine:t});var a=r.changes(o.texts.slice(o.activeTextIndex).map((function(e,t){return{from:0===t?e.startPos+o.activeTextCursor:e.startPos,insert:0===t?e.text.slice(o.activeTextCursor):e.text}}))),l=0;return a.iterChangedRanges((function(e,t,n,r){l=r})),e.dispatch({changes:a,selection:{anchor:l},scrollIntoView:!0,sequential:!0,effects:i.of(null)}),(0,Z._B)(e),!0},p=function(e){var r=e.state,o=e.dispatch;return null!=r.field(c)&&((0,wn.j)(wn.U3.CODE_SUGGESTION_USED,{type:"suggestionDismissed",language:Di(n),engine:t}),o(r.update({effects:i.of(null)})),s.abort(),!0)};return[S.Wl.high(E.$f.of([{key:"Tab",run:d},{key:"Escape",run:p}])),E.tk.updateListener.of((function(e){(0,O.j)(e,o,(function(t){var n;t.value?(n=e.view,s.abort(),u(n)):s.abort()}))})),l,yl({onComplete:d,onEscape:p})]}var Bl=n(15770);function zl(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}var Ll=new Set(["bash","c","c#","c++","go","haskell","java","javascript","json","kotlin","lisp","php","python","ruby","rust","typescript"]);function Ml(e){var t=e.filePath,n=e.view,r=(0,xo.Z)(),o=(0,vl.useApolloClient)(),i=Ri(t),c=(0,yt.c)("flag-code-suggestion"),l=(0,Or.Z)({view:n}),s=(0,a.useMemo)((function(){return new Set}),[]);(0,a.useEffect)((function(){return function(){s.forEach((function(e){return e.unsubscribe()}))}}),[s]),(0,a.useEffect)((function(){Bl.x.toggle(Boolean(c.enabled))}),[c.enabled]),(0,a.useEffect)((function(){if(n&&c.enabled&&Ll.has(i)){var e=function(){var e,n=(e=f().mark((function e(n){var a,c,l,u,d,p,h,m,v;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.code,c=n.suffix,l=n.signal,a&&(0,bl.vj)()){e.next=3;break}return e.abrupt("return",null);case 3:return u=(0,bl.Fz)(),d=ci.kg.timeStart({language:i,engine:u,replId:r,codeLength:a.length,suffixLength:c.length}),p={language:i,code:a,suffix:c,replId:r,filePath:t,engine:u},h=Bl.x.add(p),m=o.watchQuery({context:{fetchOptions:{signal:l}},query:lo.sHW,notifyOnNetworkStatusChange:!0,variables:{input:p}}),e.next=10,new Promise((function(e,t){var n=m.subscribe({next:function(t){return e(t.data.suggestCode)},error:function(e){return t(e)},complete:function(){n.unsubscribe(),s.delete(n)}});s.add(n),l.addEventListener("abort",(function(){s.delete(n),n.unsubscribe(),t(new DOMException(void 0,"AbortError"))}))}));case 10:if(v=e.sent,Bl.x.complete(h,v),"SuggestCodeResult"!==v.__typename){e.next=17;break}return d("code suggestion",{type:"success"}),e.abrupt("return",v.code);case 17:throw d("code suggestion",{type:"failure"}),new Error(v.message);case 19:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){zl(i,r,o,a,c,"next",e)}function c(e){zl(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}();return n.dispatch({effects:l.reconfigure(Ul({path:t,suggestCode:e}))}),function(){n.dispatch({effects:l.reconfigure([])})}}}),[n,c,l,t,o,i,r,s])}var Fl=n(38880),Gl=n(428),Xl=n(19689),Wl=n(34996);function Hl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Hl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $l(e){var t=e.inferenceId,n=e.language,o=e.inferenceClass,i=Vl((0,lo.dE9)(),2),a=i[0],c=i[1],l=c.data,s=c.error,u=c.called,d=function(e){o===lo.SgB.Generation?(0,wn.j)(wn.U3.CODEX_FEEDBACK_SUBMITTED,{feedback:e,language:n,feature:"generation"}):(0,wn.j)(wn.U3.SEMANTIC_SEARCH_FEEDBACK_SUBMITTED,{feedback:e,language:n,feature:"search"}),a({variables:{input:{feedback:e,inferenceClass:o,inferenceId:t}}})};return(0,r.tZ)(T.G7,{css:[T.l0.rowWithGap(16),T.l0.justify.start,T.l0.align.center,T.l0.pt(12)],children:u&&"NotFoundError"!==(null===l||void 0===l?void 0:l.giveCodexFeedback2.__typename)&&"UnauthorizedError"!==(null===l||void 0===l?void 0:l.giveCodexFeedback2.__typename)&&!s?(0,r.tZ)(T.zx,{disabled:!0,iconLeft:(0,r.tZ)(fi.Z,{}),onClick:function(){},small:!0,text:"Thanks!"}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(T.xv,{variant:"small",children:"Is this code valuable?"}),(0,r.BX)(T.G7,{css:[T.l0.rowWithGap(8),T.l0.justify.start,T.l0.align.center],children:[(0,r.tZ)(T.zx,{text:"Yes",colorway:"positive",outlined:!0,onClick:function(){return d(lo.TYv.Yes)},small:!0,iconLeft:(0,r.tZ)(dn.Z,{})}),(0,r.tZ)(T.zx,{text:"No",colorway:"negative",outlined:!0,onClick:function(){return d(lo.TYv.No)},small:!0,iconLeft:(0,r.tZ)(Nt.Z,{})})]}),(0,r.tZ)(Mi.Z,{feature:"Replit AI"})]})})}var ql=n(86072);function Kl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ql(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Jl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Kl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(e){var t=e.filePath,n=e.selectedCode,o=e.onRequestClose,i=(0,xo.Z)(),c=(0,Fl.Z)().showError,l=(0,co.Z)(t),s=Jl(a.useState(n),2),u=s[0],d=s[1],f=Jl(a.useState(""),2),p=f[0],h=f[1],m=Jl(a.useState(!1),2),v=m[0],g=m[1],b=a.useRef(null),y=Jl((0,lo.wBH)({fetchPolicy:"no-cache",onError:function(e){return c(e.message)}}),2),x=y[0],w=y[1],k=w.called,S=w.data,Z=w.error,E=w.loading;a.useEffect((function(){setTimeout((function(){b.current&&b.current.focus()}))}),[b]);var _=Ri(t),j=function(){if(!E&&""!==u){var e=u===p;(0,wn.j)(wn.U3.CODEX_FEATURE_USED,{feature:"generation",isRetry:e,language:_}),e?(0,wn.j)(wn.U3.CODE_GENERATION_USED,{action:"refresh",language:_}):(0,wn.j)(wn.U3.CODE_GENERATION_USED,{action:"text-submitted",language:_}),h(u),x({variables:{input:{language:_,prompt:u,replId:i}}})}},O=null,C=null===S||void 0===S?void 0:S.generateCode.__typename;if(E)O=(0,r.tZ)(Li,{});else if(Z||"UserError"===C||"UnauthorizedError"===C){var P,A;O=(0,r.tZ)(T.G7,{css:[T.l0.textAlign.center,T.l0.py(32)],children:(0,r.tZ)(T.xv,{color:"dimmer",children:null!==(A=("UserError"===C||"UnauthorizedError"===C)&&(null===S||void 0===S||null===(P=S.generateCode)||void 0===P?void 0:P.message))&&void 0!==A?A:"An unexpected error occurred. Please try again."})})}else if("GenerateCodeResult"===C&&null!=(null===S||void 0===S?void 0:S.generateCode)){var I,R=S.generateCode,D=R.code,N=R.id;if(null==D||""===D)O=(0,r.tZ)(T.G7,{css:[T.l0.textAlign.center,T.l0.py(32)],children:(0,r.tZ)(T.xv,{color:"dimmest",children:"We did not manage to generate code for this prompt. Please try another one!"})});else O=(0,r.BX)(T.G7,{children:[(0,r.BX)(T.Tg,{background:"default",css:[T.l0.py(8),T.l0.px(4),T.l0.borderRadius(8)],children:[(0,r.tZ)(T.G7,{css:[T.l0.maxHeight(300),T.l0.overflowY("auto")],children:(0,r.tZ)(uo.Z,{code:D,filePath:t,hasExtraPadding:!1,hideGutter:!0})}),(0,r.BX)(T.G7,{css:[T.l0.flex.row,T.l0.justify.spaceBetween,T.l0.align.center,T.l0.pt(8),T.l0.px(4)],children:[(0,r.BX)(T.G7,{css:[T.l0.rowWithGap(8),T.l0.align.center],children:[(0,r.tZ)(kn.Z,{path:t,size:16}),(0,r.tZ)(T.xv,{color:"dimmer",css:{textTransform:"capitalize"},children:_})]}),(0,r.BX)(T.G7,{css:T.l0.rowWithGap(8),children:[(0,r.tZ)(T.zx,{iconLeft:(0,r.tZ)(Gl.Z,{}),text:"Copy to clipboard",onClick:function(){(0,ai.Z)(D),(0,wn.j)(wn.U3.CODE_GENERATION_USED,{action:"copied-to-clipboard",language:_})}}),"function"===typeof l?(0,r.tZ)(T.zx,{iconLeft:(0,r.tZ)(Xl.Z,{}),text:"Insert in editor",onClick:function(){l({code:D}),(0,wn.j)(wn.U3.CODE_GENERATION_USED,{action:"inserted-in-editor",language:_}),o()}}):null]})]})]}),(0,r.BX)(T.G7,{css:[T.l0.flex.row,T.l0.align.baseline,T.l0.justify.spaceBetween],children:[(0,r.tZ)($l,{inferenceId:N,language:_,inferenceClass:lo.SgB.Generation}),(null===S||void 0===S||null===(I=S.currentUser)||void 0===I?void 0:I.isAdmin)?(0,r.tZ)(T.u,{tooltip:(0,r.tZ)(T.G7,{children:(0,r.tZ)("pre",{css:[{whiteSpace:"pre-wrap"}],children:JSON.stringify(JSON.parse(S.generateCode.metadata),null," ")})}),placement:"bottom",children:(0,r.tZ)(Wl.Z,{})}):null]})]})}else E||Z||(O=(0,r.tZ)(T.G7,{css:[T.l0.textAlign.center,T.l0.py(32)],children:(0,r.tZ)(T.xv,{color:"dimmest",children:"Generated code will appear here."})}));return(0,r.tZ)(Bi,{title:"Generate Code",newInferenceAlt:"Generate new code",onRequestClose:o,width:500,learnMoreLink:"https://blog.replit.com/generate-code",onRequestNewInference:!E&&k?j:void 0,children:(0,r.BX)(T.G7,{css:[T.l0.p(8),T.l0.colWithGap(8)],children:[(0,r.BX)(T.G7,{tag:"form",onSubmit:function(e){e.preventDefault(),j()},css:[T.l0.rowWithGap(8)],children:[(0,r.tZ)(T.II,{autoFocus:!0,placeholder:'Write a prompt (e.g. "draw a square")',value:u,onChange:function(e){return t=e.target.value,v||((0,wn.j)(wn.U3.CODE_GENERATION_USED,{action:"text-written",language:_}),g(!0)),void d(t);var t},ref:b,onKeyDown:function(e){"Escape"===e.key&&o()}}),(0,r.tZ)(T.zx,{iconLeft:(0,r.tZ)(ql.Z,{}),text:"Generate",colorway:"primary",disabled:E||""===u,type:"submit"})]}),O]})})}function ts(e){var t=e.dom,n=Ql(e,["dom"]);return c.createPortal((0,r.tZ)(es,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Yl(e,t,n[t])}))}return e}({},n)),t)}var ns=n(57170),rs=n(88503),os=n(37424);function is(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function as(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cs(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ls(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return is(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return is(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ss(e){var t=e.filePath,n=e.selectedCode,o=e.context,i=e.onRequestClose,c=(0,xo.Z)(),l=(0,Fl.Z)().showError,s=(0,co.Z)(t),u=ls(a.useState(n),2),d=u[0],f=u[1],p=ls(a.useState(!1),2),h=p[0],m=p[1],v=ls(a.useState(!0),2),g=v[0],b=v[1],y=o,x=ls(a.useState(""),2),w=x[0],k=x[1],S=ls(a.useState(!1),2),Z=S[0],E=S[1],_=ls((0,lo.R0)({fetchPolicy:"no-cache",onError:function(e){return l(e.message)}}),2),j=_[0],O=_[1],C=O.called,P=O.data,A=O.error,I=O.loading,R=(0,os.H)()("semanticSearchCheckboxRerank"),D=(0,os.H)()("semanticSearchCheckboxContextual"),N=Ri(t),U=function(){I||""===d||(d===w?(0,wn.j)(wn.U3.SEMANTIC_SEARCH_USED,{action:"refresh",rerank:h,contextual:g,language:N}):(0,wn.j)(wn.U3.SEMANTIC_SEARCH_USED,{action:"query-submitted",rerank:h,contextual:g,language:N}),k(d),j({variables:{input:{language:N,rerank:h,contextual:g,codeContext:y,prompt:d,replId:c}}}))},B=null,z=null===P||void 0===P?void 0:P.searchCode.__typename;if(I)B=(0,r.tZ)(Li,{});else if(A||"UserError"===z||"UnauthorizedError"===z){var L,M;B=(0,r.tZ)(T.G7,{css:[T.l0.textAlign.center,T.l0.py(32)],children:(0,r.tZ)(T.xv,{color:"dimmer",children:null!==(M=("UserError"===z||"UnauthorizedError"===z)&&(null===P||void 0===P||null===(L=P.searchCode)||void 0===L?void 0:L.message))&&void 0!==M?M:"An unexpected error occurred. Please try again."})})}else if("SearchCodeResult"===z&&null!=(null===P||void 0===P?void 0:P.searchCode)){var F,G=P.searchCode,X=G.codes,W=G.id;if(null==X)B=(0,r.tZ)(T.G7,{css:[T.l0.textAlign.center,T.l0.py(32)],children:(0,r.tZ)(T.xv,{color:"dimmest",children:"We did not manage to search code for this query. Please try another one!"})});else B=(0,r.BX)(T.G7,{children:[(0,r.tZ)(T.Tg,{background:"default",css:[T.l0.py(8),T.l0.px(4),T.l0.borderRadius(8)],children:(0,r.tZ)(T.G7,{css:[T.l0.maxHeight(300),T.l0.overflowY("auto")],children:X.map((function(e,n){return(0,r.BX)(T.G7,{css:[T.l0.pt(24),T.l0.pb(32),T.l0.shadow(1)],children:[(0,r.tZ)(uo.Z,{code:e.code,filePath:t,hasExtraPadding:!1,hideGutter:!0}),(0,r.BX)(T.G7,{css:[T.l0.flex.row,T.l0.justify.spaceBetween,T.l0.align.center,T.l0.pt(8),T.l0.px(4)],children:[(0,r.BX)(T.G7,{css:[T.l0.rowWithGap(8),T.l0.align.center],children:[(0,r.tZ)(kn.Z,{path:t,size:16}),(0,r.tZ)(T.xv,{color:"dimmer",css:{textTransform:"capitalize"},children:N})]}),(0,r.BX)(T.G7,{css:T.l0.rowWithGap(8),children:[(0,r.tZ)(T.zx,{iconLeft:(0,r.tZ)(ns.Z,{}),text:"Source",onClick:function(){window.open(e.url,"_blank")}}),(0,r.tZ)(T.zx,{iconLeft:(0,r.tZ)(Gl.Z,{}),text:"Copy",onClick:function(){(0,ai.Z)(e.code),(0,wn.j)(wn.U3.SEMANTIC_SEARCH_USED,{action:"copied-to-clipboard",language:N})}}),"function"===typeof s?(0,r.tZ)(T.zx,{iconLeft:(0,r.tZ)(Xl.Z,{}),text:"Insert",onClick:function(){s({code:e.code}),(0,wn.j)(wn.U3.SEMANTIC_SEARCH_USED,{action:"inserted-in-editor",language:N}),i()}}):null]})]})]})}))})}),(0,r.BX)(T.G7,{css:[T.l0.flex.row,T.l0.align.baseline,T.l0.justify.spaceBetween],children:[(0,r.tZ)($l,{inferenceId:W,language:N,inferenceClass:lo.SgB.Search}),(null===P||void 0===P||null===(F=P.currentUser)||void 0===F?void 0:F.isAdmin)?(0,r.tZ)(T.u,{tooltip:(0,r.tZ)(T.G7,{children:(0,r.tZ)("pre",{css:[{whiteSpace:"pre-wrap"}],children:JSON.stringify(JSON.parse(P.searchCode.metadata),null," ")})}),placement:"bottom",children:(0,r.tZ)(Wl.Z,{})}):null]})]})}else I||A||(B=(0,r.tZ)(T.G7,{css:[T.l0.textAlign.center,T.l0.py(32)],children:(0,r.tZ)(T.xv,{color:"dimmest",children:"Search results will appear here."})}));return(0,r.tZ)(Bi,{title:"Search Code",newInferenceAlt:"Search new code",onRequestClose:i,width:500,learnMoreLink:"",onRequestNewInference:!I&&C?U:void 0,children:(0,r.BX)(T.G7,{css:[T.l0.p(8),T.l0.colWithGap(8)],children:[(0,r.BX)(T.G7,{tag:"form",onSubmit:function(e){e.preventDefault(),U()},css:[T.l0.rowWithGap(8)],children:[(0,r.tZ)(T.II,{autoFocus:!0,placeholder:"load a pytorch model",value:d,onChange:function(e){return t=e.target.value,Z||((0,wn.j)(wn.U3.SEMANTIC_SEARCH_USED,{action:"query-written",language:N}),E(!0)),void f(t);var t}}),(0,r.tZ)(T.G7,{css:[T.l0.pt(8)],children:(0,r.tZ)(T.xv,{color:"dimmer",children:"Rerank?"})}),(0,r.tZ)(T.XZ,{id:R,name:"Rerank?",checked:h,onChange:function(e){return t=e.target.checked,void m(t);var t}}),(0,r.tZ)(T.G7,{css:[T.l0.pt(8)],children:(0,r.tZ)(T.xv,{color:"dimmer",children:"Contextual?"})}),(0,r.tZ)(T.XZ,{id:D,name:"Contextual?",checked:g,onChange:function(e){return t=e.target.checked,void b(t);var t}}),(0,r.tZ)(T.zx,{iconLeft:(0,r.tZ)(rs.Z,{}),text:"Search",colorway:"primary",disabled:I||""===d,type:"submit"})]}),B]})})}function us(e){var t=e.dom,n=cs(e,["dom"]);return c.createPortal((0,r.tZ)(ss,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){as(e,t,n[t])}))}return e}({},n)),t)}var ds=n(21837),fs=n(15127),ps=n(39155),hs=n(52697);var ms=function(e){var t,n,o=e.threadPreview,a=e.onClick;if(!o)throw new Error("expected thread preview");var c=((null===(t=(0,lo.Fqz)().data)||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.editorPreferences.fontSize)||14)-2,l=o.unreadCount>0,s=o.participants,u="".concat(c,"px");return(0,r.BX)("div",{onClick:a,className:i().dynamic([["ea3dc5f07734f351",[c]]])+" thread-preview",children:[(0,r.tZ)("div",{className:i().dynamic([["ea3dc5f07734f351",[c]]])+" user-stack",children:s.slice(0,3).map((function(e){return e&&(0,r.tZ)(ps.Z,{url:e.image,size:"xs",style:{minWidth:u,minHeight:u,height:u,width:u}},e.id)}))}),o.messageCount>0&&(0,r.BX)("div",{className:i().dynamic([["ea3dc5f07734f351",[c]]])+" comment-info",children:[(0,r.tZ)("div",{className:i().dynamic([["ea3dc5f07734f351",[c]]])+" comment-count",children:o.messageCount}),(0,r.tZ)(hs.Z,{size:c,unreadDot:l})]}),(0,r.tZ)(i(),{id:"ea3dc5f07734f351",dynamic:[c],children:".thread-preview.__jsx-style-dynamic-selector{padding:4px;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-border-top-right-radius:0;-moz-border-radius-topright:0;border-top-right-radius:0;-webkit-border-bottom-right-radius:0;-moz-border-radius-bottomright:0;border-bottom-right-radius:0;background-color:var(--background-default);color:var(--foreground-default);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border:.5px solid var(--background-higher);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);-webkit-transition:width.2s,background-color.2s,-webkit-transform.1s;-moz-transition:width.2s,background-color.2s,-moz-transform.1s;-o-transition:width.2s,background-color.2s,-o-transform.1s;transition:width.2s,background-color.2s,-webkit-transform.1s;transition:width.2s,background-color.2s,-moz-transform.1s;transition:width.2s,background-color.2s,-o-transform.1s;transition:width.2s,background-color.2s,transform.1s;z-index:1}.thread-preview.__jsx-style-dynamic-selector:hover{-webkit-transform:translateX(-5%)scale(1.1);-moz-transform:translateX(-5%)scale(1.1);-ms-transform:translateX(-5%)scale(1.1);-o-transform:translateX(-5%)scale(1.1);transform:translateX(-5%)scale(1.1)}.user-stack.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-column-gap:var(--space-4)}.comment-info.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-gap:var(--space-4);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.comment-count.__jsx-style-dynamic-selector{font-weight:var(--font-weight-medium);font-size:.8em;font-size:".concat(c,"px}")})]})},vs=n(94184),gs=n.n(vs),bs=n(70420),ys=n(74279),xs=n(47571),ws=n(33630),ks=n(21394),Ss=n(68342),Zs=n(35515),Es=n(5440);function _s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_s(e,t,n[t])}))}return e}function Os(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Cs=a.createContext({filePath:null,isLoading:!1,threads:{},view:null,placeholderId:null,openThreadId:null,setOpenThreadId:function(){}});function Ts(e){var t=e.children,n=Os(e,["children"]);return(0,r.tZ)(Cs.Provider,{value:js({},n),children:t})}function Ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function As(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){As(e,t,n[t])}))}return e}function Rs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||Ns(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ds(e){return function(e){if(Array.isArray(e))return Ps(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ns(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ns(e,t){if(e){if("string"===typeof e)return Ps(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ps(e,t):void 0}}function Us(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||Ls(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zs(e){return function(e){if(Array.isArray(e))return Us(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ls(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ls(e,t){if(e){if("string"===typeof e)return Us(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Us(e,t):void 0}}var Ms=function(e){var t=e.threadId,n=e.onFinalizeMessage,o=void 0===n?function(){}:n,c=e.onChangeMessage,l=void 0===c?function(){}:c,u=e.onRequestClose,d=void 0===u?function(){}:u,f=e.style,p=e.width,h=function(e){var t=(0,Fl.Z)().showError,n=(0,xo.Z)(),r=(0,x.Z)("flag-typing-presence"),o=(0,Zs.Z)().map((function(e){return e.username})),i=a.useContext(Cs),c=i.view,l=i.filePath,u=(0,s.Z)().fs,d=(0,lo.GDQ)({variables:{id:e}}),f=d.data,p=d.error,h=d.loading,m=d.client,v=!(!f||h||"AnnotationAnchor"===f.thread.__typename),g=a.useMemo((function(){return!f||h?null:"UserError"===f.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===f.thread.__typename?f.thread:null}),[f,e,h]),b=Rs((0,lo.tTj)({onError:function(e){return t(e.message)},update:function(e,n){var r,o;n.errors?n.errors.forEach((function(e){return t(e.message)})):"UserError"!==(null===(r=n.data)||void 0===r||null===(o=r.createThread)||void 0===o?void 0:o.__typename)||t(n.data.createThread.message)}}),1)[0],y=Rs((0,lo.ALh)({onError:function(e){return t(e.message)},update:function(e,n){var r;if(n.errors)n.errors.forEach((function(e){return t(e.message)}));else{var o=null===(r=n.data)||void 0===r?void 0:r.createThreadMessage;o&&"UserError"===o.__typename&&t(o.message)}}}),1)[0],w=Rs((0,lo.YaW)({onError:function(e){return t(e.message)},update:function(e,n){var r;if(n.errors)n.errors.forEach((function(e){return t(e.message)}));else{var o=null===(r=n.data)||void 0===r?void 0:r.updateThread;o&&"UserError"===o.__typename&&t(o.message)}}}),1)[0],k=Rs((0,lo.HjV)(),1)[0],S=function(){var e=null===f||void 0===f?void 0:f.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,image:e.image}}:{}};return{thread:g,isPlaceholder:v,error:p,loading:h,updateThread:function(e){var t,n=e.changes,r="AnnotationAnchor"===(null===f||void 0===f||null===(t=f.thread)||void 0===t?void 0:t.__typename)?f.thread:null;if(!r)throw new Error("expected thread");w({variables:{id:r.id,changes:n},optimisticResponse:{updateThread:Is({},r,n,{isResolved:"boolean"===typeof n.isResolved?n.isResolved:r.isResolved})}})},finalizeThreadMessage:function(t){var r,i=t.message,a=t.messageId,s=t.highlight,d={id:a,text:i,mentions:(0,Es.kW)(i,{users:Ds(o).concat(["everyone"])}).mentions};if(v&&c&&l){var p=c.state.field(ma),h={id:e,replId:n,indexStart:null===p||void 0===p?void 0:p.indexStart,indexEnd:null===p||void 0===p?void 0:p.indexEnd,otVersion:u.getOTVersion(l),path:l};b({variables:{thread:h,message:d},optimisticResponse:{__typename:"RootMutationType",createThread:Is({__typename:"AnnotationAnchor"},h,S(),{messages:[Is({id:a,timeCreated:Date.now(),currentUserIsAuthor:!0},S(),{content:{text:i,__typename:"TextMessageContentType"},anchor:{id:h.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),m.writeQuery({query:lo.VOL,variables:{id:e},data:{thread:Is({},h,{isResolved:!1,isGeneral:!1},S(),{messages:[Is({id:a,timeCreated:Date.now(),currentUserIsAuthor:!0},S(),{content:{text:i,__typename:"TextMessageContentType"},anchor:{id:h.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null===f||void 0===f?void 0:f.currentUser}});var g=m.readQuery({query:lo.JqK,variables:{replId:n,path:l}});if(g){var x,w="ThreadsByFileResult"===(null===(x=g.threadsByFile)||void 0===x?void 0:x.__typename)?g.threadsByFile.threads:[],k=S().user;m.writeQuery({query:lo.JqK,variables:{replId:n,path:l},data:{threadsByFile:{__typename:"ThreadsByFileResult",threads:Ds(w).concat([Is({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:k,isResolved:!1,participants:[k]},h)])}}})}}else{var Z="AnnotationAnchor"===(null===f||void 0===f||null===(r=f.thread)||void 0===r?void 0:r.__typename)?f.thread:null;if(!Z)throw new Error("expected thread");y({variables:{replId:n,threadId:Z.id,threadMessage:d,highlight:s},optimisticResponse:{createThreadMessage:Is({},Z,{messages:Ds(Z.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([Is({},S(),d,{content:{text:d.text,__typename:"TextMessageContentType"},anchor:{id:Z.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})}},changeThreadMessage:function(t){var n=t.messageId,o=t.message;k({variables:{threadId:e,messageId:n,message:r?o:null}})}}}(t),m=h.thread,v=h.loading,g=h.isPlaceholder,b=h.updateThread,y=h.changeThreadMessage,w=h.finalizeThreadMessage,k=a.useRef(null),S=a.useRef(null),Z=(0,ws.Z)(null===m||void 0===m?void 0:m.id),E=Bs((0,Gc.L)({accept:[Ec.z.FileNode,Ec.z.FileHeaderTab],collect:function(e){var t,n=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver({shallow:!0})&&!n}},canDrop:function(e){return!e.isFolder},drop:function(e){e&&!e.isFolder&&P({messageId:ba()(),message:"#".concat(e.path)})}}),2),_=E[0],O=E[1],C=(0,Mt.Z)((function(e){var t,n=e.target;n.closest(".node-row")||n.closest(".file-header-tab")||""!==(null===(t=S.current)||void 0===t?void 0:t.value)||d()}),[]);(0,xs.Z)(m),a.useEffect((function(){var e=function(e){var t;"Escape"===e.key&&""===(null===(t=S.current)||void 0===t?void 0:t.value)&&d()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[d]),a.useEffect((function(){k.current&&(k.current.scrollTop=k.current.scrollHeight)}),[null===m||void 0===m?void 0:m.messages]);var T=a.useMemo((function(){var e;if(!(null===m||void 0===m?void 0:m.messages))return[];var t=zs(m.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}));return(e=t).push.apply(e,zs(Z.filter((function(e){return!t.slice(-5).find((function(t){return t.id===e.id}))})))),(0,ys.Z)(t)}),[null===m||void 0===m?void 0:m.messages,Z]),P=function(e){w(e),o(e)};return m||v?(0,r.BX)("div",{style:f,ref:function(e){O(e),C.current=e},className:"jsx-".concat(bs.Q.__hash)+" "+i().dynamic([["93337adeef9a977a",[p]]])+" "+(gs()("thread-group",{"is-over":_.isOver})||""),children:[v||!m?(0,r.tZ)("div",{css:[j.l0.p(16)],className:"jsx-".concat(bs.Q.__hash)+" "+i().dynamic([["93337adeef9a977a",[p]]]),children:(0,r.BX)(zi.ZP,{viewBox:"0 0 100 20",primaryColor:"var(--background-higher)",secondaryColor:"var(--background-highest)",speed:1.5,children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"100",height:"8",className:"jsx-".concat(bs.Q.__hash)+" "+i().dynamic([["93337adeef9a977a",[p]]])}),(0,r.tZ)("rect",{x:"0",y:"10",rx:"4",ry:"4",width:"33",height:"8",className:"jsx-".concat(bs.Q.__hash)+" "+i().dynamic([["93337adeef9a977a",[p]]])})]})}):(0,r.BX)(r.HY,{children:[T.length>0&&(0,r.tZ)("div",{ref:k,className:"jsx-".concat(bs.Q.__hash)+" "+i().dynamic([["93337adeef9a977a",[p]]])+" message-group-container",children:T.map((function(e){return(0,r.tZ)(Ss.ZP,{messageGroup:e},e.messages[0].id)}))}),(0,r.tZ)(ks.Z,{annote:m,onChangeMessage:function(e){y(e),l(e)},onFinalizeMessage:P,ref:S}),(0,r.BX)("div",{className:"jsx-".concat(bs.Q.__hash)+" "+i().dynamic([["93337adeef9a977a",[p]]])+" floating-group",children:[g?null:(0,r.tZ)("div",{className:"jsx-".concat(bs.Q.__hash)+" "+i().dynamic([["93337adeef9a977a",[p]]])+" delete show-on-hover",children:(0,r.tZ)("button",{"aria-label":"Resolve","data-microtip-position":"top",role:"tooltip",onClick:function(){b({changes:{isResolved:!0}})},className:"jsx-".concat(bs.Q.__hash)+" "+i().dynamic([["93337adeef9a977a",[p]]])+" floating-button resolve",children:(0,r.tZ)(dn.Z,{})})}),(0,r.tZ)("div",{className:"jsx-".concat(bs.Q.__hash)+" "+i().dynamic([["93337adeef9a977a",[p]]])+" close",children:(0,r.tZ)("button",{"aria-label":"Close","data-microtip-position":"top",role:"tooltip",onClick:d,className:"jsx-".concat(bs.Q.__hash)+" "+i().dynamic([["93337adeef9a977a",[p]]])+" floating-button close",children:(0,r.tZ)(Nt.Z,{})})})]})]}),(0,r.tZ)(i(),{id:bs.Q.__hash,children:bs.Q}),(0,r.tZ)(i(),{id:"93337adeef9a977a",dynamic:[p],children:".thread-group.__jsx-style-dynamic-selector{position:absolute;z-index:10;position:relative;display:grid;grid-row-gap:var(--space-16);-webkit-box-pack:stretch;-webkit-justify-content:stretch;-moz-box-pack:stretch;-ms-flex-pack:stretch;justify-content:stretch;background-color:var(--background-default);padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);width:".concat(p,"px;-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2);border:.5px solid var(--background-higher)}.thread-group.is-over.__jsx-style-dynamic-selector{background-color:var(--background-root)}.thread-group.__jsx-style-dynamic-selector *.__jsx-style-dynamic-selector{-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.message-group-container.__jsx-style-dynamic-selector{display:grid;grid-row-gap:var(--space-16);max-height:275px;overflow-y:auto;padding:var(--space-8);padding-bottom:0;grid-template-columns:minmax(0,1fr)}.floating-group.__jsx-style-dynamic-selector{position:absolute;display:grid;grid-auto-flow:column;-webkit-box-pack:end;-webkit-justify-content:end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:end;grid-column-gap:8px;top:-32px;left:0;right:0}.floating-group.__jsx-style-dynamic-selector .show-on-hover.__jsx-style-dynamic-selector{opacity:0}.thread-group.__jsx-style-dynamic-selector:hover>.floating-group.__jsx-style-dynamic-selector .show-on-hover.__jsx-style-dynamic-selector{opacity:1}.feedback.__jsx-style-dynamic-selector{position:absolute;text-decoration:none}.floating-button.__jsx-style-dynamic-selector{width:24px;height:24px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:var(--background-higher);color:var(--foreground-dimmer);border:1px solid var(--background-highest);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}.floating-button.__jsx-style-dynamic-selector:focus{outline:none}.floating-button.__jsx-style-dynamic-selector:hover{color:var(--foreground-default);background:var(--background-higher)}.floating-button.delete.__jsx-style-dynamic-selector:hover{color:var(--white);background:var(--accent-negative-default);border-color:var(--accent-negative-default)}.floating-button.resolve.__jsx-style-dynamic-selector:hover{color:var(--white);background:var(--accent-positive-default);border-color:var(--accent-positive-default)}.floating-button.__jsx-style-dynamic-selector:active{background:var(--background-highest)}")})]}):null},Fs=n(11163),Gs=n.n(Fs);function Xs(e){var t=e.threadId,n=a.useContext(Cs),o=n.threads,i=n.isLoading,c=n.placeholderId,l=n.openThreadId,s=n.setOpenThreadId,u=n.view,d=l===t,f=c===t,p="/replEnvironment2"===(0,Fs.useRouter)().pathname;if(!u)return null;var h=p?u.dom.getBoundingClientRect().width:u.dom.getBoundingClientRect().right;return i?null:o[t]||f?(0,r.tZ)(T.G7,{css:{position:"fixed",left:h,transform:"translateX(-100%)"},className:"thread-ui",children:d||f?(0,r.tZ)(Ms,{style:{transform:"translateX(100%)"},width:225,onRequestClose:function(){s(null),f&&u.dispatch({effects:[da.of(null)]})},threadId:t}):(0,r.tZ)(ms,{threadPreview:o[t],onClick:function(){return s(t)}})}):null}function Ws(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Hs(e,t,n[t])}))}return e}function $s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||Ks(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qs(e){return function(e){if(Array.isArray(e))return Ws(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ks(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ks(e,t){if(e){if("string"===typeof e)return Ws(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ws(e,t):void 0}}function Ys(e){var t=e.setThreadsTooltips,n=e.setPlaceholderThreadId,o=e.setOpenThreadId,i=e.view,l=function(e,n){var o=function(e){t((function(t){return Vs({},t,Hs({},n,(0,r.tZ)(u,{onLayout:e})))}))},i=s[n];if(!i){var l=document.createElement("div");l.classList.add("cm-tooltip-thread"),i=s[n]={tooltip:{dom:l,update:function(e){e.viewportChanged&&o((function(){(0,E.E2)(e.view)}))}},Portal:function(e){var t=e.onLayout;return a.useLayoutEffect((function(){null===t||void 0===t||t()}),[t]),c.createPortal((0,r.tZ)(Xs,{threadId:n}),l)}}}var u=i.Portal;return o(),i.tooltip},s={};return[pa,ha,ma,E.tk.decorations.compute([ha,ma],(function(e){var t=e.field(ha),n=e.field(ma);return E.p.set(qs(Object.values(t)).concat(qs(n?[n]:[])).map((function(e){return t=e.id,n=e.indexStart,r=e.indexEnd,n===r?null:E.p.mark({class:"replit-thread-highlight cm-thread-".concat(t),id:t}).range(n,r);var t,n,r})).filter((function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length})),!0)})),E.tk.updateListener.of((function(e){var t,r=null===(t=e.view.state.field(ma))||void 0===t?void 0:t.id;n(null!==r&&void 0!==r?r:null),r&&o(r)})),E.hJ.computeN([ha,ma],(function(e){var t=e.field(ha),n=qs(Object.values(t).map((function(e){return{pos:Math.min(e.indexStart,e.indexEnd),above:!0,create:function(){return l(0,e.id)}}}))),r=e.field(ma);return r&&n.push({pos:Math.min(r.indexStart,r.indexEnd),above:!0,create:function(){return l(0,r.id)}}),n})),E.tk.updateListener.of((function(e){(0,O.j)(e,fa,(function(t){var n=t.value,r=e.state.field(ha)[n];r&&(null===i||void 0===i||i.dispatch({selection:{anchor:r.indexStart,head:r.indexStart},effects:[E.tk.scrollIntoView(r.indexStart,{x:"nearest",y:"nearest"})]}))}))}))]}function Qs(e){var t=e.view,n=e.filePath,r=e.isLoading,o=e.enable,i=$s(a.useState({}),2),c=i[0],l=i[1],u=$s((0,Ta.KO)(Pa.Q),2),d=u[0],f=u[1];a.useEffect((function(){t&&d&&t.dispatch({effects:[fa.of(d)]})}),[t,d]);var p=$s(a.useState(null),2),h=p[0],m=p[1],v=(0,Or.Z)({view:t});a.useEffect((function(){if(t&&o)return t.dispatch({effects:v.reconfigure(Ys({view:t,setThreadsTooltips:l,setPlaceholderThreadId:m,setOpenThreadId:f}))}),function(){t.dispatch({effects:v.reconfigure([])})}}),[t,n,v,o]);var g=(0,fs.Z)(n,r,!0,o);return function(e,t,n,r){var o=(0,s.Z)().fs,i=(0,ds.kL)(n),c=i.contentRef,l=i.loadedFile,u=i.transformSelectionRef;a.useEffect((function(){var i=!1,a=u.current,s=c.current;if(l&&a&&s&&!r&&t){var d=Object.values(e);0!==d.length?Promise.all(d.map((function(e){return(0,ds.Ft)({anchor:e,version:o.getOTVersion(n),transformSelection:a,content:s})}))).then((function(e){if(!i){var n=e.filter((function(e){return Boolean(e)})).map((function(e){if(!e)throw new Error("expected resolved anchor");return Vs({},e.anchor,null===e||void 0===e?void 0:e.newSelection)}));return t.dispatch({effects:sa.of(n.reduce((function(e,t){return e[t.id]=t,e}),{}))}),function(){i=!0,t&&t.dispatch({effects:sa.of({})})}}})):t.dispatch({effects:sa.of({})})}}),[e,t,l,o,u,c,n,r])}(g,t,n,r),{threadPreviews:g,setPlaceholderThreadId:m,placeholderThreadId:h,openThreadId:d,setOpenThreadId:f,threadsTooltips:c}}function Js(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||ru(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nu(e){return function(e){if(Array.isArray(e))return Js(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ru(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ru(e,t){if(e){if("string"===typeof e)return Js(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Js(e,t):void 0}}function ou(e,t,n,r){var o=(0,s.Z)().fs,i=(0,ds.kL)(n),c=i.contentRef,l=i.loadedFile,u=i.transformSelectionRef;a.useEffect((function(){var i=!1,a=u.current,s=c.current;if(l&&a&&s&&!r&&t){var d=Object.values(e);0!==d.length?Promise.all(d.map((function(e){return(0,ds.Ft)({anchor:e,version:o.getOTVersion(n),transformSelection:a,content:s})}))).then((function(e){if(!i){var n=e.filter((function(e){return Boolean(e)})).map((function(e){if(!e)throw new Error("expected resolved anchor");return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){eu(e,t,n[t])}))}return e}({},e.anchor,null===e||void 0===e?void 0:e.newSelection)}));return t.dispatch({effects:va.qi.of(n.reduce((function(e,t){return e[t.id]=t,e}),{}))}),function(){i=!0,t&&t.dispatch({effects:va.qi.of({})})}}})):t.dispatch({effects:va.qi.of({})})}}),[e,t,l,o,u,c,n,r])}function iu(e){var t=e.view,n=e.filePath,r=e.enable,o=e.isLoading,i=function(e){return[S.Wl.highest(va.zj),va.cR,va.OQ,va.ZS,va.PQ,E.tk.decorations.compute([va.OQ,va.ZS,va.PQ],(function(e){var t=e.field(va.OQ),n=e.field(va.ZS),r=e.field(va.PQ),o=n||Object.values(t).find((function(e){return e.id===r}));return o?E.p.set([o].map((function(e){return t=e.id,n=e.indexStart,r=e.indexEnd,n===r?null:E.p.mark({class:"replit-thread-highlight cm-thread-".concat(t),id:t}).range(n,r);var t,n,r})).filter((function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length})),!0):E.p.none})),E.tk.decorations.compute([va.OQ,va.ZS,va.PQ],(function(e){var t=e.field(va.OQ),n=e.field(va.ZS),r=e.field(va.PQ),o=nu(Object.values(t)).concat(nu(n?[n]:[])).filter(Boolean).find((function(e){return e.id===r}));return o?E.p.set([E.p.widget({widget:new va.nE(o.id,s),block:!0,side:1}).range(o.indexEnd)],!0):E.p.none})),E.tk.updateListener.of((function(e){(0,O.j)(e,va.eR,(function(n){var r=n.value,o=e.state.field(va.OQ)[r];o&&(null===t||void 0===t||t.dispatch({selection:{anchor:o.indexStart,head:o.indexStart},effects:[E.tk.scrollIntoView(o.indexStart,{x:"center",y:"center"})]}))}))}))]},c=tu(a.useState({}),2),l=c[0],s=c[1],u=(0,Or.Z)({view:t}),d=(0,Ta.Dv)(Pa.Q);a.useEffect((function(){t&&d&&t.dispatch({effects:[va.YM.of(d),va.eR.of(d)]})}),[t,d]),a.useEffect((function(){if(t&&r)return t.dispatch({effects:u.reconfigure(i())}),function(){t.dispatch({effects:u.reconfigure([])})}}),[t,n,u,r]);return ou((0,fs.Z)(n,o,!0,r),t,n,o),{threadElements:l}}function au(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return au(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return au(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var lu=function(e){var t=e.source,n=(0,gt.Z)(t);return(0,r.tZ)(r.HY,{children:Array.from(n,(function(e){var t=cu(e,2),n=t[0],o=t[1];return(0,r.tZ)(a.Fragment,{children:o},n)}))})},su=n(84948),uu=n(18584),du=n(3831);function fu(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function pu(e,t){return null==t?fu(e):{filePath:e,text:null!==(n=t.state.doc.toString())&&void 0!==n?n:"",selections:t.state.selection.ranges.map((function(e){var t=e.from;return{location:t,length:e.to-t}})),hasFocus:t.hasFocus};var n}function hu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ba()(),o=pu(e,t),i={messageType:uu.cF.TEXT_EDITOR_STATE,filePath:e,text:o.text,selections:o.selections,hasFocus:o.hasFocus,revisionId:n.revisionId};(0,du.bG)(i,r)}function mu(e,t,n,r,o){return!!e.hasFocus&&(r===t&&r===n.textEditorState.filePath&&o===n.revisionId)}function vu(e){var t=e.map((function(e){return S.jT.range(e.location,e.location+e.length)}));return S.jT.create(t)}function gu(e,t,n,r){var o=r.payload;if((0,uu.Se)(o))return function(e,t,n,r){if(!mu(t,e,n,r.filePath,r.revisionId))return!1;var o=vu(r.selections);return t.dispatch({selection:o}),t.dispatch({scrollIntoView:!0}),!0}(e,t,n,o);if((0,uu.m7)(o))return function(e,t,n,r){if(!mu(t,e,n,r.filePath,r.revisionId))return!1;var o=pu(e,t),i=vu(r.selections);return t.dispatch({changes:{from:0,to:o.text.length,insert:r.text},selection:i}),!0}(e,t,n,o);if((0,uu.ac)(o))return function(e,t,n,r){if(!mu(t,e,n,r.filePath,r.revisionId))return!1;var o=r.insertionRange,i=vu(r.selections);return t.dispatch({changes:{from:o.location,to:o.location+o.length,insert:r.text},selection:i}),!0}(e,t,n,o);if((0,uu.fz)(o))return function(e,t,n,r){return!!mu(t,e,n,r.filePath,r.revisionId)&&(t.dispatch(t.state.replaceSelection(r.text)),!0)}(e,t,n,o);if((0,uu.Ak)(o))return function(e){return e.focus(),!0}(t);if((0,uu.to)(o))return function(e,t,n,r){if(!mu(t,e,n,r.filePath,r.revisionId))return!1;t.contentDOM.blur()}(e,t,n,o);throw new Error("Invalid payload.")}function bu(e,t,n,r){var o=r.payload;if((0,uu.nO)(o))return function(e,t,n,r){return!!mu(t,e,n,r.filePath,r.revisionId)&&((0,Io.Yw)(t),!0)}(e,t,n,o);if((0,uu.q$)(o))return function(e,t,n,r){return!!mu(t,e,n,r.filePath,r.revisionId)&&((0,Io.KX)(t),!0)}(e,t,n,o);throw new Error("Invalid payload.")}function yu(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function xu(e){var t=e.view,n=e.filePath,r=(0,Fs.useRouter)().query,o=Boolean(r.mobileBridge),i=(0,a.useRef)({revisionId:ba()(),textEditorState:fu(n)}),c=(0,Or.Z)({view:t});(0,a.useEffect)((function(){if(t&&o){var e=pu(n,t);i.current={revisionId:ba()(),textEditorState:e},hu(n,t,i.current);return t.dispatch({effects:c.reconfigure(E.tk.updateListener.of((function(r){(r.docChanged||r.selectionSet||r.focusChanged)&&function(r){r.docChanged?(i.current={revisionId:ba()(),textEditorState:e},hu(n,t,i.current)):(r.selectionSet||r.focusChanged)&&(i.current={revisionId:i.current.revisionId,textEditorState:e},hu(n,t,i.current))}(r)})))}),function(){t.dispatch({effects:c.reconfigure([])})}}}),[t,n,c,o]),(0,a.useEffect)((function(){if(t&&o){var e=function(e){hu(n,t,i.current,e.messageId)},r=function(r){gu(n,t,i.current,r)?e(r):(0,du.pl)(r.messageId)},a=function(r){bu(n,t,i.current,r)?e(r):(0,du.pl)(r.messageId)},c=function(r){gu(n,t,i.current,r)?e(r):(0,du.pl)(r.messageId)},l=function(r){gu(n,t,i.current,r)?e(r):(0,du.pl)(r.messageId)},s=function(){var t,n=(t=f().mark((function t(n){var o,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=n.data,(0,uu.CF)(o)&&o.messageDirection===uu.s1.FROM_NATIVE){t.next=4;break}return t.abrupt("return");case 4:if(o.protocolVersion===uu.Wj){t.next=7;break}throw new Error("Invalid protocolVersion: ".concat(o.protocolVersion," != ").concat(uu.Wj));case 7:i=o.payload,t.t0=i.messageType,t.next=t.t0===uu.cF.ERROR?11:t.t0===uu.cF.ACK?13:t.t0===uu.cF.TEXT_EDITOR_STATE_REQUEST?14:t.t0===uu.cF.RESET?16:t.t0===uu.cF.TEXT_EDITOR_STATE?18:t.t0===uu.cF.REQUEST_SET_SELECTION?20:t.t0===uu.cF.REQUEST_REPLACE_SELECTION?22:t.t0===uu.cF.REQUEST_SET_TEXT?24:t.t0===uu.cF.REQUEST_INSERT_TEXT?26:t.t0===uu.cF.REQUEST_UNDO?28:t.t0===uu.cF.REQUEST_REDO?30:t.t0===uu.cF.REQUEST_FOCUS?32:t.t0===uu.cF.REQUEST_BLUR?34:36;break;case 11:case 16:case 18:throw new Error("Unexpected message: ".concat(i.messageType));case 13:return t.abrupt("break",37);case 14:return e(o),t.abrupt("break",37);case 20:case 22:case 24:case 26:return r(o),t.abrupt("break",37);case 28:case 30:return a(o),t.abrupt("break",37);case 32:return c(o),t.abrupt("break",37);case 34:return l(o),t.abrupt("break",37);case 36:throw new Error("Unknown message.");case 37:t.next=43;break;case 39:throw t.prev=39,t.t1=t.catch(0),new Error("Invalid message: ".concat(t.t1));case 43:case"end":return t.stop()}}),t,null,[[0,39]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){yu(i,r,o,a,c,"next",e)}function c(e){yu(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}();return window.addEventListener("message",s),hu(n,t,i.current),function(){(0,du.lx)(),window.removeEventListener("message",s)}}}),[t,n,o])}var wu=n(70731);function ku(e){var t=e.threadId,n=e.view,o=e.filePath;return(0,r.tZ)("div",{css:[T.l0.width("100%"),T.l0.backgroundColor.backgroundRoot],children:(0,r.tZ)(wu.ZP,{threadId:t,onRequestClose:function(){n.dispatch({effects:[va.YM.of(null)]})},view:n,filePath:o})})}function Su(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Zu(e,t,n[t])}))}return e}function _u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Su(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Su(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ju(e){var t=e.filePath,n=e.onType,o=e.onFocus,d=e.autoFocus,f=e.deeplink,p=e.hideMobileKeyboardToolbar,h=(0,s.Z)(),m=h.fs,v=h.debuggest,g=h.presence,b=h.session,y="/replEnvironment2"===Gs().pathname,k=(0,x.Z)("flag-threads-2"),Z=(0,u.Z)(),_=(0,Ma.Z)({filePath:t,hasExtraPadding:!0,noHistory:!0,onException:function(e){(0,dl.x)(e,{tags:{codemirror:!0}})}}),j=_.view,C=_.ref,T=Sc({view:j,presence:g,session:b,fs:m,filePath:t}).isLoading;!function(e){var t=e.view,n=e.isLoading,r=e.autoFocus;a.useEffect((function(){r&&t&&(n||t.focus())}),[t,n,r])}({view:j,autoFocus:d,isLoading:T}),Ga({view:j,filePath:t,isLoading:T}),function(e){var t=e.view,n=(0,Or.Z)({view:t});a.useEffect((function(){if(t)return t.dispatch({effects:n.reconfigure(S.Wl.highest(E.tk.domEventHandlers({keydown:function(e){if(Math.random()<.001){var t=e.timeStamp;requestAnimationFrame((function(){var e=performance.now();ci.kg.time("editor input latency",e-t)}))}}})))}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n])}({view:j}),function(e){var t=e.view,n=(0,s.Z)().session;a.useEffect((function(){if(t)return n.onEditorFocused((function(){t.focus()}))}),[n,t])}({view:j});var P=function(){var e=a.useRef((0,bn.u)(new Map)).current,t=a.useCallback((function(t){var n=new Map(e.current);t(n),e.current=n}),[e]),n=a.useCallback((function(){e.current=new Map}),[e]);return a.useMemo((function(){return{observable:e,update:t,unmount:n}}),[t,e,n])}();Ur({view:j,filePath:t,isLoading:T,decorations:P}),function(e){var t=e.view,n=e.filePath,r=e.isLoading,o=(0,s.Z)().anchorer,i=(0,Ta.Dv)(Pa.Q);a.useEffect((function(){t&&i&&t.dispatch({effects:[za.of(i)]})}),[t,i]);var c=La(o);(0,Or.Z)({view:t,initialExtension:[Da,c,E.tk.updateListener.of((function(e){(0,O.j)(e,za,(function(n){var r=n.value,o=e.state.field(c).find((function(e){return e.id===r}));o&&(null===t||void 0===t||t.dispatch({selection:{anchor:o.indexStart,head:o.indexStart},effects:[E.tk.scrollIntoView(o.indexStart,{x:"nearest",y:"nearest"})]}))}))}))]}),a.useEffect((function(){if(!r&&t&&n){var e=!1;o.getAnchors(n).then((function(n){if(e)return!0;t.dispatch({effects:[Na.of(n)]})}));var i=o.onAnchorsAdded((function(e){var r=e.filter((function(e){return e.path===n}));t.dispatch({effects:Ua.of(r)})})),a=o.onAnchorsRemoved((function(e){t.dispatch({effects:Ba.of(e)})}));return function(){e=!0,i(),a()}}}),[r,n,t])}({view:j,filePath:t,fs:m,isLoading:T}),ro({view:j,debuggest:v,filePath:t,isLoading:T});var A=Za({view:j,filePath:t}),I=A.onAction,R=A.actions,D=A.contextMenuCoords,N=A.onContextMenu,U=A.closeMenu,B=A.resizeRef,z=ja({view:j,filePath:t,isLoading:T}),L=function(e){var t=e.view,n=Ho(a.useState(null),2),r=n[0],o=n[1],i=(0,Or.Z)({view:t});return a.useEffect((function(){if(t){var e=document.createElement("div");return o(e),t.dispatch({effects:i.reconfigure([(0,Xo.yC)({createPanel:function(){return{top:!0,pos:80,dom:e,mount:function(){var t=e.querySelector("[main-field]");t&&(t.focus(),t.select())}}}}),E.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(){return t.dispatch({effects:Vo.of(null)}),(0,Xo.nx)(t)}}])])}),function(){t.dispatch({effects:i.reconfigure([])}),o(null)}}}),[t,i]),r}({view:j});!function(e){var t=e.filePath,n=e.view,r=e.isLoading,o=e.deeplink,i=(0,s.Z)().session;a.useEffect((function(){if(n&&!r&&o){var e=o.line,t=o.col;e&&Oa({view:n,line:e,col:t})}}),[n,r,o]),a.useEffect((function(){if(n&&!r)return i.onDeeplinkUpdated((function(e){var r=e.path,o=e.line,i=e.col;r===t&&o&&Oa({view:n,line:o,col:i})}))}),[i,n,t,r])}({filePath:t,view:j,isLoading:T,deeplink:f}),function(e){var t=e.view,n=e.onType,r=e.filePath,o=(0,Or.Z)({view:t});a.useEffect((function(){if(t&&n&&r)return t.dispatch({effects:o.reconfigure(E.tk.updateListener.of((function(e){e.docChanged&&(e.transactions.some((function(e){return e.annotation(S.YW.remote)}))||n((0,ii.r6)(r)))})))}),function(){t.dispatch({effects:o.reconfigure([])})}}),[t,n,r,o])}({view:j,onType:n,filePath:t}),function(e){var t=e.view,n=e.onFocus,r=(0,Or.Z)({view:t});(0,a.useEffect)((function(){if(t&&n)return t.dispatch({effects:r.reconfigure(E.tk.updateListener.of((function(e){e.focusChanged&&e.view.hasFocus&&n(e.view)})))}),function(){t.dispatch({effects:r.reconfigure([])})}}),[t,n,r])}({view:j,onFocus:o}),function(e){var t=e.view,n=(0,Or.Z)({view:t}),r=(0,Zc.xZ)();a.useEffect((function(){if(t&&!(0,w.isMobile)({tablet:!0})){var e=r?[Bc,zc,Lc,Mc,Fc]:[];return e.push(Fc),t.dispatch({effects:n.reconfigure((0,Ic.ZP)({rules:e}))}),function(){t.dispatch({effects:n.reconfigure([])})}}}),[t,n,r])}({view:j}),function(e){var t=e.view,n=(0,Or.Z)({view:t}),r=(0,s.Z)().fs,o=(0,Kn.Z)(),i=(0,Zc.xZ)();a.useEffect((function(){if(t)return t.dispatch({effects:n.reconfigure(E.tk.domEventHandlers({paste:function(e){var n,a=null===e||void 0===e||null===(n=e.clipboardData)||void 0===n?void 0:n.files,c=function(e){var n=t.state.selection.main.head;t.dispatch({changes:{from:n,insert:e},selection:{anchor:n,head:n+e.length}})};if(a){var l=!0,s=!1,u=void 0;try{for(var d,f=a[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;i?(0,Wc.L0)(p).then((function(e){return c('"'+e+'"')})):o&&(0,ii.gK)(o)&&Jc(p,r,o).then(c)}}catch(h){s=!0,u=h}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}}}}))}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,o,r,i])}({view:j}),function(e){var t=e.view,n=(0,Or.Z)({view:t}),r=(0,Kn.Z)();a.useEffect((function(){if(t)return t.dispatch({effects:n.reconfigure(E.tk.domEventHandlers({paste:function(e){var n;Qi({activeFile:r,view:t,event:e,clipboardText:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("Text")})}}))}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,r])}({view:j}),function(e){var t=e.view,n=(0,Or.Z)({view:t}),r=(0,Zc.f6)();a.useEffect((function(){if(t&&r)return t.dispatch({effects:n.reconfigure(ul)}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,r])}({view:j}),function(e){var t=e.view,n=(0,Or.Z)({view:t}),r=(0,s.Z)().session;a.useEffect((function(){var e=function(){return r.setIsCommandBarOpen(!0),!0};if(t)return t.dispatch({effects:n.reconfigure(E.$f.of([{key:"Mod-Shift-p",run:e,preventDefault:!0},{key:"F1",run:e,preventDefault:!0}]))}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,r,n])}({view:j});var M=function(e){var t=e.view,n=(0,s.Z)().fs,r=(0,Kn.Z)(),o=(0,Zc.xZ)();return tl((0,Gc.L)({accept:[Ec.z.Code,Xc.FILE],drop:function(e,i){if(t){var a=i.getClientOffset(),c=a?t.posAtCoords(a):null;if(null!==c){var l=function(e){t.focus(),t.dispatch({changes:{from:c,insert:e},selection:{anchor:c,head:c+e.length}})};if(e.type===Ec.z.Code)l(e.code);else{var s=!0,u=!1,d=void 0;try{for(var f,p=e.files[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var h=f.value;o?(0,Wc.L0)(h).then((function(e){return l('"'+e+'"')})):r&&(0,ii.gK)(r)&&Jc(h,n,r).then(l)}}catch(m){u=!0,d=m}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}}}}}}),2)[1]}({view:j}),F=(0,Zc.xZ)();!function(e){var t=e.view,n=(0,s.Z)().container;(0,Or.Z)({view:t,initialExtension:[_i(n),Ei]})}({view:j}),Ml({view:j,filePath:t});var G=function(e){var t=e.view,n=e.filePath,r=Hi(a.useState(null),2),o=r[0],i=r[1],c=(0,Or.Z)({view:t});return a.useEffect((function(){if(t)return t.dispatch({effects:c.reconfigure(qi({setExplainCodeParams:i,view:t,filePath:n}))}),function(){t.dispatch({effects:c.reconfigure([])})}}),[t,c,n]),o}({view:j,filePath:t}),X=function(e){var t=e.view,n=pl(a.useState(null),2),r=n[0],o=n[1],i=(0,Or.Z)({view:t}),c=So(),l=a.useCallback((function(){if(!t)throw new Error("did not expect to be asked to open generate code modal without view");t.dispatch({effects:Ji.of(!0)})}),[t]);return a.useEffect((function(){if(t&&c)return t.dispatch({effects:i.reconfigure(ta({view:t,setGenerateCodePortalProps:o}))}),function(){t.dispatch({effects:i.reconfigure([])})}}),[t,i,c]),{generateCodePortalProps:r,openGenerateCodeModal:l}}({view:j}),W=X.generateCodePortalProps,H=X.openGenerateCodeModal,V=function(e){var t=e.view,n=ml(a.useState(null),2),r=n[0],o=n[1],i=(0,Or.Z)({view:t}),c=Ki();return a.useEffect((function(){if(t&&c)return t.dispatch({effects:i.reconfigure(oa({view:t,setSearchCodePortalProps:o}))}),function(){t.dispatch({effects:i.reconfigure([])})}}),[t,i,c]),{searchCodePortalProps:r}}({view:j}).searchCodePortalProps,$=Qs({view:j,filePath:t,isLoading:T,enable:y&&!k}),q=iu({view:j,filePath:t,isLoading:T,enable:y&&k}),K=(0,su.Z)(ko.H.Editor);return xu({view:j,filePath:t}),(0,r.BX)("div",{ref:K,className:i().dynamic([["739a5e9778efb037",[Z?"0 3px 0 3px ".concat(Z):"0"]]])+" root",children:[p?null:(0,r.tZ)(Go,{view:j,filePath:t,isLoading:T}),(0,r.BX)("div",{ref:B,className:i().dynamic([["739a5e9778efb037",[Z?"0 3px 0 3px ".concat(Z):"0"]]])+" editor",children:[T&&(0,r.tZ)("div",{className:i().dynamic([["739a5e9778efb037",[Z?"0 3px 0 3px ".concat(Z):"0"]]])+" loader",children:(0,r.tZ)(l.Z,{})}),(0,r.tZ)("div",{ref:function(e){C(e),M(e)},onContextMenu:N,className:i().dynamic([["739a5e9778efb037",[Z?"0 3px 0 3px ".concat(Z):"0"]]])}),D&&j?(0,r.tZ)(qn.ZP,{view:j,coords:D,actions:R,closeMenu:U,onAction:I}):null,G?G.node:null,W?(0,r.tZ)(ts,Eu({},W,{filePath:t})):null,V?(0,r.tZ)(us,Eu({},V,{filePath:t})):null,z?(0,r.tZ)(Co,{dom:z,onShowGenerateCodeModal:H}):null,L?(0,r.tZ)(oi,{dom:L,view:j}):null,(0,r.tZ)(lu,{source:P.observable}),j&&(0,r.tZ)(Ts,{view:j,filePath:t,isLoading:T,threads:$.threadPreviews,openThreadId:$.openThreadId,setOpenThreadId:$.setOpenThreadId,placeholderId:$.placeholderThreadId,children:Object.entries($.threadsTooltips).map((function(e){var t=_u(e,2),n=t[0],o=t[1];return(0,r.tZ)(a.Fragment,{children:o},n)}))}),j&&(0,r.tZ)(r.HY,{children:Object.entries(q.threadElements).map((function(e){var n=_u(e,2),o=n[0],i=n[1];return c.createPortal((0,r.tZ)(ku,{threadId:o,view:j,filePath:t}),i)}))})]}),F&&(0,r.tZ)(Ac,{}),(0,r.tZ)(i(),{id:"739a5e9778efb037",dynamic:[Z?"0 3px 0 3px ".concat(Z):"0"],children:".root.__jsx-style-dynamic-selector{position:relative;overflow-y:auto;width:100%;height:100%;font-size:14px;background-color:var(--background-default);z-index:3;-webkit-box-shadow:".concat(Z?"0 3px 0 3px ".concat(Z):"0",";-moz-box-shadow:").concat(Z?"0 3px 0 3px ".concat(Z):"0",";box-shadow:").concat(Z?"0 3px 0 3px ".concat(Z):"0","}.editor.__jsx-style-dynamic-selector{position:relative;overflow-y:auto;width:100%;height:100%;font-size:14px;background-color:var(--background-default)}.editor.__jsx-style-dynamic-selector>div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;width:100%;height:100%}.editor.__jsx-style-dynamic-selector>div.__jsx-style-dynamic-selector>.cm-editor{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:100%}.loader.__jsx-style-dynamic-selector{position:absolute;left:0;top:0;height:100%;width:100%;overflow:hidden;z-index:5}")})]})}},10672:function(e,t,n){n.d(t,{Z:function(){return ee}});var r,o=n(34051),i=n.n(o),a=n(35944),c=n(67294),l=n(27740),s=n.n(l),u=n(87139),d=n(89957),f=n(67938),p=n(92704),h=n(88768),m=n(30617),v=n(45193),g=n(28593),b=n(8996),y=n(3204),x=n(24506),w=n(54929),k=n(33108),S=n(28614),Z=n(89431),E=n(11938),_=n(5560),j=n(52722),O=n(57923),C=n(90020),T=n(66552),P=n(67289);!function(e){e.Unknown="UNKNOWN",e.Npm="NPM",e.Django="DJANGO",e.Rails="RAILS",e.DotNet="DOTNET",e.Cargo="CARGO",e.Make="MAKE",e.RegularRun="REGULAR_RUN"}(r||(r={}));var A=new RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i");function I(e){var t=e.initRunCommand,n=e.isCompiled,o=e.allFiles,i=new Set(o);return i.has("Makefile")||i.has("makefile")?r.Make:i.has("package.json")?r.Npm:i.has("Cargo.toml")?r.Cargo:n?r.Unknown:i.has("config/application.rb")?r.Rails:function(e,t){return e.some((function(e){return(0,P.r6)(e)===t}))}(o,"csproj")?r.DotNet:i.has("manage.py")?r.Django:A.test(t)?r.RegularRun:r.Unknown}function R(e,t){var n=t.initRunCommand,o=t.allFiles;switch(e){case r.Npm:return"npm run start";case r.RegularRun:var i=function(e){var t;return null!==(t=e.find((function(e){return A.test(e)})))&&void 0!==t?t:null}(o);return null==i?null:n.replace(A,i);case r.Django:return"python3 manage.py runserver 0.0.0.0:3000";case r.Rails:return"bundle exec rails server --binding=0.0.0.0";case r.DotNet:return"dotnet run";case r.Cargo:return"cargo run";case r.Make:case r.Unknown:default:return null}}function D(e){switch(e){case r.Make:return"make";case r.Cargo:case r.DotNet:case r.Npm:return"";default:return null}}function N(e,t,n){if(0===n.length)return{projType:r.Unknown,runCommand:null,compileCommand:null};var o={initRunCommand:e,isCompiled:t,allFiles:n},i=I(o);return{projType:i,runCommand:R(i,o),compileCommand:D(i)}}var U=n(56834),B=n(47043),z=n(91449),L=n(21644);function M(e,t,n,r){var o=[];return r?(o.push((0,L.xz)("interpreter")),o.push((0,L.xz)("entrypoint")),o.push((0,L.KQ)(e)),n?o.push((0,L.D3)(n)):o.push((0,L.xz)("compile"))):(o.push((0,L.xz)("run")),o.push((0,L.If)(t))),o}var F=n(37155),G=n(61955);function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){W(i,r,o,a,c,"next",e)}function c(e){W(i,r,o,a,c,"throw",e)}a(void 0)}))}}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){V(e,t,n[t])}))}return e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e){var t=e.children,n=(0,Z.Z)("flag-workspace-v2");return(0,a.BX)(T.Z,{background:"default",css:[y.l0.borderRadius(8),{width:"100%",height:n?"calc(100% - var(--space-2))":"calc(100% + var(--space-32) - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:n?"0px":"-32px"}],children:[(0,a.tZ)(w.Z,{children:(0,a.tZ)(f.x,{variant:"subheadDefault",css:[y.l0.color.foregroundDimmest,y.l0.pl(16),y.l0.pt(16)],children:".replit"})}),(0,a.tZ)(w.Z,{css:[y.l0.p(16),y.l0.justify.center,y.l0.align.center,{flex:"1 1 auto"}],children:t})]})}function Y(e){var t,n=Boolean(e.hasInterpreter),o=e.initialRun,i=null!==(t=e.initialCompile)&&void 0!==t?t:"",l=e.isFrameworkRecommended,u=!!e.projType&&e.projType===r.Rails,h=e.isApplyingConfig,m=q(c.useState("Unknown"===s().get(e.initialLanguage).displayName?"bash":e.initialLanguage),2),Z=m[0],E=(m[1],(0,k.Y)(e.initialRun,(function(e){if(!e)return{message:"Add a run command"}}))),_=q(c.useState(e.initialCompile),2),T=_[0],P=_[1];c.useEffect((function(){E.setValue(o)}),[o]),c.useEffect((function(){P(null!==i&&void 0!==i?i:"")}),[i]);var A=(0,k.Y)("",(function(e){if(!e)return{message:"Choose an entry point file"}})),I=q(c.useState(Boolean(n&&!l)),2),R=I[0],D=I[1];c.useEffect((function(){D(Boolean(n&&!l))}),[n,l]);var N=(0,w.K)("a"),U=q(c.useState([]),2),B=U[0],z=U[1],L=(0,O.Z)(),M=(0,F.u)();return c.useEffect((function(){M&&L.current&&z(M)}),[L,M]),(0,a.BX)("form",{onSubmit:function(t){t.preventDefault(),e.setIsApplyingConfig(!0),E.value||R?e.onSubmit({run:E.value,compile:null!==T&&void 0!==T?T:"",entry:A.value,deleteInterp:!R,onDone:e.closeConfigPane,runChanged:E.value!==o,compileChanged:T!==i,projType:e.projType}):E.validate()},css:[y.l0.maxWidth(400),{width:"100%"}],children:[(0,a.BX)(w.Z,{css:[y.l0.colWithGap(8)],children:[n?(0,a.tZ)(w.Z,{css:[y.l0.pb(16)],children:(0,a.BX)(j.hE,{disabled:h,name:"interpreterView",value:R.toString(),row:!0,onChange:function(){return D((function(e){return!e}))},stretch:!0,primary:!0,children:[(0,a.tZ)(j.rK,{id:"interpreterFalse",value:"false",text:"Use run command"}),(0,a.tZ)(j.rK,{id:"interpreterTrue",value:"true",text:"Use default interpreter"})]})}):null,(0,a.BX)(w.Z,{css:[y.l0.height(e.initialCompile?210:170),y.l0.colWithGap(8)],children:[R?null:(0,a.BX)(w.Z,{css:[y.l0.maxWidth(400),y.l0.colWithGap(8)],children:[e.initialCompile?(0,a.BX)(w.Z,{css:[y.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:"compile-sel",children:"Configure the Compile Command"}),(0,a.tZ)(f.x,{multiline:!0,variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,a.tZ)(d.ZP,{disabled:h,id:"compile-sel",type:"text",value:T,placeholder:"Enter a command to compile the program",onChange:function(e){P(e.currentTarget.value)},css:{"&:disabled":{color:y.TV.foregroundDimmer}}})]}):null,(0,a.tZ)("label",{htmlFor:"run-sel",css:[y.l0.mt(4)],children:"Configure the Run Command"}),(0,a.tZ)(d.ZP,{disabled:h,id:"run-sel",type:"text",value:E.value,placeholder:"Enter a command to run the program",onChange:function(e){E.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:y.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),u?(0,a.BX)(f.x,{multiline:!0,variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,a.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/misc/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit\u2019s features."]}):null,E.error||!E.value?(0,a.BX)(w.Z,{css:[y.l0.color.accentNegativeDefault,y.l0.rowWithGap(4),y.l0.align.center],children:[(0,a.tZ)(S.Z,{size:12}),(0,a.tZ)(w.Z,{children:E.error?E.error.message:"Add a run command"})]}):null]}),R?(0,a.BX)(w.Z,{css:[{maxWidth:400},y.l0.colWithGap(8)],children:[(0,a.tZ)("label",{htmlFor:"entry-sel",children:"Configure entry point"}),(0,a.tZ)(f.x,{variant:"small",css:[y.l0.color.foregroundDimmest],multiline:!0,children:"The entry point is the file that\u2019s run by default and shown first."}),0!==B.length?(0,a.tZ)(C.Z,$({id:"config-selector",onSelect:A.setValue,onInit:A.setValue,options:B},B.length&&Boolean(M)&&{initialSelectedOption:B[0]},{disabled:h})):(0,a.tZ)(d.ZP,{disabled:h,id:"entry-sel",type:"text",value:A.value,placeholder:"Choose entry point file",onChange:function(e){A.setValue(e.currentTarget.value)},css:[x.gU.filled,{cursor:"text"}]}),A.error?(0,a.BX)(w.Z,{css:[{color:"var(--accent-negative-default)"},y.l0.rowWithGap(4),y.l0.align.center],children:[(0,a.tZ)(S.Z,{size:12}),(0,a.tZ)(w.Z,{children:A.error.message})]}):null]}):null,(0,a.tZ)(N,{css:[y.l0.color.accentPrimaryStronger,{fontWeight:y.TV.fontWeightMedium}],target:"_blank",href:"https://docs.replit.com/programming-ide/running-github-repositories-replit",rel:"noopener noreferrer",children:"Not sure what to do?"}),(0,a.tZ)(w.Z,{css:[y.l0.flex.row,y.l0.pt(16)],children:(0,a.tZ)(p.ZP,{colorway:"primary",outlined:!0,type:"submit",text:h?"Saving...":"Done",disabled:h||!R&&(Boolean(E.error)||!E.value),css:[x.gU.filledAndOutlined,{fontWeight:y.TV.fontWeightMedium,color:y.TV.accentPrimaryStronger}]})})]})]}),(0,a.tZ)(v.Z,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,a.tZ)(w.Z,{css:[y.l0.borderRadius(16),y.l0.p(32),{backgroundColor:"var(--background-default)"}],children:(0,a.BX)(b.gC,{align:"center",spacing:1,children:[(0,a.tZ)(g.Z,{}),(0,a.BX)(f.x,{children:["Upgrading to ",s().get(Z).displayName]})]})})})]})}function Q(){return(0,a.BX)(w.Z,{children:[(0,a.tZ)(w.Z,{children:".replit looks a lil messed up :/"}),(0,a.tZ)("a",{css:[y.l0.pt(8),{fontSize:y.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/programming-ide/configuring-repl",children:"View docs"})]})}function J(){return(0,a.tZ)(w.Z,{children:(0,a.BX)("p",{children:["Initializing run configuration",(0,a.tZ)(u.Z,{style:{color:"var(--foreground-default)"}})]})})}var ee=function(e){var t,n=(0,_.Z)(),o=(0,m.Z)(),l=o.fs,s=o.dotReplit,u=q((0,h.Fn2)(),1)[0],d=(0,O.Z)(),f=(0,h.HmU)({variables:{replId:n}}),p="Repl"===(null===(t=f.data)||void 0===t?void 0:t.repl.__typename)?f.data.repl:null,v=e.useReadFile(l,E.l),g=q(c.useState(!1),2),b=g[0],y=g[1],x=v&&!v.error?v.content.toString("utf8"):"",w=q(c.useState(""),2),k=w[0],S=w[1],Z=q(c.useState(""),2),j=Z[0],C=Z[1],T=q(c.useState(!1),2),P=T[0],A=T[1],I=q(c.useState(r.Unknown),2),R=I[0],D=I[1],L=q(c.useState(!1),2),F=L[0],X=L[1];c.useEffect((function(){function e(){return(e=H(i().mark((function e(){var t,n,o,a,c,u,f,p,h,m,v,g,b,y,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getConfig();case 2:if(t=e.sent,n=t.config,!t.error){e.next=7;break}return e.abrupt("return");case 7:return a=(0,G.m)(null!==(o=n.run)&&void 0!==o?o:void 0),u=(0,G.m)(null!==(c=n.compile)&&void 0!==c?c:void 0),f=Boolean(n.compile),p=Boolean(n.interpreter),e.next=15,l.listFiles();case 15:if(h=e.sent,d.current){e.next=18;break}return e.abrupt("return");case 18:if(null==h.error&&null!=h.files&&0!==h.files.length){e.next=20;break}return e.abrupt("return");case 20:m=h.files,v=N(a,f,m),g=v.projType,b=v.runCommand,y=v.compileCommand,x=null!==y&&void 0!==y?y:u,S(null!==b&&void 0!==b?b:a),C(x),A(g!==r.Unknown&&g!==r.RegularRun),D(g),X(p);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}x&&function(){e.apply(this,arguments)}()}),[x,d]),c.useEffect((function(){(0,U.j)(U.U3.NIX_GH_IMPORT_USED,{action:B.D.ImportEnded,replId:n})}),[n]);var W=(0,z.Z)();c.useEffect((function(){W(!1)}),[]);var V=function(){var e=H(i().mark((function e(t){var r,o,a,c,d,f,p,h,m,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.run,o=t.compile,a=t.entry,c=t.deleteInterp,d=t.onDone,f=t.runChanged,p=t.compileChanged,h=t.projType,(0,U.j)(U.U3.NIX_GH_IMPORT_USED,{action:B.D.ConfigDone,interpUsed:!c,isCompiled:""!==o,runChanged:f,compileChanged:p,projType:h,replId:n}),m=M(r,a,o,c),e.next=5,s.updateDotReplit(m);case 5:return e.next=7,l.flush();case 7:return e.next=9,l.persist({skipDebounce:!0});case 9:return v={id:n},e.next=12,u({variables:{input:v}});case 12:d();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p&&v?(null===v||void 0===v?void 0:v.error)?(0,a.tZ)(K,{children:(0,a.tZ)(Q,{})}):(0,a.tZ)(K,{children:(0,a.tZ)(Y,{initialLanguage:"",initialRun:k,initialCompile:j,hasInterpreter:F,fs:l,isApplyingConfig:b,setIsApplyingConfig:y,onSubmit:V,isFrameworkRecommended:P,projType:R,closeConfigPane:e.closeConfigPane})}):(0,a.tZ)(K,{children:(0,a.tZ)(J,{})})}},90020:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(35944),o=n(67294),i=n(54929),a=n(3204),c=n(24506),l=n(27291),s=n(85060),u=n(88503),d=n(48015),f=n(96594);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){var t,n=e.options,r=e.initialSelectedOption,i=e.inputRef,a=e.setInputValue,c=m(o.useState(""),2),l=c[0],s=c[1],u=(t={options:n,filter:l},o.useMemo((function(){return t.filter?d.Z.filter(t.filter.toLowerCase(),t.options).map((function(e){return e.original})):t.options}),[t.options,t.filter])),p=(0,f.Kb)({items:u,initialHighlightedIndex:0,initialSelectedItem:r,stateReducer:function(e,t){var n,r,o=t.type,c=t.changes;(o===f.Kb.stateChangeTypes.ItemClick||o===f.Kb.stateChangeTypes.InputKeyDownEnter&&c.selectedItem)&&(null===(n=i.current)||void 0===n||n.blur());return o!==f.Kb.stateChangeTypes.InputBlur||c.selectedItem?o===f.Kb.stateChangeTypes.InputBlur&&c.selectedItem?(a(null!==(r=c.selectedItem)&&void 0!==r?r:""),c):c:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},c,{isOpen:!0})}});return{filteredOptions:u,combobox:p,setFilter:s,filter:l}}var g=n(67938),b=n(50553),y=n(70917),x=n(79162),w=n(45718),k=n(89957);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Z(e,t,n[t])}))}return e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=(0,y.iv)([a.l0.py(8),a.l0.pl(8),a.l0.pr(32),{color:"inherit",outline:"0 none",border:"1px solid",fontSize:"inherit",lineHeight:a.TV.space16,display:"block",width:"100%","::placeholder, :disabled":{color:a.TV.foregroundDimmer,borderColor:"transparent"},cursor:"text"}]),O=(0,y.iv)({border:"none",background:"transparent",color:"inherit",font:"inherit",lineHeight:"normal"}),C=(0,y.iv)([O,c.gU.listItem,a.l0.borderRadius(8),a.l0.center,{width:24,height:24}]),T=(0,i.K)("button");function P(e){var t=e.id,n=e.onSelect,c=e.onInit,d=e.options,f=e.initialSelectedOption,p=e.placeholderText,h=e.autoFocus,m=e.disabled,y=o.useRef(null),S=_(o.useState(null!==f&&void 0!==f?f:""),2),Z=S[0],O=S[1],P=v({options:d,initialSelectedOption:f,inputRef:y,setInputValue:O}),I=P.filteredOptions,R=P.filter,D=P.combobox,N=P.setFilter,U=(0,l.Z)(n),B=(0,l.Z)(c);return o.useEffect((function(){f&&(B.current(f),O(f),N(""))}),[f]),(0,s.Z)((function(){var e;D.selectedItem&&(null===(e=y.current)||void 0===e||e.blur(),U.current(D.selectedItem),O(D.selectedItem),N(""))}),[D.selectedItem,U]),o.useEffect((function(){f&&(D.selectItem(f),O(f),N(""))}),[f]),(0,r.BX)(i.Z,{children:[(0,r.tZ)("div",E({},D.getComboboxProps(),{children:(0,r.BX)(i.Z,{css:[a.l0.flex.row,{position:"relative"}],children:[(0,r.tZ)(i.Z,{css:[a.l0.flex.growAndShrink(1)],children:(0,r.tZ)(k.ZP,E({},D.getInputProps({id:t,spellCheck:!1,autoFocus:h,onChange:function(e){N(e.currentTarget.value.toLowerCase()),O(e.currentTarget.value)},ref:y,onFocus:function(e){D.openMenu(),e.currentTarget.select()}}),{value:Z,placeholder:null!==f&&void 0!==f?f:p,css:[j],disabled:m}))}),m?null:(0,r.tZ)(i.Z,{css:[{position:"absolute",top:0,right:0,height:"100%"},a.l0.center],children:(0,r.tZ)(T,E({},D.getToggleButtonProps(),{css:C,type:"button",children:D.inputValue&&!D.isOpen?(0,r.tZ)(b.Z,{}):(0,r.tZ)(u.Z,{})}))})]})})),(0,r.BX)("div",E({},D.getMenuProps(),{css:{position:"relative"},children:[D.isOpen&&I.length?(0,r.tZ)(x.Z,{children:(0,r.tZ)("ul",{css:[a.l0.pt(4),a.l0.pb(8)],children:I.map((function(e,t){return(0,r.tZ)("li",E({},D.getItemProps({item:e,index:t}),{children:(0,r.tZ)(w.Z,E({},A(e),{filter:R,selected:D.selectedItem===e,highlighted:D.highlightedIndex===t}))}),e.toLowerCase())}))})}):null,R&&!I.length&&D.isOpen?(0,r.tZ)(x.Z,{children:(0,r.tZ)(i.Z,{css:[a.l0.p(16),a.l0.colWithGap(4)],children:(0,r.BX)(g.x,{color:"dimmer",children:['No results for "',R,'"']})})}):null]}))]})}function A(e){return{title:e,key:e.toLowerCase()}}},62473:function(e,t,n){n.d(t,{Z:function(){return h},_:function(){return g}});var r=n(35944),o=n(79547),i=n.n(o),a=n(67294),c=n(40425),l=n(8996),s=n(50553),u=n(51281),d=n(3204);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){var t=p(a.useState(!1),2),n=t[0],o=t[1],i=[],s=[];if(e.variables.length>0){var d=e.variables[0].parentVariableReference,f=!0,h=!1,m=void 0;try{for(var v,b=e.variables[Symbol.iterator]();!(f=(v=b.next()).done);f=!0){var y=v.value;y.parentVariableReference===d?i.push(y):s.push(y)}}catch(x){h=!0,m=x}finally{try{f||null==b.return||b.return()}finally{if(h)throw m}}}return(0,r.BX)(r.HY,{children:[(0,r.tZ)(c.Z,{truncate:!0,level:5,children:"Variables"}),(0,r.BX)(l.gC,{align:"stretch",constrainWidth:!0,children:[i.map((function(t){return(0,r.tZ)(g,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})),s.length>0&&(0,r.BX)(r.HY,{children:[(0,r.BX)(u.Z,{filled:!1,border:!1,onClick:function(){return o((function(e){return!e}))},children:["See ",n?"Less":"More"]}),n&&s.map((function(t){return(0,r.tZ)(g,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}))]})]})]})}function m(e){var t=e.variable,n=e.expanded;return t.variablesReference>0?(0,r.tZ)("div",{css:[d.l0.transition.snappy,{transform:"rotate(".concat(n?0:-90,"deg)")}],children:(0,r.tZ)(s.Z,{})}):null}function v(e){var t=e.expanded,n=e.depth,o=e.variable;return 0===n&&!("parentVariableReference"in o)?(0,r.tZ)(m,{expanded:t,variable:o}):(0,r.tZ)("div",{css:[d.l0.flex.grow(0),d.l0.flex.shrink(0),d.l0.width(d.TV.space16),d.l0.display.flex,d.l0.align.center,d.l0.justify.end],children:(0,r.tZ)(m,{expanded:t,variable:o})})}function g(e){var t=e.depth,n=e.variable,o=e.client,c=p(a.useState(!1),2),s=c[0],u=c[1],d=p(a.useState([]),2),f=d[0],h=d[1];return a.useEffect((function(){s&&o.fetchVariables(n.variablesReference).then((function(e){return h(e)}),(function(){return u(!1)}))}),[s,o,n.variablesReference]),(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{onClick:function(){n.variablesReference>0&&u((function(e){return!e}))},className:i().dynamic([["eb8f8d11a9c29a62",[t]]])+" variable",children:[(0,r.tZ)(v,{expanded:s,variable:n,depth:t}),(0,r.BX)("div",{className:i().dynamic([["eb8f8d11a9c29a62",[t]]])+" label",children:[n.name,n.type&&(0,r.BX)("span",{className:i().dynamic([["eb8f8d11a9c29a62",[t]]])+" type",children:[" ",n.type]}),""!==n.value&&": "]}),(0,r.tZ)("div",{className:i().dynamic([["eb8f8d11a9c29a62",[t]]])+" label value",children:n.value})]}),s?(0,r.tZ)(l.gC,{align:"stretch",constrainWidth:!0,children:f.map((function(e){return(0,r.tZ)(g,{depth:t+1,variable:e,client:o},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)}))}):null,(0,r.tZ)(i(),{id:"eb8f8d11a9c29a62",dynamic:[t],children:".variable.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;height:var(--space-32);min-height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default);padding-left:-webkit-calc(".concat(t," * var(--space-16));padding-left:-moz-calc(").concat(t," * var(--space-16));padding-left:calc(").concat(t," * var(--space-16));font-family:var(--font-family-code)}.variable.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.__jsx-style-dynamic-selector{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;-webkit-box-flex:1;-webkit-flex:1 0 auto;-moz-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.type.__jsx-style-dynamic-selector{opacity:.5}.value.__jsx-style-dynamic-selector{text-align:right;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1}")})]})}},61955:function(e,t,n){n.d(t,{C:function(){return r},m:function(){return o}});var r=function(e){return(null===e||void 0===e?void 0:e.args)&&(!(e.args.length>=3)||""!==e.args[2])},o=function(e){return e&&e.args?(e.args&&e.args.length>=3&&"sh"===e.args[0]&&"-c"===e.args[1]?e.args.slice(2):e.args).join(" "):""}},37044:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(34051),o=n.n(r),i=n(35944),a=n(67294),c=n(80796),l=n(82820),s=n(88768),u=n(49337),d=n(39550),f=n(93770);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=function(e,t,n){var r;if(!e)return[];var o=t(e.getSceneElementsIncludingDeleted()),i=e.getAppState();return(r=n.reduce((function(e,t){var n,r,a;return t.id===(null===(n=i.editingElement)||void 0===n?void 0:n.id)||t.id===(null===(r=i.resizingElement)||void 0===r?void 0:r.id)||t.id===(null===(a=i.draggingElement)||void 0===a?void 0:a.id)||(o[t.id]&&o[t.id].version>t.version?(e.push(o[t.id]),delete o[t.id]):o[t.id]&&o[t.id].version===t.version&&o[t.id].versionNonce!==t.versionNonce?(o[t.id].versionNonce<t.versionNonce?e.push(o[t.id]):e.push(t),delete o[t.id]):(e.push(t),delete o[t.id])),e}),[])).concat.apply(r,h(Object.values(o)))},v=function(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n},g=n(54929),b=n(3204),y=n(55551);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){w(i,r,o,a,c,"next",e)}function c(e){w(i,r,o,a,c,"throw",e)}a(void 0)}))}}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function O(e){var t,r=e.fs,p=e.presence,h=e.broadcast,x=e.filePath,w=(0,a.useState)(void 0),S=w[0],j=w[1],O=(0,a.useRef)((function(e){return _(e)})),C=(0,a.useRef)((function(e){return-1})),T=(0,a.useRef)((function(e){return{}})),P=(0,a.useRef)({readyPromise:v()}),A=(0,a.useRef)({promise:null});(0,a.useEffect)((function(){Promise.all([n.e(2738),n.e(4474)]).then(n.t.bind(n,74474,23)).then((function(e){O.current=e.getSyncableElements,C.current=e.getSceneVersion,T.current=e.getElementMap,j(e.default)}))}),[]);var I=function(){return P.current},R=(0,s.K1s)({ssr:!1}),D=R.data,N=R.loading,U=(null===D||void 0===D||null===(t=D.currentUser)||void 0===t?void 0:t.username)||"",B=(0,y.Z)(),z=(0,u.Z)({presence:p}),L=(0,d.Z)(),M=null===L||void 0===L?void 0:L.color,F=(0,a.useState)(new Map),G=F[0],X=F[1],W=(0,a.useState)(-1),H=W[0],V=W[1];(0,a.useEffect)((function(){function e(){return(e=k(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D&&D.currentUser){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P.current.readyPromise;case 4:t=I().getAppState().collaborators,n=new Map,z.forEach((function(e){var r;if(e.username!==(null===D||void 0===D||null===(r=D.currentUser)||void 0===r?void 0:r.username)){var o=t.get(e.username)||{};n.set(e.username,Z({},o,{username:e.username,color:{background:e.color,foreground:e.color}}))}})),I().updateScene({collaborators:n});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[D,z]);var $=function(){var e=k(o().mark((function e(t,n){var r,i,a,c,l,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n||(t=t.filter((function(e){return!G.has(e.id)||e.version>G.get(e.id)}))),r=!0,i=!1,a=void 0,e.prev=2,c=t[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)s=l.value,G.set(s.id,s.version),X(new Map(G));e.next=10;break;case 6:e.prev=6,e.t0=e.catch(2),i=!0,a=e.t0;case 10:e.prev=10,e.prev=11,r||null==c.return||c.return();case 13:if(e.prev=13,!i){e.next=16;break}throw a;case 16:return e.finish(13);case 17:return e.finish(10);case 18:h.broadcastMessage({text:JSON.stringify({elements:t,path:x})});case 19:case"end":return e.stop()}}),e,null,[[2,6,10,18],[11,,13,17]])})));return function(t,n){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){if(h){var e=h.onBroadcastReceived((function(e){var t=e.username,n=e.text,r=JSON.parse(n);if(r.path===x)if(r.collaborator&&P.current){var o=I().getAppState().collaborators;o.set(t,Z({},o.get(t),r.collaborator,{username:t})),I().updateScene({collaborators:o})}else if(r.elements){var i=m(I(),T.current,r.elements);V(C.current(i)),I().updateScene({elements:i})}}));return function(){e()}}}),[h,x]),(0,a.useEffect)((function(){function e(){return e=k(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&r){e.next=2;break}return e.abrupt("return");case 2:A.current.promise=new Promise(function(){var e=k(o().mark((function e(t){var n,i,a,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=E,e.next=3,Promise.all([r.readFile(x),P.current.readyPromise]);case 3:e.t1=e.sent,n=(0,e.t0)(e.t1,1),"content"in(i=n[0])&&(a=i.content.toString(),c=JSON.parse(a||"{}"),l=I().getAppState(),c.appState=Z({},l),c.scrollToContent=!0,t(c));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[x,r]);var q=(0,a.useCallback)((0,c.Z)(function(){var e=k(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.filter((function(e){return!e.isDeleted})),!x){e.next=4;break}return e.next=4,r.writeFile(x,f.Z.from(JSON.stringify({elements:n})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),350),[x]);return(0,i.tZ)(g.Z,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:M?"0 3px 0 3px ".concat(M):"none",backgroundColor:b.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"},"& .excalidraw .App-menu_top":{gridTemplateColumns:"0 auto 1fr !important",gridGap:"none !important"},"& .excalidraw .App-menu_bottom":{transform:"none !important",paddingLeft:"var(--space-4) !important"}},children:S&&!N&&(0,i.tZ)(S,{zenModeEnabled:!0,ref:P,isCollaborating:!0,theme:B===l.V2.replitLight?"light":"dark",initialData:A.current.promise,onPointerUpdate:function(e){var t=e.pointer;if(I().getAppState().collaborators.size>0){var n=I().getAppState().selectedElementIds||{};h.broadcastMessage({text:JSON.stringify({collaborator:{pointer:t,selectedElementIds:n},path:x})})}},onChange:function(e){I().getAppState().collaborators.size>0?function(e){C.current(e)>H&&(H>-1&&$(O.current(e),!1),V(C.current(e)))}(e):V(C.current(e)),C.current(e)>H&&q(e)},user:{name:U}})})}function C(e){var t=e.fs,n=e.presence,r=e.broadcast,o=e.filePath;return(0,i.tZ)(O,{fs:t,presence:n,broadcast:r,filePath:o},o)}},51419:function(e,t,n){n.d(t,{Z:function(){return se}});var r=n(34051),o=n.n(r),i=n(35944),a=n(79547),c=n.n(a),l=n(67294),s=n(92876),u=n(94184),d=n.n(u),f=n(46846),p=n(93770),h=n(11503),m=n(8996),v=n(51281),g=n(57541),b=n(57923),y=n(40425),x=n(58458),w=n(29698),k=n(44894),S=n(62857),Z=n(27740),E=n.n(Z),_=n(85133),j=n(98620),O=n(50553),C=n(88768),T=n(86923),P=n(11542),A=n(56834),I=n(45193),R=n(28593),D=n(60818),N=n(67289);function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){B(i,r,o,a,c,"next",e)}function c(e){B(i,r,o,a,c,"throw",e)}a(void 0)}))}}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){L(e,t,n[t])}))}return e}function F(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=A.U3.ENV_EDITOR_OPENED,W=A.U3.ENV_EDITOR_USED,H=A.U3.ENV_EDITOR_INTRO_SKIPPED,V=A.U3.ENV_EDITOR_INSERT_USED,$=((0,i.tZ)(c(),{id:"223f8ac8383e5040",children:"*.jsx-223f8ac8383e5040{max-width:100%}"}),"jsx-223f8ac8383e5040");function q(e){return function(t){t.stopPropagation(),e(t)}}function K(e,t){return e?e.trim()?t.includes(e)?"You already have a secret with this key":null:"The key must include a non-space character":"Please add a key for this secret"}function Y(e){return e?null:"Please add a value for this secret"}function Q(e){var t=e.secret,n=e.otherKeys,r=e.onUpdateKey,o=e.onUpdateValue,a=e.onSave,s=e.onCancel,u=e.onDelete,d=G(l.useState(),2),f=d[0],p=d[1],h=G(l.useState(),2),b=h[0],y=h[1],x=l.useRef(null),w=l.useRef(null),k=function(){var e=K(t.key,n);if(e)return p(e),void(x.current&&x.current.focus());var r=Y(t.value);if(r)return y(r),void(w.current&&w.current.focus());a()};l.useEffect((function(){f&&(K(t.key,n)||p(null))}),[t.key,f,n]),l.useEffect((function(){b&&(Y(t.value)||y(null))}),[t.value,b]);var S=q((function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k())}));return(0,i.BX)("div",{className:"jsx-691e121709ad57fd",children:[(0,i.BX)(m.gC,{spacing:1,align:"stretch",className:$,children:[(0,i.tZ)(g.ZP,{autoFocus:!0,ref:x,label:"key",name:"key",value:t.key,spellCheck:!1,onChange:function(e){r(e.currentTarget.value)},onKeyDown:S,validationResults:f?[{message:f,state:"error"}]:void 0}),(0,i.tZ)(T.Z,{ref:w,label:"value",name:"value",value:t.value,spellCheck:!1,onChange:function(e){o(e.currentTarget.value)},onKeyDown:S,validationResults:b?[{message:b,state:"error"}]:void 0}),(0,i.BX)(m.Ug,{justify:"space-between",children:[u?(0,i.tZ)(v.Z,{onClick:q(u),color:"negative",children:"Delete"}):null,(0,i.BX)(m.Ug,{spacing:1,children:[s?(0,i.tZ)(v.Z,{onClick:q(s),children:"Cancel"}):null,(0,i.tZ)(v.Z,{color:"primary",onClick:q(k),children:u?"Save":"Add new secret"})]})]})]}),(0,i.tZ)(c(),{id:"691e121709ad57fd",children:"div.jsx-691e121709ad57fd{background:var(--background-root);padding:var(--space-16);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8)}"})]})}function J(e){var t=e.onAdd,n=e.otherKeys,r=G(l.useState({key:"",value:""}),2),o=r[0],a=r[1];return(0,i.tZ)(Q,{secret:o,otherKeys:n,onUpdateKey:function(e){return a((function(t){return t?M({},t,{key:e}):t}))},onUpdateValue:function(e){return a((function(t){return t?M({},t,{value:e}):t}))},onSave:function(){a({key:"",value:""}),o.value&&o.key&&t(o)}})}var ee={styles:(0,i.tZ)(c(),{id:"6ee31908fcf933da",children:"*.jsx-6ee31908fcf933da{max-width:-webkit-calc(100% - 16px);max-width:-moz-calc(100% - 16px);max-width:calc(100% - 16px)}"}),className:"jsx-6ee31908fcf933da"};function te(e){var t=e.secret,n=e.otherKeys,r=e.onUpdateSecret,o=e.onDeleteSecret,a=G(l.useState(null),2),s=a[0],u=a[1],f=null;s&&(f=(0,i.tZ)(Q,{secret:s,otherKeys:n,onUpdateKey:function(e){return u((function(t){return t?M({},t,{key:e}):t}))},onUpdateValue:function(e){return u((function(t){return t?M({},t,{value:e}):t}))},onSave:function(){u(null),s.value&&s.key&&(s.value===t.value&&s.key===t.key||r(t.key,s))},onCancel:function(){return u(null)},onDelete:function(){return o(t.key)}}));var p=Boolean(f);return(0,i.BX)("div",{onClick:function(){p||u(M({},t))},className:"jsx-93c5849ae6790dea "+(d()("secret",$,{"is-editing":p})||""),children:[f||(0,i.BX)(m.Ug,{align:"center",justify:"space-between",wrap:"nowrap",className:$,children:[(0,i.BX)(m.Ug,{align:"center",justify:"start",wrap:"nowrap",className:ee.className,children:[(0,i.tZ)(x.Z,{children:(0,i.tZ)(S.Z,{size:24})}),(0,i.tZ)(x.Z,{truncate:!0,children:t.key})]}),(0,i.tZ)("div",{className:"jsx-93c5849ae6790dea edit",children:(0,i.tZ)(x.Z,{children:(0,i.tZ)(w.Z,{size:16})})})]}),ee.styles,(0,i.tZ)(c(),{id:"93c5849ae6790dea",children:".secret.jsx-93c5849ae6790dea{cursor:pointer;padding:var(--space-16)var(--space-16)var(--space-16)0;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8)}.secret.is-editing.jsx-93c5849ae6790dea{cursor:auto;padding:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.secret.jsx-93c5849ae6790dea:hover{background:var(--background-root)}.edit.jsx-93c5849ae6790dea{margin-left:var(--space-8);visibility:hidden}.secret.jsx-93c5849ae6790dea:hover .edit.jsx-93c5849ae6790dea{visibility:initial}.is-touch-device .edit.jsx-93c5849ae6790dea{visibility:initial}"})]})}function ne(e){var t=e.secrets,n=e.onUpdateSecret,r=e.onDeleteSecret;return(0,i.tZ)(m.gC,{spacing:1,align:"stretch",className:$,children:Object.keys(t).sort().map((function(e){return(0,i.tZ)(te,{otherKeys:Object.keys(t).filter((function(t){return t!==e})),secret:{key:e,value:t[e]},onUpdateSecret:n,onDeleteSecret:r},e)}))})}function re(e){var t=e.secrets,n=e.language,r=e.activeFile,o=e.onInsertDone,a=G(l.useState(Object.keys(t)[0]),2),c=a[0],s=a[1],u=(0,D.Z)(r),d=function(e,t){if(!e)return null;switch((0,N.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}(r,c);return d&&u?(0,i.BX)(m.gC,{spacing:2,align:"stretch",className:$,children:[(0,i.BX)(x.Z,{children:["To use secrets in ",E().get(n).displayName]}),d.import?(0,i.BX)(m.gC,{spacing:1,align:"stretch",className:$,children:[(0,i.tZ)(y.Z,{level:6,truncate:!0,children:"1. Add the imports"}),(0,i.tZ)(x.Z,{tag:"pre",fontFamily:"monospace",className:ie.className,truncate:!0,children:d.import}),(0,i.tZ)(m.Ug,{children:(0,i.BX)(v.Z,{onClick:function(){u({code:d.import,insertAt:0}),(0,A.j)(V)},children:["Insert -",">"]})})]}):null,(0,i.BX)(m.gC,{spacing:1,align:"stretch",className:$,children:[(0,i.BX)(y.Z,{level:6,truncate:!0,children:[d.import?"2. ":"","Access the secret by key as an environment variable"]}),(0,i.tZ)(j.Z,{respectMaxWidth:!0,items:Object.keys(t),onClick:function(e){s(e)},renderAnchorComponent:function(e){var t=e.innerRef,n=F(e,["innerRef"]);return(0,i.tZ)(v.Z,M({ref:t},n,{Icon:O.Z,filled:!1,iconOnRight:!0,children:(0,i.tZ)(x.Z,{style:{maxWidth:"100px"},truncate:!0,children:c})}))},renderItemChildComponent:function(e){return(0,i.tZ)(x.Z,{truncate:!0,children:e})}}),(0,i.tZ)(x.Z,{tag:"pre",fontFamily:"monospace",className:ie.className,truncate:!0,children:d.access}),(0,i.tZ)(m.Ug,{children:(0,i.BX)(v.Z,{onClick:function(){u({code:d.access}),o&&o(),(0,A.j)(V)},children:["Insert -",">"]})})]}),ie.styles]}):(0,i.BX)(m.gC,{spacing:1,align:"stretch",className:$,children:[(0,i.tZ)(x.Z,{children:"The secrets will be available in your Repl when you hit the run button as environment variables."}),u?null:(0,i.BX)(x.Z,{children:["Select a $",E().get(n).displayName," file to enable code inserter"]})]})}var oe,ie={styles:(0,i.tZ)(c(),{id:"62380dc2f7e272ba",children:"*.jsx-62380dc2f7e272ba{padding:var(--space-8);background:var(--background-root)}"}),className:"jsx-62380dc2f7e272ba"};function ae(e){var t=e.language,n=e.secrets,r=e.activeFile,o=e.onAdd,a=e.onIntroDone,c=G(l.useState(oe.What),2),s=c[0],u=c[1];return s===oe.What?(0,i.BX)(m.gC,{spacing:1,align:"stretch",className:$,children:[(0,i.tZ)(y.Z,{level:5,children:"What\u2019s this?"}),(0,i.tZ)(x.Z,{children:"Using this feature will allow you to hide secret information like passwords while still being able to use them in the Repl"}),(0,i.tZ)(m.Ug,{children:(0,i.tZ)(v.Z,{filled:!0,color:"primary",onClick:function(){return u(oe.Add)},children:"Got it"})})]}):s===oe.Add?(0,i.BX)(m.gC,{spacing:1,align:"stretch",className:$,children:[(0,i.tZ)(y.Z,{level:5,children:"Add your first secret!"}),(0,i.tZ)(x.Z,{children:'The "key" is what you will use in the code itself and will be visible to everyone'}),(0,i.tZ)(x.Z,{children:'The "value" is where you put the private or secret text, hit shift+enter to add new lines'}),(0,i.tZ)(J,{onAdd:function(e){o(e),u(oe.Use)},otherKeys:Object.keys(n)}),(0,i.tZ)(v.Z,{onClick:function(){var e=Object.keys(n).length>0?oe.Use:oe.End;u(e),(0,A.j)(H,{step:oe.Add})},children:"Skip this step"})]}):s===oe.Use?(0,i.BX)(m.gC,{spacing:1,align:"stretch",className:$,children:[(0,i.tZ)(y.Z,{level:5,children:"Now let\u2019s use it in the Repl."}),(0,i.tZ)(re,{secrets:n,language:t,onInsertDone:function(){return u(oe.End)},activeFile:r}),(0,i.tZ)(v.Z,{onClick:function(){u(oe.End),(0,A.j)(H,{step:oe.Use})},children:"Skip this step"})]}):(0,i.BX)(m.gC,{spacing:1,align:"stretch",className:$,children:[(0,i.tZ)(x.Z,{children:"You\u2019re all set. You can add as many secrets as you want, we promise to keep them safe."}),(0,i.BX)(x.Z,{children:["You can always"," ",(0,i.tZ)("a",{href:"https://docs.replit.com/programming-ide/storing-sensitive-information-environment-variables",target:"_blank",children:"visit our docs"})," ","for more information."]}),(0,i.tZ)(x.Z,{children:"Please note, that people you invite as multiplayer collaborators will have access to these secrets."}),(0,i.tZ)(v.Z,{onClick:a,children:"Got it"})]})}function ce(e){var t=e.secrets,n=e.update,r=G(l.useState(!1),2),a=r[0],u=r[1],d=G(l.useState(""),2),f=d[0],p=d[1],h=G(l.useState(!1),2),g=h[0],b=h[1],w=G(l.useState(!1),2),k=w[0],S=w[1],Z=l.useRef(null),E=function(){var e=z(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),t=function(){S(!0),b(!1),(0,A.j)(W,{action:"rawEditorUpdatedError"}),Z.current&&Z.current.focus()},e.prev=3,r=JSON.parse(f),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(3),t(),e.abrupt("return");case 11:if("object"===typeof r&&Object.getPrototypeOf(r)===Object.prototype&&!Object.values(r).some((function(e){return"string"!==typeof e}))&&!Object.keys(r).some((function(e){return"string"!==typeof e}))){e.next=14;break}return t(),e.abrupt("return");case 14:return e.prev=14,e.next=17,n(r);case 17:e.next=24;break;case 19:return e.prev=19,e.t1=e.catch(14),s.Tb(e.t1),t(),e.abrupt("return");case 24:u(!1),b(!1),(0,A.j)(W,{action:"rawEditorUpdated"});case 27:case"end":return e.stop()}}),e,null,[[3,7],[14,19]])})));return function(){return e.apply(this,arguments)}}();return l.useEffect((function(){S(!1)}),[f]),l.useEffect((function(){0!==Object.keys(t).length?p(JSON.stringify(t,null,2)):p("{\n}")}),[t]),(0,i.BX)(m.gC,{spacing:1,align:"stretch",className:$,children:[(0,i.tZ)(y.Z,{level:5,children:"Edit raw JSON (Advanced)"}),(0,i.tZ)(v.Z,{onClick:function(){(0,A.j)(W,{action:"rawEditorOpened"}),u(!0)},children:"Open raw editor"}),(0,i.tZ)(I.Z,{isOpen:a,preventClose:g,onRequestClose:function(){return u(!1)},children:(0,i.BX)("div",{className:"jsx-47d637c4b0043f26 content",children:[(0,i.BX)(m.gC,{spacing:2,align:"stretch",children:[(0,i.tZ)(y.Z,{level:4,children:"Raw Secrets Editor"}),(0,i.tZ)(x.Z,{children:"The text must be valid JSON object with keys and values as strings"}),(0,i.tZ)(T.Z,{ref:Z,disabled:g,value:f,onChange:function(e){p(e.currentTarget.value)},validationResults:k?[{message:"Invalid input. Please make sure the data is valid JSON and all keys and values are strings.",state:"error"}]:void 0}),(0,i.BX)(m.Ug,{spacing:2,justify:"end",children:[(0,i.tZ)(v.Z,{disabled:g,onClick:function(){return u(!1)},children:"Cancel"}),(0,i.tZ)(v.Z,{loading:g,color:"primary",onClick:E,children:"Save"})]})]}),(0,i.tZ)(c(),{id:"47d637c4b0043f26",children:".content.jsx-47d637c4b0043f26{height:100%;width:100%;padding:var(--space-24)}.editable-area.jsx-47d637c4b0043f26{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor.jsx-47d637c4b0043f26{height:150px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.collapse.jsx-47d637c4b0043f26{cursor:pointer}"})]})})]})}function le(e,t){var n=M({},e);return"add"===t.type?n[t.key]=t.value:"update"===t.type?(delete n[t.oldKey],n[t.key]=t.value):delete n[t.key],n}function se(e){var t,n=e.fs,r=e.activeFile,a=(0,b.Z)(),c=G(l.useState(null),2),s=c[0],u=c[1],d=(0,C.eYX)(),v=d.data,g=d.loading,x=d.updateQuery,w=G((0,C.e_)(),1)[0],S=(0,_.Z)();l.useEffect((function(){(0,A.Cn)(X),k.Z.set("enveditortour",!0)}),[]),l.useEffect((function(){function e(){return(e=z(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.readFile(".env");case 2:if((t=e.sent).error!==f.Df.NotFound){e.next=6;break}return a.current&&u({}),e.abrupt("return");case 6:if(!t.error){e.next=8;break}throw new Error("Error getting .env");case 8:if(a.current){e.next=10;break}return e.abrupt("return");case 10:r=h.Z.parse(t.content.toString()),u(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,u,a]);var Z=l.useRef(null),E=l.useRef([]),j=function(){var e=z(o().mark((function e(t){var r,i,a,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}throw new Error("trying to write secrets before loading");case 2:return r=le(s,t),u(r),E.current.push(t),i=Math.random(),Z.current=i,e.next=10,n.readFile(".env");case 10:if(c=e.sent,Z.current===i){e.next=13;break}return e.abrupt("return");case 13:return c.error?a=r:(a=h.Z.parse(c.content.toString()),E.current.forEach((function(e){a=le(a,e)})),u(a)),E.current=[],l=h.Z.serialize(a),e.next=18,n.writeFile(".env",p.Z.from(l));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=z(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,A.j)(W,{action:"created",multiline:t.value.includes("\n")}),j(M({type:"add"},t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=z(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,A.j)(W,{action:"updated",multiline:n.value.includes("\n")}),j(M({type:"update",oldKey:t},n));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=z(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,A.j)(W,{action:"deleted"}),j({type:"delete",key:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(g||!s||!S)return(0,i.tZ)(m.ZP,{align:"stretch",justify:"center",children:(0,i.tZ)(R.Z,{})});if(null===v||void 0===v||null===(t=v.currentUser)||void 0===t?void 0:t.seenIntro){var D=Object.keys(s);return(0,i.BX)(i.HY,{children:[(0,i.tZ)(ne,{secrets:s,onUpdateSecret:T,onDeleteSecret:I}),(0,i.tZ)("div",{children:(0,i.tZ)(J,{onAdd:O,otherKeys:D})}),D.length>0?(0,i.BX)(i.HY,{children:[(0,i.tZ)(P.Z,{size:2}),(0,i.BX)(m.gC,{spacing:1,align:"stretch",className:$,children:[(0,i.tZ)(y.Z,{level:5,children:"Use secrets in the Repl"}),(0,i.tZ)(re,{secrets:s,language:S.language,activeFile:r})]})]}):null,(0,i.tZ)(P.Z,{size:2}),(0,i.tZ)(ce,{secrets:s,update:function(){var e=z(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(t),r=h.Z.serialize(t),e.next=4,n.writeFile(".env",p.Z.from(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})}return(0,i.tZ)(ae,{secrets:s,onAdd:O,activeFile:r,language:S.language,onIntroDone:function(){w(),x((function(e){return e.currentUser?M({},e,{currentUser:M({},e.currentUser,{seenIntro:!0})}):e}))}})}!function(e){e.What="What",e.Add="Add",e.Use="Use",e.End="End"}(oe||(oe={}))},42458:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(35944),o=n(79547),i=n.n(o),a=(n(67294),n(8996)),c=n(70294),l=n(58458);function s(e){var t=e.isOn,n=e.onChange;return(0,r.BX)("div",{className:"jsx-ba89bcc1d04a3ebe toggle-container",children:[(0,r.BX)(a.Ug,{spacing:1,align:"center",wrap:"nowrap",children:[(0,r.tZ)(l.Z,{size:"small",children:"Preview"}),(0,r.tZ)(c.Z,{isOn:t,onChange:n})]}),(0,r.tZ)(i(),{id:"ba89bcc1d04a3ebe",children:".toggle-container.jsx-ba89bcc1d04a3ebe{background-color:var(--background-root);padding:4px var(--space-8);-webkit-border-top-left-radius:var(--border-radius-4);-moz-border-radius-topleft:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4)}"})]})}},22944:function(e,t,n){var r=n(35944),o=n(67294),i=n(41664),a=n.n(i),c=n(56834),l=n(20795),s=n(15151),u=n(50348),d=n(30617),f=n(46846),p=n(27754),h=n(3204),m=n(67938),v=n(54929),g=n(70917),b=n(27464),y=n(58843),x=(0,g.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}");function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";(0,c.j)(c.U3.HISTORY_USED,{action:"historyOpened",which:e})}var k=function(e){var t,n,o=e.repl,i=e.isSaving,c=(0,y.c)("flag-rollout-history-2").enabled?"2":"1",l={1:{href:{pathname:"/replHistory",query:{slug:o.slug}},as:"".concat(o.url,"/history")},2:{href:"".concat(o.url,"/history2")+(null!==(t=window.location.hash)&&void 0!==t?t:""),as:"".concat(o.url,"/history2")+(null!==(n=window.location.hash)&&void 0!==n?n:"")}}[c];return(0,r.tZ)(a(),{prefetch:!1,href:l.href,as:l.as,children:(0,r.tZ)("a",{role:"button",tabIndex:0,onClick:function(){return w(c)},onKeyDown:function(){return w(c)},children:(0,r.tZ)(v.Z,{css:[h.l0.flex.row,h.l0.align.center,h.l0.color.foregroundDefault,i?(0,g.iv)({animation:"".concat(x," 2s infinite")}):null],children:(0,r.tZ)(b.Z,{size:28,alt:"Repl history",children:(0,r.tZ)(s.Z,{})})})})})},S=(0,g.iv)({color:h.TV.accentNegativeDefault}),Z=function(){return(0,r.BX)(v.Z,{css:[h.l0.flex.row],children:[(0,r.tZ)(b.Z,{size:18,disabled:!0,alt:"Reconnecting, changes will be synced when you\u2019re online",css:[S],children:(0,r.tZ)(l.CloudOff,{})}),(0,r.tZ)(m.x,{css:[(0,g.iv)({"@media (hover: hover)":{display:"none"}}),h.l0.pl(4),S],children:"Offline"})]})};t.Z=function(e){var t=e.canEdit,n=e.repl,i=function(){var e=(0,d.Z)().fs,t=(0,o.useState)(!1),n=t[0],r=t[1],i=(0,u.Z)(),a=(0,o.useState)(!1),c=a[0],l=a[1];return(0,o.useEffect)((function(){i===p.e.CONNECTED&&l(!0)}),[i]),(0,o.useEffect)((function(){return r(e.getStatus()===f.kO.Syncing),e.onStatusChange((function(e){r(e===f.kO.Syncing)}))}),[e]),c?{isSaving:n,isOffline:i!==p.e.CONNECTED}:{isSaving:!1,isOffline:!1}}(),a=i.isSaving,c=i.isOffline;return t?(0,r.tZ)(v.Z,{css:[h.l0.flex.row,h.l0.align.center,h.l0.height("100%")],children:c?(0,r.tZ)(Z,{}):(0,r.tZ)(k,{isSaving:a,repl:n})}):null}},20370:function(e,t,n){n.d(t,{Z:function(){return ve}});var r=n(35944),o=n(71227),i=n(79547),a=n.n(i),c=n(67294),l=n(94184),s=n.n(l),u=n(35060),d=n(94157),f=n(50553),p=n(30617),h=n(51281),m=n(57923),v=n(43552),g=n(34051),b=n.n(g),y=n(56834);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){w(i,r,o,a,c,"next",e)}function c(e){w(i,r,o,a,c,"throw",e)}a(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){return t.some((function(t){var n,r;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))}var E=n(92876),_=n(90652);function j(e){var t=e.searchPackagesFn,n=e.query,r=e.packagerType,o=(0,c.useState)([]),i=o[0],a=o[1],l=(0,c.useState)(),s=l[0],u=l[1],d=(0,c.useState)(!1),f=d[0],p=d[1],h=(0,_.Z)(n,400);return(0,c.useEffect)((function(){if(u(null),""===h)return p(!1),void a([]);p(!0),(0,y.j)(y.U3.PACKAGE_MANAGER_USED,{action:"searched",query:h,packagerType:r});var e=!1;return t(h).then((function(t){e||a(t)})).catch((function(t){E.Tb(t),e||u(t)})).finally((function(){e||p(!1)})),function(){e=!0}}),[t,h,r]),{searchResults:i,isLoading:f,error:s}}var O=n(88503);function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){T(e,t,n[t])}))}return e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e){var t=e.combobox,n=e.inputValue,o=e.setInputValue,i=e.isLoading,l=e.isDisplayingInstalledPackages,u=A(c.useState(!1),2),d=u[0],f=u[1];return(0,r.BX)("div",P({},t.getComboboxProps(),{className:"jsx-2d4a219fe90c6295 "+(s()("pkgsearch-search-bar",{focused:d})||""),children:[(0,r.tZ)("input",P({},t.getInputProps({type:"text",placeholder:"search to install packages",value:n,onFocus:function(){f(!0)},onBlur:function(){f(!1)},onChange:function(e){o(e.currentTarget.value)},autoFocus:!0}),{className:"jsx-2d4a219fe90c6295"})),(0,r.tZ)("div",{className:"jsx-2d4a219fe90c6295 pkgsearch-search-bar-icon",children:(0,r.tZ)(R,{onXIcon:function(){return o("")},isDisplayingInstalledPackages:l,isSearchLoading:i})}),(0,r.tZ)(a(),{id:"2d4a219fe90c6295",children:".pkgsearch-search-bar.jsx-2d4a219fe90c6295{width:-webkit-calc(100% - 24px);width:-moz-calc(100% - 24px);width:calc(100% - 24px);margin:0 12px 12px 12px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid var(--foreground-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.pkgsearch-search-bar.focused.jsx-2d4a219fe90c6295{border-color:var(--accent-primary-default)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295::-webkit-input-placeholder{color:var(--foreground-dimmer)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295:-moz-placeholder{color:var(--foreground-dimmer)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295::-moz-placeholder{color:var(--foreground-dimmer)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295:-ms-input-placeholder{color:var(--foreground-dimmer)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295::-ms-input-placeholder{color:var(--foreground-dimmer)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295::placeholder{color:var(--foreground-dimmer)}.pkgsearch-search-bar.jsx-2d4a219fe90c6295 input.jsx-2d4a219fe90c6295{padding:var(--space-8);font-size:var(--font-size-default);border:0;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;outline:none;background-color:transparent;color:var(--foreground-default)}.pkgsearch-search-bar-icon.jsx-2d4a219fe90c6295{padding-right:var(--space-8);margin-right:8px;width:14px;height:14px;vertical-align:middle}"})]}))}function R(e){var t=e.isDisplayingInstalledPackages,n=e.isSearchLoading,o=e.onXIcon;return n?(0,r.BX)("div",{className:"jsx-72a78eaf553adb92",children:[(0,r.tZ)("div",{className:"jsx-72a78eaf553adb92 pkgsearch-search-loading"}),(0,r.tZ)(a(),{id:"72a78eaf553adb92",children:".pkgsearch-search-loading.jsx-72a78eaf553adb92{display:block;width:14px!important;height:14px!important;background-image:url(/public/images/loading_dots.gif);background-position:center center;background-repeat:no-repeat;-webkit-background-size:contain;-moz-background-size:contain;-o-background-size:contain;background-size:contain}"})]}):t?(0,r.tZ)(O.Z,{color:"var(--foreground-dimmer)",style:{display:"block"}}):(0,r.BX)("div",{onClick:o,className:"jsx-a8c1e8780f7b9ee0",children:[(0,r.tZ)(u.Z,{color:"var(--foreground-dimmer)",style:{display:"block"}}),(0,r.tZ)(a(),{id:"a8c1e8780f7b9ee0",children:"div.jsx-a8c1e8780f7b9ee0{cursor:pointer}"})]})}var D=n(94590),N=n(58375),U=n(1517);function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e){var t=e.focused,n=e.searching,o=e.onActionClick,i=e.actionAltText,l=e.isAlreadyInstalled,u=e.isPackagerRunning,d=e.isIconLoading,p=e.statusComponent,m=e.itemName,v=e.itemDescription,g=void 0===v?"This package has no description.":v,b=e.itemVersion,y=e.itemHomepageURL,x=e.itemLicense,w=e.itemAuthor,k=e.itemDependencies,S=z(c.useState(!1),2),Z=S[0],E=S[1];return(0,r.BX)("div",{className:"jsx-209430e794998c42 "+(s()("pkgsearch-details",t&&"pkgsearch-details-hover")||""),children:[(0,r.BX)("div",{className:"jsx-209430e794998c42 pkgsearch-details-header",children:[(0,r.BX)("div",{onClick:function(){return E(!Z)},className:"jsx-209430e794998c42 pkgsearch-details-header-title",children:[(0,r.tZ)("div",{className:"jsx-209430e794998c42 pkgsearch-details-libname",children:m}),b&&!Z&&!n&&(0,r.tZ)("div",{className:"jsx-209430e794998c42 pkgsearch-details-header-version",children:b}),Z&&(0,r.tZ)(h.Z,{border:!1,className:"collapse",textColor:"var(--foreground-dimmer)",backgroundColor:"var(--background-default)","aria-label":"Collapse","data-microtip-position":"bottom",role:"tooltip",onClick:function(){return E(!Z)},children:(0,r.tZ)(f.Z,{})})]}),(0,r.tZ)("div",{className:"jsx-209430e794998c42 pkgsearch-details-cta",children:(0,r.tZ)(h.Z,{border:!1,"aria-label":i,className:"add-button",textColor:"var(--foreground-dimmer)",backgroundColor:"var(--background-default)","data-microtip-position":"bottom-left",role:"tooltip",onClick:function(e){e.currentTarget.blur(),o()},children:(0,r.tZ)(M,{isAlreadyInstalled:l,isPackagerRunning:u,isIconLoading:d})})})]}),p,(0,r.BX)("div",{className:"jsx-209430e794998c42 pkgsearch-details-metadata",children:[(0,r.BX)("div",{onClick:function(){n&&!Z&&E(!0)},className:"jsx-209430e794998c42 "+("details-meta-item "+(Z?"":"closed ")+(n?"show-in-search ":"")||0),children:[b&&(0,r.BX)("div",{className:"jsx-209430e794998c42 label",children:["version ",b]}),(0,r.tZ)("div",{className:"jsx-209430e794998c42 value",children:u&&!g?"loading...":g})]}),y&&(0,r.BX)("div",{className:"jsx-209430e794998c42 "+("details-meta-item "+(Z?"":"closed ")||0),children:[(0,r.tZ)("div",{className:"jsx-209430e794998c42 label",children:"Website"}),(0,r.tZ)("div",{className:"jsx-209430e794998c42 value",children:(0,r.tZ)("a",{href:y,rel:"noreferer noopener",target:"_blank",className:"jsx-209430e794998c42",children:y})})]}),x&&(0,r.BX)("div",{className:"jsx-209430e794998c42 "+("details-meta-item "+(Z?"":"closed ")||0),children:[(0,r.tZ)("div",{className:"jsx-209430e794998c42 label",children:"License"}),(0,r.tZ)("div",{className:"jsx-209430e794998c42 value",children:x})]}),w&&(0,r.BX)("div",{className:"jsx-209430e794998c42 "+("details-meta-item "+(Z?"":"closed ")||0),children:[(0,r.tZ)("div",{className:"jsx-209430e794998c42 label",children:"Author"}),(0,r.tZ)("div",{className:"jsx-209430e794998c42 value",children:w})]}),k&&k.length>0?(0,r.BX)("div",{className:"jsx-209430e794998c42 "+("details-meta-item pkgsearch-details-deps"+(Z?"":"closed ")||0),children:[(0,r.BX)("div",{className:"jsx-209430e794998c42 label",children:[k.length," dependencies"]}),(0,r.tZ)("div",{className:"jsx-209430e794998c42 value",children:(0,r.tZ)("ul",{className:"jsx-209430e794998c42 pkgsearch-details-deps-list",children:k.map((function(e){return(0,r.tZ)("li",{className:"jsx-209430e794998c42",children:e},e||"")}))})})]}):null]}),(0,r.tZ)(a(),{id:"209430e794998c42",children:".pkgsearch-details.jsx-209430e794998c42{padding:var(--space-8)var(--space-8)var(--space-8)12px;height:100%;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;overflow:visible;color:var(--foreground-dimmer);cursor:pointer;border-top:1px solid var(--background-highest);position:relative}.pkgsearch-details-hover.jsx-209430e794998c42{z-index:99}.pkgsearch-details-header.jsx-209430e794998c42{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.pkgsearch-details-header-title.jsx-209430e794998c42{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:2;-webkit-flex-grow:2;-moz-box-flex:2;-ms-flex-positive:2;flex-grow:2;height:32px;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.pkgsearch-details-libname.jsx-209430e794998c42{color:var(--foreground-default);font-size:var(--font-size-small);font-weight:var(--font-weight-medium);word-wrap:break-word}.pkgsearch-details-header-version.jsx-209430e794998c42{padding-left:4px;vertical-align:text-bottom;color:var(--foreground-dimmer);font-size:var(--font-size-small)}.pkgsearch-details-metadata.jsx-209430e794998c42:not(:empty){}.details-meta-item.jsx-209430e794998c42{padding:var(--space-8)0;width:100%}.details-meta-item.closed.jsx-209430e794998c42{display:none}.details-meta-item.closed.show-in-search.jsx-209430e794998c42{display:block;padding:var(--space-8)0}.details-meta-item.jsx-209430e794998c42 .label.jsx-209430e794998c42{margin-bottom:4px;color:var(--foreground-dimmer);font-size:var(--font-size-small)}.details-meta-item.jsx-209430e794998c42 .value.jsx-209430e794998c42{line-height:20px;word-wrap:break-word;font-size:var(--font-size-default);color:var(--foreground-default);overflow:hidden}.pkgsearch-details-deps-list.jsx-209430e794998c42{list-style:none}.pkgsearch-search-result-li.jsx-209430e794998c42{overflow:visible;position:relative;z-index:99}"})]})}function M(e){var t=e.isPackagerRunning,n=e.isAlreadyInstalled;return e.isIconLoading?(0,r.BX)("div",{className:"jsx-465bfe593a07b572 loadingIconRotate",children:[(0,r.tZ)(U.Z,{}),(0,r.tZ)(a(),{id:"465bfe593a07b572",children:".loadingIconRotate.jsx-465bfe593a07b572{-webkit-animation:rotate 1s linear infinite;-moz-animation:rotate 1s linear infinite;-o-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotate{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]}):n?t?(0,r.tZ)(N.Z,{color:"var(--foreground-dimmest)"}):(0,r.tZ)(N.Z,{}):t?(0,r.tZ)(D.Z,{color:"var(--foreground-dimmest)"}):(0,r.tZ)(D.Z,{})}var F=n(96594),G=n(11935),X=n(54929),W=n(3204);function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){V(e,t,n[t])}))}return e}function q(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e){var t=e.filesAffected,n=K(c.useState(""),2),o=n[0],i=n[1],l=(0,p.Z)(),s=l.packager,u=l.session,f=function(e){var t=e.packager,n=S(c.useState(!1),2),r=n[0],o=n[1],i=S(c.useState(!1),2),a=i[0],l=i[1],s=S(c.useState("package name"),2),u=s[0],d=s[1],f=S(c.useState([]),2),p=f[0],h=f[1];c.useEffect((function(){o(!0);var e=!1;return t.listSpecfile().then((function(t){e||(t.error?h([]):t.packages&&h(t.packages),o(!1))})),function(){e=!0}}),[t]);var m=c.useCallback(function(){var e=k(b().mark((function e(n){var i,a,c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return");case 2:if((0,y.j)(y.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:n.name}),n.name){e.next=5;break}throw new Error("Package has no name");case 5:if(!Z(n,p)){e.next=7;break}return e.abrupt("return");case 7:return o(!0),e.next=10,t.addPackages([{name:n.name}]);case 10:return e.next=12,t.listSpecfile();case 12:i=e.sent,a=i.packages,c=i.error,a&&h(a),c&&h([]),o(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,p,r]),v=c.useCallback(function(){var e=k(b().mark((function e(n){var i,a,c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return");case 2:if(n.name){e.next=4;break}return e.abrupt("return");case 4:if(Z(n,p)){e.next=6;break}return e.abrupt("return");case 6:return(0,y.j)(y.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:n.name}),o(!0),e.next=10,t.removePackages([n.name]);case 10:return e.next=12,t.listSpecfile();case 12:i=e.sent,a=i.packages,c=i.error,a&&(h(a),l(!0),d(n.name)),c&&h([]),o(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,p,r]),g=c.useCallback((function(e){return Z(e,p)}),[p]);return{install:m,uninstall:v,installedPackages:p,isInstalled:g,isRunning:r,showDeletedTooltip:a,packageDeletedName:u,setDeletedTooltip:l}}({packager:s}),m=j({searchPackagesFn:s.searchPackages,query:o,packagerType:"upm"}),g=m.searchResults,x=m.isLoading,w=""===o,E=w?f.installedPackages:g,_=(0,F.Kb)({inputValue:o,items:E,defaultHighlightedIndex:0,itemToString:function(e){return(null===e||void 0===e?void 0:e.name)?e.name:""}}),O=(0,v.Z)("packager","show_packager_about_tooltip"),C=O.shouldDisplay,T=O.register,P=O.dismiss;c.useEffect((function(){T()}),[T]);var A=(0,v.Z)("packager","show_packager_import_tooltip"),R=A.shouldDisplay,D=A.register,N=A.dismiss;c.useEffect((function(){D()}),[D]);return(0,r.BX)("div",{className:"jsx-97a1ea8580a20cde pkgsearch-search",children:[(0,r.tZ)(I,{combobox:_,inputValue:o,setInputValue:i,isLoading:x,isDisplayingInstalledPackages:w}),f.showDeletedTooltip&&(0,r.tZ)(X.Z,{css:W.l0.p(8),children:(0,r.tZ)(G.Z,{colorway:"positive",closable:!0,closeAction:function(){return f.setDeletedTooltip(!1)},text:"Uninstalled "+f.packageDeletedName+"."})}),(0,r.BX)("div",{className:"jsx-97a1ea8580a20cde pkgsearch-installed-header",children:[x?"Working\u2026":w?0===E.length?"No packages installed.":"Installed packages":""!==o?0===E.length?"No packages found":E.length+" packages found":" ",w&&E.length>0&&t.length>0&&(0,r.tZ)(h.Z,{border:!1,Icon:d.Z,className:"package-button",textColor:"var(--foreground-dimmer)",backgroundColor:"var(--background-default)","aria-label":"Open "+t[0],"data-microtip-position":"bottom-left",role:"tooltip",onClick:function(){u.openFile(t[0])}})]}),w&&0===E.length&&(0,r.BX)("div",{className:"jsx-97a1ea8580a20cde no-packages-text",children:["You don\u2019t have any packages installed. Try searching for a package to install, or ","",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",className:"jsx-97a1ea8580a20cde",children:"learn more about packages here."})]}),(0,r.tZ)("div",$({},_.getMenuProps(),{className:"jsx-97a1ea8580a20cde",children:E.length>0&&(0,r.tZ)("ul",{className:"jsx-97a1ea8580a20cde "+("pkgsearch-search-result "+(!w&&"pkgsearch-search-result-searching")||0),children:E.map((function(e,n){return(0,r.tZ)("li",$({},_.getItemProps({item:e,index:n}),{className:"jsx-97a1ea8580a20cde",children:(0,r.tZ)(Q,{packager:s,pkg:e,filesAffected:t,focused:_.highlightedIndex===n,searching:!w,isPackagerRunning:f.isRunning,isAlreadyInstalled:f.isInstalled(e),installPackage:f.install,uninstallPackage:f.uninstall})}),e.name||"Unknown"+n)}))})})),C&&""===o&&(0,r.BX)(J,{title:"What are Packages?",expandable:!0,expanded:!1,needsMargin:!0,backgroundColor:"var(--background-default)",foregroundColor:"var(--foreground-default)",strokeColor:"var(--foreground-dimmest)",onClose:function(){return P()},children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",className:"jsx-97a1ea8580a20cde",children:"Learn more about packages"})]}),w&&R&&""===o&&(0,r.tZ)(J,{title:"Tip\u2014Auto Import",expandable:!0,expanded:!1,needsMargin:!0,backgroundColor:"var(--background-default)",foregroundColor:"var(--foreground-default)",strokeColor:"var(--foreground-dimmest)",onClose:function(){return N()},children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the repl."}),(0,r.tZ)(a(),{id:"97a1ea8580a20cde",children:".pkgsearch-search.jsx-97a1ea8580a20cde{position:relative;width:100%;height:100%;overflow-y:scroll;min-height:0;color:var(--foreground-default)}.no-packages-text.jsx-97a1ea8580a20cde{margin:0 12px;font-size:var(--font-size-default);line-height:20px}.pkgsearch-installed-header.jsx-97a1ea8580a20cde{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0px var(--space-8)12px 12px;font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-medium)}.pkgsearch-search-result.jsx-97a1ea8580a20cde{list-style:none;position:relative;overflow:visible;z-index:2;border-bottom:1px solid var(--background-highest);-webkit-overflow-scrolling:touch;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;min-height:0}.pkgsearch-search-result-searching.jsx-97a1ea8580a20cde{overflow:scroll}"})]})}function Q(e){var t=e.isPackagerRunning,n=e.isAlreadyInstalled,o=e.installPackage,i=e.uninstallPackage,a=e.packager,l=e.focused,s=e.searching,u=e.filesAffected,d=q(e,["isPackagerRunning","isAlreadyInstalled","installPackage","uninstallPackage","packager","focused","searching","filesAffected"]),f=function(e){var t=e.packager,n=e.pkg,r=S(c.useState(!1),2),o=r[0],i=r[1],a=S(c.useState(null),2),l=a[0],s=a[1];return c.useEffect((function(){if(n.name){var e=!1;return t.fetchPackageInfo(n.name).then((function(t){e||(s(t||null),i(!1))})),function(){e=!0}}s(null)}),[t,n.name]),{isLoading:o,packageInfo:l}}({packager:a,pkg:d.pkg}).packageInfo,p=(0,m.Z)(),h=K(c.useState(!1),2),v=h[0],g=h[1],b=K(c.useState(!1),2),y=b[0],x=b[1],w=f||d.pkg,k=function(){if(t)return{colorway:void 0,text:"Packager is working on "+w.name+". Check the Console tab for details",status:"Working\u2026"};if(n){var e=u[0];return{colorway:"positive",text:"".concat(w.name," was successfully installed").concat(e?" to ".concat(e):""),status:"Remove Package"}}return{colorway:"negative",text:w.name+" was not installed. There may have been an error \u2014\xa0check the Console tab for details.",status:"Install Package"}},Z=y?(0,r.tZ)(G.Z,{colorway:k().colorway,closable:!0,closeAction:function(){return x(!1)},text:k().text}):null,E="dependencies"in w&&w.dependencies&&w.dependencies.length>0?w.dependencies.map((function(e){return e.name})):null;return(0,r.tZ)(L,{focused:l,searching:s,onActionClick:function(){t||(x(!0),g(!0),n?i(w).then((function(){p.current&&(g(!1),x(!1))})):o(w).then((function(){p.current&&(g(!1),x(!0))})))},actionAltText:k().status,isAlreadyInstalled:n,isPackagerRunning:t,isIconLoading:v,statusComponent:Z,itemName:w.name,itemDescription:w.description,itemVersion:w.version,itemHomepageURL:w.homepageURL,itemLicense:w.license,itemAuthor:w.author,itemDependencies:E})}function J(e){var t=e.title,n=e.children,o=e.expanded,i=e.expandable,l=e.needsMargin,d=e.backgroundColor,p=e.strokeColor,h=e.foregroundColor,m=e.onClose,v=K(c.useState(o),2),g=v[0],b=v[1];return(0,r.BX)("div",{style:{backgroundColor:d},className:a().dynamic([["c40e6a57f0bf13ab",[p,h,h]]])+" "+(s()("pkgsearch-tooltip",l&&"needs-margin")||""),children:[(0,r.BX)("div",{className:a().dynamic([["c40e6a57f0bf13ab",[p,h,h]]])+" pkgsearch-tooltip-header",children:[(0,r.BX)("div",{onClick:function(){i&&b(!g)},className:a().dynamic([["c40e6a57f0bf13ab",[p,h,h]]])+" "+(s()("pkgsearch-tooltip-title",i&&"expandable")||""),children:[(0,r.tZ)("span",{className:a().dynamic([["c40e6a57f0bf13ab",[p,h,h]]])+" pkgsearch-tooltip-title-text",children:t}),i&&(0,r.tZ)(f.Z,{color:h,rotate:g?0:-90})]}),(0,r.tZ)("div",{className:a().dynamic([["c40e6a57f0bf13ab",[p,h,h]]])+" pkgsearch-tooltip-close",children:(0,r.tZ)(u.Z,{onClick:m,color:h})})]}),g&&(0,r.tZ)("p",{className:a().dynamic([["c40e6a57f0bf13ab",[p,h,h]]])+" pkgsearch-tooltip-content",children:n}),(0,r.tZ)(a(),{id:"c40e6a57f0bf13ab",dynamic:[p,h,h],children:".pkgsearch-tooltip.__jsx-style-dynamic-selector{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:-webkit-calc(100%);width:-moz-calc(100%);width:calc(100%);padding:var(--space-8);margin:var(--space-4)0;border:1px solid ".concat(p,"}.pkgsearch-tooltip.needs-margin.__jsx-style-dynamic-selector{width:-webkit-calc(100% - 24px);width:-moz-calc(100% - 24px);width:calc(100% - 24px);margin:12px}.pkgsearch-tooltip-header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:top;-webkit-align-items:top;-moz-box-align:top;-ms-flex-align:top;align-items:top}.pkgsearch-tooltip-title.__jsx-style-dynamic-selector{font-size:var(--font-size-small);font-weight:var(--font-weight-medium);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;opacity:.85}.expandable.__jsx-style-dynamic-selector{cursor:pointer}.pkgsearch-tooltip-title-text.__jsx-style-dynamic-selector{padding-right:4px;color:").concat(h,"}.pkgsearch-tooltip-close.__jsx-style-dynamic-selector{cursor:pointer;opacity:.7;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding-left:8px}.pkgsearch-tooltip-content.__jsx-style-dynamic-selector:not(:empty){padding-top:var(--space-8);line-height:20px;font-size:var(--font-size-default);color:").concat(h,";opacity:.85}")})]})}var ee=n(54098),te=n.n(ee),ne=n(46846);function re(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){re(i,r,o,a,c,"next",e)}function c(e){re(i,r,o,a,c,"throw",e)}a(void 0)}))}}var ie,ae="index.html";function ce(e){return le.apply(this,arguments)}function le(){return(le=oe(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",te()("/data/cdnjs/search/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){return ue.apply(this,arguments)}function ue(){return ue=oe(b().mark((function e(t){var n,r,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fs,r=t.session,o=t.lib,e.abrupt("return",new Promise(function(){var e=oe(b().mark((function e(t){var i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.stat(ae);case 2:if(e.sent.exists){e.next=5;break}return e.abrupt("return",t(ie.IndexNotFound));case 5:i=n.watchOtFile(ae,{onReady:function(e){var a=e.initialContent,c=e.writeOp;if(!o.include)return i(),void t(ie.InvalidLib);var l='<script src="'.concat(o.include,'"><\/script>'),s=a.toString("utf8"),u=!0,d=!1,f=void 0;try{for(var p,h=s.split("\n")[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){if(p.value.includes(l))return i(),void t(ie.AlreadyInstalled)}}catch(g){d=!0,f=g}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}var m=s.indexOf("<script");-1===m&&(m=s.indexOf("</body>"));var v=[l+"\n"];m>0&&v.unshift(m),c(v),n.flush().then((function(){t(ie.Success)})).catch((function(){t(ie.UnknownError)})).finally((function(){i(),r.openFile(ae)}))},onError:function(e){t(e.code===ne.Df.NotFound?ie.IndexNotFound:ie.UnknownError)}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}function de(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){fe(e,t,n[t])}))}return e}function he(){var e=(0,p.Z)(),t=e.fs,n=e.session,o=(0,c.useState)(""),i=o[0],l=o[1],s=(0,c.useState)(!1),u=s[0],d=s[1],f=j({searchPackagesFn:ce,query:i,packagerType:"html"}),h=f.searchResults,m=f.isLoading,v=f.error,g=(0,F.Kb)({inputValue:i,items:h,defaultHighlightedIndex:0,itemToString:function(e){return(null===e||void 0===e?void 0:e.name)?e.name:""}});return(0,r.BX)("div",{className:"jsx-cccac1ca9eaa7559 pkgsearch-search",children:[(0,r.tZ)(I,{combobox:g,inputValue:i,setInputValue:l,isLoading:m,isDisplayingInstalledPackages:!0}),(0,r.tZ)("div",{className:"jsx-cccac1ca9eaa7559 pkgsearch-installed-header",children:m?"Working\u2026":""!==i?v?"Sorry, there was a problem searching. Try again.":0===h.length?"No packages found":h.length+" packages found":" "}),(0,r.tZ)("div",pe({},g.getMenuProps(),{className:"jsx-cccac1ca9eaa7559",children:h.length>0&&(0,r.tZ)("ul",{className:"jsx-cccac1ca9eaa7559 pkgsearch-search-result pkgsearch-search-result-searching",children:h.map((function(e,o){return(0,r.tZ)("li",pe({},g.getItemProps({key:e.name||"Unknown"+o,item:e,index:o}),{className:"jsx-cccac1ca9eaa7559",children:(0,r.tZ)(me,{lib:e,focused:g.highlightedIndex===o,install:(i=b().mark((function r(){return b().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return d(!0),r.abrupt("return",se({fs:t,session:n,lib:e}).finally((function(){d(!1)})));case 2:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){de(o,n,r,a,c,"next",e)}function c(e){de(o,n,r,a,c,"throw",e)}a(void 0)}))}),isInstalling:u})}));var i}))})})),(0,r.tZ)(a(),{id:"cccac1ca9eaa7559",children:".pkgsearch-search.jsx-cccac1ca9eaa7559{position:relative;width:100%;height:100%;overflow-y:scroll;min-height:0;color:var(--foreground-default)}.pkgsearch-installed-header.jsx-cccac1ca9eaa7559{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0px var(--space-8)12px 12px;font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-medium)}.pkgsearch-search-result.jsx-cccac1ca9eaa7559{list-style:none;position:relative;overflow:visible;z-index:2;border-bottom:1px solid var(--background-highest);-webkit-overflow-scrolling:touch;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;min-height:0}.pkgsearch-search-result-searching.jsx-cccac1ca9eaa7559{overflow:scroll}"})]})}function me(e){var t=e.lib,n=e.focused,o=e.install,i=e.isInstalling,a=(0,c.useState)(null),l=a[0],s=a[1],u=(0,c.useState)(!1),d=u[0],f=u[1],p=(0,m.Z)(),h=l?(0,r.tZ)("div",{children:l}):null;return(0,r.tZ)(L,{focused:n,searching:!0,onActionClick:function(){i||d||(f(!0),o(t).then((function(e){p.current&&(e===ie.Success?s("".concat(t.name," was successfully added to index.html")):e===ie.IndexNotFound?s("".concat(t.name," was not added. There is no index.html file.")):e===ie.AlreadyInstalled?s("".concat(t.name," was already added to index.html.")):s("".concat(t.name," was not added. Try adding it manually.")))})).catch((function(e){E.Tb(e),p.current&&s("".concat(t.name," was not added. Try adding it manually."))})).finally((function(){f(!1)})))},actionAltText:"Add Library",isAlreadyInstalled:!1,isPackagerRunning:i,isIconLoading:d,statusComponent:h,itemName:t.name,itemDescription:t.description,itemVersion:t.version,itemHomepageURL:t.link})}function ve(){var e=(0,o.x)();return e?"html"===e.language?(0,r.tZ)(he,{}):(0,r.tZ)(Y,{filesAffected:e.packagerFiles}):null}!function(e){e[e.Success=0]="Success",e[e.IndexNotFound=1]="IndexNotFound",e[e.AlreadyInstalled=2]="AlreadyInstalled",e[e.InvalidLib=3]="InvalidLib",e[e.UnknownError=4]="UnknownError"}(ie||(ie={}))},71227:function(e,t,n){n.d(t,{x:function(){return m}});var r=n(67294),o=n(62991),i=n.n(o),a=n(27740),c=n.n(a),l=n(85133),s=n(90361),u=n(30617);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={nodejs:["package.json","package-lock.json","yarn.lock","node_modules"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function p(e){return["python3_classroom","python3_classroom_beta","python3","python3_beta","pygame","pygame_beta"].includes(e)?"python":["nodejs","nodejs_beta","nodejs_prybar","nodejs_prybar_beta","reason_nodejs","nodejs_static"].includes(e)?"nodejs":["ruby","ruby_beta","ruby_classroom","ruby_classroom_beta","rails","rails_beta"].includes(e)?"ruby":c().supportsPackager3(e)?e:null}function h(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}({},e,{packagerFiles:f[e.language]||[]})}function m(){var e=(0,r.useState)(null),t=e[0],n=e[1],o=(0,l.Z)(),a=(0,u.Z)().dotReplit;return(0,r.useEffect)((function(){if(o)if("html"!==o.language&&"html_beta"!==o.language){var e=p(o.language);if(e)n(h({language:e,packageSearch:!0,guessImports:!0}));else if(("nix"===o.language||"nix_beta"===o.language)&&o.flagOwnerDotReplitPackager)return a.watch((function(e){e.error?e.error===s.Yt.NotFound&&n(null):n((function(t){var n,r,o;if(!(null===(n=e.config.packager)||void 0===n?void 0:n.language))return null;var a=e.config.packager.language,c=h({language:p(a)||a,guessImports:Boolean(null===(r=e.config.packager.features)||void 0===r?void 0:r.guessImports),packageSearch:Boolean(null===(o=e.config.packager.features)||void 0===o?void 0:o.packageSearch)});return i()(t,c)?t:c}))}))}else n(h({language:"html",packageSearch:!0,guessImports:!1}))}),[o,a]),t}},74115:function(e,t,n){n.d(t,{DY:function(){return g},Fz:function(){return h},vj:function(){return p}});var r=n(35944),o=n(31162),i=n(12611),a=n(58843),c=n(44894),l=n(67938),s=n(23139),u=n(56834),d="codex.codeSuggestion.enable",f="codex.codeSuggestion.engine";function p(){var e;return null!==(e=c.Z.get(d,"boolean"))&&void 0!==e&&e}function h(){var e;return null!==(e=c.Z.get(f,"string"))&&void 0!==e?e:"code-cushman-001"}var m=[{title:"Enabled",value:!0},{title:"Disabled",value:!1}],v=["text-davinci-002","code-davinci-002","code-cushman-001","code-cushman-002","cushman-lookahead","self-hosted-small","self-hosted-large"].map((function(e){return{title:e,value:e}}));function g(){var e=(0,a.c)("flag-code-suggestion"),t=function(e,t){c.Z.set(e,t),(0,u.j)(u.U3.SETTINGS_TOGGLED,{settingChanged:e,updatedValue:t})};return e.enabled?(0,r.BX)(r.HY,{children:[(0,r.tZ)(i.$,{id:"codeSuggestionToggle",title:"Code suggestion",children:(0,r.tZ)(o.Z,{initialSelectedItem:m.find((function(e){return e.value===p()})),onChange:function(e){return t(d,null===e||void 0===e?void 0:e.value)},items:m})}),(0,r.tZ)(i.$,{id:"codeSuggestionEngine",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.x,{children:"Code suggestion engine"}),(0,r.tZ)(l.x,{css:[s.l0.mt(4),s.l0.color.foregroundDimmest],multiline:!0,children:"\u26a0\ufe0f This setting is stored in localStorage."})]}),children:(0,r.tZ)(o.Z,{initialSelectedItem:v.find((function(e){return e.value===h()})),onChange:function(e){return t(f,null===e||void 0===e?void 0:e.value)},items:v})})]}):null}},12611:function(e,t,n){n.d(t,{$:function(){return s}});var r=n(35944),o=n(67294),i=n(54929),a=n(67938),c=n(3204),l=n(37424);function s(e){var t=e.id,n=e.title,s=e.children,u=(0,l.H)()(t);return(0,r.BX)(i.Z,{css:[c.l0.colWithGap(8)],children:[(0,r.tZ)(i.Z,{tag:"label",htmlFor:u,children:"string"===typeof n?(0,r.tZ)(a.x,{children:n}):n}),o.cloneElement(s,{id:u})]})}},74661:function(e,t,n){n.d(t,{Z:function(){return O}});var r=n(35944),o=n(67294),i=n(31162),a=n(17632),c=n(36793),l=n(66552),s=n(3204),u=n(54929),d=n(67938),f=n(88341),p=n(56834),h=n(12611),m=n(74115);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=[{value:"side-by-side",title:"side-by-side"},{value:"stacked",title:"stacked"}],y=[{value:10,title:"tiny"},{value:14,title:"normal"},{value:18,title:"large"},{value:24,title:"huge"}],x=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],w=[{value:2,title:"2"},{value:4,title:"4"},{value:8,title:"8"}],k=[{value:"default",title:"default"},{value:"emacs",title:"emacs"},{value:"vim",title:"vim"}],S=[{value:"none",title:"none"},{value:"soft",title:"soft wrap"}],Z=[{value:"disabled",title:"disabled"},{value:"enabled",title:"enabled"}],E=[{value:"disabled",title:"disabled"},{value:"enabled",title:"enabled"}],_=(0,u.K)("div");function j(){var e=(0,o.useState)(!1),t=e[0],n=e[1],i=(0,o.useState)(!1),c=i[0],l=i[1],p=(0,o.useRef)(!1);return(0,o.useEffect)((function(){p.current=!0;var e=setTimeout((function(){l(t)}),200);return function(){clearTimeout(e)}}),[t]),(0,r.BX)(u.Z,{css:[s.l0.rowWithGap(8),s.l0.justify.start],onMouseEnter:function(){return n(!0)},onMouseLeave:function(){return n(!1)},children:[(0,r.tZ)(d.x,{children:"Code intelligence"}),(0,r.BX)(f.Z,{isOpen:c,onClickOutside:function(){return l(!1)},padding:8,children:[(0,r.tZ)(_,{children:(0,r.tZ)(a.Z,{})}),(0,r.tZ)(u.Z,{css:[s.l0.maxWidth(240)],children:(0,r.BX)(d.x,{multiline:!0,children:["Code intelligence gives you autocomplete, helpful info, and hints as you type. See more"," ",(0,r.tZ)("a",{href:"https://replit.com/site/blog/intel",target:"_blank",rel:"noreferrer noopener",children:"here."})]})})]})]})}function O(e){var t=e.onBeforePreferencesUpdate,n=e.hideLayoutControl,o=e.className,a=(0,c.Z)(),u=a.preferences,f=a.update,v=function(e){t&&t(e),Object.keys(e).forEach((function(t){var n=e[t];(0,p.j)(p.U3.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n})})),f(e)};return u?(0,r.BX)(l.Z,{className:o,background:"default",css:[s.l0.p(16),s.l0.colWithGap(32),{paddingBottom:"5em"}],children:[n?null:(0,r.tZ)(h.$,{id:"layout",title:"Layout",children:(0,r.tZ)(i.Z,{initialSelectedItem:b.find((function(e){return u.isLayoutStacked?"stacked"===e.value:"side-by-side"===e.value})),onChange:function(e){var t="stacked"===(null===e||void 0===e?void 0:e.value);v({isLayoutStacked:t})},items:g(b)})}),(0,r.tZ)(h.$,{id:"fontSize",title:"Font size",children:(0,r.tZ)(i.Z,{initialSelectedItem:y.find((function(e){return e.value===u.fontSize})),onChange:function(e){var t="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:14;v({fontSize:t})},items:g(y)})}),(0,r.tZ)(h.$,{id:"indentType",title:"Indent type",children:(0,r.tZ)(i.Z,{initialSelectedItem:x.find((function(e){return e.value===(u.indentIsSpaces?"spaces":"tabs")})),onChange:function(e){var t="spaces"===(null===e||void 0===e?void 0:e.value);v({indentIsSpaces:t})},items:g(x)})}),(0,r.tZ)(h.$,{id:"indentSize",title:"Indent size",children:(0,r.tZ)(i.Z,{initialSelectedItem:w.find((function(e){return e.value===u.indentSize})),onChange:function(e){var t="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:2;v({indentSize:t})},items:g(w)})}),(0,r.tZ)(h.$,{id:"keybinds",title:"Keybinds",children:(0,r.tZ)(i.Z,{initialSelectedItem:k.find((function(e){return["vim","emacs"].includes(e.value)?e.value===u.keyboardHandler:"default"===e.value&&!u.keyboardHandler})),onChange:function(e){var t=["vim","emacs"].includes(e.value)?e.value:null;v({keyboardHandler:t})},items:g(k)})}),(0,r.tZ)(h.$,{id:"wrapping",title:"Wrapping",children:(0,r.tZ)(i.Z,{initialSelectedItem:S.find((function(e){return e.value===(u.wrapping?"soft":"none")})),onChange:function(e){var t="soft"===(null===e||void 0===e?void 0:e.value);v({wrapping:t})},items:g(S)})}),(0,r.tZ)(h.$,{id:"codeIntelligence",title:(0,r.tZ)(j,{}),children:(0,r.tZ)(i.Z,{initialSelectedItem:Z.find((function(e){return e.value===(u.codeIntelligence?"enabled":"disabled")})),onChange:function(e){var t="enabled"===(null===e||void 0===e?void 0:e.value);v({codeIntelligence:t})},items:g(Z)})}),(0,r.tZ)(m.DY,{}),(0,r.tZ)(h.$,{id:"accessibleTerminal",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(d.x,{children:"Accessible Terminal Output"}),(0,r.tZ)(d.x,{multiline:!0,children:"enable this setting to use a screen reader. Warning: this can affect performance."})]}),children:(0,r.tZ)(i.Z,{initialSelectedItem:E.find((function(e){return e.value===(u.accessibleTerminal?"enabled":"disabled")})),onChange:function(e){var t="enabled"===(null===e||void 0===e?void 0:e.value);v({accessibleTerminal:t})},items:g(E)})}),(0,r.tZ)(d.x,{multiline:!0,children:"Themes now apply across the whole site. Switch themes using the sun/moon icon in the site sidebar."})]}):null}},87784:function(e,t,n){n.d(t,{Z:function(){return fe}});var r=n(35944),o=n(79547),i=n.n(o),a=n(67294),c=n(92876),l=n(41664),s=n.n(l),u=n(44054),d=n(56834),f=n(16124),p=n(11163),h=n(8849),m=n(88768),v=n(57541),g=n(42122),b=n(38880),y=n(8996),x=n(58375),w=n(94184),k=n.n(w),S=n(70294),Z=n(58458),E=n(92704),_=n(63735),j=n(76695),O=n(23139),C=n(3204);function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){T(e,t,n[t])}))}return e}function A(e){var t,n=e.isBoosted||e.needsUpgrade,o=(0,m.E63)({skip:n,fetchPolicy:"cache-and-network"}),a=o.data,c=o.loading,l=(null===a||void 0===a||null===(t=a.currentUser)||void 0===t?void 0:t.canBoost)||!1,s=e.alwaysOn?1:3,u=e.isBoosted?1:3,d=e.isBoosted?"Your Repl is currently boosted":"Your Repl will be 2x faster",f=l?{}:{"aria-label":"Boost limit reached","data-microtip-position":"top",role:"tooltip"};return(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{className:i().dynamic([["6dc489fc1322f928",[e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" always-on",children:[(0,r.BX)(y.gC,{spacing:"8px",children:[(0,r.BX)(y.Ug,{spacing:"8px",align:"center",children:[(0,r.tZ)(Z.Z,{foreground:s,align:"center",children:(0,r.tZ)(j.Z,{})}),(0,r.tZ)(Z.Z,{foreground:s,size:"small",fontWeight:"medium",children:"Always On"})]}),(0,r.tZ)(Z.Z,{size:"xsmall",foreground:s,children:"Your Repl will stay awake"})]}),(0,r.tZ)("div",{className:i().dynamic([["6dc489fc1322f928",[e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" toggle-box",children:(0,r.tZ)(S.Z,{isOn:e.alwaysOn,onChange:function(){e.onChange(!e.alwaysOn)}})})]}),(0,r.BX)("div",{className:i().dynamic([["6dc489fc1322f928",[e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" "+(k()("boost",{"is-boosted":e.isBoosted})||""),children:[(0,r.BX)(y.gC,{spacing:"8px",children:[(0,r.BX)(y.Ug,{spacing:"8px",align:"center",justify:"center",children:[(0,r.tZ)(Z.Z,{className:"rocket-text",foreground:u,align:"center",children:(0,r.tZ)(_.Z,{})}),(0,r.tZ)(Z.Z,{className:"boost-text",foreground:u,size:"small",fontWeight:e.isBoosted?"medium":"regular",children:"Boost"})]}),(0,r.tZ)(Z.Z,{size:"xsmall",foreground:u,children:d})]}),(0,r.tZ)("div",{className:i().dynamic([["6dc489fc1322f928",[e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" toggle-box",children:e.isBoosted?(0,r.tZ)(O.hU,{onClick:function(){e.onUnboostClick()},colorway:"negative",alt:"Unboost Repl",children:(0,r.tZ)(x.Z,{css:[C.l0.color.foregroundDefault]})}):(0,r.tZ)("div",P({},f,{className:i().dynamic([["6dc489fc1322f928",[e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" "+(f&&null!=f.className&&f.className||""),children:(0,r.tZ)(E.ZP,{disabled:!l||c,onClick:function(){e.onBoostChange(!0)},outlined:!0,text:"Add Boost",iconLeft:(0,r.tZ)(_.Z,{}),colorway:"positive"})}))})]}),(0,r.tZ)(i(),{id:"6dc489fc1322f928",dynamic:[e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"],children:".always-on.__jsx-style-dynamic-selector,.boost.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8);-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.always-on.__jsx-style-dynamic-selector{margin-bottom:var(--space-8)}.boost.__jsx-style-dynamic-selector .rocket-text{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:".concat(e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)",";width:16px}.boost.__jsx-style-dynamic-selector .boost-text{color:").concat(e.isBoosted?"var(--accent-positive-strongest)":"var(--foreground-dimmest)","}.is-boosted.__jsx-style-dynamic-selector{background-color:var(--accent-positive-dimmest);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);padding:var(--space-8);border:1px solid var(--accent-positive-dimmer)}.rocket-container.__jsx-style-dynamic-selector{margin-right:var(--space-4)}.boost-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.boost-icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.boost-menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}.toggle-box.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;pointer-events:").concat(e.needsUpgrade?"none":"auto",";opacity:").concat(e.needsUpgrade?.5:1,";cursor:").concat(e.needsUpgrade?"not-allowed":"pointer","}")})]})}var I=n(63292),R=n(53985),D=n(13475),N=n(23589),U=n(74302),B=n(91056),z=n(69780),L=n(15866),M=n(81736),F=n(37424),G=n(57923),X=n(54929),W=n(67938);function H(e){var t=e.onUnboost,n=e.hideModal;return(0,r.BX)(X.Z,{css:[C.l0.colWithGap(24)],children:[(0,r.tZ)(W.h,{variant:"headerDefault",level:2,children:"Unboost Repl"}),(0,r.tZ)(W.x,{multiline:!0,children:"Are you sure you want to unboost your Repl? This will downgrade your Repl to a less powerful machine."}),(0,r.BX)(X.Z,{css:[C.l0.rowWithGap(12),C.l0.justify.end],children:[(0,r.tZ)(E.zx,{onClick:n,text:"Cancel"}),(0,r.tZ)(E.zx,{colorway:"negative",onClick:function(){t(),n()},text:"Yes, unboost this Repl"})]})]})}var V,$,q=n(22546),K=n(73248),Y=n(28747),Q=n(62424),J=n(38657),ee=n(44195),te=n(59339),ne=n(31927),re=n(90309),oe=n(29698),ie=n(44327),ae=n(50876),ce=n(58843);function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){se(e,t,n[t])}))}return e}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e){var t,n,o=e.repl,l=e.onUpdateRepl,w=e.setIsEditing,k=(0,p.useRouter)(),S=(0,ce.c)("flag-expanded-forking-modal").enabled,E=de(a.useState(!1),2),j=E[0],C=E[1],T=de(a.useState(null),2),P=T[0],X=T[1],W=de(a.useState(o.isBoosted),2),le=W[0],se=W[1],fe=de(a.useState(o.isRenamed?o.title:""),2),pe=fe[0],he=fe[1],me=de(a.useState(o.description||""),2),ve=me[0],ge=me[1],be=de(a.useState(o.rawTemplateLabel),2),ye=be[0],xe=be[1],we=de(a.useState(null),2),ke=we[0],Se=we[1],Ze=(0,b.Z)().showError,Ee=o.publishedAs===m.O2h.Template,_e=Boolean(o.publishedAs);a.useEffect((function(){ge(o.description||"")}),[o.description]);var je=(0,G.Z)(),Oe=a.useRef(o),Ce=de((0,m.ap1)({variables:{id:o.id},onCompleted:function(){return k.push("/home","/~")},update:(0,f.t)({id:o.id}),onError:function(e){return Ze((0,h.Z)(e.message))}}),1)[0],Te=de((0,m.vib)({onError:function(e){return Ze((0,h.Z)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,n=Oe.current,r={};n.description!==t.description&&(r.description=t.description),n.title!==t.title&&(r.title=t.title),n.url!==t.url&&(r.url=t.url),n.isRenamed!==t.isRenamed&&(r.isRenamed=!!t.isRenamed),Oe.current=o,Object.keys(r).length>0&&(l(r),w(!1))}}),1)[0],Pe=de((0,Y.Z)(),2),Ae=Pe[0],Ie=Pe[1].loading,Re=de((0,m.prL)({onCompleted:function(e){je.current&&("UserError"===e.setAlwaysOn.__typename?Se(e.setAlwaysOn.message):Se(null))},onError:function(e){return Ze((0,h.Z)(e.message))}}),2),De=Re[0],Ne=Re[1].loading,Ue=de((0,m.BjH)({variables:{replId:o.id},onCompleted:function(e){var t=e.boostRepl;"UserError"!==t.__typename?((0,B.Z)(o.id).catch((function(e){c.Tb(e),je.current&&Se("Something went wrong when boosting your repl. Please refresh or try again.")})),je.current&&(Se(null),se(!0))):je.current&&Se(t.message)},onError:function(e){c.Tb(e),Ze((0,h.Z)(e.message))}}),2),Be=Ue[0],ze=Ue[1].loading,Le=o.currentUserPermissions.publish,Me=de((0,m.gFT)({variables:{input:{replId:o.id}},onError:function(e){c.Tb(e),Ze((0,h.Z)(e.message))}}),2),Fe=Me[0],Ge=Me[1],Xe=de((0,m.cry)({variables:{replId:o.id},onCompleted:function(e){var t=e.unboostRepl;"UserError"!==t.__typename?((0,B.Z)(o.id).catch((function(e){c.Tb(e),je.current&&Se("Something went wrong when unboosting your Repl. Please refresh or try again.")})),je.current&&(Se(null),se(!1))):Se(t.message)},onError:function(e){c.Tb(e),Ze((0,h.Z)(e.message))}}),2),We=Xe[0],He=Xe[1].loading,Ve=a.useMemo((function(){return!(!pe||pe===o.title)||(ye!==o.rawTemplateLabel||!(""===ve&&!o.description)&&ve!==o.description)}),[o,pe,ve,ye]),$e=a.useCallback((function(){if(Ve){var e={id:o.id,title:pe||o.title,description:ve,templateLabel:o.currentUserPermissions.changeTemplateLabel?ye:void 0};Te({variables:{input:e}})}}),[Ve,Te,o,pe,ve,ye]),qe=j||null!==P||Ie,Ke=(0,D.Z)((function(){qe||(Ve?$e():w(!1))}),[qe,Ve,$e]),Ye=a.useContext(ee.G).usesDigitalGoodsService,Qe=function(){ze||He||((0,d.j)(d.U3.BOOST_TOGGLED,{enabled:!le}),le?We():Be())},Je=o.isRenamed?"name your repl":"default name: ".concat(o.title),et=[m.Sy.Submit,m.Sy.PublishTemplate,m.Sy.EditTemplate].includes(o.workspaceCta),tt=[];o.currentUserPermissions.fork&&tt.push({value:V.Fork,label:"Fork",icon:(0,r.tZ)(K.Z,{})}),o.publishedAs===m.O2h.RegularRepl&&Le&&tt.push({value:V.Unpublish,label:"Unpublish",icon:(0,r.tZ)(M.Z,{})}),Ee&&Le&&tt.push({value:V.UnpublishTemplate,label:"Unpublish template",icon:(0,r.tZ)(M.Z,{})}),_e&&Le&&tt.push({value:V.EditPublishSettings,label:"Edit Publish Settings",icon:(0,r.tZ)(oe.Z,{})}),o.currentUserPermissions.delete&&tt.push({isDestructive:!0,value:V.Delete,label:"Delete",icon:(0,r.tZ)(x.Z,{})});var nt,rt=o.currentUserPermissions.changePrivacy===m.HA$.SubscriptionRequired,ot=o.currentUserPermissions.changeAlwaysOn===m.fnM.SubscriptionRequired,it=rt?"Get access to Private Repls, Always On, and Boosts.":"Get access to Always On and Boosts.",at=(0,F.H)();return(0,r.BX)("div",{ref:Ke,className:i().dynamic([["7541e2a1623a09e",[o.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",ot?"var(--background-root)":"var(--background-default)",u.j.mobileMax]]])+" repl-info-form",children:[(0,r.tZ)("form",{onSubmit:function(e){e.preventDefault(),$e()},className:i().dynamic([["7541e2a1623a09e",[o.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",ot?"var(--background-root)":"var(--background-default)",u.j.mobileMax]]]),children:(0,r.BX)(y.gC,{wrap:"nowrap",spacing:2,align:"stretch",children:[(0,r.BX)(y.gC,{wrap:"nowrap",spacing:"4px",align:"stretch",children:[(0,r.BX)(y.Ug,{spacing:1,align:"center",justify:"space-between",children:[(0,r.tZ)(O.G7,{css:[O.l0.rowWithGap(8)],children:(0,r.tZ)(s(),ue({},(0,U.j3)(o),{prefetch:!1,children:(0,r.tZ)("a",{style:{textDecoration:"none"},className:i().dynamic([["7541e2a1623a09e",[o.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",ot?"var(--background-root)":"var(--background-default)",u.j.mobileMax]]]),children:(0,r.tZ)(O.zx,{type:"button",iconLeft:(0,r.tZ)(N.Z,{}),colorway:"primary",text:"Cover page"})})}))}),(0,r.tZ)(q.Z,{items:tt,onItemClick:function(e){switch(e.value){case V.Unpublish:return void X($.Unpublish);case V.UnpublishTemplate:return void X($.UnpublishTemplate);case V.Fork:return void X($.ForkRepl);case V.Delete:return void X($.DeleteRepl);case V.EditPublishSettings:X($.EditPublishSettings)}},onOpenChange:C})]}),o.lastPublishedAt&&Le?(0,r.BX)(Z.Z,{size:"small",foreground:3,children:["Last published on"," ",new Date(o.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]}),o.currentUserPermissions.changeIconUrl&&Ee?(0,r.tZ)(Q.Z,{value:o.iconUrl,onChange:function(e){return Te({variables:{input:{id:o.id,iconUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:ue({},o,{iconUrl:e})}}})}}):null,(0,r.BX)(y.gC,{wrap:"nowrap",align:"end",children:[(0,r.tZ)(v.ZP,{style:{cursor:o.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!o.currentUserPermissions.changeTitle,maxLength:60,placeholder:Je,value:pe,onChange:function(e){return he(e.target.value)},spellCheck:!1}),(0,r.tZ)(g.Z,{maxLength:60,value:pe,hideLabel:!0})]}),(0,r.BX)(y.gC,{wrap:"nowrap",align:"end",children:[(0,r.tZ)("textarea",{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!o.currentUserPermissions.changeDescription,maxLength:J.p,value:ve,onChange:function(e){return ge(e.target.value)},placeholder:"What does this Repl do?",className:i().dynamic([["7541e2a1623a09e",[o.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",ot?"var(--background-root)":"var(--background-default)",u.j.mobileMax]]])}),(0,r.tZ)(g.Z,{maxLength:J.p,value:ve,hideLabel:!0})]}),Ee&&o.currentUserPermissions.changeTemplateLabel&&(0,r.tZ)(O.Tg,{css:[O.l0.p(8),O.l0.borderRadius(8)],children:(0,r.BX)(y.gC,{wrap:"nowrap",spacing:1,children:[(0,r.BX)(y.Ug,{spacing:1,children:[(0,r.tZ)(L.Z,{}),(0,r.tZ)(Z.Z,{children:"Template Label"})]}),(0,r.tZ)(v.ZP,{value:ye,maxLength:60,placeholder:"Template Label",spellCheck:!1,onChange:function(e){return xe(e.target.value)}})]})})]})}),et?null:(0,r.BX)(r.HY,{children:[ot&&(0,r.tZ)("div",{className:i().dynamic([["7541e2a1623a09e",[o.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",ot?"var(--background-root)":"var(--background-default)",u.j.mobileMax]]]),children:Ye?(0,r.BX)(y.gC,{justify:"center",align:"center",style:{paddingBottom:"var(--space-16)"},children:[(0,r.tZ)(Z.Z,{foreground:3,children:it}),(0,r.BX)(Z.Z,{foreground:3,children:["Go to"," ",(0,r.tZ)("a",{href:"https://replit.com/pricing",target:"_blank",className:i().dynamic([["7541e2a1623a09e",[o.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",ot?"var(--background-root)":"var(--background-default)",u.j.mobileMax]]]),children:"replit.com"})," ","to upgrade your account."]})]}):(0,r.BX)(O.G7,{css:[O.l0.px(8)],children:[(0,r.tZ)(O.zx,{iconLeft:(0,r.tZ)(_.Z,{}),type:"button",colorway:"primary",stretch:!0,onClick:function(){(0,d.j)(d.U3.UPGRADE_SELECTED,{source:"inline",planID:"hacker"}),X($.SubscribeUser)},text:"Upgrade to Hacker"}),(0,r.tZ)("div",{className:i().dynamic([["7541e2a1623a09e",[o.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",ot?"var(--background-root)":"var(--background-default)",u.j.mobileMax]]])+" upgrade-text-container",children:(0,r.tZ)(Z.Z,{foreground:3,children:it})})]})}),(0,r.BX)(y.gC,{className:"hacker-features-container",children:[o.currentUserPermissions.changePrivacy!==m.HA$.Disallowed&&(0,r.tZ)("div",{className:i().dynamic([["7541e2a1623a09e",[o.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",ot?"var(--background-root)":"var(--background-default)",u.j.mobileMax]]])+" edit-repl-privacy",children:(0,r.BX)(O.hE,{tag:"fieldset",name:at("privacy"),value:o.isPrivate.toString(),onChange:function(){return Te({variables:{input:{id:o.id,isPrivate:!o.isPrivate}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:ue({},o,{isPrivate:!o.isPrivate})}}})},row:!0,stretch:!0,children:[(0,r.tZ)(O.rK,{id:at("false"),value:"false",text:"Public",icon:(0,r.tZ)(z.Z,{})}),(0,r.tZ)(O.rK,{id:at("true"),value:"true",text:"Private",icon:(0,r.tZ)(L.Z,{})})]})}),o.currentUserPermissions.changeAlwaysOn!==m.fnM.Disallowed&&(0,r.BX)("div",{className:i().dynamic([["7541e2a1623a09e",[o.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",ot?"var(--background-root)":"var(--background-default)",u.j.mobileMax]]])+" set-always-online",children:[(0,r.tZ)(A,{alwaysOn:o.isAlwaysOn,isBoosted:le,onChange:function(){if(!Ne){var e=!o.isAlwaysOn;De({variables:{replId:o.id,enabled:e},optimisticResponse:{setAlwaysOn:ue({__typename:"Repl"},o,{isAlwaysOn:e})}})}},onBoostChange:Qe,needsUpgrade:ot,onUpgrade:function(){return X($.SubscribeUser)},onUnboostClick:function(){return X($.UnboostRepl)}}),ke&&(0,r.tZ)("div",{className:i().dynamic([["7541e2a1623a09e",[o.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",ot?"var(--background-root)":"var(--background-default)",u.j.mobileMax]]])+" always-on-boost-error-container",children:(0,r.tZ)(Z.Z,{size:"small",children:ke})})]})]})]}),(0,r.tZ)(O.u_,{isOpen:P===$.DeleteRepl,onRequestClose:function(){return X(null)},children:(0,r.tZ)(I.Z,{delete:Ce,entityType:"Repl",hideModal:function(){return X(null)}})}),(0,r.tZ)(O.u_,{isOpen:P===$.UnboostRepl,onRequestClose:function(){return X(null)},children:(0,r.tZ)(H,{onUnboost:Qe,hideModal:function(){return X(null)}})}),(0,r.tZ)(O.u_,{isOpen:P===$.ForkRepl,onRequestClose:function(){return X(null)},children:S?(0,r.tZ)(ne.Z,{onFork:function(e,t,n,r){Ae({originId:o.id,teamId:e,title:t,description:n,isPrivate:r,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}}),(0,d.j)(d.U3.REPLS_REPL_SELF_FORKED,{replId:o.id})},initialTitle:o.title,initialDescription:null!==(nt=o.description)&&void 0!==nt?nt:"",hideModal:function(){return X(null)},teamContext:null===(t=o.user)||void 0===t?void 0:t.username}):(0,r.tZ)(re.Z,{onFork:function(e,t){Ae({originId:o.id,teamId:e,title:t,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}}),(0,d.j)(d.U3.REPLS_REPL_SELF_FORKED,{replId:o.id})},initialValue:o.title,hideModal:function(){return X(null)},teamContext:null===(n=o.user)||void 0===n?void 0:n.username})}),(0,r.tZ)(R.Z,{isOpen:P===$.SubscribeUser,onClose:function(){return X(null)},trackingInfo:{context:"workspace-header"}}),(0,r.tZ)(O.u_,{isOpen:P===$.Unpublish,onRequestClose:function(){return X(null)},children:(0,r.tZ)(ie.Z,{repl:o,source:"replEnvironment",onDone:function(){X(null)}})}),(0,r.tZ)(O.u_,{isOpen:P===$.UnpublishTemplate,onRequestClose:function(){return X(null)},children:(0,r.tZ)(te.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return X(null)},onConfirm:function(){Ge.loading||(Fe(),X(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,r.tZ)(O.u_,{isOpen:P===$.EditPublishSettings,onRequestClose:function(){return X(null)},noPadding:!0,fitContent:!0,children:(0,r.tZ)(ae.Z,{source:"replEnvironment",replId:o.id})}),(0,r.tZ)(i(),{id:"7541e2a1623a09e",dynamic:[o.currentUserPermissions.changeDescription?"auto":"not-allowed",rt?"var(--background-root)":"var(--background-default)",rt?"none":"auto",rt?.5:1,rt?"not-allowed":"pointer",ot?"var(--background-root)":"var(--background-default)",u.j.mobileMax],children:".repl-info-form.__jsx-style-dynamic-selector{position:relative}form.__jsx-style-dynamic-selector{padding:var(--space-16)}textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(o.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:.2s border-color;-moz-transition:.2s border-color;-o-transition:.2s border-color;transition:.2s border-color;background-color:transparent;color:var(--foreground-default)}textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default)}.edit-repl-privacy.__jsx-style-dynamic-selector{background-color:").concat(rt?"var(--background-root)":"var(--background-default)",";pointer-events:").concat(rt?"none":"auto",";opacity:").concat(rt?.5:1,";cursor:").concat(rt?"not-allowed":"pointer","}.set-always-online.__jsx-style-dynamic-selector{background-color:").concat(ot?"var(--background-root)":"var(--background-default)","}.edit-repl-privacy.__jsx-style-dynamic-selector,.set-always-online.__jsx-style-dynamic-selector{width:100%;padding:var(--space-8)}.set-always-online.__jsx-style-dynamic-selector{-webkit-border-bottom-left-radius:8px;-moz-border-radius-bottomleft:8px;border-bottom-left-radius:8px;-webkit-border-bottom-right-radius:8px;-moz-border-radius-bottomright:8px;border-bottom-right-radius:8px;overflow:hidden}.edit-repl.__jsx-style-dynamic-selector .hacker-features-container{margin:var(--space-8)}.edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16)}.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default)}.delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}.upgrade-button-container.__jsx-style-dynamic-selector{padding:0 var(--space-8)}.upgrade-button-container.__jsx-style-dynamic-selector .sentence-case{text-transform:none}.upgrade-text-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.always-on-indicator.__jsx-style-dynamic-selector{margin-left:var(--space-4);margin-right:var(--space-8);width:8px;height:8px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;background-color:var(--accent-green-default);-webkit-box-shadow:0 0 12px var(--accent-green-default);-moz-box-shadow:0 0 12px var(--accent-green-default);box-shadow:0 0 12px var(--accent-green-default)}.always-on-boost-error-container.__jsx-style-dynamic-selector{margin-top:var(--space-8)}.always-on-boost-error-container.__jsx-style-dynamic-selector .text{color:var(--accent-negative-default)}@media screen and (max-width:").concat(u.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw}}")})]})}!function(e){e.Fork="Fork",e.Delete="Delete",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(V||(V={})),function(e){e.DeleteRepl="DeleteRepl",e.ForkRepl="ForkRepl",e.UnboostRepl="UnboostRepl",e.SubscribeUser="SubscribeUser",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}($||($={}))},33217:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(35944),o=n(79547),i=n.n(o),a=(n(67294),n(41664)),c=n.n(a),l=n(7163),s=n(37026),u=n(63805);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=e.repl,n=(0,u.isMobile)({tablet:!1}),o=t.user?(0,r.tZ)(c(),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}({},(0,l.Ru)(t.user),{prefetch:!1,children:(0,r.tZ)("a",{style:{color:"var(--accent-primary-default)",fontWeight:500,textDecoration:"none"},className:"username",children:t.user.username})})):(0,r.tZ)("span",{className:"username",children:"@anonymous"}),a=n?"":152;return(0,r.BX)("div",{className:"jsx-7e345183c0c8a2d6 workspace-header-info",children:[(0,r.BX)("div",{className:"jsx-7e345183c0c8a2d6 workspace-header-title",children:[!n&&(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{className:"jsx-7e345183c0c8a2d6 breadcrumb interactive",children:(0,r.tZ)("span",{onClick:function(e){return e.stopPropagation()},className:"jsx-7e345183c0c8a2d6 breadcrumb-content",children:o})}),(0,r.tZ)("span",{className:"jsx-7e345183c0c8a2d6 slash",children:"/"})]}),(0,r.tZ)("span",{style:{justifyContent:"flex-end"},className:"jsx-7e345183c0c8a2d6 breadcrumb repl-title",children:(0,r.tZ)("span",{style:{maxWidth:a,fontWeight:n?500:400},className:"jsx-7e345183c0c8a2d6 breadcrumb-content",children:t.title})})]}),(0,r.tZ)("div",{className:"jsx-7e345183c0c8a2d6 spacer"}),(0,r.tZ)("div",{title:t.templateInfo.label,className:"jsx-7e345183c0c8a2d6 language-icon-container",children:(0,r.tZ)(s.Z,{iconUrl:t.templateInfo.iconUrl,size:16,alt:t.templateInfo.label})}),(0,r.tZ)(i(),{id:"7e345183c0c8a2d6",children:".workspace-header-info.jsx-7e345183c0c8a2d6,.workspace-header-title.jsx-7e345183c0c8a2d6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;overflow:hidden;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;font-size:var(--font-size-default)}.workspace-header-info.jsx-7e345183c0c8a2d6{width:100%}.workspace-header-user-link.jsx-7e345183c0c8a2d6{color:var(--accent-primary-default);text-decoration:none}.language-icon-container.jsx-7e345183c0c8a2d6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-4);background-color:var(--background-higher);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);position:relative}.breadcrumb.jsx-7e345183c0c8a2d6{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:2px var(--space-4);width:auto}.breadcrumb.interactive.jsx-7e345183c0c8a2d6:hover{background-color:var(--background-higher)}.breadcrumb-content.jsx-7e345183c0c8a2d6{display:inline-block;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.spacer.jsx-7e345183c0c8a2d6{width:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}.username.jsx-7e345183c0c8a2d6,.repl-title.jsx-7e345183c0c8a2d6{white-space:nowrap;color:var(--foreground-default)}.slash.jsx-7e345183c0c8a2d6{color:var(--foreground-dimmest);padding:0 2px}.repl-title.jsx-7e345183c0c8a2d6{overflow:hidden}"})]})}},61305:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(35944),o=n(79547),i=n.n(o),a=n(7163),c=n(41664),l=n.n(c),s=n(44054),u=n(39155),d=n(84409);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}function h(e){var t=e.user;return(0,r.BX)(r.HY,{children:[t?(0,r.tZ)(l(),p({},(0,a.Ru)(t),{prefetch:!1,children:(0,r.tZ)("a",{onClick:function(e){e.stopPropagation()},className:i().dynamic([["177bfdbfdbe915fa",[s.j.tabletMax]]])+" icon",children:(0,r.tZ)(d.Z,{src:t.image,username:t.username,size:32,layout:"intrinsic"})})})):(0,r.tZ)("div",{className:i().dynamic([["177bfdbfdbe915fa",[s.j.tabletMax]]])+" icon",children:(0,r.tZ)(u.Z,{size:"inherit"})}),(0,r.tZ)(i(),{id:"177bfdbfdbe915fa",dynamic:[s.j.tabletMax],children:".icon.__jsx-style-dynamic-selector{display:none}@media screen and (min-width:".concat(s.j.tabletMax,"px){.icon.__jsx-style-dynamic-selector{display:block}}")})]})}},91056:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(34051),o=n.n(r),i=n(88768),a=n(27754),c=n(87152),l=n(81544);function s(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,c,"next",e)}function c(e){s(i,r,o,a,c,"throw",e)}a(void 0)}))}}function d(e){return f.apply(this,arguments)}function f(){return(f=u(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return h=u(o().mark((function e(t){var n,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1,e.prev=1,e.next=4,m(t);case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),!(n>5)){e.next=10;break}throw e.t0;case 10:setTimeout((function(){p(t,n+1)}),1e3*(Math.pow(2,n)-1));case 11:case"end":return e.stop()}}),e,null,[[1,6]])}))),h.apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=u(o().mark((function e(t){var n,r,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,a.Z)({onUnrecoverableError:function(e){throw new Error("Failed to create temporary goval connection. Received error ".concat(e.message))}}),c.l){e.next=4;break}throw n.destroy(),new Error("Expected Apollo Client");case 4:return e.next=6,c.l.query({query:i.PkY,variables:{id:t}});case 6:if("Repl"===(r=e.sent.data).repl.__typename){e.next=10;break}throw n.destroy(),new Error("Failed to query repl info when creating temporary connection");case 10:return s=r.currentUser,u=r.repl,e.abrupt("return",new Promise((function(e){n.onConnectionStateChanged((function(t){t===a.e.CONNECTED&&(n.destroy(),e())})),n.connect({context:(0,l.U)({repl:u,currentUser:s})})})));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},83347:function(e,t,n){n.d(t,{Sq:function(){return ue}});var r=n(34051),o=n.n(r),i=n(35944),a=n(79547),c=n.n(a),l=n(67294),s=n(92876),u=(n(7163),n(41664),n(39155),n(44054)),d=n(16124),f=n(11163),p=n(8849),h=n(88768),m=n(23139),v=n(42122),g=n(38880),b=n(58375),y=n(63292),x=n(13475),w=n(23589),k=n(74302),S=n(69780),Z=n(15866),E=n(81736),_=n(37424),j=n(57923),O=n(22546),C=n(73248),T=n(28747),P=(n(84409),n(62424)),A=n(38657),I=n(44195),R=n(59339),D=n(31927),N=n(90309),U=n(29698),B=n(44327),z=n(50876),L=n(91056),M=n(70294),F=n(63735),G=n(76695),X=n(3204),W=n(584);function H(e){var t=e.isAlwaysOn,n=e.isBoosted,r=e.onBoostChange,o=e.onAlwaysOnChange;return(0,i.BX)(m.G7,{css:[X.l0.colWithGap(16)],children:[(0,i.BX)(m.G7,{css:[X.l0.display.flex,X.l0.flex.row,X.l0.align.center,X.l0.justify.spaceBetween],children:[(0,i.BX)(m.G7,{css:[X.l0.colWithGap(8)],children:[(0,i.BX)(m.G7,{css:[X.l0.rowWithGap(8),X.l0.align.center],children:[(0,i.tZ)(G.Z,{size:16})," ",(0,i.tZ)(m.xv,{variant:"subheadDefault",children:W.S["always-on"].name})]}),(0,i.tZ)(m.xv,{color:"dimmer",children:W.S["always-on"].description})]}),(0,i.tZ)(M.Z,{isOn:t,onChange:o})]}),(0,i.BX)(m.G7,{css:[X.l0.display.flex,X.l0.flex.row,X.l0.align.center,X.l0.justify.spaceBetween],children:[(0,i.BX)(m.G7,{css:[X.l0.colWithGap(8)],children:[(0,i.BX)(m.G7,{css:[X.l0.rowWithGap(8),X.l0.align.center],children:[(0,i.tZ)(F.Z,{size:16})," ",(0,i.tZ)(m.xv,{variant:"subheadDefault",children:W.S.boost.name})]}),(0,i.tZ)(m.xv,{color:"dimmer",children:W.S.boost.description})]}),(0,i.tZ)(M.Z,{isOn:n,onChange:r})]})]})}var V=n(41058),$=n(40556),q=n(43303),K=n(90213),Y=n(35987),Q=n(56834),J=n(35060),ee=n(58843);function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){re(e,t,n[t])}))}return e}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ae,ce,le="CyclesBalance",se="ReplPowerUpCosts";function ue(e){var t,n,r,a=e.repl,M=e.showCloseButton,F=e.onUpdateRepl,G=e.setIsEditing,X=(0,f.useRouter)(),W=(0,ee.c)("flag-expanded-fork-modal").enabled,te=ie(l.useState(!1),2),re=te[0],ue=te[1],de=ie(l.useState(null),2),fe=de[0],pe=de[1],he=ie(l.useState(null),2),me=he[0],ve=he[1],ge=ie(l.useState(a.isBoosted),2),be=ge[0],ye=ge[1],xe=ie(l.useState(a.isRenamed?a.title:""),2),we=xe[0],ke=xe[1],Se=ie(l.useState(a.description||""),2),Ze=Se[0],Ee=Se[1],_e=ie(l.useState(a.rawTemplateLabel),2),je=_e[0],Oe=_e[1],Ce=(0,Y.Z)({forceFetch:!1}).cycles,Te=(0,h.iWG)().data,Pe=(0,g.Z)().showError,Ae=a.publishedAs===h.O2h.Template,Ie=Boolean(a.publishedAs);l.useEffect((function(){Ee(a.description||"")}),[a.description]);var Re=(0,j.Z)(),De=l.useRef(a),Ne=ie((0,h.ap1)({variables:{id:a.id},onCompleted:function(){return X.push("/home","/~")},update:(0,d.t)({id:a.id}),onError:function(e){return Pe((0,p.Z)(e.message))}}),1)[0],Ue=ie((0,h.vib)({onError:function(e){return Pe((0,p.Z)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,n=De.current,r={};n.description!==t.description&&(r.description=t.description),n.title!==t.title&&(r.title=t.title),n.url!==t.url&&(r.url=t.url),n.isRenamed!==t.isRenamed&&(r.isRenamed=!!t.isRenamed),De.current=a,Object.keys(r).length>0&&(F(r),G(!1))}}),2),Be=Ue[0],ze=Ue[1].loading,Le=ie((0,T.Z)(),2),Me=Le[0],Fe=Le[1].loading,Ge=ie((0,h.prL)({onCompleted:function(e){"UserError"===e.setAlwaysOn.__typename&&Pe(e.setAlwaysOn.message)},onError:function(e){return Pe((0,p.Z)(e.message))},refetchQueries:[le,se]}),2),Xe=Ge[0],We=Ge[1].loading,He=ie((0,h.BjH)({variables:{replId:a.id},onCompleted:function(e){var t=e.boostRepl;"UserError"!==t.__typename?((0,L.Z)(a.id).catch((function(e){s.Tb(e),Re.current&&Pe("Something went wrong when boosting your repl. Please refresh or try again.")})),Re.current&&ye(!0)):Pe(t.message)},onError:function(e){s.Tb(e),Pe((0,p.Z)(e.message))},refetchQueries:[le,se]}),2),Ve=He[0],$e=He[1].loading,qe=a.currentUserPermissions.publish,Ke=ie((0,h.gFT)({variables:{input:{replId:a.id}},onError:function(e){s.Tb(e),Pe((0,p.Z)(e.message))}}),2),Ye=Ke[0],Qe=Ke[1],Je=ie((0,h.cry)({variables:{replId:a.id},onCompleted:function(e){var t=e.unboostRepl;"UserError"!==t.__typename?((0,L.Z)(a.id).catch((function(e){s.Tb(e),Re.current&&Pe("Something went wrong when unboosting your Repl. Please refresh or try again.")})),Re.current&&ye(!1)):Pe(t.message)},onError:function(e){s.Tb(e),Pe((0,p.Z)(e.message))},refetchQueries:[se]}),2),et=Je[0],tt=Je[1].loading,nt=(0,h.U50)({variables:{replId:a.id}}),rt=nt.data,ot=nt.loading,it=l.useMemo((function(){return!(!we||we===a.title)||(je!==a.rawTemplateLabel||!(""===Ze&&!a.description)&&Ze!==a.description)}),[a,we,Ze,je]),at=l.useCallback((function(){if(it){var e={id:a.id,title:we||a.title,description:Ze,templateLabel:a.currentUserPermissions.changeTemplateLabel?je:void 0};Be({variables:{input:e}})}}),[it,Be,a,we,Ze,je]),ct=re||null!==fe||Fe,lt=(0,x.Z)((function(){ct||(it?at():G(!1))}),[ct,it,at]),st=l.useContext(I.G).usesDigitalGoodsService,ut=function(e){switch(e){case"boost":return"Repl"===(null===rt||void 0===rt?void 0:rt.repl.__typename)&&"PowerUpCostsType"===rt.repl.powerUpCosts.__typename?rt.repl.powerUpCosts.boost.explanation:null;case"always-on":return"Repl"===(null===rt||void 0===rt?void 0:rt.repl.__typename)&&"PowerUpCostsType"===rt.repl.powerUpCosts.__typename?rt.repl.powerUpCosts.alwaysOn.explanation:null;case"private":var t,n,r;return"UserPowerUpCostsType"===(null===rt||void 0===rt||null===(t=rt.currentUser)||void 0===t?void 0:t.powerUpCosts.__typename)?null===(n=rt.currentUser.powerUpCosts)||void 0===n||null===(r=n.private)||void 0===r?void 0:r.explanation:null;default:(0,K.Z)(e)}},dt=function(){return Be({variables:{input:{id:a.id,isPrivate:!a.isPrivate}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:oe({},a,{isPrivate:!a.isPrivate})}},refetchQueries:[le,se]})},ft=function(){if(!We){var e=!a.isAlwaysOn;Xe({variables:{replId:a.id,enabled:e},optimisticResponse:{setAlwaysOn:oe({__typename:"Repl"},a,{isAlwaysOn:e})}})}},pt=function(){(0,Q.j)(Q.U3.BOOST_TOGGLED,{enabled:!be}),be?et():Ve()},ht=a.isRenamed?"Name your Repl":"Default name: ".concat(a.title),mt=[h.Sy.Submit,h.Sy.PublishTemplate,h.Sy.EditTemplate].includes(a.workspaceCta),vt=[];a.publishedAs===h.O2h.RegularRepl&&qe&&vt.push({value:ae.Unpublish,label:"Unpublish",icon:(0,i.tZ)(E.Z,{})}),Ae&&qe&&vt.push({value:ae.UnpublishTemplate,label:"Unpublish template",icon:(0,i.tZ)(E.Z,{})}),Ie&&qe&&vt.push({value:ae.EditPublishSettings,label:"Edit Publish Settings",icon:(0,i.tZ)(U.Z,{})}),a.currentUserPermissions.delete&&vt.push({isDestructive:!0,value:ae.Delete,label:"Delete",icon:(0,i.tZ)(b.Z,{})});var gt,bt,yt=a.currentUserPermissions.changePrivacy===h.HA$.SubscriptionRequired,xt=a.currentUserPermissions.changeAlwaysOn===h.fnM.SubscriptionRequired,wt=(0,_.H)();return(0,i.BX)("div",{ref:lt,className:c().dynamic([["f9c78b232f4a61b4",[a.currentUserPermissions.changeDescription?"auto":"not-allowed",u.j.mobileMax]]]),children:[(0,i.tZ)("form",{onSubmit:function(e){e.preventDefault(),at()},className:c().dynamic([["f9c78b232f4a61b4",[a.currentUserPermissions.changeDescription?"auto":"not-allowed",u.j.mobileMax]]]),children:(0,i.BX)(m.G7,{css:[m.l0.align.stretch,m.l0.colWithGap(16)],children:[(0,i.BX)(m.G7,{css:[m.l0.colWithGap(8)],children:[(0,i.BX)(m.G7,{css:[m.l0.flex.row,m.l0.align.center,m.l0.justify.spaceBetween],children:[(0,i.BX)(m.G7,{css:[m.l0.rowWithGap(8)],children:[a.currentUserPermissions.changeIconUrl&&Ae?(0,i.tZ)(P.Z,{value:a.iconUrl,onChange:function(e){return Be({variables:{input:{id:a.id,iconUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:oe({},a,{iconUrl:e})}}})}}):null,(0,i.tZ)(m.ZP,oe({prefetch:!1},(0,k.j3)(a),{iconLeft:(0,i.tZ)(w.Z,{}),colorway:"primary",text:"Cover page",target:"_blank"}))]}),(0,i.BX)(m.G7,{css:[m.l0.align.center,m.l0.rowWithGap(8)],children:[a.currentUserPermissions.fork&&(0,i.tZ)(m.zx,{iconLeft:(0,i.tZ)(C.Z,{}),type:"button",onClick:function(){return pe(ce.ForkRepl)},text:"Fork"}),vt.length>0&&(0,i.tZ)(m.G7,{children:(0,i.tZ)(O.Z,{items:vt,onItemClick:function(e){switch(e.value){case ae.Unpublish:return void pe(ce.Unpublish);case ae.UnpublishTemplate:return void pe(ce.UnpublishTemplate);case ae.Delete:return void pe(ce.DeleteRepl);case ae.EditPublishSettings:pe(ce.EditPublishSettings)}},onOpenChange:ue})}),M?(0,i.tZ)(m.hU,{alt:"Close",tooltipHidden:!0,onClick:function(){at(),G(!1)},children:(0,i.tZ)(J.Z,{})}):null]})]}),a.lastPublishedAt&&qe?(0,i.BX)(m.xv,{variant:"small",color:"dimmest",children:["Last published on"," ",new Date(a.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]}),(0,i.BX)(m.Tg,{background:"default",css:[m.l0.colWithGap(16)],children:[(0,i.tZ)(m.G7,{css:[m.l0.flex.column],children:(0,i.BX)(m.G7,{css:[m.l0.colWithGap(4)],children:[(0,i.BX)(m.G7,{css:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.end],children:[(0,i.tZ)("label",{htmlFor:wt("name"),className:c().dynamic([["f9c78b232f4a61b4",[a.currentUserPermissions.changeDescription?"auto":"not-allowed",u.j.mobileMax]]]),children:(0,i.tZ)(m.xv,{variant:"small",color:"dimmer",children:"Name"})}),(0,i.tZ)(v.Z,{maxLength:60,value:we,hideLabel:!0})]}),(0,i.tZ)(m.II,{style:{cursor:a.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!a.currentUserPermissions.changeTitle,maxLength:60,placeholder:ht,value:we,onChange:function(e){return ke(e.target.value)},spellCheck:!1,id:wt("name")})]})}),(0,i.tZ)(m.G7,{css:[m.l0.flex.column],children:(0,i.BX)(m.G7,{css:[m.l0.colWithGap(4)],children:[(0,i.BX)(m.G7,{css:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.end],children:[(0,i.tZ)("label",{htmlFor:wt("description"),className:c().dynamic([["f9c78b232f4a61b4",[a.currentUserPermissions.changeDescription?"auto":"not-allowed",u.j.mobileMax]]]),children:(0,i.tZ)(m.xv,{variant:"small",color:"dimmer",children:"Description"})}),(0,i.tZ)(v.Z,{maxLength:A.p,value:Ze,hideLabel:!0})]}),(0,i.tZ)(m.B,{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!a.currentUserPermissions.changeDescription,maxLength:A.p,value:Ze,onChange:function(e){return Ee(e.target.value)},placeholder:"What does this Repl do?",css:[m.l0.minHeight(96),m.l0.maxHeight(128),{resize:"vertical"}],id:wt("description")})]})})]}),Ae&&a.currentUserPermissions.changeTemplateLabel&&(0,i.tZ)(m.Tg,{background:"default",css:[m.l0.colWithGap(4)],children:(0,i.BX)(m.G7,{css:[m.l0.colWithGap(4)],children:[(0,i.tZ)("label",{htmlFor:wt("template"),className:c().dynamic([["f9c78b232f4a61b4",[a.currentUserPermissions.changeDescription?"auto":"not-allowed",u.j.mobileMax]]]),children:(0,i.tZ)(m.xv,{color:"dimmer",variant:"small",children:"Template label"})}),(0,i.tZ)(m.II,{value:je,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return Oe(e.target.value)},id:wt("template")})]})})]})}),mt?null:(0,i.BX)(m.G7,{css:[m.l0.colWithGap(24),m.l0.p(16),m.l0.pt(0)],children:[xt&&st?(0,i.BX)(m.G7,{css:[m.l0.textAlign.center,m.l0.p(4)],children:[(0,i.tZ)(m.xv,{color:"dimmer",children:yt?"Get access to Private Repls, Always On, and Boosts.":"Get access to Always On and Boosts."}),(0,i.BX)(m.xv,{color:"dimmer",children:["Go to"," ",(0,i.tZ)("a",{href:"https://replit.com/pricing",target:"_blank",className:c().dynamic([["f9c78b232f4a61b4",[a.currentUserPermissions.changeDescription?"auto":"not-allowed",u.j.mobileMax]]]),children:"replit.com"})," ","to upgrade your account."]})]}):null,0===Ce&&!0!==(null===Te||void 0===Te||null===(t=Te.currentUser)||void 0===t?void 0:t.isHacker)?(0,i.tZ)(m.zx,{iconLeft:(0,i.tZ)(V.Z,{}),type:"button",colorway:"primary",stretch:!0,onClick:function(){(0,Q.j)(Q.U3.UPGRADE_SELECTED,{source:"workspace_info_modal",planID:"cycles"}),pe(ce.BuyCycles)},text:"Power Up this Repl"}):null,a.currentUserPermissions.changePrivacy===h.HA$.Allowed&&(0,i.BX)(m.G7,{css:[m.l0.colWithGap(8)],children:[(0,i.BX)(m.hE,{tag:"fieldset",name:wt("privacy"),value:a.isPrivate.toString(),onChange:function(){if(!ze)if(a.isPrivate)dt();else{var e=ut("private");if(null!=e&&!ot){if((0,Q.j)(Q.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!a.isPrivate,source:"workspace_info_modal",costExplanation:e}),"NEEDS_CYCLES"===e||"SPEND_CYCLES"===e)return ve("private"),void pe(ce.SpendCycles);if("INCLUDED_IN_SUBSCRIPTION"!==e&&"INCLUDED_IN_EXISTING_ORDER"!==e)throw new Error("Unexpected cost explanation for enabling private: ".concat(e));dt()}}},row:!0,primary:!0,stretch:!0,children:[(0,i.tZ)(m.rK,{id:wt("false"),value:"false",text:"Public",icon:(0,i.tZ)(S.Z,{})}),(0,i.tZ)(m.rK,{id:wt("true"),value:"true",text:"Private",icon:(0,i.tZ)(Z.Z,{})})]}),(0,i.tZ)(m.xv,{variant:"small",color:"dimmest",children:a.isPrivate?"Only you can see and edit this Repl.":"Anyone can view and fork this Repl."})]}),a.currentUserPermissions.changeAlwaysOn!==h.fnM.Disallowed&&(0,i.tZ)(H,{isAlwaysOn:a.isAlwaysOn,isBoosted:be,onAlwaysOnChange:function(){var e=ut("always-on");if(null!=e&&!We&&!ot){if((0,Q.j)(Q.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"always-on",setting:!a.isAlwaysOn,source:"workspace_info_modal",costExplanation:e}),!a.isAlwaysOn&&"ACTIVATE_EXISTING_ORDER"!==e&&"INCLUDED_IN_SUBSCRIPTION"!==e)return ve("always-on"),void pe(ce.SpendCycles);ft()}},onBoostChange:function(){var e=ut("boost");if(!(null==e||$e||tt||ot)){if((0,Q.j)(Q.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"boost",setting:!be,source:"workspace_info_modal",costExplanation:e}),!be&&"ACTIVATE_EXISTING_ORDER"!==e&&"INCLUDED_IN_SUBSCRIPTION"!==e)return ve("boost"),void pe(ce.SpendCycles);pt()}}})]}),(0,i.tZ)(m.u_,{isOpen:fe===ce.DeleteRepl,onRequestClose:function(){return pe(null)},children:(0,i.tZ)(y.Z,{delete:Ne,entityType:"Repl",hideModal:function(){return pe(null)}})}),(0,i.tZ)(q.Z,{context:"workspace_info_modal",isOpen:fe===ce.SpendCycles,onRequestClose:function(){return pe(null)},onRequestBuyMore:function(){return pe(ce.BuyCycles)},onRequestPowerUp:(bt=o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=me,e.next=null===e.t0?3:"boost"===e.t0?4:"always-on"===e.t0?6:"private"===e.t0?8:10;break;case 3:return e.abrupt("break",12);case 4:return pt(),e.abrupt("break",12);case 6:return ft(),e.abrupt("break",12);case 8:return dt(),e.abrupt("break",12);case 10:return(0,K.Z)(me),e.abrupt("break",12);case 12:return e.next=14,new Promise((function(e){return setTimeout(e,3e3)}));case 14:pe(null);case 15:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=bt.apply(e,t);function i(e){ne(o,n,r,i,a,"next",e)}function a(e){ne(o,n,r,i,a,"throw",e)}i(void 0)}))}),canSpend:null!=me&&ut(me)!==h.ChQ.NeedsCycles,powerUp:null!==me&&void 0!==me?me:"boost"},fe),(0,i.tZ)($.Z,{isOpen:fe===ce.BuyCycles,onRequestClose:function(){return pe(null)},uponPurchaseGoTo:"workspace",context:"workspace_info_modal",replTitle:a.title}),(0,i.tZ)(m.u_,{isOpen:fe===ce.ForkRepl,onRequestClose:function(){return pe(null)},children:W?(0,i.tZ)(D.Z,{onFork:function(e,t,n,r){Me({originId:a.id,teamId:e,title:t,description:n,isPrivate:r,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}}),(0,Q.j)(Q.U3.REPLS_REPL_SELF_FORKED,{replId:a.id})},initialTitle:a.title,initialDescription:null!==(gt=a.description)&&void 0!==gt?gt:"",initialPrivacy:a.isPrivate,hideModal:function(){return pe(null)},teamContext:null===(n=a.user)||void 0===n?void 0:n.username}):(0,i.tZ)(N.Z,{onFork:function(e,t){Me({originId:a.id,teamId:e,title:t,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}}),(0,Q.j)(Q.U3.REPLS_REPL_SELF_FORKED,{replId:a.id})},initialValue:a.title,hideModal:function(){return pe(null)},teamContext:null===(r=a.user)||void 0===r?void 0:r.username})}),(0,i.tZ)(m.u_,{isOpen:fe===ce.Unpublish,onRequestClose:function(){return pe(null)},children:(0,i.tZ)(B.Z,{repl:a,source:"replEnvironment",onDone:function(){pe(null)}})}),(0,i.tZ)(m.u_,{isOpen:fe===ce.UnpublishTemplate,onRequestClose:function(){return pe(null)},children:(0,i.tZ)(R.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return pe(null)},onConfirm:function(){Qe.loading||(Ye(),pe(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,i.tZ)(m.u_,{isOpen:fe===ce.EditPublishSettings,onRequestClose:function(){return pe(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,i.tZ)(z.Z,{source:"replEnvironment",replId:a.id})}),(0,i.tZ)(c(),{id:"f9c78b232f4a61b4",dynamic:[a.currentUserPermissions.changeDescription?"auto":"not-allowed",u.j.mobileMax],children:"form.__jsx-style-dynamic-selector{padding:var(--space-16)}textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(a.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:.2s border-color;-moz-transition:.2s border-color;-o-transition:.2s border-color;transition:.2s border-color;background-color:transparent;color:var(--foreground-default)}textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default)}.edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16)}.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default)}.delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}.upgrade-button-container.__jsx-style-dynamic-selector{padding:0 var(--space-8)}.upgrade-button-container.__jsx-style-dynamic-selector .sentence-case{text-transform:none}.upgrade-text-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.always-on-indicator.__jsx-style-dynamic-selector{margin-left:var(--space-4);margin-right:var(--space-8);width:8px;height:8px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;background-color:var(--accent-green-default);-webkit-box-shadow:0 0 12px var(--accent-green-default);-moz-box-shadow:0 0 12px var(--accent-green-default);box-shadow:0 0 12px var(--accent-green-default)}@media screen and (max-width:").concat(u.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw}}")})]})}!function(e){e.Delete="Delete",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(ae||(ae={})),function(e){e.DeleteRepl="DeleteRepl",e.SpendCycles="SpendCycles",e.BuyCycles="BuyCycles",e.ForkRepl="ForkRepl",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(ce||(ce={}))},25978:function(e,t,n){n.d(t,{Y:function(){return f},r:function(){return p}});var r=n(35944),o=n(67294),i=n(93577),a=n(88353),c=n(5560),l=n(12603),s=n(68312),u=n(86677),d=new Set(["draw.js"]);function f(e,t){var n=(0,l.f6)(),r=(0,i.Z)(),a=o.useCallback((function(e,n){var r,o;null===(r=t.current)||void 0===r||null===(o=r.contentWindow)||void 0===o||o.postMessage({action:"FILE_UPDATE",file:e,content:n},"*")}),[t]);o.useEffect((function(){if(t.current&&n){var r=!0,o=!1,i=void 0;try{for(var c,l=function(n,r){var o=r.value;t.current.onload=function(){e.readFile(o).then((function(e){e.error||a(o,e.content.toString())}))}},s=d[Symbol.iterator]();!(r=(c=s.next()).done);r=!0)l(0,c)}catch(u){o=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}}),[e,a,t,n]),o.useEffect((function(){if(n&&r&&d.has(r))return e.watchOtFile(r,{onReady:function(e){var t=e.initialContent;return a(r,t.toString())},onChange:function(e){var t=e.latestContent;return a(r,t)}})}),[e,r,a,n])}var p=function(e){var t=e.iframe,n=(0,c.Z)();return o.useEffect((function(){var e="https://".concat(n,".id.repl.co"),t=function(t){if(t.origin===e&&"DOWNLOAD"===t.data.action){var n=document.createElement("a");document.body.appendChild(n),n.setAttribute("style","display: none"),n.href=t.data.url,n.download=t.data.filename,n.click(),document.body.removeChild(n)}};return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}),[n]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(s.J,{alt:"Save image",onClick:function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({action:"REQUEST_SCREENSHOT"},"*")},children:(0,r.tZ)(a.Z,{})}),(0,r.tZ)(s.J,{alt:"Toggle Record",onClick:function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({action:"REQUEST_TOGGLE_RECORD"},"*")},children:(0,r.tZ)(u.Z,{})})]})}},68312:function(e,t,n){n.d(t,{J:function(){return X},Z:function(){return H}});var r=n(35944),o=n(67294),i=n(29698),a=n(28774),c=n(34860),l=n(35060),s=n(79547),u=n.n(s),d=n(88768),f=n(23139),p=n(98647),h=n(92876),m=n(48966),v=n.n(m),g=n(94590),b=n(37424),y=n(57170),x=n(58375);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e){var t=e.repl,n=e.existingDomain,i=e.onLink,a=e.onGoBack,c=e.onLinkStarted,l=e.onStateChanged,s=(0,o.useState)(n?"loading":null),u=s[0],m=s[1],g=(0,o.useState)(!1),x=g[0],w=g[1],k=(0,o.useState)(null),Z=k[0],_=k[1],j=(0,o.useState)(!1),O=j[0],C=j[1],T=S((0,d.h3V)(),2),P=T[0],A=T[1],I=(0,o.useRef)(null),R=(0,o.useRef)(null),D=(0,o.useRef)(null),N=function(e){(null===e||void 0===e?void 0:e.current)&&e.current.select()},U=function(e){var t;(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.value)&&(0,p.Z)(e.current.value).catch((function(e){h.$e((function(t){t.setTag("domain-link",!0),t.setExtra("type","copy"),h.Tb(e)}))}))},B=(0,o.useState)(n||""),z=B[0],L=B[1];(0,o.useEffect)((function(){A.data&&"Repl"===A.data.linkReplDomain2.__typename&&i()}),[A.data,i]);var M=function(e){m(e),l()},F=v().isURL(z,{require_valid_protocol:!1})&&z.split(".").length>=2,G=F&&2===z.split(".").length,X=t.hostedUrl.replace(/^https:\/\//,""),W=t.apexProxy,H="replit-verify=".concat(t.id),V=(0,b.H)();return(0,r.BX)(f.G7,{css:[f.l0.colWithGap(16)],children:[(0,r.BX)(f.G7,{css:[f.l0.colWithGap(8)],children:[(0,r.tZ)(f.h4,{level:2,variant:"subheadDefault",children:"New Domain Link"}),(0,r.BX)(f.xv,{multiline:!0,children:["Learn more"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/hosting-web-pages#custom-domains",target:"_blank",children:"here"}),"."]})]}),(0,r.BX)(f.G7,{css:[f.l0.colWithGap(4)],children:[(0,r.tZ)("label",{htmlFor:V("domain"),children:(0,r.tZ)(f.xv,{color:"dimmer",variant:"small",children:"Step 1: Enter your domain"})}),(0,r.tZ)(f.II,{className:"cname-url",readOnly:"loading"===u,value:z,onChange:function(e){L(e.target.value)},onBlur:function(){!function(){try{var e=new URL("/",z);L(e.hostname)}catch(t){}}()},placeholder:"example.com",id:V("domain")})]}),G&&!O?(0,r.BX)(f.G7,{css:[f.l0.colWithGap(8)],children:[(0,r.BX)(f.G7,{css:[f.l0.colWithGap(4)],children:[(0,r.tZ)("label",{htmlFor:V("record"),children:(0,r.BX)(f.xv,{color:"dimmer",variant:"small",children:["Step 2: Add an ",(0,r.tZ)("code",{children:"A"})," Record"]})}),(0,r.BX)(f.G7,{css:[f.l0.rowWithGap(8),f.l0.align.center],children:[(0,r.tZ)(f.xv,{css:{fontFamily:f.TV.fontFamilyCode,maxWidth:"40%"},children:z}),(0,r.tZ)(f.xv,{css:{fontFamily:f.TV.fontFamilyCode},children:"A"}),(0,r.tZ)(f.II,{readOnly:!0,ref:I,onChange:function(){return null},value:W,onFocus:function(){return N(I)},id:V("record")}),(0,r.tZ)(f.zx,{onClick:function(){return U(I)},text:"Copy"})]})]}),(0,r.tZ)(f.G7,{css:[f.l0.flex.row,f.l0.align.stretch],children:(0,r.tZ)(f.zx,{outlined:!0,onClick:function(){return C(!0)},text:"Use CNAME record instead."})})]}):null,!F||!O&&G?null:(0,r.BX)(f.G7,{css:[f.l0.colWithGap(4)],children:[(0,r.tZ)("label",{htmlFor:V("CNAMERecord"),children:(0,r.BX)(f.xv,{color:"dimmer",variant:"small",children:["Step 2: Add a ",(0,r.tZ)("code",{children:"CNAME"})," Record"]})}),(0,r.BX)(f.G7,{css:[f.l0.rowWithGap(8),f.l0.align.center],children:[(0,r.tZ)(f.xv,{css:{fontFamily:f.TV.fontFamilyCode,maxWidth:"40%"},children:z}),(0,r.tZ)(f.xv,{css:{fontFamily:f.TV.fontFamilyCode},children:"CNAME"}),(0,r.tZ)(f.II,{readOnly:!0,ref:D,onChange:function(){return null},value:X,onFocus:function(){return N(D)},id:V("CNAMERecord")}),(0,r.tZ)(f.zx,{onClick:function(){return U(D)},text:"Copy"})]}),G?(0,r.BX)(f.G7,{css:[f.l0.colWithGap(8)],children:[(0,r.tZ)(f.xv,{variant:"small",multiline:!0,children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,r.tZ)(f.G7,{css:[f.l0.flex.row,f.l0.align.stretch],children:(0,r.tZ)(f.zx,{onClick:function(){return C(!1)},text:"Use A record instead",outlined:!0})})]}):null]}),F?(0,r.BX)(f.G7,{css:[f.l0.colWithGap(4)],children:[G?(0,r.tZ)("label",{htmlFor:V("txtRecord"),children:(0,r.BX)(f.xv,{color:"dimmer",variant:"small",children:["This domain also requires a ",(0,r.tZ)("code",{children:"TXT"})," Record"]})}):(0,r.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,r.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,r.BX)(f.G7,{css:[f.l0.rowWithGap(8),f.l0.align.center],children:[(0,r.tZ)(f.xv,{css:{fontFamily:f.TV.fontFamilyCode,maxWidth:"40%"},children:z}),(0,r.tZ)(f.xv,{css:{fontFamily:f.TV.fontFamilyCode},children:"TXT"}),(0,r.tZ)(f.II,{readOnly:!0,ref:R,onChange:function(){return null},value:H,onClick:function(){return N(R)},id:V("txtRecord")}),(0,r.tZ)(f.zx,{onClick:function(){return U(R)},text:"Copy"})]})]}):null,"loading"===u?(0,r.tZ)(f.G7,{css:[f.l0.colWithGap(12),f.l0.pt(16)],children:(0,r.tZ)(E,{replId:t.id,domain:z,onVerified:function(){return M("verified")},onError:function(){return M("error")}})}):null,"verified"===u?(0,r.tZ)(f.G7,{css:[f.l0.colWithGap(12),f.l0.pt(16)],children:(0,r.tZ)(f.xv,{children:"Your domain has been verified."})}):null,"error"===u||Z?(0,r.tZ)(f.G7,{css:[f.l0.colWithGap(12),f.l0.pt(16)],children:(0,r.BX)(f.xv,{children:["Creating the domain link failed",Z?": "+Z:"","."]})}):null,(0,r.BX)(f.G7,{css:[f.l0.rowWithGap(12),f.l0.justify.end],children:[(0,r.tZ)(f.zx,{onClick:a,text:"Close"}),F&&null===u?(0,r.tZ)(f.zx,{disabled:x,onClick:function(){w(!0),_(null),P({variables:{replId:t.id,domain:z}}).then((function(e){var t,n=(null===(t=e.data)||void 0===t?void 0:t.linkReplDomain2)||null;"Repl"===(null===n||void 0===n?void 0:n.__typename)||"ServiceUnavailable"===(null===n||void 0===n?void 0:n.__typename)?(_(null),M("loading")):("NotFoundError"!==(null===n||void 0===n?void 0:n.__typename)&&"UnauthorizedError"!==(null===n||void 0===n?void 0:n.__typename)||_(null===n||void 0===n?void 0:n.message),M("error")),w(!1),c()})).catch((function(e){w(!1),_(e.message)}))},text:"".concat(x?"Linking domain...":"Link domain"),iconLeft:(0,r.tZ)(y.Z,{}),colorway:"primary"}):null]})]})}function E(e){var t,n=e.domain,i=e.replId,a=e.onVerified,c=e.onError,l=(0,d.bxH)({variables:{replId:i,domain:n},pollInterval:1e3}),s=l.data,p=l.stopPolling;if((0,o.useEffect)((function(){var e,t;if(s&&"Repl"===s.repl.__typename){var n=s.repl;if("NotFoundError"!==(null===(e=n.checkDomain2)||void 0===e?void 0:e.__typename)){if("DomainStatus2"===(null===(t=n.checkDomain2)||void 0===t?void 0:t.__typename)){var r=n.checkDomain2,o=r.retry,i=r.verified;i||o?(!i&&o||p(),i&&a()):c()}}else c()}}),[s,p,a,c]),"Repl"===(null===s||void 0===s?void 0:s.repl.__typename)&&s.repl.checkDomain2){var h,m,v,g="DomainStatus2"===s.repl.checkDomain2.__typename?s.repl.checkDomain2:null,b=null;if(null===g||void 0===g?void 0:g.records){var y=g.records;y.__typename;b=k(y,["__typename"])}var x,w=null;if(!(null===g||void 0===g?void 0:g.status))"ServiceUnavailable"===(null===(x=s.repl.checkDomain2)||void 0===x?void 0:x.__typename)&&(w=s.repl.checkDomain2.message),w||(w="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.");return(0,r.BX)(f.G7,{css:[f.l0.colWithGap(16),f.l0.justify.spaceBetween],children:[(0,r.BX)(f.G7,{css:[f.l0.rowWithGap(16),f.l0.align.center],children:[(0,r.tZ)("div",{css:[f.l0.width("20px"),f.l0.height("20px"),{aspectRatio:"1 / 1"},{borderRadius:"100%"},{borderRadius:"100%"},{borderStyle:"solid"},{borderWidth:"3px"},{borderColor:f.TV.accentPrimaryDimmer},{borderTopColor:f.TV.accentPrimaryDefault},{transform:"rotate(0deg)"},{animation:"linear domain-loading 1s infinite"}],className:"jsx-4e6cc6caecb799c9"}),(0,r.tZ)("div",{className:"jsx-4e6cc6caecb799c9",children:w})]}),b||"DomainStatus2"===(null===(h=s.repl.checkDomain2)||void 0===h?void 0:h.__typename)&&(null===(m=s.repl.checkDomain2)||void 0===m?void 0:m.retry)||"ServiceUnavailable"===(null===(v=s.repl.checkDomain2)||void 0===v?void 0:v.__typename)?(0,r.BX)(f.G7,{children:[(0,r.tZ)("br",{className:"jsx-4e6cc6caecb799c9"}),b?(0,r.BX)(f.G7,{children:["Currently, your domain\u2019s records show:",(0,r.tZ)("pre",{css:[f.l0.overflow("scroll")],className:"jsx-4e6cc6caecb799c9",children:Object.entries(b).map((function(e){var t=S(e,2),o=t[0],i=t[1];return null===i||void 0===i?void 0:i.map((function(e){return(0,r.BX)("div",{className:"jsx-4e6cc6caecb799c9",children:[n," ",o," ",e]},"{domain}-{dnsType}")}))}))})]}):(0,r.tZ)(f.xv,{multiline:!0,children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null,(0,r.tZ)(u(),{id:"4e6cc6caecb799c9",children:"@-webkit-keyframes domain-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes domain-loading{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes domain-loading{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes domain-loading{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}return"Repl"===(null===s||void 0===s?void 0:s.repl.__typename)&&"NotFoundError"===(null===(t=s.repl.checkDomain2)||void 0===t?void 0:t.__typename)?(0,r.tZ)(r.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function _(e){var t=e.replId,n=e.domain,i=e.onUnlink,a=e.onGoBack,c=S((0,d.pCu)({variables:{input:{id:t,removeDomain:n}}}),2),l=c[0],s=c[1];return(0,o.useEffect)((function(){s.data&&s.data.updateRepl.repl&&i()}),[s.data,i]),(0,r.BX)(f.G7,{css:[f.l0.colWithGap(16)],children:[(0,r.BX)(f.G7,{css:[f.l0.colWithGap(8)],children:[(0,r.tZ)(f.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"}),(0,r.BX)(f.xv,{multiline:!0,children:["Are you sure you want to unlink"," ",(0,r.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+n,children:n}),"?"]})]}),(0,r.BX)(f.G7,{css:[f.l0.rowWithGap(12),f.l0.justify.end],children:[(0,r.tZ)(f.zx,{onClick:a,text:"Cancel"}),(0,r.tZ)(f.zx,{onClick:function(){s.loading||l()},text:s.loading?"Unlinking domain...":"Yes, unlink this domain",colorway:"negative",iconLeft:(0,r.tZ)(x.Z,{}),disabled:s.loading})]})]})}function j(e){var t=e.replId,n=e.onUnlink,i=e.onLink,a=(0,d.KG0)({variables:{replId:t}}),c=a.data,l=a.loading,s=a.refetch,u=(0,o.useState)("listing"),p=u[0],h=u[1],m=(0,o.useState)(null),v=m[0],b=m[1],y=null;if(l)y=(0,r.tZ)(r.HY,{children:"loading..."});else if(c&&"Repl"===c.repl.__typename){var x=c.repl;"listing"===p?y=(0,r.BX)(f.G7,{css:[f.l0.colWithGap(16)],children:[x.domains&&(0===x.domains.length?(0,r.tZ)(f.xv,{children:"No domains are currently linked."}):(0,r.BX)(f.G7,{children:[(0,r.tZ)(f.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),(0,r.tZ)(f.G7,{css:[f.l0.colWithGap(8)],children:x.domains.map((function(e){return e?(0,r.tZ)(f.G7,{children:(0,r.BX)(f.G7,{css:[f.l0.rowWithGap(12),f.l0.justify.spaceBetween,f.l0.align.center],children:[(0,r.BX)(f.xv,{children:[e.domain,": ",e.state,"..."]}),(0,r.BX)(f.G7,{css:[f.l0.rowWithGap(12),f.l0.justify.end,f.l0.align.center],children:[(0,r.tZ)(f.zx,{text:"Unlink",onClick:function(){b(e.domain),h("unlinking")}}),"verified"!==e.state?(0,r.tZ)(f.zx,{text:"Check status",onClick:function(){b(e.domain),h("linking")}}):null]})]})},e.domain):null}))})]})),(0,r.tZ)(f.zx,{text:"Create Domain Link",onClick:function(){return h("linking")},iconLeft:(0,r.tZ)(g.Z,{})})]}):"linking"===p?y=(0,r.tZ)(Z,{repl:x,existingDomain:v,onLink:i,onGoBack:function(){h("listing"),b(null)},onLinkStarted:s,onStateChanged:s}):"unlinking"===p&&null!==v&&(y=(0,r.tZ)(_,{replId:x.id,domain:v,onUnlink:function(){s(),n()},onGoBack:function(){h("listing"),b(null)}}))}else c&&"ReplRedirect"===c.repl.__typename?y=(0,r.BX)("div",{children:["This repl has moved to"," ",(0,r.tZ)("a",{href:c.repl.replUrl,children:c.repl.replUrl})]}):c&&"SubscriptionExpiredError"===c.repl.__typename&&(y=(0,r.tZ)("div",{children:"Subscription expired"}));return(0,r.BX)(f.G7,{css:[f.l0.colWithGap(24)],children:[(0,r.tZ)(f.h4,{level:1,variant:"headerDefault",children:"Domain Linking"}),y]})}var O=n(27464),C=n(54929),T=n(3204),P=n(25978),A=n(13494),I=n(88341),R=n(89957),D=n(70917),N=n(43552),U=n(14646),B=n(26535);var z={id:"DevToolsIntro",title:"Try our new devtools",content:function(){return(0,r.BX)(C.Z,{css:T.l0.m(2),children:["No need to reach for your browser\u2019s console. You can now:",(0,r.BX)(C.Z,{tag:"ul",css:[T.l0.px(16),T.l0.py(8),{listStyle:"disc",lineHeight:1.7}],children:[(0,r.tZ)("li",{children:"Explore the DOM tree"}),(0,r.tZ)("li",{children:"View console logs"}),(0,r.tZ)("li",{children:"Run JavaScript"}),(0,r.tZ)("li",{children:"Inspect localStorage"}),(0,r.tZ)("li",{children:"and more!"})]}),"\u2026directly from our brand new devtools. Press this button to toggle it."]})}};function L(e){var t=e.targetElement,n=function(e){var t=(0,d.PpL)({variables:{tours:e}}).data;return o.useMemo((function(){var n,r,o;return null===(o=null===t||void 0===t||null===(n=t.currentUser)||void 0===n||null===(r=n.toursSeen)||void 0===r?void 0:r.find((function(t){return t.id===e})))||void 0===o?void 0:o.seen}),[t,e])}("workspace-desktop-tour"),i=(0,N.Z)("workspace","devtools-intro"),a=i.shouldDisplay,c=i.register,l=i.dismiss;return o.useEffect((function(){c()}),[c]),!0===n&&t&&a?(0,r.BX)(r.HY,{children:[(0,r.tZ)(U.w,{targetElement:t}),(0,r.tZ)(B.k,{placement:"bottom-start",targetElement:t,activeStep:z,currentStepIndex:0,done:l,goto:function(){},totalSteps:1,disableAnimation:!0})]}):null}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=o.forwardRef((function(e,t){return(0,r.tZ)(O.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){F(e,t,n[t])}))}return e}({ref:t,className:e.className,css:[{color:"var(--foreground-dimmest)",":hover":{color:"var(--foreground-default)"}},e.css]},e))})),W=(0,D.F4)("from{transform:rotate(0deg);}to{transform:rotate(359deg);}");function H(e){var t=e.refreshing,n=e.devToolsBadge,s=e.url,u=e.onToggleDevtools,d=o.useRef(null),f=G(o.useState(!1),2),p=f[0],h=f[1];return(0,r.BX)(C.Z,{css:[T.l0.rowWithGap(8),T.l0.p(8),T.l0.align.center],children:[(0,r.tZ)(X,{alt:t?"Refreshing...":"Refresh",onClick:e.onRefresh,css:t&&{animation:"".concat(W," infinite 0.5s")},children:(0,r.tZ)(a.Z,{})}),(0,r.tZ)(R.ZP,{css:[T.l0.px(4),T.l0.py(2),T.l0.flex.growAndShrink(1),T.l0.fontSize(12)],value:s,type:"text",onFocus:function(t){e.trackUrlSelect(),t.currentTarget.select()},readOnly:!0}),(0,r.BX)(C.Z,{css:[T.l0.rowWithGap(4)],children:[e.canEditDomain&&(0,r.BX)(I.Z,{showArrow:!0,maxWidth:520,isOpen:p,onClickOutside:function(){return h(!1)},growToMaxWidth:!0,children:[(0,r.tZ)(X,{alt:"Custom domain",onClick:function(){return h(!p)},children:(0,r.tZ)(i.Z,{})}),(0,r.tZ)(j,{onLink:function(){return h(!1)},onUnlink:function(){return h(!1)},replId:e.replId})]}),u&&(0,r.tZ)(X,{alt:"Toggle developer tools",ref:d,onClick:u,css:{position:"relative"},suffix:!!n&&(0,r.tZ)("span",{css:{position:"absolute",color:T.TV.accentNegativeStrongest,borderRadius:T.TV.borderRadiusRound,padding:"".concat(T.TV.space2," ").concat(T.TV.space4),backgroundColor:T.TV.accentNegativeDimmer,top:-5,right:-3,fontSize:9},children:n}),children:(0,r.tZ)(A.Z,{})}),(0,r.tZ)("a",{href:s,css:{color:"inherit"},target:"_blank",children:(0,r.tZ)(X,{alt:"Open in a new tab",children:(0,r.tZ)(c.Z,{})})}),e.isKaboomDraw&&e.iframe&&(0,r.tZ)(P.r,{iframe:e.iframe}),e.closeCallback&&(0,r.tZ)(X,{alt:"Close web view",onClick:e.closeCallback,children:(0,r.tZ)(l.Z,{})})]}),u&&e.isVisible?(0,r.tZ)(L,{targetElement:d.current}):null]})}},43233:function(e,t,n){var r=n(35944),o=n(67294),i=n(92876),a=n(88768),c=n(5560),l=n(85264),s=n(54929),u=n(3204),d=n(12603),f=n(68312),p=n(25978),h=n(56834),m=n(6763),v=n(44660),g=n(84948),b=n(89431);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e,t){var n,x,w=e.fs,k=e.session,S=e.trackUrlSelect,Z=e.onClose,E=e.isVisible,_=e.className,j=(0,c.Z)(),O=(0,a.I5$)({variables:{id:j}}).data,C="Repl"===(null===O||void 0===O?void 0:O.repl.__typename)?O.repl:null,T=(0,o.useContext)(l.F),P=(0,o.useRef)(null),A=(0,o.useState)(!1),I=A[0],R=A[1],D=(0,o.useState)(0),N=D[0],U=D[1],B=(0,d.f6)(),z=(0,b.Z)("flag-allow-camera-iframe");(0,p.Y)(w,P);var L=null!==(x=null===O||void 0===O||null===(n=O.currentUser)||void 0===n?void 0:n.hasFlagDevtoolsWebview)&&void 0!==x&&x,M="html"===(null===C||void 0===C?void 0:C.lang.id)||"html_beta"===(null===C||void 0===C?void 0:C.lang.id);(0,o.useEffect)((function(){var e=function(e){var t;if((new URL(e.origin).hostname.endsWith(".id.repl.co")||new URL(e.origin).hostname.endsWith(".id.firewalledreplit.co"))&&"object"===typeof e.data&&(null===(t=e.data)||void 0===t?void 0:t.type))switch(e.data.type){case"event":var n=e.data,r=n.event,o=n.payload;return void("error"===r?i.Tb(o):(0,h.j)(r,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y(e,t,n[t])}))}return e}({},o,{replId:j,isHTML:M})));case"show-badge":return void U(e.data.count);case"ready":var a,c,l=e.data.wasShown;if(l||null==l&&M)null===(a=P.current)||void 0===a||null===(c=a.contentWindow)||void 0===c||c.postMessage({type:"toggleDevtools",source:"automatic"},"*");return;case"open-file":var s=(0,m.om)(e.data.fileName)||e.data.fileName;s&&k.updateDeeplink({path:s,line:e.data.lineNumber,col:e.data.columnNumber})}};if(L&&P.current)return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[L,j,M,P.current,k]);var F=function(){U(0),R(!0),w.flush().then((function(){P.current&&(P.current.src+="")})).finally((function(){R(!1)}))};(0,o.useImperativeHandle)(t,(function(){return{refresh:F}}));var G=(0,g.Z)(v.H.Output);return C?(0,r.BX)(s.Z,{className:_,css:[u.l0.backgroundColor.backgroundDefault,u.l0.height("100%"),u.l0.borderRadius(4),{overflow:"hidden"}],innerRef:M?G:function(){},children:[(0,r.tZ)(f.Z,{canEditDomain:C.currentUserPermissions.linkDomain,anon:C.devUrl.includes("--five-nine.repl.co"),url:C.config.domain?"https://".concat(C.config.domain):C.prodUrl,trackUrlSelect:function(){S&&S(C.devUrl)},replId:j,refreshing:I,onRefresh:F,isKaboomDraw:B,iframe:P,closeCallback:Z,isVisible:E,devToolsBadge:N,onToggleDevtools:L?function(){var e,t;U(0),null===(e=P.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage({type:"toggleDevtools",source:"manual"},"*")}:void 0}),T?(0,r.tZ)(l.Y,{}):(0,r.tZ)("iframe",{allow:z?"camera":void 0,title:"webview","data-cy":"ws-webview",sandbox:"allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals allow-downloads",ref:P,src:C.devUrl,css:[u.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:u.TV.white}]})]}):null};t.Z=(0,o.forwardRef)(x)},40079:function(e,t,n){n.d(t,{b:function(){return r}});var r="workspace-root"},37155:function(e,t,n){n.d(t,{O:function(){return m},u:function(){return v}});var r=n(34051),o=n.n(r),i=n(67294),a=n(57923),c=n(30617),l=n(83002),s=n(62996),u=n(11938),d=n(46846);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=function(e){var t=e.split("/");if(1===t.length)return t;for(var n=[],r=0;r<t.length;r++)n.push(t.slice(0,r+1).join("/"));return n},v=function(){var e=(0,c.Z)().fs,t=(0,l.P)(),n=(0,a.Z)(),r=h(i.useState(null),2),f=r[0],v=r[1];return i.useEffect((function(){var r=function(){var r,i=(r=o().mark((function r(){var i,a,c,l;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,e.listFiles();case 4:if(i=r.sent,n.current){r.next=7;break}return r.abrupt("return");case 7:if(!i.error&&i.files){r.next=10;break}return v([]),r.abrupt("return");case 10:return r.next=12,e.readFile(u.l);case 12:a=r.sent,c=i.files,l=s.uP.concat(s.nh),v(c.filter((function(e){return(a.error===d.Df.NotFound||!t.some((function(t){return m(e).some((function(e){return t.test(e)}))})))&&!l.includes(e)})));case 16:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){p(i,n,o,a,c,"next",e)}function c(e){p(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return i.apply(this,arguments)}}();r()}),[t,e,n]),f}},62904:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(67294),o=n(68944),i=n(62774),a=n(56834),c=n(77012),l=n(51968);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){var t=e.autoFocus,n=e.onShellKey,s=e.container,d=e.createXtermProps,f=u((0,c.Z)({createXtermProps:d}),2),p=f[0],h=f[1],m=(0,i.Z)({service:"shell",container:s});return r.useEffect((function(){if(m.channel&&p){var e=p.onKey((function(e){var t=e.key,r=e.domEvent;"\r"===t&&(0,a.j)(a.U3.SHELL_COMMAND_EVALED),n&&n(r)})),t=s.client(),r=p.onData((function(e){if(m.channel&&"open"===m.channel.status&&t.connectionState===o.em.CONNECTED){var n=(0,l.I)(e);m.channel.send({input:n})}}));m.channel.onCommand((function(e){e.hint?p.write("\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n")):e.output&&p.write(e.output)}));var i=function(){m.channel&&"open"===m.channel.status&&t.connectionState===o.em.CONNECTED&&m.channel.send({resizeTerm:p.getSize()})},c=p.onResize(i);return i(),function(){e.dispose(),r.dispose(),c.dispose()}}}),[m.channel,p,n,s]),r.useEffect((function(){t&&p&&p.focus()}),[t,p]),[p,h]}},50658:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(67289),o=n(56603),i=n(45421),a=new Map,c=function(e){var t=a.get(e);if(void 0!==t){var n=t.start,r=t.source,c=window.performance.now(),l=(0,i.V)(e);o.kg.time("time to load file",c-n,{from:r,fileViewerType:l}),a.delete(e)}};function l(e){return{trackTimeToLoadFileStart:function(t){return function(e,t){if((0,r.Mb)(e)){var n=window.performance.now();a.set(e,{start:n,source:t})}}(t,e)},trackTimeToLoadFileEnd:c}}},29987:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(32537),o=n(67294),i=n(63805),a=n(56834);function c(){return(0,o.useMemo)((function(){return(0,r.Z)((function(e){(0,a.j)(a.U3.WS_TYPED,{fileExt:e,isMobile:(0,i.isMobile)({tablet:!1})})}),6e4)}),[])}},60153:function(e,t,n){n.d(t,{Z:function(){return Pe}});var r=n(35944),o=n(67294),a=n(92876);var c=function(e,t,n,r){return function(o){return function(i){return function(a){i(a);var c=o.getState();if(c){var l=c.plugins,s=Object.keys(l),u=!0,d=!1,f=void 0;try{for(var p,h=function(i,l){var s=l.value;if(a.pud&&a.pud!==s)return"continue";var u=c.plugins[s];if(u.broken)return"continue";var d=u.type,f=n[d];if(f)try{var p=f(t,s,a);if(p){var h=e(s).dispatch(p);h&&"object"===typeof h&&"function"===typeof h.catch&&h.catch((function(e){o.dispatch({type:"PLUGIN_BROKE",pud:s,message:e.toString()}),r({error:e,pluginType:d,source:"receiver",pud:s})}))}}catch(m){o.dispatch({type:"PLUGIN_BROKE",pud:s,message:m.toString()}),r({error:m,pluginType:d,source:"receiver",pud:s})}},m=s[Symbol.iterator]();!(u=(p=m.next()).done);u=!0)h(0,p)}catch(v){d=!0,f=v}finally{try{u||null==m.return||m.return()}finally{if(d)throw f}}}}}}};function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function f(e){return function(e){if(Array.isArray(e))return e}(e)||u(e)||h(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return l(e)}(e)||u(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return e;var n=f(t),r=n[0],o=n.slice(1);return m(e[r],o)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(0===t.length)return n;var r=f(t),o=r[0],i=r.slice(1);return Array.isArray(e)?(e[o]=v(e[o],i,n),e):d({},e,s({},o,v(e[o],i,n)))};var g=function(e,t,n){var r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;for(var i in r)if(!o.pud||o.pud===i){var a=r[i];if(!a.broken){var c=t[a.type];if(c)if("PLUGIN_BROKE"!==o.type){var l=void 0;try{l=c(a.state,d({},o,{wid:e}))}catch(u){r=d({},r,s({},i,d({},a,{broken:!0,errorMessage:u.toString()}))),n({error:u,pluginType:a.type,source:"reducer",pud:i});continue}l!==a.state&&(r=d({},r,s({},i,d({},a,{state:l}))))}else r=d({},r,s({},i,d({},a,{broken:!0,errorMessage:o.message})))}}return r},o=function(e,t){switch(t.type){case"UPDATE_LAYOUT":return d({},e,v(e,t.path.concat(t.property||[]),t.to));case"SET_ACTIVE_TAB":return d({},e,v(e,t.path.concat("active"),t.tabIndex));case"SET_SPLIT_POSITION":return d({},e,v(e,t.path.concat("position"),t.position));case"NEW_TAB":if("tabs"!==m(e,t.path.concat("type"))){var r=new Error("trying to add tab to non tab component");return n({error:r,pluginType:"layout",pud:null,source:"reducer"}),e}var o=d({},e,v(e,t.path.concat("tabs"),p(m(e,t.path.concat("tabs"))).concat([t.layout])));if(!t.setActiveTab)return o;var i=m(o,t.path.concat("tabs")).findIndex((function(e){return e.pud===t.layout.pud}));return d({},o,v(o,t.path.concat("active"),i));case"CLOSE_TAB":var a=m(e,t.path.concat("tabs")),c=t.tabIndex||a.findIndex((function(e){return e.pud===t.tabPud}));if(!a[c]){var l=new Error("trying to remove nonexistent tab");return n({error:l,pluginType:"layout",pud:null,source:"reducer"}),e}var u=m(e,t.path.concat("active")),f=u===c?Math.max(u-1,0):u,h=d({},e,v(e,t.path.concat("active"),f));return d({},h,v(h,t.path.concat("tabs"),p(a.slice(0,c).concat(a.slice(c+1)))));case"LOAD_PLUGIN":return d({},e,{pluginTitles:d({},e.pluginTitles,s({},t.pluginPud,t.title))});default:return e}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{plugins:{},layout:{}},n=arguments.length>1?arguments[1]:void 0,i=r(e.plugins,n);i!==e.plugins&&(e=d({},e,{plugins:i}));var a=o(e.layout,n);switch(a!==e.layout&&(e=d({},e,{layout:a})),n.type){case"OPEN_FILE":return d({},e,{activeFile:n.path});case"MOVE_FILE":return e.activeFile===n.path?d({},e,{activeFile:n.to}):e;case"LOAD_PLUGIN":var c=t[n.pluginType];c||(c=function(e,t){});var l=n.initialState||{},u=c(void 0,{type:"@@INIT",initialState:l});return d({},e,{plugins:d({},e.plugins,s({},n.pluginPud,{type:n.pluginType,state:u,isClosable:n.isClosable,isDraggable:n.isDraggable}))});case"UNLOAD_PLUGIN":return d({},e,{plugins:Object.keys(e.plugins).reduce((function(t,r){return r!==n.pud?d({},t,s({},r,e.plugins[r])):t}),{})});default:return e}};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WORKSPACE":return t.state;case"CREATE_WORKSPACE":return{layout:t.layout,plugins:r(void 0,t),activeFile:t.activeFile};default:return i(e,t)}}},b=n(78135),y=n(85486),x=function(e){var t={strokeMiterlimit:10,fill:"none",stroke:e.color,strokeWidth:1};return(0,r.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:(0,r.BX)("g",{children:[(0,r.tZ)("line",{style:t,x1:"3",y1:"3",x2:"13",y2:"13"}),(0,r.tZ)("line",{style:t,x1:"13",y1:"3",x2:"3",y2:"13"})]})})};function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}var S=function(e){var t=e.onClick,n=e.onMouseDown,o=e.Icon,i=e.color,a=e.style;return(0,r.tZ)("button",{onClick:t,onMouseDown:n,style:k({color:"var(--foreground-default)",backgroundColor:"transparent",border:"none",cursor:"pointer",margin:"0",outline:"none",padding:"0"},a),children:(0,r.tZ)(o,{color:i})})},Z=function(e){var t=e.color;return(0,r.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8.467 10.583",children:(0,r.tZ)("path",{d:"M4.233.684L2.988 1.93l.374.374.607-.607V3.97H1.697l.607-.607-.374-.374L.684 4.233 1.93 5.48l.374-.374-.607-.607H3.97V6.77l-.607-.607-.374.374 1.245 1.245L5.48 6.537l-.374-.374-.607.607V4.498H6.77l-.607.607.374.374 1.245-1.246-1.245-1.245-.374.374.607.607H4.498V1.697l.607.607.374-.374z",fill:t,"white-space":"normal",overflow:"visible"})})},E={height:"12px",width:"12px",margin:"0 4px"},_=function(e){var t=e.isTabbed,n=e.isClosable,i=e.isDraggable,a=e.HeaderPlugin,c=e.onClose,l=e.onDrag;return(0,r.BX)(o.Fragment,{children:[a,(0,r.BX)("div",{style:{alignItems:"center",display:"flex",height:"100%",marginLeft:"auto"},children:[i&&!t&&(0,r.tZ)(S,{Icon:Z,onMouseDown:l,style:E}),n&&!t&&(0,r.tZ)(S,{Icon:x,onClick:c,style:E})]})]})},j=n(56834);function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e){if(Array.isArray(e))return e}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function U(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function B(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){R(e,t,n[t])}))}return e}function L(e,t){return!t||"object"!==W(t)&&"function"!==typeof t?T(e):t}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e,t){return C(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||H(e,t)||B()}function G(e){return C(e)||U(e)||H(e,i)||B()}function X(e){return function(e){if(Array.isArray(e))return O(e)}(e)||U(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var W=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function H(e,t){if(e){if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function V(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}var $=1e5,q=32,K={width:"100%",height:"100%"},Y=function(e){return e.getBoundingClientRect()},Q=function(e,t){var n=t.px,r=t.pc;return{px:e.px+(n||0),pc:e.pc+(r||0)}},J=function(e,t){return{px:e.px*t,pc:e.pc*t}},ee={px:0,pc:0},te=function(e){return{px:e,pc:0}},ne=function(e){return{px:0,pc:e}},re=function(e){var t=e.px,n=e.pc;return 0===t&&0===n},oe=function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{x:ee,y:ee,w:ne(100),h:ne(100),p:[]};if("tabs"===r.type){var a=r.active||0;n.push(z({},i,{h:te(q),tabs:r.tabs.map((function(e){return e.pud||e.type})),active:a}));for(var c=0;c<r.tabs.length;c++)oe(e,t,n,z({},r.tabs[c]),o,z({},i,{p:X(i.p).concat(["tabs",c.toString()]),y:Q(i.y,te(q)),h:c===a?Q(i.h,te(-32)):ee,w:c===a?i.w:ee}))}if("split"===r.type){var l=void 0===r.position?50:r.position,s=!1;if("undefined"!==typeof r.fixed?s=r.fixed:("undefined"!==typeof r.leftSize||"undefined"!==typeof r.rightSize)&&(s=!0),"undefined"!==typeof r.leftSize&&"undefined"!==typeof r.rightSize)throw new Error("Cannot have both leftSize and rightSize specified");var u=null;if(0===l?u="left":100===l&&(u="right"),r.stacked){var d=!re(i.h)&&!s,f=J(i.h,l/100);r.rightSize?f=Q(i.h,te(-r.rightSize)):r.leftSize?f=te(r.leftSize):"left"===u||re(i.h)?f=ee:"right"===u&&(f=Q(f,te(-8))),oe(e,t,n,r.left,o,z({},i,{p:X(i.p).concat(["left"]),h:f}));var p=Q(i.y,J(i.h,l/100));r.rightSize?p=Q(i.y,f):r.leftSize?p=Q(i.y,te(r.leftSize)):"left"===u?p=i.y:"right"===u&&d&&(p=Q(p,te(-8)));var h=J(i.h,(100-l)/100);r.rightSize?h=te(r.rightSize):r.leftSize?h=Q(i.h,te(-r.leftSize)):("right"===u||re(i.h))&&(h=ee),oe(e,t,n,r.right,o,z({},i,{p:X(i.p).concat(["right"]),y:d?Q(p,te(8)):p,h:d?Q(h,te(-8)):h})),d&&t.push(z({},i,{y:p,snapped:u,h:te(8),stacked:r.stacked}))}else{var m=!re(i.w)&&!s,v=J(i.w,l/100);r.rightSize?v=Q(i.w,te(-r.rightSize)):r.leftSize?v=te(r.leftSize):"left"===u||re(i.w)?v=ee:"right"===u&&(v=Q(v,te(-8))),oe(e,t,n,r.left,o,z({},i,{p:X(i.p).concat(["left"]),w:v}));var g=Q(i.x,J(i.w,l/100));"left"===u?g=i.x:r.rightSize?g=Q(i.x,v):r.leftSize?g=Q(i.x,te(r.leftSize)):"right"===u&&(g=Q(g,te(-8)));var b=J(i.w,(100-l)/100);r.rightSize?b=te(r.rightSize):r.leftSize?b=Q(i.w,te(-r.leftSize)):("right"===u||re(i.w))&&(b=ee),oe(e,t,n,r.right,o,z({},i,{p:X(i.p).concat(["right"]),x:m?Q(g,te(8)):g,w:m?Q(b,te(-8)):b})),m&&t.push(z({},i,{x:g,snapped:u,w:te(8),stacked:r.stacked}))}}if("pane"===r.type){var x=r.header,w=r.pud,k=o[w]||{isDraggable:!1,isClosable:!1},S=y.JU(i.p),Z=x||!S&&(k.isClosable||k.isDraggable),E=Z?x&&x.height||32:0;e.push({header:Z&&{pud:x&&x.pud,p:z({},i,{h:te(E)})},pud:w,p:z({},i,{y:Q(i.y,te(E)),h:Q(i.h,te(-E))}),isDraggable:k.isDraggable,isClosable:k.isClosable})}},ie=function(e){var t,n,o,i=e.stacked,a=e.onMouseDown,c=e.snapped,l=e.style,s=F(fe(),2),u=s[0],d=s[1],f=u?"var(--outline-default)":"var(--outline-dimmest)";c?(n="left"===c?i?"translate(0px, -2px) rotate(135deg)":"translate(-2px, 0px) rotate(45deg)":i?"translate(0px, 2px) rotate(-45deg)":"translate(2px, 0px) rotate(-135deg)",t={width:6,height:6,borderRight:"solid 1px ".concat(f),borderTop:"solid 1px ".concat(f),transition:"0.1s background-color",transform:n}):(R(o={backgroundColor:f,borderRadius:"var(--border-radius-4)"},i?"height":"width",2),R(o,i?"width":"height",25),R(o,"transition","0.1s background-color"),t=o);return(0,r.tZ)("div",z({},d,{onMouseDown:a,onTouchStart:a,style:z({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",flex:"1 0 auto",overflow:"hidden",borderRadius:"var(--border-radius-4)",background:"var(--background-root)",cursor:i?"row-resize":"col-resize",zIndex:1},l),children:(0,r.tZ)("div",{style:t})}))},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(0===t.length)return n;var r=G(t),o=r[0],i=r.slice(1);return Array.isArray(e)?(e[o]=ae(e[o],i,n),e):z({},e,R({},o,ae(e[o],i,n)))},ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return e;var n=G(t),r=n[0],o=n.slice(1);return ce(e[r],o)},le=function(e){N(n,e);var t=V(n);function n(){var e;return P(this,n),R(T(e=t.apply(this,arguments)),"state",{protectEvents:!1,newLayout:null,debug:!1,dragging:null,resizing:null,layout:e.props.store.getState().layout,plugins:e.props.store.getState().plugins}),R(T(e),"getPluginComponent",(function(t,n){var o=e.state.plugins[n],i=e.props,a=i.pluginComponents,c=i.wid,l=null;return l=o?o.broken?(0,r.tZ)(ue,{handleError:function(t){return e.handleError({error:t,pluginType:o.type,source:"component",pud:n})},message:o.errorMessage||"Plugin broken with no error :/"}):(l=a[o.type])?(0,r.tZ)(l,{wid:c,pud:n,dimensions:e.getPluginDims(n,{w:t.w,h:t.h}),style:K}):(0,r.tZ)(ue,{handleError:function(t){return e.handleError({error:t,pluginType:o.type,source:"component",pud:n})},message:"No plugin component by the name ".concat(n)}):(0,r.tZ)(ue,{handleError:function(t){return e.handleError({error:t,pluginType:"none",source:"component",pud:n})},message:"No known plugin by the name ".concat(n)})})),R(T(e),"onResizerDown",(function(t,n,r){var o=t.target;e.setState({protectEvents:!0,resizing:{stacked:r}}),t.preventDefault(),t.stopPropagation();var i=0,a=function(t,n){if("pane"===t.type){var o=e.nodes[n.join(".")].ref;if(!o)return;i+=r?Y(o).height:Y(o).width}else if("split"===t.type)t.stacked===r?(a(t.left,X(n).concat(["left"])),a(t.right,X(n).concat(["right"]))):a(t.left,X(n).concat(["left"]));else if("tabs"===t.type){var c=t.active||0;a(t.tabs[c],X(n).concat(["tabs",c.toString()]))}};a(ce(e.state.layout,["tiling"].concat(X(n))),n),i+=8;var c=r?Y(o).top:Y(o).left,l=ce(e.state.layout,["tiling"].concat(X(n),["position"]));"number"!==typeof l&&(l=50);var s=function(t){t.preventDefault(),t.stopPropagation();var o,a=t.touches?t.touches[0]:t,s=(r?a.pageY:a.pageX)-c,u=i*(l/100)+s;o=u>i-32?100:u<32?0:u/i*100,e.setState({newLayout:ae(e.state.layout,["tiling"].concat(X(n),["position"]),o)})},u=function(){document.removeEventListener("touchmove",s),document.removeEventListener("mousemove",s),document.removeEventListener("touchend",u),document.removeEventListener("mouseup",u),e.setState({protectEvents:!1,resizing:null}),null!==e.state.newLayout&&(e.props.store.dispatch({type:"SET_SPLIT_POSITION",position:ce(e.state.newLayout,["tiling"].concat(X(n),["position"])),path:["tiling"].concat(X(n))}),e.setState({newLayout:null}))};document.addEventListener("touchmove",s),document.addEventListener("mousemove",s),document.addEventListener("touchend",u),document.addEventListener("mouseup",u)})),R(T(e),"onDrag",(function(t,n){t.stopPropagation(),t.preventDefault();var r=t.pageX,o=t.pageY,i=null,a=[];for(var c in e.nodes){var l=e.nodes[c];if(l.ref){var s=Y(l.ref),u=s.top,d=s.left,f=s.width,p=s.height,h={p:l.p,x:d,y:u,w:f,h:p,pud:l.pud};l.pud===n?i=h:a.push(h)}}e.setState({protectEvents:!0});var m=function(t){t.preventDefault(),t.stopPropagation();var c=t.pageX,l=t.pageY,s={target:null,side:"bottom",left:c,top:l},u=!0,d=!1,f=void 0;try{for(var p,h=a[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var m=p.value;if((e.state.plugins[m.pud]||{}).isDraggable&&(c>m.x&&c<m.x+m.w&&l>m.y&&l<m.y+m.h)){var v=c-m.x,g=m.x+m.w-c,b=l-m.y,y=m.y+m.h-l,x=Math.min(v,g,b,y);s.target=m.pud,x===v?s.side="left":x===g?s.side="right":x===b&&(s.side="top");break}}}catch(S){d=!0,f=S}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}var w=c-r,k=l-o;s.left=i.x+w,s.top=i.y+k,e.setState({dragging:z({pud:n,width:i.w,height:i.h},s)})},v=function(){e.state.dragging&&e.state.dragging.target&&e.props.store.dispatch(se({pud:n,side:e.state.dragging.side,target:e.state.dragging.target})),e.setState({protectEvents:!1,dragging:null}),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",v)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",v)})),R(T(e),"nodes",{}),R(T(e),"dimMap",{}),R(T(e),"getPluginDims",(function(t,n){var r=e.dimMap[t];return r&&r.h.pc===n.h.pc&&r.h.px===n.h.px&&r.w.pc===n.h.pc&&r.w.px===n.w.px?r:(e.dimMap[t]=n,n)})),e}return I(n,[{key:"cancelContextMenuIntercept",value:function(e){e.shiftKey&&e.altKey&&e.preventDefault()}},{key:"componentDidMount",value:function(){this.isWeMounted=!0,this.subscribe(),document.addEventListener("contextmenu",this.cancelContextMenuIntercept)}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe(),document.removeEventListener("contextmenu",this.cancelContextMenuIntercept),this.isWeMounted=!1}},{key:"subscribe",value:function(){var e=this,t=this.props.store;this.unsubscribe=t.subscribe((function(){var n=t.getState(),r=n.layout,o=n.plugins;e.isWeMounted&&e.setState((function(e){for(var t in e.plugins){if(!o[t])return{layout:r,plugins:o};if(o[t].broken!==e.plugins[t].broken)return{layout:r,plugins:o}}return e.layout===r?null:{layout:r,plugins:o}}))}))}},{key:"shouldComponentUpdate",value:function(e,t){if(this.state!==t)return!0;for(var n in this.props)if(this.props[n]!==e[n])return!0;return!1}},{key:"onMaybeDrag",value:function(e,t){var n=this.state.plugins[t]&&this.state.plugins[t].isDraggable;(e.altKey||e.shiftKey)&&n&&this.onDrag(e,t)}},{key:"closeTabbedPlugin",value:function(e){var t=e.path,n=e.tabIndex,r=e.activeTabIndex;return function(e,o){var i=o().layout,a=y.QK(i,t).tabs,c=a[n].pud;if(e({type:"CLOSE_TAB",path:t,tabIndex:n}),a.length-1===0)e(z({type:"UPDATE_LAYOUT"},y.Od({layout:i,nodePath:t})));else if(n<=r){e({type:"SET_ACTIVE_TAB",tabIndex:Math.max(r-1,0),path:t})}e({type:"PLUGIN_CLOSED",closedPud:c})}}},{key:"closePlugin",value:function(e){var t=e.pud;return function(e,n){var r=n().layout;e(z({type:"UPDATE_LAYOUT"},y.Od({layout:r,pud:t}))),e({type:"PLUGIN_CLOSED",closedPud:t})}}},{key:"getPaneStyles",value:function(e,t){var n=re(t.w)||re(t.h),r=t.p.includes("tabs");return e?{opacity:.75,overflow:"hidden",visibility:n?"hidden":void 0,height:this.state.dragging.height,position:"absolute",left:0,top:0,transform:"translate(".concat(this.state.dragging.left,"px, ").concat(this.state.dragging.top-(t.h.px>0?t.h.px:0),"px)"),width:this.state.dragging.width,zIndex:99999,transition:"opacity 0.2s, max-width 0.2s, max-height 0.2s",maxWidth:"100vw",maxHeight:"100vh"}:{position:"absolute",visibility:n&&!r?"hidden":void 0,display:n&&r?"none":void 0,height:"calc(".concat(t.h.pc,"% + ").concat(t.h.px,"px)"),width:"calc(".concat(t.w.pc,"% + ").concat(t.w.px,"px)"),left:"calc(".concat(t.x.pc,"% + ").concat(t.x.px,"px)"),top:"calc(".concat(t.y.pc,"% + ").concat(t.y.px,"px)"),opacity:"1",transition:"opacity 0.2s, max-width 0.2s, max-height 0.2s",maxWidth:"100vw",maxHeight:"100vh"}}},{key:"render",value:function(){var e=this,t=this.state.newLayout||this.state.layout,n=t.tiling,i=t.floating,a=this.state.plugins,c=[],l=[],s=[];oe(c,l,s,n,a);var u="default";return this.state.resizing?u=this.state.resizing.stacked?"row-resize":"col-resize":this.state.dragging&&(u="grabbing"),(0,r.BX)("div",{style:{height:"100%",width:"100%",position:"absolute"},children:[c.map((function(t){var n=t.pud,i=t.p,a=t.header,c=t.isClosable,l=t.isDraggable,s=e,u=e.state.plugins[n]||{},d=e.state.plugins[a&&a.pud]||{},f=a&&a.p.h.px,p=a&&a.pud&&(0,r.tZ)(ue,{handleError:function(e){return s.props.handleError({error:e,pluginType:d.type,source:"component",pud:n})},message:d.broken?d.errorMessage:void 0,children:(0,r.tZ)(b.zt,{store:e.props.classicStoreFor(n),children:e.getPluginComponent(a.p,a.pud)})}),h=e.state.dragging&&e.state.dragging.pud===n;return(0,r.BX)(o.Fragment,{children:[a&&(0,r.tZ)("div",{className:"WHO AM I??",style:z({},e.getPaneStyles(h,a.p),{backgroundColor:"var(--background-default)",color:"var(--foreground-default)",height:"".concat(f,"px"),alignItems:"center",display:"flex",justifyContent:"spaceBetween"}),children:(0,r.tZ)(_,{HeaderPlugin:p,isClosable:c,isDraggable:l,isTabbed:y.JU(i.p),onClose:function(){s.props.store.dispatch(s.closePlugin({pud:n}))},onDrag:function(e){return s.onDrag(e,n)}})}),(0,r.BX)("div",{ref:function(e){return s.nodes[i.p.join(".")]={ref:e,p:i,pud:n}},style:z({},e.getPaneStyles(h,i),{borderRadius:"var(--border-radius-4)",boxShadow:h?"var(--shadow-2)":"none"}),onMouseDown:function(e){return s.onMaybeDrag(e,n)},children:[e.state.debug?(0,r.BX)("div",{style:{backgroundColor:"hsl(".concat(n.split("").map((function(e){return e.charCodeAt(0)})).reduce((function(e,t){return e+t})),", 50%, 50%)"),width:"100%",height:"100%",border:"inset 5px"},children:[n,(0,r.BX)("pre",{children:["x: ","calc(".concat(i.x.pc,"% + ").concat(i.x.px,"px)"),(0,r.tZ)("br",{}),"y: ","calc(".concat(i.y.pc,"% + ").concat(i.y.px,"px)"),(0,r.tZ)("br",{}),"w: ","calc(".concat(i.w.pc,"% + ").concat(i.w.px,"px)"),(0,r.tZ)("br",{}),"h: ","calc(".concat(i.h.pc,"% + ").concat(i.h.px,"px)"),(0,r.tZ)("br",{}),"p: ",i.p.join(" ")]})]}):(0,r.tZ)(ue,{handleError:function(e){return s.props.handleError({error:e,pluginType:u.type,source:"component",pud:n})},message:u.broken?u.errorMessage:void 0,children:(0,r.tZ)(b.zt,{store:e.props.classicStoreFor(n),children:e.getPluginComponent(i,n)})}),e.state.dragging&&e.state.dragging.target===n?(0,r.tZ)("div",{style:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"rgba(127, 127, 127, 0.6)",transition:"transform 0.2s",transformOrigin:"top left",transform:"translate(".concat("right"===e.state.dragging.side?"50%":0,", ").concat("bottom"===e.state.dragging.side?"50%":0,") ").concat("left"===e.state.dragging.side||"right"===e.state.dragging.side?"scaleX(.5)":"scaleY(.5)")}}):null]})]},n)})),this.state.protectEvents&&(0,r.tZ)("div",{style:{zIndex:$,position:"absolute",top:0,bottom:0,left:0,right:0,cursor:u}}),l.map((function(t,n){var o=t.x,i=t.y,a=t.w,c=t.h,l=t.p,s=t.snapped,u=t.stacked;return(0,r.tZ)(ie,{onMouseDown:function(t){return e.onResizerDown(t,l,u)},snapped:s,stacked:u,style:{left:"calc(".concat(o.pc,"% + ").concat(o.px,"px)"),top:"calc(".concat(i.pc,"% + ").concat(i.px,"px)"),width:"calc(".concat(a.pc,"% + ").concat(a.px,"px)"),height:"calc(".concat(c.pc,"% + ").concat(c.px,"px)")}},n)})),s.map((function(t,n){var o=t.x,i=t.y,a=t.w,c=t.h,l=t.p,s=t.tabs,u=t.active;return(0,r.tZ)(de,{tabsMetadata:s.map((function(t){if("split"===t){var r=ce(e.state.layout,["tiling"].concat(X(l),["tabs"]))[n];t=r.left.pud||r.right.pud}return{title:e.state.layout.pluginTitles[t]||"untitled",isClosable:e.state.plugins[t]&&e.state.plugins[t].isClosable}})),active:u,setActive:function(t){return e.props.store.dispatch((function(e,n){var r=n(),o=["tiling"].concat(X(l));"shell"===ce(r.layout,o.concat("tabs"))[t].pud&&(0,j.j)(j.U3.SHELL_OPENED),e({type:"SET_ACTIVE_TAB",tabIndex:t,path:o})}))},close:function(t){var n=["tiling"].concat(X(l));e.props.store.dispatch(e.closeTabbedPlugin({path:n,tabIndex:t,activeTabIndex:u}))},style:{position:"absolute",left:"calc(".concat(o.pc,"% + ").concat(o.px,"px)"),top:"calc(".concat(i.pc,"% + ").concat(i.px,"px)"),width:"calc(".concat(a.pc,"% + ").concat(a.px,"px)"),height:"calc(".concat(c.pc,"% + ").concat(c.px,"px)")}},n)})),i.map((function(t){var n=e;if(!e.state.plugins[t]){var o=e;return(0,r.tZ)(ue,{handleError:function(e){return o.props.handleError({error:e,pluginType:o.state.plugins[t].type,source:"component",pud:t})},message:"No plugin by the name ".concat(t)},t)}var i=e.props.pluginComponents[e.state.plugins[t].type];if(!i){var a=e;return(0,r.tZ)(ue,{handleError:function(e){return a.props.handleError({error:e,pluginType:a.state.plugins[t].type,source:"component",pud:t})},message:"No component found for plugin by the name ".concat(t)},t)}return(0,r.tZ)(ue,{handleError:function(e){return n.props.handleError({error:e,pluginType:n.state.plugins[t].type,source:"component",pud:t})},children:(0,r.tZ)(b.zt,{store:e.props.classicStoreFor(t),children:(0,r.tZ)(i,{wid:e.props.wid,pud:t},t)})},t)}))]})}}]),n}(o.Component);function se(e){var t=e.pud,n=e.side,r=e.target;return function(e,o){var i=o().layout,a=y.Bp(i,t),c=y.QK(i,a);e(z({type:"UPDATE_LAYOUT"},y.Od({layout:i,pud:t}))),i=o().layout;var l=y.Bp(i,r);if(l){y.JU(l)&&(l=y.Il(l));var s="leftOf";"right"===n?s="rightOf":"top"===n?s="above":"bottom"===n&&(s="below"),e(z({type:"UPDATE_LAYOUT"},y.$T(i,c.pud,s,l,{position:50})))}}}var ue=function(e){N(n,e);var t=V(n);function n(){var e;return P(this,n),R(T(e=t.apply(this,arguments)),"state",{hasError:!!e.props.message,error:new Error(e.props.message)}),e}return I(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t}),this.props.handleError(e)}},{key:"render",value:function(){return this.state.hasError?(0,r.BX)("div",{style:{background:"red",color:"white",width:"100%",height:"100%",padding:"0",margin:"0",overflow:"hidden"},children:[(0,r.tZ)("h1",{children:"This Plugin Crashed!"}),this.state.info&&(0,r.tZ)("pre",{children:this.state.info.componentStack||JSON.stringify(this.state.info)}),this.state.error&&(0,r.tZ)("pre",{children:this.state.error.toString()})]}):this.props.children||null}}]),n}(o.Component);function de(e){var t=e.active,n=void 0===t?0:t,o=e.setActive,i=void 0===o?function(){}:o,a=e.close,c=void 0===a?function(){}:a,l=e.tabsMetadata,s=e.style;return(0,r.tZ)("div",{style:s,children:(0,r.tZ)("div",{style:{height:q,fontFamily:"'IBM Plex Sans', sansSerif",backgroundColor:"var(--background-root)",display:"flex",alignItems:"flex-end",position:"relative",zIndex:2},children:l.map((function(e,t){return(0,r.tZ)(he,{title:e.title,isClosable:e.isClosable,onClose:function(){return c(t)},onClick:function(){return i(t)},isActive:t===n},t)}))})})}function fe(){var e=F(o.useState(!1),2),t=e[0],n=e[1];return[t,{onMouseEnter:function(){n(!0)},onMouseLeave:function(){n(!1)}}]}function pe(e){return z({height:"100%",boxSizing:"border-box",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",padding:"var(--space-8)",backgroundColor:"var(--background-root)",color:"var(--foreground-dimmer)",fontSize:"var(--font-size-default)",fontFamily:"var(--font-family-default)",borderTopRightRadius:"var(--border-radius-4)",borderTopLeftRadius:"var(--border-radius-4)",cursor:"pointer",transition:"0.2s background-color"},e.isHovering?{backgroundColor:"var(--background-root)",color:"var(--foreground-default)"}:{},e.isActive?{backgroundColor:"var(--background-default)",color:"var(--foreground-default)"}:{})}function he(e){var t,n=e.isActive,o=e.onClick,i=e.title,a=e.isClosable,c=e.onClose,l=F(fe(),2),s=l[0],u=l[1];return(0,r.tZ)("div",z({},u,{style:pe({isHovering:s,isActive:n}),onClick:o,children:(0,r.BX)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[(t=i,t?t[0].toUpperCase()+t.slice(1):t),a&&(0,r.tZ)(S,{onClick:function(e){e.stopPropagation(),c()},Icon:x,style:{height:"8px",width:"8px",padding:0,marginLeft:"7px"}})]})}))}var me=le,ve=n(85106),ge=n(56603),be=n(25108);function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t&&xe(e.prototype,t),n&&xe(e,n),e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ke(e,t,n[t])}))}return e}function Ee(e,t){return!t||"object"!==je(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Se(e);if(t){var o=Se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ee(this,n)}}var Ce=function(e){return function(t){return function(n){return"function"===typeof n?n(e.dispatch,e.getState):t(n)}}},Te=["activeFile"],Pe=function(){function e(){var t=this;ye(this,e),ke(this,"marshal",(function(){var e=t.store.getState();return JSON.stringify(e)})),ke(this,"unmarshal",(function(e){var n=JSON.parse(e);t.store.dispatch({type:"SET_WORKSPACE",state:n})})),ke(this,"bootstrap",(function(e){t.store.dispatch(function(e){var t=e.wid,n=e.config;return function(e){for(var r in e({wid:t,type:"CREATE_WORKSPACE",language:n.language,layout:n.layout,activeFile:n.activeFile}),n.plugins)e(Ie({wid:t,pluginPud:r,pluginType:n.plugins[r].type,title:n.plugins[r].title,initialState:n.plugins[r].state,isClosable:n.plugins[r].isClosable,isDraggable:n.plugins[r].isDraggable}))}}({config:e}))})),ke(this,"register",(function(e,n){t.reducers[e]=n.reducer,t.receivers[e]=n.receiver||n.receiver,t.components[e]=n.Component})),ke(this,"yikesInjectStore",(function(e){t.yikesExtraStore=e})),ke(this,"injectServices",(function(e){t.services=e})),ke(this,"handleError",(function(e){var n=e.error,r=e.pluginType,o=e.source,i=e.pud;if(0===t.errorHandlers.length)return be.error("Plugin with type ",r," errored in ",o," error is: "),void be.error(n);t.errorHandlers.forEach((function(e){return e({error:n,pluginType:r,source:o,pud:i})}))})),ke(this,"registerErrorHandler",(function(e){var n=t;return t.errorHandlers.push(e),function(){n.errorHandlers=n.errorHandlers.filter((function(t){return t!==e}))}})),window.performance.clearMarks("create-workspace"),window.performance.mark("create-workspace"),this.wid=""+Math.random(),this.reducers={},this.receivers={},this.components={},this.pluginStores={},this.yikesExtraStore={getState:function(){return{}},subscribe:function(){return function(){}},dispatch:function(){}},this.errorHandlers=[];var n=[];this.govalConnectionStarted=null,this.classicStoreFor=function(e){var o=t,i={};if(t.pluginStores[e])return t.pluginStores[e];var c=t,u={getState:function(){return{get user(){return i.user=!0,c.yikesExtraStore.getState().user},get banners(){return i.banners=!0,c.yikesExtraStore.getState().banners},get replEnvironment(){return i.replEnvironment=!0,c.yikesExtraStore.getState().replEnvironment},get repls(){throw new Error("Please use repl shared reducer")},get replsByUrl(){throw new Error("Please use repl shared reducer")},get replsByUser(){throw new Error("Please use repl shared reducer")},get files(){throw new Error("Please use files shared reducer")},get messages(){return i.messages=!0,c.yikesExtraStore.getState().messages},get plans(){return i.plans=!0,c.yikesExtraStore.getState().plans},workspace:ke({},o.wid,o.store.getState()),get services(){return c.services}}},subscribe:function(t){var n=o,r={},a={},c=Te.reduce((function(e,t){return e[t]=n.store.getState()[t],e}),{});return o.store.subscribe((function(){var o=n.store.getState().plugins[e];if(o!==r)return r=o,void t();var l=!1,s=n.yikesExtraStore.getState();for(var u in i)s[u]!==a[u]&&(a[u]=s[u],l=!0);var d=n.store.getState();for(var f in c)d[f]!==c[f]&&(c[f]=d[f],l=!0);l&&t()}))},dispatch:function(t){if(t.type){var i={};t.path&&(i={path:t.path}),a.n_({category:"redux",message:"workspace action",data:Ze({type:t?t.type:null},i)})}if(t.wid||"function"===typeof t){var c=Ce(o.classicStoreFor(e))(r(s)(l))(t),u=!0,d=!1,f=void 0;try{for(var p,h=n[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){p.value.cb()}}catch(m){d=!0,f=m}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}return c}return o.yikesExtraStore.dispatch(t)}};return t.pluginStores[e]=u,u};var r=c(this.classicStoreFor,this.wid,this.receivers,this.handleError),o=g(this.wid,this.reducers,this.handleError),i=o(void 0,{type:"@@INIT"}),l=function(e){i=o(i,e)},s={getState:function(){return i},subscribe:function(e){var t=function(){n=n.filter((function(e){return e.unsub!==t}))};return n.push({cb:e,unsub:t}),t},dispatch:function(e){if(e.type){var t={};e.path&&(t={path:e.path}),a.n_({category:"redux",message:"workspace action",data:Ze({type:e?e.type:null},t)})}var o=Ce(s)(r(s)(l))(e),i=!0,c=!1,u=void 0;try{for(var d,f=n[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){d.value.cb()}}catch(p){c=!0,u=p}finally{try{i||null==f.return||f.return()}finally{if(c)throw u}}return o}};window.store=s,this.store=s}return we(e,[{key:"component",value:function(){var e=this;return function(){return(0,r.tZ)(ve.Z.Provider,{value:e.wid,children:(0,r.tZ)(Ae,{store:e.store,classicStoreFor:e.classicStoreFor,wid:e.wid,pluginComponents:e.components,handleError:e.handleError,govalConnectionStarted:e.govalConnectionStarted})})}}}]),e}(),Ae=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(n,e);var t=Oe(n);function n(){return ye(this,n),t.apply(this,arguments)}return we(n,[{key:"componentDidMount",value:function(){var e=this.props.govalConnectionStarted;if(e){var t=window.performance.now()-e;ge.kg.info(j.U3.GOVAL_TIME_TO_CONNECT,{time:t})}this.props.store.dispatch({type:"WORKSPACE_MOUNTED"})}},{key:"componentWillUnmount",value:function(){this.props.store.dispatch({type:"WORKSPACE_WILL_UNMOUNT"})}},{key:"render",value:function(){return(0,r.tZ)("div",{style:{height:"100%",position:"relative",display:"flex"},children:(0,r.tZ)(me,{wid:this.props.wid,store:this.props.store,classicStoreFor:this.props.classicStoreFor,pluginComponents:this.props.pluginComponents,handleError:this.props.handleError})})}}]),n}(o.Component);function Ie(e){var t=e.wid,n=e.pluginPud,r=e.pluginType,o=e.title,i=e.initialState,a=e.isClosable,c=void 0!==a&&a,l=e.isDraggable;return{type:"LOAD_PLUGIN",wid:t,pluginPud:n,pluginType:r,title:o,initialState:i,isClosable:c,isDraggable:void 0!==l&&l}}},77998:function(e,t,n){n.d(t,{CU:function(){return W},D6:function(){return k},Di:function(){return F},GE:function(){return H},Hl:function(){return U},JE:function(){return M},LO:function(){return I},M7:function(){return R},N2:function(){return B},Pz:function(){return q},TE:function(){return O},Ud:function(){return P},VF:function(){return E},Z$:function(){return Q},bb:function(){return V},cF:function(){return T},cM:function(){return N},eg:function(){return Y},hU:function(){return K},he:function(){return _},i7:function(){return Z},jW:function(){return A},k6:function(){return S},kT:function(){return C},lR:function(){return X},rO:function(){return D},sh:function(){return z},th:function(){return L},xY:function(){return G},y6:function(){return $},zq:function(){return j}});var r=n(80357),o=n(91861);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){if(Array.isArray(e))return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}function d(e,t){return c(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||p(e,t)||s()}function f(e){return c(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e,i)||s()}function p(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}var h='[ "git remote get-url origin" ]',m="git symbolic-ref HEAD --short",v="git log -0 2>/dev/null && ".concat(m," || echo 'HEAD'");function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["bash","-c",t.join("&&")]}function b(e){return"if ! (( $(busybox ps -o comm | grep git) )) ; then rm -rf .git/index.lock; fi ; ".concat(e)}function y(e){var t=e.remote,n=void 0===t?"":t,r=e.remoteToken;if(!r)return n;var o=d(n.match(/(https:\/\/)(.*)/)||["","",""],3),i=o[1],a=o[2];return"".concat(i).concat(r||"",":x-oauth-basic@").concat(a)}function x(e){return null!==new RegExp(/(^|\n)fatal: Authentication failed/g).exec(e)||null!==new RegExp(/(^|\n)fatal: unable to access/g).exec(e)||null!==new RegExp(/(^|\n)fatal: repository.*not found/g).exec(e)||null!==new RegExp(/(^|\n)fatal: could not read Username/g).exec(e)||null!==new RegExp(/(^|\n)fatal: Could not read from remote repository/g).exec(e)}function w(e){var t=e.split(/ /g);if("1"===t[0]){var n=t[1],o=t.slice(8).join(" "),i=function(e){var t=e.startsWith(".")?e[1]:e[0],n=!e.startsWith(".");switch(t){case"M":case"T":return{changeMode:r.pD.MODIFIED,isStaged:n};case"D":return{changeMode:r.pD.DELETED,isStaged:n};case"A":return{changeMode:r.pD.UNTRACKED,isStaged:n};default:throw new Error("Unknown change type: ".concat(e))}}(n);return{change:i.changeMode,targetPath:o,origPath:o,isStaged:i.isStaged}}if("2"===t[0]){var a=d(t.slice(9).join(" ").split("\t"),2),c=a[0],l=a[1];return{change:r.pD.MOVED,targetPath:c,origPath:l,isStaged:!0}}if("?"===t[0]){var s=t.slice(1).join(" ");return{change:r.pD.UNTRACKED,targetPath:s,origPath:null,isStaged:!1}}if("u"===t[0]){var u=t[2];return{change:r.pD.MODIFIED,targetPath:u,origPath:u,isStaged:!1}}throw new Error("Unrecognized git status entry: ".concat(e))}var k={format:function(e,t){return g('[ ! -d ".git" ]',"git init","git checkout -b main",'git config user.name "'.concat(t.username||"Replit user",'"'),'git config user.email "<>"',"touch .git/branches/.keep","touch .git/info/.keep","touch .git/objects/.keep","touch .git/refs/.keep")}},S={format:function(e,t){return["git","rev-list","--left-right","--count","".concat(t,"...origin/").concat(t)]},parse:function(e,t){if(t.startsWith("fatal"))return u({},e,{commitsAhead:null,commitsBehind:null});var n=d(t.split(/\s+/),2),r=n[0],o=n[1];return u({},e,{commitsAhead:parseInt(r)||0,commitsBehind:parseInt(o)||0})}},Z={format:function(e){return["git","status","--branch","--porcelain=v2"]},parse:function(e,t){if(t.startsWith("fatal"))return e;if(t.includes("index file corrupt")||t.includes("error: index file"))return u({},e,{badState:r.$U.IndexFilesCorrupted});if(""===t.trim())return u({},e,{changedFiles:[]});var n=t.split("\n").filter((function(e){return""!==e.trim()})),o=e.branch,i=e.defaultBranch,a=!0,c=[],l=!0,s=!1,f=void 0;try{for(var p,h=n[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var m=p.value;if(m.startsWith("#")){var v=d(m.split(/\s+/),3),g=(v[0],v[1]),b=v[2];switch(g){case"branch.head":o=b;break;case"branch.oid":a=!b.includes("(initial)")}}else c.push(w(m))}}catch(y){s=!0,f=y}finally{try{l||null==h.return||h.return()}finally{if(s)throw f}}return a||(i=o,o=""),u({},e,{branch:o,defaultBranch:i,changedFiles:c})}},E={format:function(e){var t=y(e);return g("git push ".concat(t," $(").concat(m,")"))},parse:function(e,t){return x(t)?u({},e,{authError:r.l4.PUSH}):e}},_={format:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=y(e);return g("git fetch ".concat(n,t?" --progress --deepen=10":" +refs/heads/*:refs/remotes/origin/* --progress --depth=10"))},parse:function(e,t){return x(t)?u({},e,{authError:r.l4.FETCH}):e}},j={format:function(e){return 0===e.commits.length?["echo true"]:g(h,"git merge-base origin/$(".concat(m,") $(").concat(m,")"))},parse:function(e,t){return u({},e,{hasMergeBaseWithFetchedRemote:Boolean(t.length)})}},O={format:function(){return g("git fetch origin --progress")},parse:function(e,t){return x(t)?u({},e,{authError:r.l4.FETCH}):e}},C={format:function(e){if(0===e.commits.length)return["true"];var t=["git merge-tree $(git merge-base origin/$(".concat(m,") $(").concat(m,")) origin/$(").concat(m,") $(").concat(m,")"),"grep '^changed in both'","wc -l"].join(" | ");return g(h,t)},parse:function(e,t){return u({},e,{hasConflictsWithFetchedRemote:0!==e.commits.length&&!isNaN(+t.trim())&&"0"!==t.trim()})}},T={format:function(e){return g("git reset --hard origin/$(".concat(m,")"))}},P={format:function(e){var t=y(e);return["git push ".concat(t," $(").concat(m,") --force")]}},A={format:function(){return g(h,"git merge origin/$(".concat(m,")"))},parse:function(e,t){return null!==new RegExp(/(^|\n)error: Your local changes to the following files would be overwritten by merge/g).exec(t)?u({},e,{hasConflictsWithFetchedRemote:!0}):e}},I={format:function(e){return["git","remote","get-url","origin"]},parse:function(e,t){return t.includes("No such remote")||t.startsWith("fatal")?u({},e,{remote:""}):u({},e,{remote:t.trim()})}},R={format:function(e,t){return e.remote?g("git remote remove origin; git remote add origin ".concat(t)):g("git remote add origin ".concat(t))}},D={format:function(e){return g("git rev-parse 2>/dev/null && for i in $(git remote); do git remote remove $i; done")}},N={format:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r="HEAD";t&&e.commits.length>0&&(r=e.commits[e.commits.length-1].hash);var o=["%D","%H","%an","%ae","%aI","%cn","%ce","%cI","%P","%B"];return["git","log","--pretty=".concat(o.join("%x00"),"%x00%x00"),"-".concat(n+1),r,"--"]},parse:function(e,t){if(t.startsWith("fatal"))return u({},e,{commits:[]});if(t.startsWith("error: index file"))return u({},e,{badState:r.$U.IndexFilesCorrupted});var n=t.split("\0\0\n").filter((function(e){return""!==e})).map((function(e){return e.split("\0")})),o=!!n[0][0];n.map((function(e){return e.shift()}));var i=!1;0===e.commits.length||o||e.commits[e.commits.length-1].hash!==n[0][0]||(i=!0,n.shift());var a=i?e.commits:[];return u({},e,{commits:a=a.concat(n.map((function(e){var t=f(e),n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],c=t[5],l=t[6];return{hash:n,parentHash:t[7],message:t.slice(8).join("\n"),authorName:r,authorEmail:o,authorDate:new Date(i.trim()),committerName:a,committerEmail:c,committerDate:new Date(l.trim())}})))})}},U={format:function(){return g(b("git add -A"))},parse:function(e,t){if(t.startsWith("fatal"))return u({},e,{hasConflictsWithFetchedRemote:!0});var n=e.changedFiles.map((function(e){return u({},e,{isStaged:!0})}));return u({},e,{changedFiles:n})}},B={format:function(e,t){return g("git add ".concat(t," && echo done: ").concat(t))},parse:function(e,t){if(!t.startsWith("fatal")){var n=t.split(" ")[1].trim(),r=e.changedFiles.map((function(e){return e.targetPath===n?u({},e,{isStaged:!0}):e}));return u({},e,{changedFiles:r})}return e}},z={format:function(e,t,n){return g("git restore ".concat(n?"--staged":""," ").concat(t," && echo done: ").concat(t))},parse:function(e,t){if(!t.startsWith("fatal")){var n=t.split(" ")[1].trim();return u({},e,{changedFiles:e.changedFiles.map((function(e){return e.targetPath===n?u({},e,{isStaged:!1}):e}))})}return e}},L={format:function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r=e.gitHubName?e.gitHubName:n.fullName||n.username;var i=e.gitHubEmail||"<>",a='-c user.name="'.concat(r,'" -c user.email="').concat(i,'"'),c=t.replace(/'/g,"'\"'\"'");return g(b("git ".concat(a," commit -m '").concat(c,"'").concat(o?" --allow-empty":"")))}},M={format:function(e,t){return e.branches.includes(t)?["git","checkout",t,"--"]:["git","checkout","-b",t,"--"]}},F={format:function(e){var t=y(e);return g("git remote show ".concat(t," | grep 'HEAD branch'"))},parse:function(e,t){var n=d(t.split(":"),2);n[0];return u({},e,{defaultBranch:n[1].trim()})}},G={format:function(e){return g("git checkout ".concat(e.defaultBranch))}},X={format:function(e){return g("git checkout -f ".concat(e.defaultBranch))}},W={format:function(e,t){return g("git revert ".concat(t,"..$(").concat(v,") --no-commit"))}},H={format:function(e){return g(b("git reset $(".concat(v,") --")))}},V={format:function(e){return g("git rev-parse --is-inside-work-tree")},parse:function(e,t){return u({},e,{isInitialized:t.startsWith("true")})}},$={format:function(e){return g("git add -A","git reset --hard $(".concat(v,") --"))}},q={format:function(e){return["git","branch","-a","--no-color"]},parse:function(e,t){if(t.startsWith("fatal"))return e;var n=t.split("\n").filter((function(e){return!!e.trim()})).map((function(e){return e.startsWith("* ")?e.replace(/^\*\s+/,""):e})).map((function(e){return e.trim()})).map(o.iF);return u({},e,{branches:Array.from(new Set(n))})}},K={format:function(e){return g("git stash -u")}},Y={format:function(e){return g("git checkout stash -- .")}},Q={format:function(e,t,n){var r;r=e.gitHubName?e.gitHubName:t.fullName||t.username;var o=e.gitHubEmail||"<>",i='-c user.name="'.concat(r,'" -c user.email="').concat(o,'"');return g("git ".concat(i," merge -Xtheirs --allow-unrelated-histories --no-edit origin/").concat(n))}}},2729:function(e,t,n){n.r(t),n.d(t,{Component:function(){return _n},receiver:function(){return xe},reducer:function(){return Se}});var r=n(34051),o=n.n(r),i=n(35944),a=n(79547),c=n.n(a),l=n(67294),s=n(88768),u=n(78135),d=n(94184),f=n.n(d),p=n(40425);var h=n(7411),m=n(28593),v=n(77998),g=n(80357),b=n(54098),y=n.n(b),x=n(91861);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){S(i,r,o,a,c,"next",e)}function c(e){S(i,r,o,a,c,"throw",e)}a(void 0)}))}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function j(e,t,n){return(j=_()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&I(o,n.prototype),o}).apply(null,arguments)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){O(e,t,n[t])}))}return e}function A(e,t){return!t||"object"!==D(t)&&"function"!==typeof t?k(e):t}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function N(e){var t="function"===typeof Map?new Map:void 0;return N=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return j(e,arguments,C(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),I(r,e)},N(e)}function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}var B="https://api.github.com",z=function(e){T(n,e);var t=U(n);function n(){var e;return E(this,n),(e=t.call(this)).message="GitHub Auth Error",e}return n}(N(Error)),L=function(e){T(n,e);var t=U(n);function n(){var e;return E(this,n),(e=t.call(this)).message="GitHub Repo Already Exists",Error.captureStackTrace&&Error.captureStackTrace(k(e),n),e.name="GitHubRepoAlreadyExistsError",e}return n}(N(Error));function M(e,t){return F.apply(this,arguments)}function F(){return(F=Z(o().mark((function e(t,n){var r,i,a,c,l,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R((0,x.JE)(n),2),i=r[0],a=r[1],c={cache:"no-store"},t&&(c.headers={Authorization:"Bearer ".concat(t)}),e.next=5,y()("".concat(B,"/repos/").concat(i,"/").concat(a),c);case 5:return l=e.sent,e.next=8,W(l);case 8:return s=e.sent,e.abrupt("return",P({},s));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return X.apply(this,arguments)}function X(){return(X=Z(o().mark((function e(t){var n,r,i,a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.token,r=t.owner,i=t.ownerType,a=t.repoData,n){e.next=3;break}throw new Error("Unable to create repository");case 3:if("User"!==i){e.next=10;break}return e.next=7,y()("".concat(B,"/user/repos"),{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:JSON.stringify(a)});case 7:c=e.sent,e.next=13;break;case 10:return e.next=12,y()("".concat(B,"/orgs/").concat(r,"/repos"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),Accept:"application/vnd.github.nebula-preview+json"},body:JSON.stringify(a)});case 12:c=e.sent;case 13:return e.abrupt("return",W(c));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return H.apply(this,arguments)}function H(){return(H=Z(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.json();case 4:n=e.sent,r=new Error("Bad GitHub Response"),e.t0=t.status,e.next=401===e.t0||404===e.t0?9:422===e.t0?11:14;break;case 9:return r=new z,e.abrupt("break",14);case 11:return(null===n||void 0===n||null===(i=n.errors)||void 0===i?void 0:i.length)>0&&n.errors[0].message.startsWith("name already exists")&&(r=new L),e.abrupt("break",14);case 14:throw r;case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=n(87152),$=n(56834),q=n(78411);function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function Q(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Y(i,r,o,a,c,"next",e)}function c(e){Y(i,r,o,a,c,"throw",e)}a(void 0)}))}}function J(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(){return te.apply(this,arguments)}function te(){return(te=Q(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V.l){e.next=2;break}throw new Error("Expected apollo");case 2:return e.next=4,V.l.query({query:s.dJQ});case 4:if(null===(t=e.sent.data)||void 0===t?void 0:t.currentUser){e.next=7;break}throw new Error("Expected current user");case 7:return e.abrupt("return",t.currentUser);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){var t=e.cmd,n=e.args,r=void 0===n?[]:n,i=e.wid,a=e.pud,c=t.format,l=t.parse;return function(){var e=Q(o().mark((function e(n,s){var u,d,f,p,m,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=(0,h.Z)(s(),i,a,"git"),d=u.gitState,f=u.execer,p=u.isExecInProgress,m=u.execQueue,f){e.next=3;break}throw new Error("Expected execer to be registered");case 3:if(p){e.next=9;break}if(n({type:"SEND_GIT_EXEC_COMMAND",wid:i,pud:a}),v=q.Z.get(f)){e.next=8;break}throw new Error("Expected exec handle to contain exec service");case 8:v.request({args:c.apply(void 0,[d].concat(J(r)))});case 9:if(0!==m.length&&!p){e.next=11;break}return e.abrupt("return",new Promise((function(e,o){n({type:"QUEUE_GIT_EXEC",cmd:t,args:r,parser:void 0!==l?l:function(e){return e},callback:e,wid:i,pud:a})})));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function re(e){var t=e.history,n=void 0!==t&&t,r=e.write,i=void 0!==r&&r,a=e.persist,c=void 0!==a&&a,l=e.prefer,s=void 0===l?null:l,u=e.wid,d=e.pud;return function(){var e=Q(o().mark((function e(t,r){var a,l,f,p,m,b,y,x,w,k,S,Z,E,_;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n){return t(ne({cmd:e,wid:u,pud:d,args:n}))},e.next=4,a(v.bb);case 4:if(l=(0,h.Z)(r(),u,d,"git"),f=l.gitState,p=f.isInitialized,m=f.remote,p){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,a(v.GE);case 9:return e.next=11,a(v.LO);case 11:if(!i||!m){e.next=40;break}if(null!==s){e.next=15;break}return e.next=15,a(v.kT);case 15:if(!(0,h.Z)(r(),u,d,"git").gitState.hasConflictsWithFetchedRemote&&null===s){e.next=34;break}if("remote"!==s){e.next=24;break}return e.next=20,a(v.cF);case 20:return e.next=22,a(v.VF);case 22:e.next=32;break;case 24:if("repl"!==s){e.next=31;break}return e.next=27,a(v.Ud);case 27:return e.next=29,a(v.VF);case 29:e.next=32;break;case 31:case 32:e.next=38;break;case 34:return e.next=36,a(v.jW);case 36:return e.next=38,a(v.VF);case 38:e.next=43;break;case 40:if(!n||!m){e.next=43;break}return e.next=43,a(v.jW);case 43:if(!(i||n||c)){e.next=53;break}return b=r().services.fs,t({type:"SET_GIT_LOADING_STATE",wid:u,isLoading:!0}),e.next=48,b.persist();case 48:if(e.sent.success){e.next=52;break}return e.next=52,b.persist();case 52:t({type:"SET_GIT_LOADING_STATE",wid:u,isLoading:!1});case 53:return y=(0,h.Z)(r(),u,d,"git"),x=y.gitState,w=x.remote,k=!1,w&&(S=new Promise((function(e){setTimeout((function(){k=!0,e()}),3e4)})),Z=function(){var e=Q(o().mark((function e(t){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.deepen,!k){e.next=3;break}return e.abrupt("return",Promise.reject());case 3:return e.next=5,a(v.he,[n]);case 5:return e.next=7,a(v.cM);case 7:return e.next=9,a(v.zq);case 9:if(i=(0,h.Z)(r(),u,d,"git"),i.gitState.hasMergeBaseWithFetchedRemote){e.next=13;break}return e.next=13,Z({deepen:!0});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Promise.race([Z({deepen:!1}),S]).then((function(){var e=(0,h.Z)(r(),u,d,"git").gitState,n=e.hasMergeBaseWithFetchedRemote,o=e.badState,i=e.remote;n||t({type:"UPDATE_GIT_STATE",updates:{badState:o===g.$U.None&&i?g.$U.NoMergeBase:o},wid:u,pud:d})}))),a(v.Pz),a(v.cM),e.next=60,a(v.i7);case 60:return e.next=62,a(v.Hl);case 62:E=(0,h.Z)(r(),u,d,"git"),_=E.gitState.branch,a(v.k6,[_]);case 64:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function oe(e){var t=e.wid,n=e.pud,r=e.remote;return function(){var e=Q(o().mark((function e(i,a){var c,l,s,u,d,f,p,m,g,b;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(e,r){return i(ne({cmd:e,args:r,wid:t,pud:n}))},e.next=4,i({type:"START_GIT_CLONE",wid:t});case 4:return l=!!r.match(/^https?:\/\/github\.com/i),s=!!r.match(/^https?:\/\/api\.glitch\.com/i),e.next=8,ee();case 8:if(u=e.sent,l)try{(null===(d=u.gitHubInfo)||void 0===d?void 0:d.accessToken)&&(g=u.gitHubInfo,i({type:"UPDATE_GIT_STATE",updates:{remoteToken:g.accessToken,gitHubName:null===(f=g.userInfo)||void 0===f?void 0:f.name,gitHubEmail:null===(p=g.userInfo)||void 0===p?void 0:p.email,gitHubAvatarUrl:null===(m=g.userInfo)||void 0===m?void 0:m.avatarUrl,installations:g.installations},wid:t,pud:n}))}catch(o){}return e.next=12,c(v.D6,[u]);case 12:return e.next=14,c(v.M7,[r]);case 14:return e.next=16,c(v.LO);case 16:return e.next=18,i({type:"START_CLONE_PROGRESS",wid:t,pud:n});case 18:return e.next=20,c(s?v.TE:v.he);case 20:return e.next=22,c(v.Di);case 22:return e.next=24,c(v.xY);case 24:return e.next=26,i({type:"END_CLONE_PROGRESS",wid:t,pud:n});case 26:if(s){e.next=31;break}return e.next=29,i(re({wid:t,pud:n,history:!0}));case 29:e.next=35;break;case 31:return e.next=33,c(v.i7);case 33:return e.next=35,new Promise((function(e){return setTimeout(e,1e3)}));case 35:(b=function(){var e=(0,h.Z)(a(),t,n,"git"),r=e.execQueue,o=e.isExecInProgress;0!==r.length||o?setTimeout(b,1e3):i({type:"END_GIT_CLONE",wid:t})})();case 37:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function ie(e,t){return function(){var n=Q(o().mark((function n(r){var i,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=function(n,o){return r(ne({cmd:n,args:o,wid:e,pud:t}))},n.next=4,ee();case 4:return a=n.sent,n.next=7,i(v.Hl);case 7:return n.next=9,i(v.th,["Initial commit",a]);case 9:return n.next=11,r(re({wid:e,pud:t,write:!0}));case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function ae(e,t){return function(){var n=Q(o().mark((function n(r){var i,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=function(n,o){return r(ne({cmd:n,args:o,wid:e,pud:t}))},n.next=4,ee();case 4:return a=n.sent,n.next=7,i(v.GE);case 7:return n.next=9,i(v.th,["Initial commit",a,!0]);case 9:return n.next=11,i(v.Hl);case 11:return n.next=13,r(re({wid:e,pud:t,write:!0}));case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function ce(e){var t=e.wid,n=e.pud;return function(){var e=Q(o().mark((function e(r,i){var a,c,l,s,u,d,f,p,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(ne({cmd:v.LO,wid:t,pud:n}));case 2:if(a=(0,h.Z)(i(),t,n,"git"),c=a.gitState,l=c.remote,s=c.remoteToken,u=!1,!l||!s){e.next=19;break}return e.prev=5,e.next=8,M(s,l);case 8:return d=e.sent,f=d.permissions,p=d.id,m=d.owner,u=f&&f.push,e.next=15,r({type:"UPDATE_GIT_STATE",pud:n,wid:t,updates:{repoId:p,ownerId:m.id}});case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(5);case 19:r({type:"GIT_REMOTE_CHECKED",wid:t,canPush:u,remote:l});case 20:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t,n){return e.apply(this,arguments)}}()}var le,se=n(42723);!function(e){e.CHANNEL_OPENED="CHANNEL_OPENED",e.OUTPUT_RECEIVED="OUTPUT_RECEIVED",e.STATE_CHANGED="STATE_CHANGED"}(le||(le={}));var ue=n(75944),de=n(50055);function fe(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){fe(i,r,o,a,c,"next",e)}function c(e){fe(i,r,o,a,c,"throw",e)}a(void 0)}))}}function he(e){var t=e.container,n=(0,ue.ZP)(),r=null;function i(){return a.apply(this,arguments)}function a(){return(a=pe(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return",r);case 2:return e.abrupt("return",new Promise((function(e){n.once(le.CHANNEL_OPENED,(function(t){e(t)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c="";return t.openChannel({service:"exec"},(function(e){var t=e.error,o=e.channel;if(!t){if(!o)throw new Error("Expected channel");var i=!1;return o.onCommand((function(e){if(null!=e.output)c+=e.output,n.emit(le.OUTPUT_RECEIVED,e.output);else if(null!=e.state){if(!i)return void(i=!0);n.emit(le.STATE_CHANGED,{state:e.state,outputBuffer:c}),e.state===de.api.State.Stopped&&(c="")}})),r=o,n.emit(le.CHANNEL_OPENED,o),function(){r=null}}})),{request:function(){var e=pe(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.env,r=t.args,e.next=3,i();case 3:return a=e.sent,e.abrupt("return",a.request({exec:{env:n,args:r,blocking:!0}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onOutput:function(e){return n.on(le.OUTPUT_RECEIVED,e),function(){n.off(le.OUTPUT_RECEIVED,e)}},onStateChanged:function(e){return n.on(le.STATE_CHANGED,e),function(){n.off(le.STATE_CHANGED,e)}},getStatus:function(){return r?r.status:"closed"}}}var me=n(27754);function ve(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ve(i,r,o,a,c,"next",e)}function c(e){ve(i,r,o,a,c,"throw",e)}a(void 0)}))}}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){be(e,t,n[t])}))}return e}function xe(e,t,n){switch(n.type){case"WORKSPACE_MOUNTED":return function(){var n=ge(o().mark((function n(r,i){var a,c,l;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=function(e){return l.apply(this,arguments)},l=function(){return(l=ge(o().mark((function n(c){var l,s,u,d;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c===me.e.CONNECTED){n.next=2;break}return n.abrupt("return");case 2:if(l=(0,h.Z)(i(),e,t,"git"),s=l.gitState,(u=he({container:a})).onOutput((function(n){(0,h.Z)(i(),e,t,"git").shouldDisplayCloneLogs&&r((0,se.yY)({wid:e,message:n,type:"interp",raw:!1}))})),u.onStateChanged((function(n){var o=n.state,a=n.outputBuffer,c=(0,h.Z)(i(),e,t,"git").execQueue;o===de.api.State.Stopped&&0!==c.length&&r({type:"EXIT_GIT_EXEC_COMMAND",output:a,wid:e})})),r({type:"REGISTER_EXECER_SERVICE_HANDLE",execer:q.Z.getHandle(u),wid:e,pud:t}),s.remoteToken){n.next=10;break}return n.next=10,r(ce({wid:e,pud:t}));case 10:if(d=s.remote){n.next=13;break}return n.abrupt("return");case 13:return n.next=15,r(ne({cmd:v.bb,wid:e,pud:t}));case 15:(0,h.Z)(i(),e,t,"git").gitState.isInitialized||(r((0,se.yY)({wid:e,message:"cloning into ".concat(d,"...\n"),type:"interp",raw:!1})),(0,$.j)($.U3.VERSION_CONTROL_FEATURE_USED,{action:"cloned"}),r(oe({remote:d,wid:e,pud:t})));case 17:case"end":return n.stop()}}),n)})))).apply(this,arguments)},(a=i().services.container).getConnectionState()===me.e.CONNECTED?c(me.e.CONNECTED):a.onConnectionStateChanged(c);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();case"FILE_CLEAN":return function(n,r){var o=(0,h.Z)(r(),e,t,"git"),i=o.gitState,a=o.hasOpened;i.isInitialized&&a&&n(ne({cmd:v.i7,wid:e,pud:t}))};case"EXIT_GIT_EXEC_COMMAND":return function(){var r=ge(o().mark((function r(i,a){var c,l,s,u,d,f;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=(0,h.Z)(a(),e,t,"git"),l=c.execQueue[0],s=q.Z.safeGet(l.parser),u=q.Z.safeGet(l.callback),r.next=6,i({type:"DEQUEUE_GIT_EXEC",wid:e,pud:t});case 6:return r.next=8,i({type:"UPDATE_GIT_STATE",updates:ye({},s(c.gitState,n.output)),wid:e,pud:t});case 8:u(),(d=(0,h.Z)(a(),e,t,"git")).execQueue.length>0&&(f=d.execQueue[0],i(ne({cmd:f.cmd,args:f.args,wid:e,pud:t})));case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}();case"START_GIT_CLONE":return function(){var t=ge(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Cloning",wid:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();case"END_GIT_CLONE":return function(){var n=ge(o().mark((function n(r){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"UNLOCK_WORKSPACE",wid:e}),n.next=3,r(ce({wid:e,pud:t}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();case"GITHUB_REPOSITORY_CREATED":case"CHECK_GIT_REMOTE":return function(){var n=ge(o().mark((function n(r){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r(ce({wid:e,pud:t}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();default:return null}}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){we(e,t,n[t])}))}return e}var Se=function(e,t){switch(t.type){case"@@INIT":return{gitState:{isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:g.l4.NONE,badState:g.$U.None,remote:t.initialState.gitRemoteUrl||"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null},hasOpened:!1,isSidebarVisible:!1,isCloneInProgress:!1,shouldDisplayCloneLogs:!1,isExecInProgress:!1,isLoading:!0,execQueue:[],execer:null};case"REGISTER_EXECER_SERVICE_HANDLE":return ke({},e,{execer:t.execer});case"SEND_GIT_EXEC_COMMAND":return ke({},e,{isExecInProgress:!0,isLoading:!0});case"EXIT_GIT_EXEC_COMMAND":return ke({},e,{isExecInProgress:!1});case"QUEUE_GIT_EXEC":var n=q.Z.getHandle(t.parser),r=q.Z.getHandle(t.callback);return ke({},e,{execQueue:e.execQueue.concat({cmd:t.cmd,args:t.args,parser:n,callback:r})});case"DEQUEUE_GIT_EXEC":return ke({},e,{execQueue:e.execQueue.slice(1)});case"START_GIT_CLONE":return ke({},e,{isCloneInProgress:!0});case"START_CLONE_PROGRESS":return ke({},e,{shouldDisplayCloneLogs:!0});case"END_CLONE_PROGRESS":return ke({},e,{shouldDisplayCloneLogs:!1});case"END_GIT_CLONE":return ke({},e,{isCloneInProgress:!1});case"SET_GIT_LOADING_STATE":return ke({},e,{isLoading:t.isLoading});case"UPDATE_GIT_STATE":return ke({},e,{gitState:ke({},e.gitState,t.updates),isLoading:(t.updates.badState!==g.$U.None||t.updates.authError!==g.l4.NONE)&&(e.execQueue.length>0||e.isCloneInProgress)});case"SET_GIT_SIDEBAR_VISIBILITY":return ke({},e,{isSidebarVisible:t.isSidebarVisible,hasOpened:!0});default:return e}},Ze=n(51281),Ee=n(93577),_e=n(63059),je=n(23139),Oe=n(62246);function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ae=function(e,t){var n=(0,x.mJ)(t),r="";switch(e){case g.l4.PUSH:r="push to ".concat(n);break;case g.l4.FETCH:r="fetch from ".concat(n);break;case g.l4.CLONE:r="clone from ".concat(n);break;case g.l4.GITHUB_CREATE:case g.l4.GITHUB_GET_INFO:default:r="create new repositories"}return"Please grant Replit permission to access GitHub on your behalf and confirm that you have permission to ".concat(r,".")},Ie=function(e){var t=e.repoId,n=e.ownerId,r=e.wid,a=e.pud,c=e.authError,s=e.onAuth,d=(0,u.I0)(),f=(0,u.v9)((function(e){return(0,h.Z)(e,r,a,"git")})).gitState,p="Connect to GitHub";f.remote&&(p="Unable to connect to this GitHub repository");var m,v=(0,_e.v)({suggestedRepoId:t,ownerId:n,onAuth:(m=o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!1),s(),d({type:"UPDATE_GIT_STATE",updates:{authError:g.l4.NONE,badState:g.$U.None},wid:r,pud:a});case 3:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=m.apply(e,t);function i(e){Te(o,n,r,i,a,"next",e)}function a(e){Te(o,n,r,i,a,"throw",e)}i(void 0)}))})}),b=Pe(l.useState(!0),2),y=b[0],x=b[1];return(0,i.tZ)(je.u_,{onRequestClose:function(){x(!1),c!==g.l4.FETCH?d({type:"UPDATE_GIT_STATE",updates:{authError:g.l4.NONE},wid:r,pud:a}):d({type:"UPDATE_GIT_STATE",updates:{badState:g.$U.AuthFetchError},wid:r,pud:a})},isOpen:y,children:(0,i.BX)(je.G7,{css:[je.l0.colWithGap(24)],children:[(0,i.tZ)(je.h4,{level:1,variant:"headerDefault",children:p}),(0,i.BX)(je.G7,{css:[je.l0.colWithGap(8)],children:[(0,i.tZ)(je.xv,{multiline:!0,children:Ae(c,f.remote)}),(0,i.BX)(je.xv,{multiline:!0,children:["See"," ",(0,i.tZ)("a",{href:"https://docs.replit.com/programming-ide/github-auth-errors",target:"_blank",rel:"noreferrer",children:"our docs"})," ","for more help with GitHub authentication errors."]})]}),(0,i.tZ)(je.G7,{css:[je.l0.rowWithGap(12),je.l0.justify.end],children:(0,i.tZ)(je.zx,{colorway:"primary",onClick:v,text:"Connect Replit to your GitHub Account",iconLeft:(0,i.tZ)(Oe.Z,{})})})]})})},Re=n(43129),De=n(20795),Ne=n(70192),Ue=n(33108),Be=n(87139),ze=n(57541),Le=n(45193);function Me(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}var Fe=function(e){return e.trim().split(" ").join("-")},Ge=function(e){var t=e.isOpen,n=e.isCreatingBranch,r=e.onClose,a=e.currentBranch,l=e.branches,s=e.successHandler;if(!t)return null;var u=(0,Ue.Y)("",(function(e){return e?l.includes(Fe(e))?{message:"* this branch name already exists"}:void 0:{message:"* branch names cannot be blank"}})),d=function(){var e,t=(e=o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!u.validate()){e.next=4;break}return e.abrupt("return");case 4:s(Fe(u.value));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Me(i,r,o,a,c,"next",e)}function c(e){Me(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,i.tZ)(Le.Z,{onRequestClose:r,isOpen:!0,children:(0,i.BX)("div",{className:"jsx-4a406bdd6aef82a6 container",children:[(0,i.BX)("form",{onSubmit:d,autoComplete:"off",className:"jsx-4a406bdd6aef82a6",children:[(0,i.tZ)("h1",{className:"jsx-4a406bdd6aef82a6",children:"Create a new branch"}),(0,i.tZ)("h2",{className:"jsx-4a406bdd6aef82a6",children:n?"Creating your new branch":"This branch will be created from ".concat(a)}),(0,i.tZ)("div",{className:"jsx-4a406bdd6aef82a6 creation-error",children:u.error&&u.error.message}),(0,i.tZ)("div",{className:"jsx-4a406bdd6aef82a6 section",children:(0,i.tZ)(ze.ZP,{value:u.value,type:"text",autoFocus:!0,name:"branch-name",autoComplete:"off",onChange:function(e){u.setValue(e.currentTarget.value)},placeholder:"name your branch (required)",onFocus:function(e){return e.target.select()}})}),(0,i.tZ)(Ze.Z,{type:"submit","data-testid":"git-confirm-github-repo",color:"primary",filled:!0,children:n?(0,i.BX)("span",{className:"jsx-4a406bdd6aef82a6",children:["creating",(0,i.tZ)(Be.Z,{style:{fontSize:"20px",padding:"1px"}})]}):"create"})]}),(0,i.tZ)(c(),{id:"4a406bdd6aef82a6",children:".container.jsx-4a406bdd6aef82a6{font-size:1rem;width:510px;padding:60px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;height:100%;color:var(--foreground-default)}.container.jsx-4a406bdd6aef82a6 form.jsx-4a406bdd6aef82a6{width:90%}.container.jsx-4a406bdd6aef82a6 h1.jsx-4a406bdd6aef82a6{font-size:23px;margin-bottom:10px;font-weight:normal}.container.jsx-4a406bdd6aef82a6 h2.jsx-4a406bdd6aef82a6{color:var(--foreground-dimmer);font-size:16px;margin-bottom:15px;font-weight:normal}.creation-error.jsx-4a406bdd6aef82a6{min-height:16px;margin:10px;color:var(--accent-negative-default)}.section.jsx-4a406bdd6aef82a6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding-bottom:25px;width:100%}"})]})})},Xe=n(58458),We=n(94590),He=function(e){var t,n,r=e.checkoutBranch,o=e.gitState,a=e.isLoading,s=e.wid,u=e.isNarrow,d=(0,l.useState)(!1),p=d[0],h=d[1];return(0,l.useEffect)((function(){!a&&p&&h(!1)}),[a]),(0,i.BX)("div",{className:"jsx-3cae6247addd4daa "+(f()("branch-info",{disabled:1===o.branches.length})||""),children:[(0,i.tZ)(c(),{id:"3cae6247addd4daa",children:".branch-info.jsx-3cae6247addd4daa{display:grid;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);margin-top:10px}.branch-info-label.jsx-3cae6247addd4daa{color:var(--foreground-default);font-size:14px;margin-bottom:3px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.branch-info-selectWrapper.jsx-3cae6247addd4daa{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;position:relative}.branch-info-select.jsx-3cae6247addd4daa{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}"}),(0,i.tZ)("div",{className:"jsx-3cae6247addd4daa branch-info-selectWrapper",children:(0,i.BX)("div",{className:"jsx-3cae6247addd4daa branch-info-select",children:[(0,i.tZ)(Ne.Z,{}),(0,i.tZ)(Re.ZP,{clearable:!1,className:"branchSelect-".concat(window.btoa(s).substr(0,10)),disabled:1===o.branches.length,onChange:function(e){e&&!Array.isArray(e)&&e.value!==o.branch&&e.value&&r(e.value)},openOnFocus:!0,options:(t=o.branches,n=o.defaultBranch,0===t.length?[]:t.sort((function(e){return e===n?-1:0})).map((function(e){return{value:e,label:e}}))),optionRenderer:function(e){return function(e){var t=e.branch,n=e.defaultBranch,r=e.currentBranch,o=t.value===r;return(0,i.BX)("div",{className:"jsx-2976945c1b5be69e "+(f()("branchOption",{selected:o})||""),children:[(0,i.tZ)(c(),{id:"2976945c1b5be69e",children:".branchOption.jsx-2976945c1b5be69e{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.branchOption-checkmark.jsx-2976945c1b5be69e{height:12px;width:12px;margin-right:3px}.branchOption-name.jsx-2976945c1b5be69e{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:baseline;-webkit-align-items:baseline;-moz-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%}.branchOption-defaultLabel.jsx-2976945c1b5be69e{font-size:10px;color:var(--foreground-default);margin:0 2px}.selected.jsx-2976945c1b5be69e .branchOption-defaultLabel.jsx-2976945c1b5be69e{color:var(--foreground-dimmer)}"}),o&&(0,i.tZ)("div",{className:"jsx-2976945c1b5be69e branchOption-checkmark",children:(0,i.tZ)(De.Checkmark,{})}),(0,i.BX)("div",{className:"jsx-2976945c1b5be69e branchOption-name",children:[(0,i.tZ)("label",{className:"jsx-2976945c1b5be69e",children:t.label}),t.label===n&&(0,i.tZ)("label",{className:"jsx-2976945c1b5be69e branchOption-defaultLabel",children:"default"})]})]})}({branch:e,currentBranch:o.branch,defaultBranch:o.defaultBranch})},placeholder:""!==o.branch||o.commits.length?"loading...":o.defaultBranch,searchable:!0,value:o.branch,valueRenderer:function(){return(0,i.BX)(l.Fragment,{children:[!u&&(0,i.tZ)(Xe.Z,{foreground:2,children:"branch: "}),o.branch]})}})]})}),(0,i.tZ)(Ze.Z,{Icon:We.Z,onClick:function(){return h(!0)},title:"Create new branch"}),(0,i.tZ)(Ge,{branches:o.branches,currentBranch:o.branch,isCreatingBranch:p&&a,isOpen:p,onClose:function(){return h(!1)},successHandler:function(e){r(e)}})]})},Ve=n(8996),$e=n(67938),qe=n(7177),Ke=n(27218),Ye=n(54929),Qe=n(3204),Je=n(92704),et=n(58375),tt=n(30617),nt=n(77287),rt=n(87689);function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function it(e){return function(e){if(Array.isArray(e))return ot(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var at=function(e){var t=(0,tt.Z)().container,n=(0,rt.J)(e.remote),r=n?"".concat(n.username,"/").concat(n.repository):e.remote,o=(0,u.I0)();return(0,i.BX)(Ye.Z,{css:[Qe.l0.colWithGap(16)],children:[(0,i.BX)($e.h,{variant:"headerDefault",level:2,children:["Remove ",r," as a remote?"]}),(0,i.BX)($e.x,{multiline:!0,children:["Are you sure you want to remove ",r,"?"]}),(0,i.BX)($e.x,{multiline:!0,children:["This can be undone by re-connecting to the repository in the Git sidebar or running ",(0,i.BX)(nt.Z,{children:["git remote add origin ",e.remote]})," ","in the Shell."]}),(0,i.BX)(Ye.Z,{css:[Qe.l0.rowWithGap(12),Qe.l0.justify.end],children:[(0,i.tZ)(Je.zx,{text:"Cancel",onClick:e.hideModal}),(0,i.tZ)(Je.zx,{iconLeft:(0,i.tZ)(et.Z,{}),onClick:function(){var n;(n=t).exec.apply(n,it(v.rO.format(g.Xe))),o(re({wid:e.wid,pud:e.pud})),e.hideModal()},text:"Yes, remove ".concat(r),colorway:"negative"})]})]})},ct=n(27464),lt=n(45557),st=n(83196),ut=n(53818),dt=n(74648),ft=n(28614);function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ht(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function mt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ht(i,r,o,a,c,"next",e)}function c(e){ht(i,r,o,a,c,"throw",e)}a(void 0)}))}}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){vt(e,t,n[t])}))}return e}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var yt,xt=function(e){var t=(0,tt.Z)().container,n=(0,ut.Z)(t),r=(0,u.I0)(),a=bt(l.useState(null),2),c=a[0],s=a[1],d=bt(l.useState(!1),2),f=d[0],p=d[1],h=function(){var t=mt(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}return t.abrupt("return");case 2:p(!0),e.gitState.commits.length||r(ae(e.wid,e.pud)),n="https://github.com/".concat(c.nameWithOwner),r(ne({cmd:v.M7,args:[n],wid:e.wid,pud:e.pud})),r(re({wid:e.wid,pud:e.pud})),e.hideModal();case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=mt(o().mark((function t(){var i,a,l,s,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}return t.abrupt("return");case 2:return p(!0),i="https://github.com/".concat(c.nameWithOwner),t.next=6,ee();case 6:if(a=t.sent,e.gitState.commits.length){t.next=16;break}return t.next=10,n({args:v.M7.format(e.gitState,i)});case 10:return t.next=12,n({args:v.GE.format(e.gitState)});case 12:return t.next=14,n({args:v.th.format(e.gitState,"Initial commit",a,!0)});case 14:return t.next=16,n({args:v.Hl.format(e.gitState)});case 16:return t.next=18,n({args:v.hU.format(e.gitState)});case 18:return t.next=20,n({args:v.M7.format(e.gitState,i)});case 20:return t.next=22,n({args:v.he.format(gt({},e.gitState,{remote:i}),!1)});case 22:return t.next=24,n({args:v.Di.format(gt({},e.gitState,{remote:i}))});case 24:if(l=t.sent,v.Di.parse){t.next=27;break}return t.abrupt("return");case 27:return s=v.Di.parse(e.gitState,null===l.error?l.output:"HEAD branch: main"),u=s.defaultBranch,t.next=30,n({args:v.Z$.format(e.gitState,a,u)});case 30:return t.next=32,n({args:v.eg.format(e.gitState)});case 32:r(re({wid:e.wid,pud:e.pud})),e.hideModal();case 34:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,i.BX)(Ye.Z,{css:[Qe.l0.colWithGap(16)],children:[(0,i.tZ)($e.h,{variant:"headerDefault",level:2,children:"Connect an existing repository"}),(0,i.tZ)("label",{htmlFor:"git-sidebar-existing-repo-connection",css:{marginBottom:8},children:"Choose a repository to import."}),(0,i.tZ)(st.Z,{id:"git-sidebar-existing-repo-connection",onRepoSelect:s,onInputValueChange:function(){},isPrivate:!1}),e.gitState.remoteToken?null:(0,i.BX)($e.x,{multiline:!0,css:[Qe.l0.color.accentNegativeStronger,{marginTop:-12}],children:[(0,i.tZ)(ft.Z,{})," Please connect your GitHub account to connect existing repositories."]}),(0,i.BX)($e.x,{multiline:!0,css:{marginTop:-8},children:["This will set ",c?c.nameWithOwner:"this repository"," as the remote. Optionally, you can also pull in any changes from the repository, which will reflect this Repl's changes in the case of conflicts."]}),(0,i.BX)($e.x,{multiline:!0,children:["This can be undone by removing the repository in the Git sidebar or running ",(0,i.tZ)(nt.Z,{children:"git remote remove origin"})," in the Shell."]}),(0,i.BX)(Ye.Z,{css:[Qe.l0.rowWithGap(12),Qe.l0.justify.end,{flexWrap:"wrap",marginTop:"-8px"}],children:[(0,i.tZ)(Je.zx,{text:"Cancel",onClick:e.hideModal,css:[Qe.l0.mt(8)],disabled:f}),(0,i.tZ)(Je.zx,{iconLeft:(0,i.tZ)(lt.Z,{}),onClick:h,text:"Connect"+(c?" "+c.nameWithOwner:""),colorway:"primary",outlined:!0,css:[Qe.l0.mt(8)],disabled:f||!c}),(0,i.tZ)(Je.zx,{iconLeft:(0,i.tZ)(dt.Z,{}),onClick:m,text:"Pull changes"+(c?" from "+c.nameWithOwner:""),colorway:"primary",css:[Qe.l0.mt(8)],disabled:f||!c})]})]})};function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.RemoveRemote="RemoveRemote",e.ConnectExistingRemote="ConnectExistingRemote"}(yt||(yt={}));var St=function(e){var t=e.branch,n=e.commitsBehind,r=e.isLoading,o=function(){return r?(0,i.tZ)($e.x,{children:" checking latest changes... "}):t?null===n?null:n&&1===n?(0,i.BX)($e.x,{children:[(0,i.tZ)("span",{className:"emphasized",children:"1"})," commit behind ",t]}):n&&n>1?(0,i.BX)($e.x,{children:[(0,i.tZ)("span",{className:"emphasized",children:n})," commits behind"," ",t]}):(0,i.BX)($e.x,{children:["up to date with ",t]}):(0,i.tZ)($e.x,{children:"could not find a default branch - try adding some commits!"})};return(0,i.BX)("div",{className:"jsx-8a02681411c89cd3 remote-progress",children:[(0,i.tZ)(c(),{id:"8a02681411c89cd3",children:".remote-progress.jsx-8a02681411c89cd3{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-8);max-width:100%}.remote-progress p{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.remote-progress .emphasized{color:var(--foreground-default)}"}),(0,i.tZ)(o,{className:"jsx-8a02681411c89cd3"})]})},Zt=function(e){var t=e.gitState,n=e.isLoading,r=e.pull,o=e.setGithubCreationModalOpen,a=e.wid,s=e.pud,u=""!==t.remote,d=kt(l.useState(null),2),f=d[0],p=d[1];return(0,i.BX)(Ye.Z,{css:[Qe.l0.mx(4),Qe.l0.colWithGap(16)],children:[(0,i.tZ)(c(),{id:"133396714cab6dc2",children:".remote-wrapper-infolink.jsx-133396714cab6dc2{padding:0 3px;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.icon-wrapper.jsx-133396714cab6dc2{height:var(--space-16);width:var(--space-16);margin-right:var(--space-4);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:inherit}.remote-info-progress.jsx-133396714cab6dc2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}"}),u?(0,i.BX)(Ye.Z,{css:[Qe.l0.flex.row,Qe.l0.align.center,Qe.l0.width("100%")],children:[(0,i.tZ)("div",{title:"Repository origin",className:"jsx-133396714cab6dc2 icon-wrapper",children:(0,i.tZ)(De.GitHub,{})}),(0,i.tZ)("a",{href:t.remote,target:"_blank",rel:"noreferrer noopener",className:"jsx-133396714cab6dc2 remote-wrapper-infolink",children:(0,x.mJ)(t.remote)}),(0,i.tZ)(ct.Z,{alt:"Remove remote",colorway:"negative",onClick:function(){return p(yt.RemoveRemote)},children:(0,i.tZ)(Ke.Z,{})})]}):(0,i.BX)(Ye.Z,{css:[Qe.l0.rowWithGap(8),Qe.l0.align.center,Qe.l0.width("100%")],children:[(0,i.tZ)(Ze.Z,{fullWidth:!0,onClick:function(){o(!0)},children:(0,i.BX)(Ve.Ug,{spacing:1,align:"center",children:[(0,i.tZ)("div",{className:"jsx-133396714cab6dc2 icon-wrapper",children:(0,i.tZ)(De.GitHub,{})}),(0,i.tZ)("div",{className:"jsx-133396714cab6dc2",children:"Connect to GitHub"})]})}),(0,i.tZ)(ct.Z,{alt:"Connect existing remote",onClick:function(){return p(yt.ConnectExistingRemote)},children:(0,i.tZ)(lt.Z,{})})]}),u&&(0,i.BX)(Ye.Z,{css:[Qe.l0.flex.row,Qe.l0.flex.wrap,Qe.l0.justify.spaceBetween],children:[(0,i.tZ)(St,{branch:t.branch,commitsBehind:t.commitsBehind,isLoading:n}),!!t.commitsBehind&&t.commitsBehind>0&&(0,i.tZ)(Ze.Z,{color:"orange",onClick:r,children:"Pull \u2190"})]}),(0,i.tZ)(qe.Z,{isOpen:f===yt.RemoveRemote,onRequestClose:function(){return p(null)},maxWidth:512,children:(0,i.tZ)(at,{remote:t.remote,hideModal:function(){return p(null)},wid:a,pud:s})}),(0,i.tZ)(qe.Z,{isOpen:f===yt.ConnectExistingRemote,onRequestClose:function(){return p(null)},maxWidth:600,children:(0,i.tZ)(xt,{gitState:t,hideModal:function(){return p(null)},wid:a,pud:s})})]})},Et=n(33539),_t=n(48938),jt=n(92432),Ot=n(79635),Ct=n(22307);function Tt(e){var t=e.gitCommit,n=e.gitPush,r=e.gitAddAll,o=e.hasRemote,a=e.hasChangedFiles,c=e.hasStagedFiles,l=[];return c||l.push("commit"),o||l.push("push"),(0,i.BX)(Ye.Z,{css:[Qe.l0.flex.row,Qe.l0.rowWithGap(2),Qe.l0.pr(2)],children:[(0,i.tZ)(Je.ZP,{css:[Qe.l0.flex.growAndShrink(1)],disabled:!a,iconRight:(0,i.tZ)(jt.Z,{}),onClick:function(){r(),t(),n()},text:"Commit All"+(o?" & Push":""),outlined:!0}),(0,i.BX)(Ct.ZE,{onAction:function(e){switch(e){case"commit":t();break;case"push":n()}},disabledKeys:l,children:[(0,i.tZ)(Ct.ck,{children:(0,i.BX)(Ot.ZP,{tooltip:"You must stage some files using the plus icon beside a file before you can commit",placement:"right",isDisabled:c,children:[(0,i.tZ)($e.x,{variant:"subheadDefault",css:c?[]:[Qe.l0.color.foregroundDimmest],children:"Commit"}),(0,i.tZ)($e.x,{variant:"text",css:c?[]:[Qe.l0.color.foregroundDimmest],children:"Locally save your staged changes"})]})},"commit"),(0,i.tZ)(Ct.ck,{children:(0,i.BX)(Ot.ZP,{tooltip:"Push is only available if you have a GitHub repository connected",placement:"right",isDisabled:o,children:[(0,i.tZ)($e.x,{variant:"subheadDefault",css:o?[]:[Qe.l0.color.foregroundDimmest],children:"Push"}),(0,i.tZ)($e.x,{variant:"text",css:o?[]:[Qe.l0.color.foregroundDimmest],children:"Update remote repo with newest commits"})]})},"push")]})]})}function Pt(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}var At=function(e){switch(e.change){case g.pD.UNTRACKED:return"new";case g.pD.MODIFIED:return"modified";case g.pD.MOVED:return"renamed";case g.pD.DELETED:return"deleted";default:return""}},It=function(e){var t,n,r=e.file,a=e.active,l=e.handleChangedFileClick,s=e.isStaged,u=e.gitRestore,d=e.gitAdd,f=!1;if(r.targetPath.endsWith("/")){f=!0;var p=r.targetPath.substr(0,r.targetPath.length-1).split("/");t=p[p.length-1]+"/",n=p.slice(0,p.length-1).join("/")}else{var h=r.targetPath.split("/");t=h[h.length-1],n=h.slice(0,h.length-1).join("/")}var m,v=At(r),b=v.substr(0,1).toUpperCase(),y=["changedFileItem"];return a&&y.push("active"),f||r.change===g.pD.DELETED||y.push("showable"),(0,i.BX)("div",{onClick:function(){f||r.change===g.pD.DELETED||l(r.targetPath)},className:"jsx-efd6f34434320e10 "+(y.join(" ")||""),children:[(0,i.tZ)(c(),{id:"efd6f34434320e10",children:".changedFileItem.jsx-efd6f34434320e10{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid var(--background-highest);-webkit-border-radius:2.5px;-moz-border-radius:2.5px;border-radius:2.5px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:5px;padding:6px 12px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.showable.changedFileItem.jsx-efd6f34434320e10{cursor:pointer}.changedFileItem.jsx-efd6f34434320e10:hover{background-color:var(--accent-primary-dimmer)}.changedFileItem.jsx-efd6f34434320e10:hover .changeModeBadge.jsx-efd6f34434320e10 .letter.jsx-efd6f34434320e10{display:none}.changedFileItem.jsx-efd6f34434320e10:hover .changeModeBadge.jsx-efd6f34434320e10 .word.jsx-efd6f34434320e10{display:block}.changedFileItem.active.jsx-efd6f34434320e10{background-color:var(--accent-primary-default);border-color:transparent;color:var(--white)}.showable.jsx-efd6f34434320e10 .fileName.jsx-efd6f34434320e10:hover{text-decoration:underline}.fileName.jsx-efd6f34434320e10,.dirs.jsx-efd6f34434320e10,.changeMode.jsx-efd6f34434320e10{display:block;white-space:nowrap}.changeMode.jsx-efd6f34434320e10{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.fileName.jsx-efd6f34434320e10{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:8px;max-width:60%;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.changeMode.jsx-efd6f34434320e10{margin-left:8px}.dirs.jsx-efd6f34434320e10{-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;margin-right:auto;opacity:.7;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.changeModeBadge.jsx-efd6f34434320e10{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:#999;-webkit-border-radius:2.5px;-moz-border-radius:2.5px;border-radius:2.5px;color:#fff;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:24px;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;min-width:24px;padding:2px 4px;-webkit-transition:width.1s;-moz-transition:width.1s;-o-transition:width.1s;transition:width.1s}.changeModeBadge.jsx-efd6f34434320e10 .word.jsx-efd6f34434320e10{display:none}.changedFileItem.active.jsx-efd6f34434320e10 .changeModeBadge.jsx-efd6f34434320e10,.changedFileItem.active.jsx-efd6f34434320e10:hover .new.jsx-efd6f34434320e10,.changedFileItem.active.jsx-efd6f34434320e10:hover .modified.jsx-efd6f34434320e10,.changedFileItem.active.jsx-efd6f34434320e10:hover .deleted.jsx-efd6f34434320e10{background-color:var(--background-default);color:var(--foreground-dimmer);border:transparent}.new.jsx-efd6f34434320e10{background:var(--accent-positive-dimmest);border:1px solid var(--accent-positive-default);color:var(--accent-positive-default)}.modified.jsx-efd6f34434320e10{background:var(--accent-orange-dimmest);border:1px solid var(--accent-orange-default);color:var(--accent-orange-default)}.deleted.jsx-efd6f34434320e10{background:var(--accent-negative-dimmest);border:1px solid var(--accent-negative-default);color:var(--accent-negative-stronger)}.deleted.jsx-efd6f34434320e10:hover{cursor:not-allowed}.changedFileItem.jsx-efd6f34434320e10:hover .new.jsx-efd6f34434320e10{background:var(--accent-positive-default);color:var(--foreground-default)}.changedFileItem.jsx-efd6f34434320e10:hover .modified.jsx-efd6f34434320e10{background:var(--accent-orange-default);color:var(--foreground-default)}.changedFileItem.jsx-efd6f34434320e10:hover .deleted.jsx-efd6f34434320e10{background:var(--accent-negative-default);color:var(--foreground-default)}.renamed.jsx-efd6f34434320e10{background:var(--accent-primary-dimmer)}"}),(0,i.tZ)(ct.Z,{css:[Qe.l0.mr(4)],alt:s?"Unstage":"Stage",onClick:(m=o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s?u(r.targetPath,!0):d(r.targetPath);case 1:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=m.apply(e,t);function i(e){Pt(o,n,r,i,a,"next",e)}function a(e){Pt(o,n,r,i,a,"throw",e)}i(void 0)}))}),children:s?(0,i.tZ)(_t.Z,{}):(0,i.tZ)(We.Z,{})}),(0,i.tZ)("div",{title:t,className:"jsx-efd6f34434320e10 fileName",children:t}),(0,i.tZ)("div",{title:n,className:"jsx-efd6f34434320e10 dirs",children:n}),(0,i.tZ)("div",{className:"jsx-efd6f34434320e10 changeMode",children:(0,i.BX)("div",{className:"jsx-efd6f34434320e10 "+("changeModeBadge "+v||0),children:[(0,i.tZ)("div",{className:"jsx-efd6f34434320e10 letter",children:b}),(0,i.tZ)("div",{className:"jsx-efd6f34434320e10 word",children:b+v.substr(1)})]})})]})},Rt=function(e){var t=e.changedFiles;if(0===t.length)return null;var n="changed files or folders";if(1===t.length){var r=At(t[0])||"changed";n="".concat(r," file or folder")}return(0,i.BX)("div",{className:"jsx-4750d0de294a2262 changed-file-message",children:[(0,i.tZ)(c(),{id:"4750d0de294a2262",children:".changed-file-message.jsx-4750d0de294a2262{}.emphasized.jsx-4750d0de294a2262{color:var(--foreground-default)}p.jsx-4750d0de294a2262{color:var(--foreground-dimmer);margin-bottom:10px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}"}),(0,i.BX)("p",{className:"jsx-4750d0de294a2262",children:[(0,i.BX)("span",{className:"jsx-4750d0de294a2262 emphasized",children:[" ",t.length," "]})," ",n]})]})},Dt=function(e){var t=e.stagedFiles;if(0===t.length)return null;var n="staged files or folders";return 1===t.length&&(n="staged file or folder"),(0,i.BX)("div",{className:"jsx-c300b29256d72a99 staged-file-message",children:[(0,i.tZ)(c(),{id:"c300b29256d72a99",children:".staged-file-message.jsx-c300b29256d72a99{}.emphasized.jsx-c300b29256d72a99{color:var(--foreground-default)}p.jsx-c300b29256d72a99{color:var(--foreground-dimmer);margin-bottom:10px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}"}),(0,i.BX)("p",{className:"jsx-c300b29256d72a99",children:[(0,i.BX)("span",{className:"jsx-c300b29256d72a99 emphasized",children:[" ",t.length," "]})," ",n]})]})},Nt=function(e){var t=e.branch,n=e.commitsAhead,r="commit ahead of";return n&&n>1&&(r="commits ahead of"),(0,i.BX)("div",{className:"jsx-1ae57524add93237",children:[(0,i.tZ)(c(),{id:"1ae57524add93237",children:".emphasized.jsx-1ae57524add93237{color:var(--foreground-default)}p.jsx-1ae57524add93237{color:var(--foreground-dimmer);margin-bottom:15px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}"}),(0,i.BX)("p",{className:"jsx-1ae57524add93237",children:[(0,i.BX)("span",{className:"jsx-1ae57524add93237 emphasized",children:[" ",n," "]})," ",r," ",t]})]})},Ut=function(e){var t=e.disabled,n=e.onClick;return(0,i.tZ)(Je.ZP,{disabled:t,onClick:n,text:"Push",iconRight:(0,i.tZ)(jt.Z,{}),outlined:!0})},Bt=function(e){var t=e.activeFile,n=e.branch,r=e.changedFiles,o=e.commits,a=e.commitsAhead,s=e.commitsBehind,u=e.isLoading,d=e.remote,f=e.gitCommit,p=e.gitPush,h=e.gitAddAll,m=e.gitRestore,v=e.gitAdd,g=function(){var e=x.trim();""!==e?(f(e),w(""),Z(!1)):Z(!0)},b=function(e){O.openFile(e)},y=(0,l.useState)(""),x=y[0],w=y[1],k=(0,l.useState)(!1),S=k[0],Z=k[1],E=(0,l.useState)(!1),_=E[0],j=E[1],O=(0,tt.Z)().session,C=r.filter((function(e){return e.isStaged})),T=r.filter((function(e){return!e.isStaged})),P=C.slice(0,_?C.length:3),A=T.slice(0,_?T.length:Math.max(3-P.length,0)),I=r.length>0,R=null!==a,D=null!==s,N=!!a&&a>0,U=!!s&&s>0;return u&&!I?(0,i.tZ)(Ye.Z,{css:[Qe.l0.center,Qe.l0.mr(16),Qe.l0.mt(12),Qe.l0.overflow("hidden"),Qe.l0.backgroundColor.backgroundRoot,Qe.l0.borderRadius(2),Qe.l0.width("100%")],children:(0,i.BX)(Ye.Z,{css:[Qe.l0.borderRadius(2),Qe.l0.color.foregroundDefault,Qe.l0.p(8),Qe.l0.textAlign.center,Qe.l0.width("100%"),Qe.l0.flex.row,Qe.l0.display.block],children:["loading",(0,i.tZ)(Be.Z,{style:{fontSize:"20px",padding:"1px"}})]})}):I||N||U||!R||!D?(0,i.BX)(Ye.Z,{css:[Qe.l0.backgroundColor.backgroundDefault,Qe.l0.color.foregroundDefault,Qe.l0.mt(32),Qe.l0.width("100%"),{boxSizing:"border-box"}],children:[(0,i.tZ)(c(),{id:"7357fe5482a4d361",children:"textarea.jsx-7357fe5482a4d361{background-color:transparent;border:1px solid var(--foreground-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;color:var(--foreground-default);font-size:1em;margin-bottom:10px;padding:8px 12px;overflow-y:auto;width:100%;resize:vertical;max-height:100px}textarea.jsx-7357fe5482a4d361:hover{background-color:var(--background-root)}textarea.jsx-7357fe5482a4d361:focus{border-color:var(--accent-primary-default);background-color:var(--background-root);outline:0 none}textarea.jsx-7357fe5482a4d361::-webkit-input-placeholder{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}textarea.jsx-7357fe5482a4d361:-moz-placeholder{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}textarea.jsx-7357fe5482a4d361::-moz-placeholder{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}textarea.jsx-7357fe5482a4d361:-ms-input-placeholder{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}textarea.jsx-7357fe5482a4d361::-ms-input-placeholder{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}textarea.jsx-7357fe5482a4d361::placeholder{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis}textarea[disabled].jsx-7357fe5482a4d361{border-color:var(--foreground-dimmest);cursor:not-allowed;opacity:.5}textarea.invalid.jsx-7357fe5482a4d361{border:1px solid var(--accent-negative-default)}"}),N&&R&&(0,i.tZ)(Nt,{branch:n,commitsAhead:a}),!I&&(N||!R)&&(0,i.tZ)(Ye.Z,{css:[Qe.l0.mb(16),Qe.l0.position.relative],children:(0,i.tZ)(Ot.ZP,{placement:"right",tooltip:"You do not have a remote repository to push to. Connect a remote github repository to push.",isDisabled:Boolean(d),children:(0,i.tZ)(Ut,{disabled:!d,onClick:p})})}),I&&(0,i.BX)(Ye.Z,{css:[Qe.l0.justify.center,Qe.l0.mb(16),Qe.l0.flex.grow(1),Qe.l0.flex.shrink(0)],children:[(0,i.tZ)("textarea",{required:!0,name:"commitAuthorInput",disabled:0===r.length,placeholder:o.length>0?"What did you change?":"What did you add?",value:x,onChange:function(e){w(e.target.value),Z(""===e.target.value)},onKeyDown:function(e){(0,Et.b)(e),"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&g()},className:"jsx-7357fe5482a4d361 "+((S?"invalid":"")||"")}),(0,i.tZ)(Tt,{gitAddAll:h,gitCommit:g,gitPush:p,hasRemote:Boolean(d),hasChangedFiles:r.length>0,hasStagedFiles:C.length>0})]}),(0,i.tZ)(Dt,{stagedFiles:C}),(0,i.tZ)(Ye.Z,{css:[Qe.l0.align.center],children:P.map((function(e){return(0,i.tZ)(It,{file:e,handleChangedFileClick:b,active:Boolean(t)&&t.endsWith(e.targetPath),isStaged:e.isStaged,gitRestore:m,gitAdd:v},e.targetPath)}))}),(0,i.tZ)(Rt,{changedFiles:T}),(0,i.BX)(Ye.Z,{css:[Qe.l0.align.center],children:[A.map((function(e){return(0,i.tZ)(It,{file:e,handleChangedFileClick:b,active:Boolean(t)&&t.endsWith(e.targetPath),isStaged:e.isStaged,gitRestore:m,gitAdd:v},e.targetPath)})),r.length>3&&(0,i.tZ)(Je.ZP,{css:[Qe.l0.backgroundColor.backgroundDefault,Qe.l0.color.foregroundDefault,Qe.l0.cursor.pointer,{textDecoration:"underline"},Qe.l0.width("100%")],onClick:function(){return j(!_)},text:_?"show fewer":"show all"})]})]}):(0,i.tZ)(Ye.Z,{css:[Qe.l0.center,Qe.l0.mt(32),Qe.l0.backgroundColor.backgroundRoot,Qe.l0.borderRadius(2),Qe.l0.overflow("hidden")],children:(0,i.tZ)($e.x,{css:[Qe.l0.color.foregroundDimmer,Qe.l0.p(16),Qe.l0.textAlign.center,Qe.l0.width("100%")],children:"Your file changes will appear here."})})},zt=n(7055),Lt=n(30791),Mt=function(e){var t=e.children;return(0,i.BX)("div",{"data-testid":"git-commit-item",className:"jsx-f3445e89aaa242b3 commit-item",children:[(0,i.tZ)(c(),{id:"f3445e89aaa242b3",children:'.commit-item.jsx-f3445e89aaa242b3{display:block;position:relative;-webkit-transition:.1s all;-moz-transition:.1s all;-o-transition:.1s all;transition:.1s all}.commit-item.jsx-f3445e89aaa242b3:first-child .git-graph-shape.jsx-f3445e89aaa242b3::before{background:-webkit-linear-gradient(top,transparent,var(--foreground-dimmer)20px,var(--foreground-dimmer)100%);background:-moz-linear-gradient(top,transparent,var(--foreground-dimmer)20px,var(--foreground-dimmer)100%);background:-o-linear-gradient(top,transparent,var(--foreground-dimmer)20px,var(--foreground-dimmer)100%);background:linear-gradient(to bottom,transparent,var(--foreground-dimmer)20px,var(--foreground-dimmer)100%)}.commit-item.jsx-f3445e89aaa242b3:last-child .git-graph-shape.jsx-f3445e89aaa242b3::before{height:20px}.git-graph-shape.jsx-f3445e89aaa242b3{position:absolute;top:0;bottom:0;left:0;background-color:transparent}.git-graph-shape.jsx-f3445e89aaa242b3::before{content:"";display:block;position:absolute;top:0;bottom:0;height:-webkit-calc(100% + 10px);height:-moz-calc(100% + 10px);height:calc(100% + 10px);width:1px;left:6px;background:var(--foreground-dimmer)}.git-graph-shape.jsx-f3445e89aaa242b3::after{content:"";display:block;width:11px;height:11px;border:1px solid var(--foreground-dimmer);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background-color:var(--background-default);position:absolute;top:20px;left:0;-webkit-transition:.1s all;-moz-transition:.1s all;-o-transition:.1s all;transition:.1s all}.commit-item.jsx-f3445e89aaa242b3:hover .git-graph-shape.jsx-f3445e89aaa242b3::after{background-color:var(--foreground-default);border-color:1px solid var(--foreground-default)}'}),(0,i.tZ)("div",{className:"jsx-f3445e89aaa242b3 git-graph-shape"}),t]})},Ft=function(e){var t=e.commit,n=e.handleRevertToCommit,r=e.displayTimeSinceUnix,o=e.gitHubLink,a=e.isLoggedIn;return(0,i.BX)(Mt,{children:[(0,i.tZ)(c(),{id:"4be3def555d01168",children:'.wrapper.jsx-4be3def555d01168{border:1px solid var(--foreground-dimmer);-webkit-border-radius:2.5px;-moz-border-radius:2.5px;border-radius:2.5px;padding:10px 8px;margin:0 0 10px 24px;color:var(--foreground-dimmer)}.wrapper.jsx-4be3def555d01168:hover{background-color:var(--background-root);border:1px solid var(--foreground-dimmer);color:var(--foreground-default)}.commit-hash.jsx-4be3def555d01168{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-family:"Menlo","Monaco",monospace;margin-bottom:6px;font-size:14px}.author.jsx-4be3def555d01168{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;color:var(--foreground-default)}.author-name.jsx-4be3def555d01168,.author-email.jsx-4be3def555d01168{-webkit-box-flex:0;-webkit-flex-grow:0;-moz-box-flex:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.author-email.jsx-4be3def555d01168{max-width:150px;margin-bottom:6px;font-size:12px;color:var(--foreground-dimmer)}.commit-hash.jsx-4be3def555d01168{color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:12px}button.jsx-4be3def555d01168,.github-link.jsx-4be3def555d01168{visibility:hidden}.wrapper.jsx-4be3def555d01168:hover button.jsx-4be3def555d01168,.wrapper.jsx-4be3def555d01168:hover .github-link.jsx-4be3def555d01168{visibility:visible;background:transparent;color:var(--foreground-default)}button.jsx-4be3def555d01168{cursor:pointer;padding:6px;border:1px solid transparent;-webkit-border-radius:2.5px;-moz-border-radius:2.5px;border-radius:2.5px}.github-link.jsx-4be3def555d01168{display:inline-block;height:16px;width:16px;margin-left:6px;background-color:var(--foreground-default)}'}),(0,i.BX)("div",{className:"jsx-4be3def555d01168 wrapper",children:[(0,i.tZ)(Gt,{message:t.message}),(0,i.tZ)("div",{className:"jsx-4be3def555d01168 author",children:(0,i.BX)("div",{title:"commit.authorName",className:"jsx-4be3def555d01168 author-name",children:[t.authorName," \u2022"," ",(0,zt.Z)(t.authorDate,r,{addSuffix:!0})]})}),(0,i.tZ)("div",{title:t.authorEmail,className:"jsx-4be3def555d01168 author-email",children:t.authorEmail}),(0,i.BX)("div",{title:t.hash,className:"jsx-4be3def555d01168 commit-hash",children:[t.hash.substr(0,9),null!==o&&(0,i.tZ)("a",{href:o,target:"_blank",rel:"noopener noreferer",title:"see on GitHub",className:"jsx-4be3def555d01168 github-link",children:(0,i.tZ)(De.GitHub,{})})]}),a&&(0,i.tZ)(Ze.Z,{filled:!1,border:!1,color:"orange",size:"small",onClick:function(){return n(t)},children:"revert to here"})]})]})},Gt=function(e){var t=e.message.split("\n").filter((function(e){return!!e.trim()})).map((function(e){return(0,i.tZ)("p",{children:e.replace(/:[\w\-+]+:/g,(function(e){return Lt.$M[e.slice(1,-1)]||e}))},e)})),n=(0,l.useState)(!1),r=n[0],o=n[1];return(0,i.BX)("div",{className:"jsx-1b7183bd6a42b782 commit-message",children:[(0,i.tZ)(c(),{id:"1b7183bd6a42b782",children:".commit-message.jsx-1b7183bd6a42b782{margin-bottom:10px}.commit-message p{color:var(--foreground-default);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;padding:2px}.more-link.jsx-1b7183bd6a42b782{font-size:14px}"}),r?t:t[0],r&&(0,i.tZ)("a",{href:"#",onClick:function(){return o(!1)},className:"jsx-1b7183bd6a42b782 more-link",children:"see less"},"more"),!r&&t.length>1&&(0,i.tZ)("a",{href:"#",onClick:function(){return o(!0)},className:"jsx-1b7183bd6a42b782 more-link",children:"see more"},"more")]})},Xt=function(e){var t=e.gitState,n=e.handleRevertToCommit,r=e.fetchMoreCommits,o=e.isLoggedIn,a=t.commits[t.commits.length-1],s=a&&""!==a.parentHash?(0,i.tZ)(Mt,{children:(0,i.tZ)(Ze.Z,{onClick:r,style:{margin:"8px 6px 12px 24px"},children:"load more commits"})},"loadmore"):null,u=(0,l.useState)(Date.now()),d=u[0],f=u[1];(0,l.useEffect)((function(){f(Date.now())}),[t.commits]);var p=t.commitsAhead||0;return(0,i.BX)(i.HY,{children:[t.commits.length>0&&(0,i.BX)("h2",{className:"jsx-db561386c1307398",children:[(0,i.tZ)(c(),{id:"db561386c1307398",children:"h2.jsx-db561386c1307398{color:var(--foreground-default);font-size:18px;font-weight:unset;overflow:hidden;margin:30px 0 10px 0;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;position:relative}"}),"Previous Commits"]}),(0,i.BX)("div",{className:"jsx-2305a354cfb82682 commit-list-section",children:[(0,i.tZ)(c(),{id:"2305a354cfb82682",children:".commit-list-section.jsx-2305a354cfb82682{height:100%}.commit-list-wrapper.jsx-2305a354cfb82682{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.commit-list.jsx-2305a354cfb82682{width:100%;margin-top:10px}"}),(0,i.tZ)("div",{className:"jsx-2305a354cfb82682 commit-list-wrapper",children:t.commits.length>0&&(0,i.BX)("ul",{className:"jsx-2305a354cfb82682 commit-list",children:[t.commits.map((function(e,r){return(0,i.tZ)(Ft,{handleRevertToCommit:n,commit:e,displayTimeSinceUnix:d,gitHubLink:""!==t.remote&&r>=p?(0,x.cW)(t.remote,e.hash):null,isLoggedIn:o},e.hash)})),s]})})]})]})},Wt=n(92876),Ht=n(5560),Vt=n(25675),$t=n.n(Vt),qt=n(69780),Kt=n(15866),Yt=n(37424);function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jt(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function en(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nn=function(e){var t=e.authToken,n=e.onClose,r=e.pud,a=e.successHandler,c=e.wid,d=(0,Yt.H)(),f=(0,Ht.Z)(),p=(0,s.Xah)({variables:{replId:f}}),m=p.data;if(p.loading)return null;if("Repl"!==(null===m||void 0===m?void 0:m.repl.__typename))return(0,i.tZ)(je.u_,{onRequestClose:n,isOpen:!0,children:(0,i.BX)(je.G7,{css:[je.l0.colWithGap(24)],children:[(0,i.tZ)(je.h4,{variant:"headerDefault",level:1,children:"Something went wrong."}),(0,i.tZ)(je.xv,{children:"Please try again later."})]})});var v=m.repl,b=tn(l.useState(!1),2),y=b[0],x=b[1],w=tn(l.useState(v.isPrivate),2),k=w[0],S=w[1],Z=tn(l.useState(null),2),E=Z[0],_=Z[1],j=(0,u.I0)(),O=(0,u.v9)((function(e){return(0,h.Z)(e,c,r,"git")})).gitState,C=(0,Ue.Y)(v.isRenamed?v.title:"",(function(e){return e&&e.length>100?{message:"* GitHub repository names cannot exceed 100 characters"}:e?void 0:{message:"* Repository name is required"}})),T=(0,Ue.Y)((v.description||"").replace(/(\r\n|\n|\r)/gm," "),(function(e){if(e&&e.length>140)return{message:"* GitHub descriptions cannot exceed 140 characters"}})),P=function(){var e,n=(e=o().mark((function e(n){var i,l,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(null),n.preventDefault(),x(!0),i=C.validate(),l=T.validate(),!i&&!l){e.next=8;break}return x(!1),e.abrupt("return");case 8:return s={name:C.value,description:T.value,private:k},O.commits.length||j(ae(c,r)),e.prev=10,e.next=13,G({token:t,repoData:s,owner:N.value,ownerType:N.type});case 13:u=e.sent,a(u.html_url),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),en(e.t0,z)?j({type:"UPDATE_GIT_STATE",wid:c,pud:r,updates:{authError:g.l4.GITHUB_CREATE}}):en(e.t0,L)?_("Another GitHub repository with the same name already exists"):(Wt.$e((function(t){t.setTag("source","git"),Wt.Tb(e.t0)})),_("Unable to create a GitHub repository"));case 20:x(!1);case 21:case"end":return e.stop()}}),e,null,[[10,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Jt(i,r,o,a,c,"next",e)}function c(e){Jt(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}(),A=!(!C.error&&!T.error),I=O.installations,R=I.find((function(e){return"User"===e.type}))||I[0],D=tn(l.useState({value:R.name,label:R.name,avatar:R.avatarUrl,type:R.type}),2),N=D[0],U=D[1],B=I.map((function(e){return{value:e.name,title:e.name,icon:(0,i.tZ)(je.G7,{css:[je.l0.mr(8)],children:(0,i.tZ)($t(),{src:e.avatarUrl,alt:"".concat(e.name,"'s profile photo"),layout:"fixed",width:16,height:16,css:[je.l0.borderRadius(8)]})})}}));return(0,i.tZ)(je.u_,{onRequestClose:n,isOpen:!0,children:(0,i.tZ)("form",{onSubmit:P,style:{opacity:y?.6:1},autoComplete:"off",children:(0,i.BX)(je.G7,{css:[je.l0.colWithGap(24)],children:[(0,i.tZ)(je.h4,{variant:"headerDefault",level:1,children:"Create a new GitHub repository"}),(0,i.tZ)(je.xv,{multiline:!0,children:"You can always edit this information on GitHub."}),(0,i.BX)(je.G7,{css:[je.l0.rowWithGap(8),je.l0.align.center],children:[(0,i.BX)(je.G7,{css:[je.l0.colWithGap(4)],children:[(0,i.tZ)("label",{htmlFor:d("owner"),children:(0,i.tZ)(je.xv,{color:"dimmer",variant:"small",children:"Owner"})}),(0,i.tZ)(je.Ph,{items:B,initialSelectedItem:B.length?B[0]:void 0,placeholder:"Select a user",disabled:I.length<=1||y,onChange:function(e){U(e)},css:[je.l0.height(48),je.l0.flex.grow(1),{flexBasis:"50%"},je.l0.minWidth(225)],id:d("owner")})]}),(0,i.tZ)("span",{className:"slash",css:[je.l0.fontSize(20),je.l0.mt(16)],children:"/"}),(0,i.BX)(je.G7,{css:[je.l0.colWithGap(4),{flexShrink:1}],children:[(0,i.tZ)("label",{htmlFor:d("name"),children:(0,i.tZ)(je.xv,{color:"dimmer",variant:"small",children:"Title"})}),(0,i.tZ)(je.G7,{css:[je.l0.height(35)],children:(0,i.tZ)(je.II,{name:"title",placeholder:"Name your repo",disabled:y,value:C.value,onChange:function(e){C.setValue(e.currentTarget.value),_(null)},onFocus:function(e){return e.target.select()},onBlur:C.handleBlur,css:[{flexBasis:"50%"},je.l0.minWidth(225)],id:d("name")})}),C.error?(0,i.tZ)(je.xv,{variant:"small",css:[je.l0.color.accentNegativeStronger],multiline:!0,children:C.error.message}):null]})]}),(0,i.BX)(je.G7,{css:[je.l0.colWithGap(8)],children:[(0,i.BX)(je.G7,{css:[je.l0.colWithGap(4)],children:[(0,i.tZ)("label",{htmlFor:d("description"),children:(0,i.tZ)(je.xv,{color:"dimmer",variant:"small",children:"Repo description (optional)"})}),(0,i.tZ)(je.B,{name:"description",value:T.value,disabled:y,placeholder:T.value||"What does this repo do?",onChange:function(e){T.setValue(e.target.value),_(null)},onBlur:T.handleBlur,css:[je.l0.minHeight(64),je.l0.maxHeight(96),{resize:"vertical"}],id:d("description")})]}),T.error?(0,i.tZ)(je.xv,{variant:"small",css:[je.l0.color.accentNegativeStronger],children:T.error.message}):null]}),(0,i.BX)(je.G7,{css:[je.l0.colWithGap(8)],children:[(0,i.BX)(je.G7,{css:[je.l0.colWithGap(4)],children:[(0,i.tZ)("label",{htmlFor:d("github-privacy"),children:(0,i.tZ)(je.xv,{color:"dimmer",variant:"small",children:"GitHub privacy"})}),(0,i.BX)(je.hE,{name:d("github-privacy"),value:(!k).toString(),onChange:function(e){return S("true"!==e.target.value)},row:!0,stretch:!0,primary:!0,disabled:y,children:[(0,i.tZ)(je.rK,{id:d("github-repo-creation-modal-true"),value:"true",text:"Public",icon:(0,i.tZ)(qt.Z,{})}),(0,i.tZ)(je.rK,{id:d("github-repo-creation-modal-false"),value:"false",text:"Private",icon:(0,i.tZ)(Kt.Z,{})})]})]}),(0,i.tZ)(je.xv,{css:[je.l0.color.foregroundDimmer],children:(k?"You choose who can see this repo":"Anyone can see this repo")+", and you choose who can commit."})]}),(0,i.BX)(je.G7,{css:[je.l0.rowWithGap(12),je.l0.justify.end],children:[(0,i.tZ)(je.zx,{disabled:y,"data-testid":"git-confirm-github-repo",text:"Cancel",onClick:n}),(0,i.tZ)(je.zx,{colorway:"primary",disabled:y||A,type:"submit","data-testid":"git-confirm-github-repo",text:y?"Creating repository...":"Create repository",iconLeft:(0,i.tZ)(We.Z,{})})]}),E&&(0,i.BX)(je.xv,{multiline:!0,css:[je.l0.color.accentNegativeStronger],children:[E,(0,i.tZ)("br",{}),"Let us know if there is an issue by opening up the sidebar and submitting a ticket via the get help button."]})]})})})};function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function on(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function an(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){on(i,r,o,a,c,"next",e)}function c(e){on(i,r,o,a,c,"throw",e)}a(void 0)}))}}function cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(e){var t=e.wid,n=e.pud,r=e.gitState,o=(0,u.I0)(),a=function(){o({type:"UPDATE_GIT_STATE",wid:t,pud:n,updates:{hasConflictsWithFetchedRemote:!1}})},s=cn(l.useState(null),2),d=s[0],f=s[1],p=cn(l.useState(!0),2),h=p[0],m=p[1],v="Confirm",g=["conflictChoices"];return"repl"===d?(g.push("chosen-repl"),v="Confirm keep Replit"):"remote"===d&&(g.push("chosen-remote"),v="Confirm overwrite from GitHub"),h||g.push("invalid"),(0,i.BX)(Le.Z,{isOpen:!0,onRequestClose:a,children:[(0,i.tZ)(c(),{id:"1c46516bcb7b3a47",children:".resolveConflictModal.jsx-1c46516bcb7b3a47{max-width:600px;padding:20px 24px;background:var(--background-default);color:var(--foreground-default)}h2.jsx-1c46516bcb7b3a47{margin-bottom:16px}p.jsx-1c46516bcb7b3a47{margin-bottom:24px;line-height:1.4em}.conflictChoices.jsx-1c46516bcb7b3a47{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.conflictPreference.jsx-1c46516bcb7b3a47{width:48%;border:1px solid var(--foreground-default);cursor:pointer;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;overflow:hidden;-webkit-transition:-webkit-transform.2s;-moz-transition:-moz-transform.2s;-o-transition:-o-transform.2s;transition:-webkit-transform.2s;transition:-moz-transform.2s;transition:-o-transform.2s;transition:transform.2s}.conflictPreference.jsx-1c46516bcb7b3a47:hover{-webkit-transform:translate(0,-3px);-moz-transform:translate(0,-3px);-ms-transform:translate(0,-3px);-o-transform:translate(0,-3px);transform:translate(0,-3px)}.conflictPreference.jsx-1c46516bcb7b3a47 .header.jsx-1c46516bcb7b3a47{padding:8px 12px;font-weight:bold;background:var(--background-root)}.conflictPreference.jsx-1c46516bcb7b3a47 .body.jsx-1c46516bcb7b3a47{padding:8px 12px;line-height:1.4em}.chosen-repl.jsx-1c46516bcb7b3a47 .replPreference.jsx-1c46516bcb7b3a47 .header.jsx-1c46516bcb7b3a47,.chosen-remote.jsx-1c46516bcb7b3a47 .remotePreference.jsx-1c46516bcb7b3a47 .header.jsx-1c46516bcb7b3a47{color:var(--background-default);background:var(--foreground-default)}.chosen-repl.jsx-1c46516bcb7b3a47 .remotePreference.jsx-1c46516bcb7b3a47,.chosen-remote.jsx-1c46516bcb7b3a47 .replPreference.jsx-1c46516bcb7b3a47{border-color:var(--foreground-dimmer)}.buttonGroup.jsx-1c46516bcb7b3a47{margin-top:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}"}),(0,i.BX)("div",{className:"jsx-1c46516bcb7b3a47 resolveConflictModal",children:[(0,i.tZ)("h2",{className:"jsx-1c46516bcb7b3a47",children:"Conflicting changes"}),(0,i.BX)("p",{className:"jsx-1c46516bcb7b3a47",children:["There are changes from the remote (",(0,i.tZ)("a",{href:r.remote,target:"_blank",rel:"nofererer noopener",className:"jsx-1c46516bcb7b3a47",children:r.remote}),") that have been made since your changes on Replit that conflict with each other. Which version would you like to keep?"]}),(0,i.BX)("div",{className:"jsx-1c46516bcb7b3a47 "+(g.join(" ")||""),children:[(0,i.BX)("div",{onClick:function(){return f("remote")},className:"jsx-1c46516bcb7b3a47 remotePreference conflictPreference",children:[(0,i.tZ)("div",{className:"jsx-1c46516bcb7b3a47 header",children:"Keep version on GitHub"}),(0,i.tZ)("div",{className:"jsx-1c46516bcb7b3a47 body",children:"Permanently delete any changes in your Repl that are not on GitHub."})]}),(0,i.BX)("div",{onClick:function(){return f("repl")},className:"jsx-1c46516bcb7b3a47 replPreference conflictPreference",children:[(0,i.tZ)("div",{className:"jsx-1c46516bcb7b3a47 header",children:"Keep version on Replit"}),(0,i.tZ)("div",{className:"jsx-1c46516bcb7b3a47 body",children:"Permanently delete any changes in your GitHub repository that are not on Replit"})]})]}),(0,i.BX)("div",{className:"jsx-1c46516bcb7b3a47 buttonGroup",children:[(0,i.tZ)(Ze.Z,{style:{marginLeft:"8px"},onClick:a,children:"Cancel"}),(0,i.tZ)(Ze.Z,{color:"negative",style:{marginLeft:"8px"},onClick:function(){null!==d?(o(re({write:!0,prefer:d,wid:t,pud:n})),a()):m(!1)},children:v})]})]})]})}function sn(e){var t=e.actionDescription,n=e.onConfirm,r=e.onCancel,o={marginLeft:8};return(0,i.BX)("div",{className:"jsx-a6b618bf6ea164ac gitRevertConfirmModal",children:[(0,i.tZ)(c(),{id:"a6b618bf6ea164ac",children:".gitRevertConfirmModal.jsx-a6b618bf6ea164ac{max-width:600px;padding:20px 24px;background:var(--background-default);color:var(--foreground-default)}h2.jsx-a6b618bf6ea164ac{margin-bottom:16px}p.jsx-a6b618bf6ea164ac{margin-bottom:24px;line-height:1.4em}.buttonGroup.jsx-a6b618bf6ea164ac{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"}),(0,i.tZ)("h2",{className:"jsx-a6b618bf6ea164ac",children:"Overwrite existing changes?"}),(0,i.BX)("p",{className:"jsx-a6b618bf6ea164ac",children:["You have some changes that are not committed yet. ",t," ","will overwrite any un-committed changes. Overwrite and continue?"]}),(0,i.BX)("div",{className:"jsx-a6b618bf6ea164ac buttonGroup",children:[(0,i.tZ)(Ze.Z,{style:o,onClick:r,autoFocus:!0,children:"Cancel"}),(0,i.tZ)(Ze.Z,{color:"negative",style:o,onClick:n,children:"Overwrite and continue"})]})]})}var un=function(e){var t=e.wid,n=e.pud,r=e.isLoading,a=e.isNarrow,s=e.currentUser,d=e.refetchUser,f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.history,o=void 0!==r&&r,i=e.write,a=void 0!==i&&i,c=e.persist,l=void 0!==c&&c;m(re({history:o,write:a,persist:l,wid:t,pud:n}))},p=function(e,r){return m(ne({cmd:e,args:r,wid:t,pud:n}))},m=(0,u.I0)(),b=(0,Ee.Z)(),y=cn((0,h.J)(t,n,"git"),1)[0].gitState,x=y.hasConflictsWithFetchedRemote&&(0,i.tZ)(ln,{wid:t,pud:n,gitState:y}),w=cn(l.useState(null),2),k=w[0],S=w[1],Z=null!==k&&(0,i.tZ)(Le.Z,{isOpen:!0,onRequestClose:function(){return S(null)},children:(0,i.tZ)(sn,{actionDescription:"Reverting to this previous version",onConfirm:an(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(null),p(v.y6),p(v.CU,[k.hash]),f({persist:!0});case 4:case"end":return e.stop()}}),e)}))),onCancel:function(){return S(null)}})}),E=cn(l.useState(null),2),_=E[0],j=E[1],O=null!==_&&(0,i.tZ)(Le.Z,{isOpen:!0,onRequestClose:function(){return j(null)},children:(0,i.tZ)(sn,{actionDescription:"Checking out branch ".concat(_),onConfirm:an(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(null),p(v.y6),e.next=4,p(v.JE,[_]);case 4:f({persist:!0});case 5:case"end":return e.stop()}}),e)}))),onCancel:function(){return j(null)}})});function C(){return(C=an(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,$.j)($.U3.VERSION_CONTROL_FEATURE_USED,{action:"reverted"}),!(y.changedFiles.length>0)){e.next=4;break}return S(t),e.abrupt("return");case 4:p(v.CU,[t.hash]),f({persist:!0});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=an(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==y.branch){e.next=2;break}return e.abrupt("return");case 2:if((0,$.j)($.U3.VERSION_CONTROL_FEATURE_USED,{action:"checkedOut"}),!(y.changedFiles.length>0&&y.branches.includes(t))){e.next=6;break}return j(t),e.abrupt("return");case 6:return e.next=8,p(v.JE,[t]);case 8:f({persist:!0});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=cn(l.useState(!1),2),A=P[0],I=P[1];return(0,i.BX)(i.HY,{children:[s?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Zt,{gitState:y,isLoading:r,pull:function(){(0,$.j)($.U3.VERSION_CONTROL_FEATURE_USED,{action:"pulled"}),f({history:!0})},setGithubCreationModalOpen:function(){y.remoteToken&&y.installations.length>0?I(!0):m({type:"UPDATE_GIT_STATE",wid:t,pud:n,updates:{authError:g.l4.GITHUB_GET_INFO}})},wid:t,pud:n}),(0,i.tZ)(He,{isLoading:r,gitState:y,wid:t,checkoutBranch:function(e){return T.apply(this,arguments)},isNarrow:a}),(0,i.tZ)(Bt,{branch:y.branch,changedFiles:y.changedFiles,commits:y.commits,isLoading:r,commitsAhead:y.commitsAhead,commitsBehind:y.commitsBehind,activeFile:b||"",remote:y.remote,gitAddAll:function(){p(v.Hl)},gitCommit:function(){var e=an(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,$.j)($.U3.VERSION_CONTROL_FEATURE_USED,{action:"committed"}),e.next=3,p(v.th,[t,s]);case 3:f({persist:!0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gitPush:function(){f({write:!0})},gitRestore:function(){var e=an(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(v.sh,[t,n]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),gitAdd:function(){var e=an(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(v.N2,[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]}):(0,i.BX)("div",{className:"jsx-d687cb3bccb0e01e sign-up",children:[(0,i.tZ)("a",{href:"/signup",className:"jsx-d687cb3bccb0e01e",children:" create an account"}),(0,i.tZ)("div",{className:"jsx-d687cb3bccb0e01e",children:"to use version control with Replit!"})]}),(0,i.tZ)(Xt,{gitState:y,handleRevertToCommit:function(e){return C.apply(this,arguments)},fetchMoreCommits:function(){y.remote&&p(v.he,[!0]),p(v.cM,[!0])},isLoggedIn:Boolean(s)}),Z,O,x,y.authError!==g.l4.NONE&&(y.authError!==g.l4.FETCH||y.remote)&&(0,i.tZ)(Ie,{wid:t,pud:n,repoId:y.repoId,ownerId:y.ownerId,authError:y.authError,onAuth:d}),A&&(0,i.tZ)(nn,{authToken:y.remoteToken,onClose:function(){return I(!1)},successHandler:function(e){m(function(e){var t=e.remote,n=e.wid,r=e.pud;return function(){var e=Q(o().mark((function e(i){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,t){return i(ne({cmd:e,args:t,wid:n,pud:r}))},e.next=4,a(v.M7,[t]);case 4:return e.next=6,a(v.LO);case 6:return e.next=8,a(v.VF);case 8:return e.next=10,i({type:"GITHUB_REPOSITORY_CREATED",wid:n,pud:r});case 10:return e.next=12,i(re({wid:n,pud:r,persist:!0}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({wid:t,pud:n,remote:e})),I(!1)},wid:t,pud:n}),(0,i.tZ)(c(),{id:"d687cb3bccb0e01e",children:".sign-up.jsx-d687cb3bccb0e01e{padding:10px;text-align:center}"})]})},dn=n(55435),fn=n(33398),pn=function(e){var t=e.onInit,n=e.isLoggedIn;return(0,i.BX)(je.G7,{css:[je.l0.colWithGap(32),je.l0.justify.spaceBetween,je.l0.align.center,je.l0.justify.center,je.l0.maxWidth(200),je.l0.pt(16),{margin:"0 auto"}],children:[(0,i.BX)(je.G7,{css:[je.l0.colWithGap(16)],children:[(0,i.tZ)(je.G7,{css:[je.l0.flex.column,je.l0.align.center],children:(0,i.BX)(je.xv,{multiline:!0,children:["Track and rollback changes to your Repl."," ",(0,i.tZ)("a",{href:"https://docs.replit.com/programming-ide/git-with-replit",target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.preventDefault(),window.open(e.target.href,"_blank")},children:"Learn more here."})]})}),(0,i.tZ)(je.G7,{children:n?(0,i.BX)(je.G7,{css:[je.l0.colWithGap(8),{width:"100%"}],children:[(0,i.tZ)(je.zx,{colorway:"primary",onClick:t,text:"Create a git repo",iconLeft:(0,i.tZ)(We.Z,{})}),(0,i.tZ)(dn.Z,{activeTab:fn.m.GitHub,children:(0,i.tZ)(je.zx,{text:"Existing git repo?",outlined:!0})})]}):(0,i.BX)(je.G7,{children:[(0,i.tZ)("a",{href:"/signup",children:"Create an account"})," to use version control with Replit!"]})})]}),(0,i.tZ)(je.G7,{css:[je.l0.maxWidth(200)],children:(0,i.tZ)("img",{src:"/public/images/gitart.png",alt:"Robot lifting C+ box with git octocat using winch"})})]})},hn=n(3609);function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vn(e){return function(e){if(Array.isArray(e))return mn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gn=function(e){var t=e.wid,n=e.pud,r=e.badState,o=e.remote,a=(0,tt.Z)().container,c=(0,u.I0)(),l=function(){switch(r){case g.$U.NoMergeBase:return(0,i.BX)($e.x,{multiline:!0,children:["We couldn\u2019t find commits in common with that GitHub repository. Try"," ",(0,i.tZ)("a",{href:"/github/"+o,target:"_blank",rel:"noreferrer noopener",children:"importing the repo"})," ","into a new Repl instead, or connecting the remote via the Git sidebar again."]});case g.$U.AuthFetchError:return(0,i.BX)($e.x,{multiline:!0,children:["We couldn\u2019t find that repository on GitHub. Try connecting your GitHub account in your"," ",(0,i.tZ)("a",{href:"/account",target:"_blank",rel:"noreferrer noopener",children:"Account Settings"}),"."]});case g.$U.IndexFilesCorrupted:return(0,i.tZ)($e.x,{multiline:!0,children:"Your Git index files were corrupted. Try resetting your index file to restore your repository."});default:return(0,i.tZ)($e.x,{multiline:!0,children:"We ran into an error trying to sync your repository."})}},s=function(){c({type:"UPDATE_GIT_STATE",wid:t,pud:n,updates:{remote:"",commitsAhead:0,commitsBehind:0,repoId:null,ownerId:null,badState:g.$U.None,authError:g.l4.NONE}})};return(0,i.BX)(Ye.Z,{css:[Qe.l0.p(8),Qe.l0.colWithGap(8)],children:[(0,i.tZ)($e.x,{variant:"subheadDefault",multiline:!0,children:"There\u2019s something wrong with this repository..."}),(0,i.tZ)(l,{}),r!==g.$U.IndexFilesCorrupted?(0,i.BX)(i.HY,{children:[(0,i.tZ)($e.x,{multiline:!0,children:"You can also try disconnecting this repository from GitHub and trying again."}),(0,i.tZ)(Je.zx,{colorway:"negative",text:"Disconnect repo",iconLeft:(0,i.tZ)(Ke.Z,{}),css:[Qe.l0.mt(12),Qe.l0.mb(16)],onClick:function(){var e;(e=a).exec.apply(e,vn(v.rO.format(g.Xe))),s()}})]}):(0,i.tZ)(Je.zx,{colorway:"negative",text:"Reset index",iconLeft:(0,i.tZ)(hn.Z,{}),css:[Qe.l0.mt(12),Qe.l0.mb(16)],onClick:function(){a.exec("bash","-c","rm .git/index; git reset HEAD ."),s()}}),(0,i.tZ)($t(),{src:"/images/gitart.png",alt:"GitHub integration decoration art.",layout:"responsive",width:1694,height:3543,css:[Qe.l0.maxWidth(200)]})]})},bn=n(40079),yn=n(11542),xn=n(46846),wn=n(98772);function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sn(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function Zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var En=(0,wn.Z)(function(){var e,t=(e=o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Sn(i,r,o,a,c,"next",e)}function c(e){Sn(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),{wait:1e3});function _n(e){var t=e.wid,n=e.pud,r=e.style,a=e.dimensions,d=(0,u.I0)(),b=(0,l.useState)(!1),y=b[0],x=b[1],w=(0,tt.Z)(),k=w.container,S=w.fs,Z=Zn((0,h.J)(t,n,"git"),1)[0],E=Z.gitState,_=Z.isLoading,j=Z.isCloneInProgress,O=(0,s.X27)({onCompleted:function(e){var r,o,i,a,c;if("GitHubInfo"===(null===e||void 0===e||null===(r=e.currentUser)||void 0===r||null===(o=r.gitHubInfo)||void 0===o?void 0:o.__typename)){var l=e.currentUser.gitHubInfo;l.accessToken&&d({type:"UPDATE_GIT_STATE",updates:{remoteToken:l.accessToken,gitHubName:null===(i=l.userInfo)||void 0===i?void 0:i.name,gitHubEmail:null===(a=l.userInfo)||void 0===a?void 0:a.email,gitHubAvatarUrl:null===(c=l.userInfo)||void 0===c?void 0:c.avatarUrl,installations:l.installations},wid:t,pud:n})}}}),C=O.data,T=O.loading,P=O.refetch;(0,l.useEffect)((function(){if(a){var e=window.document.getElementById(bn.b);if(!e)throw new Error("Couldn't find workspace root");var t=a.w,n=e.clientWidth*(t.pc/100)+t.px;n<=210&&!y?x(!0):n>210&&y&&x(!1)}}),[a,y]);var A=Zn(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,l.useState)(t),r=n[0],o=n[1],i=(0,l.useRef)();return(0,l.useEffect)((function(){return i.current&&clearTimeout(i.current),i.current=setTimeout((function(){o(e)}),250),function(){i.current&&clearTimeout(i.current)}}),[e]),[r||e,o]}(_||T,!0),2),I=A[0],R=A[1];(0,l.useEffect)((function(){return j||T||(R(!0),d(re({history:!1,write:!1,persist:!1,wid:t,pud:n}))),d({type:"SET_GIT_SIDEBAR_VISIBILITY",isSidebarVisible:!0,wid:t}),function(){d({type:"SET_GIT_SIDEBAR_VISIBILITY",isSidebarVisible:!1,wid:t})}}),[T,k]),S.onStatusChange((function(e){e===xn.kO.Clean&&En((function(){d(re({history:!1,write:!1,persist:!1,wid:t,pud:n}))}))}));var D=null;return D=T||I&&!E.isInitialized?(0,i.tZ)(m.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}}):E.remote||E.isInitialized?E.badState!==g.$U.None?(0,i.tZ)(gn,{wid:t,pud:n,badState:E.badState,remote:E.remote}):(0,i.tZ)(un,{wid:t,pud:n,isLoading:I,isNarrow:y,currentUser:null===C||void 0===C?void 0:C.currentUser,refetchUser:P}):(0,i.tZ)(pn,{isLoggedIn:Boolean(null===C||void 0===C?void 0:C.currentUser),onInit:function(){d(function(e,t){return function(){var n=Q(o().mark((function n(r){var i,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=function(n,o){return r(ne({cmd:n,args:o,wid:e,pud:t}))},(0,$.j)($.U3.VERSION_CONTROL_FEATURE_USED,{action:"initialized"}),n.next=5,ee();case 5:return a=n.sent,n.next=8,i(v.D6,[a]);case 8:return n.next=10,r(ie(e,t));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}),(0,i.BX)("div",{style:r,className:"jsx-c53b9b484ed45518 gitSidebar",children:[(0,i.tZ)(c(),{id:"c53b9b484ed45518",children:".gitSidebar.jsx-c53b9b484ed45518{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%;min-width:150px;padding:var(--space-8);background-color:var(--background-default);color:var(--foreground-default);-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4)}.gitSidebar-header.jsx-c53b9b484ed45518{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative;height:var(--space-32);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.git-content-scroll-wrapper.jsx-c53b9b484ed45518{width:100%;height:100%;overflow-y:auto;overflow-x:hidden}.git-content-wrapper.jsx-c53b9b484ed45518{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:relative;width:100%}.git-content-wrapper.is-loading.jsx-c53b9b484ed45518{opacity:.5;pointer-events:none}"}),(0,i.tZ)("div",{className:"jsx-c53b9b484ed45518 gitSidebar-header",children:(0,i.tZ)(p.Z,{truncate:!0,level:4,children:"Version control"})}),(0,i.tZ)(yn.Z,{height:1}),(0,i.tZ)("div",{className:"jsx-c53b9b484ed45518 git-content-scroll-wrapper",children:(0,i.tZ)("div",{className:"jsx-c53b9b484ed45518 "+(f()("git-content-wrapper",{"is-loading":I&&E.badState===g.$U.None})||""),children:D})}),(0,i.tZ)(jn,{})]})}function jn(){return(0,i.BX)("div",{className:"jsx-ea99c912d83a4006 gitSidebar-footer",children:[(0,i.tZ)(c(),{id:"ea99c912d83a4006",children:".gitSidebar-footer.jsx-ea99c912d83a4006{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:6px 12px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%;background-color:var(--background-root);color:var(--foreground-dimmer);font-size:13px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.gitSidebar-footer.jsx-ea99c912d83a4006 .feedbackLink.jsx-ea99c912d83a4006{text-align:right}"}),(0,i.tZ)("a",{href:"https://replit.com/talk/announcements/Feedback-for-git-support-the-new-GitHub-integration/21631",target:"_blank",rel:"noopener",className:"jsx-ea99c912d83a4006 feedbackLink",children:"Send feedback"})]})}},80357:function(e,t,n){var r,o,i;n.d(t,{$U:function(){return i},Xe:function(){return a},l4:function(){return o},pD:function(){return r}}),function(e){e[e.UNTRACKED=0]="UNTRACKED",e[e.MODIFIED=1]="MODIFIED",e[e.MOVED=2]="MOVED",e[e.DELETED=3]="DELETED"}(r||(r={})),function(e){e[e.NONE=0]="NONE",e[e.PUSH=1]="PUSH",e[e.CLONE=2]="CLONE",e[e.FETCH=3]="FETCH",e[e.GITHUB_CREATE=4]="GITHUB_CREATE",e[e.GITHUB_GET_INFO=5]="GITHUB_GET_INFO"}(o||(o={})),function(e){e.None="NONE",e.NoMergeBase="NO_MERGE_BASE",e.AuthFetchError="AUTH_FETCH_ERROR",e.IndexFilesCorrupted="INDEX_FILES_CORRUPTED"}(i||(i={}));var a={isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:o.NONE,badState:i.None,remote:"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null}},91861:function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){c=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){if(!e)return"";var t=o(a(e),2),n=t[0],r=t[1];return n&&r?"".concat(n,"/").concat(r):e}function a(e){if(!e)return["",""];var t=e.match(/^https:\/\/github\.com\/(.+)\/(.+)/);if(null!==t){var n=o(t,3);return[n[1],n[2]]}return["",""]}function c(e,t){return"".concat(e,"/commit/").concat(t)}function l(e){return e.startsWith("remotes/origin/HEAD ->")?e.split("/").reverse()[0]:(e.startsWith("remotes/origin/")&&(e=e.replace("remotes/origin/","")),e.includes(" -> ")&&(e=e.split(" -> ")[0]),e.trim())}n.d(t,{JE:function(){return a},cW:function(){return c},iF:function(){return l},mJ:function(){return i}})},20950:function(e,t,n){n.r(t),n.d(t,{Component:function(){return C},SpinnerModal:function(){return O},default:function(){return P},receiver:function(){return P},reducer:function(){return T}});var r=n(34051),o=n.n(r),i=n(35944),a=n(79547),c=n.n(a),l=(n(67294),n(78135)),s=n(52294),u=n(20657),d=n(7411),f=n(85486),p=n(70917);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}var v={animationDuration:"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"},g=(0,p.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),b=(0,p.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),y=(0,p.F4)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n"),x=function(e){var t=e.height,n=void 0===t?24:t,r=e.color,o={width:84,height:64,fill:void 0===r?"#F26207":r,rx:12};return(0,i.BX)("svg",{width:n/1.2,height:n,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.tZ)("rect",m({css:[v,{animationName:g}]},o,{x:8,y:8})),(0,i.tZ)("rect",m({css:[v,{animationName:b}]},o,{x:108,y:88})),(0,i.tZ)("rect",m({css:[v,{animationName:y}]},o,{x:8,y:168}))]})},w=n(67938),k=n(54929),S=n(3204);function Z(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Z(i,r,o,a,c,"next",e)}function c(e){Z(i,r,o,a,c,"throw",e)}a(void 0)}))}}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}var O=function(e){var t=e.reason;return(0,i.BX)(k.Z,{css:[S.l0.center,S.l0.minWidth(225),S.l0.height(225),S.l0.p(16),S.l0.color.foregroundDefault,S.l0.backgroundColor.backgroundOverlay,S.l0.zIndex(5e5),{cursor:"not-allowed"}],children:[(0,i.tZ)(x,{height:80}),(0,i.BX)(w.x,{variant:"subheadBig",css:[S.l0.mt(32)],children:[t,"..."]})]})},C=function(e){var t=e.style,n=e.wid,r=e.pud,o=(0,l.v9)((function(e){return(0,d.Z)(e,n,r,"lock")})),a=o.isLocked,s=o.showSpinner,u=o.reason;return a?s?(0,i.BX)("div",{style:t,className:"jsx-c6481388fcbd4378",children:[(0,i.tZ)(O,{reason:u}),(0,i.tZ)(c(),{id:"c6481388fcbd4378",children:"div.jsx-c6481388fcbd4378{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;bottom:0;left:0;right:0;cursor:not-allowed;background-color:rgba(0,0,0,.25);z-index:500000}"})]}):(0,i.tZ)("div",{style:t,className:"jsx-51edd2e08e15b20d",children:(0,i.tZ)(c(),{id:"51edd2e08e15b20d",children:"div.jsx-51edd2e08e15b20d{position:fixed;top:0;bottom:0;left:0;right:0;cursor:not-allowed;z-index:500000}"})}):null},T=(0,u.$)({primary:function(e,t){switch(t.type){case"LOCK_WORKSPACE":return j({},e,{showSpinner:t.showSpinner,reason:t.reason,isLocked:!0});case"UNLOCK_WORKSPACE":return j({},e,{showSpinner:!1,isLocked:!1});default:return e}},preferences:s.c});function P(e,t,n){switch(n.type){case"LOCK_WORKSPACE":return function(){var t=E(o().mark((function t(n,r){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r().workspace[e].layout,!f.Bp(i,"lock")){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n(j({wid:e,type:"UPDATE_LAYOUT"},f.$T(i,"lock","inside",["floating"])));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();case"UNLOCK_WORKSPACE":return function(){var t=E(o().mark((function t(n,r){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r().workspace[e].layout,t.next=3,n(j({wid:e,type:"UPDATE_LAYOUT"},f.Od(i,"lock")));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();default:return null}}},55912:function(e,t,n){n.d(t,{$w:function(){return d},rJ:function(){return s},wh:function(){return u}});var r=n(34051),o=n.n(r),i=n(85486);function a(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function s(e){return new Promise((function(t,n){var r=e.openChannel({service:"gcsfiles"},(function(e){if(!e.error)return e.channel.request({persistMirror:{path:"."}}).then((function(e){e.ok,r(),t()})),function(e){e.willReconnect&&r()};n(e.error)}))}))}function u(e){var t=e.wid;return function(){var e,n=(e=o().mark((function e(n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r().services.container,e.next=3,s(i);case 3:n({type:"INSERT_RUN_FLOW_PLUGIN",wid:t,pudToInsert:"config"});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,l,"next",e)}function l(e){a(i,r,o,c,l,"throw",e)}c(void 0)}))});return function(e,t){return n.apply(this,arguments)}}()}function d(e){var t=e.wid,n=e.currentPud,r=e.pudToInsert,o=e.setCurrentPud;return function(e,a){var c=a().workspace[t],s=c.layout,u=c.plugins;if(!i.e$(s,r)){var d=i.PP(s,u,"shell");if(!d)throw new Error("Expected shell path");var f=i.Il(i.Il(d));e(l({wid:t,type:"UPDATE_LAYOUT"},i.$T(s,r,"above",f)));var p=a().workspace[t].layout;n&&e(l({wid:t,type:"UPDATE_LAYOUT"},i.Od(p,n))),o(r)}}}},78411:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=new WeakMap}var t,r,o;return t=e,(r=[{key:"getHandle",value:function(e){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new Error("Only objects");var t={type:"handle",identity:e.constructor?Object.prototype.toString.call(e.constructor):Object.prototype.toString.call(e)};return this.map.set(t,e),t}},{key:"get",value:function(e){return this.map.get(e)}},{key:"safeGet",value:function(e){if(!e)throw new Error("Expected object handle to be truthy");var t=this.map.get(e);if(!t)throw new Error("Expected object handle to return object");return t}}])&&n(t.prototype,r),o&&n(t,o),e}());t.Z=r},20657:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}function i(e){"function"!==typeof e.primary&&(e.primary=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e});var t=Object.keys(e);return function(n,r){var i,a=!1,c={},l=!0,s=!1,u=void 0;try{for(var d,f=t[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;if("primary"!==p){var h=e[p],m=n?n[p]:void 0,v=h(m,r);c[p]=v,a=a||v!==m}}}catch(b){s=!0,u=b}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}n&&(i=a?o({},n,c):n);var g=e.primary(i,r);return(a=a||g!==i)?o({},c,g):n}}n.d(t,{$:function(){return i}})},7411:function(e,t,n){n.d(t,{J:function(){return i},Z:function(){return o}});var r=n(78135);function o(e,t,n,r){var o=e.workspace[t].plugins[n];if(o.type!==r)throw new Error("expected type to be "+r);return o.state}function i(e,t,n,i){var a=(0,r.v9)((function(r){return o(r,e,t,n)}),i),c=(0,r.I0)();return[a,function(n){c({type:"SET_STATE",wid:e,pud:t,state:n})}]}},52294:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}n.d(t,{U:function(){return i},c:function(){return a}});var i=n(14844).L;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;return"UPDATE_WORKSPACE_PREFERENCES"===t.type?o({},e,t.updates):e}}}]);
//# sourceMappingURL=6571-2884039d004eeb94.js.map