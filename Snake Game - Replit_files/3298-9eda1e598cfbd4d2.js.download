"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3298],{20578:function(e,r,n){n.d(r,{Z:function(){return _}});var t=n(35944),i=n(67294),a=n(56834),o=n(5560),l=n(93943),s=n(91131),u=n(33379),c=n(60210),d=n(89431),f=n(79547),m=n.n(f),p=n(72218),v=n(3204),h=n(88768),b=n(54920),g=n(5440),y=n(85060);function x(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||k(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,r){if(e){if("string"===typeof e)return x(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,r):void 0}}function j(e){var r,n,a,o,l=e.onClick,s=(0,h.r92)(),u=(0,d.Z)("flag-threads-popup-notifications"),c=i.useContext(b.Z).generalThread,f=function(e){var r=w(i.useState([]),2),n=r[0],t=r[1],a=w(i.useState(null),2),o=a[0],l=a[1],s=i.useRef(n);s.current=n;var u=i.useRef(null);return i.useEffect((function(){if(null===u.current){var e=n[0];e&&(l(e),u.current=setTimeout((function(){t(s.current.slice(1)),0===s.current.length&&l(null),u.current=null}),2500))}}),[n]),(0,y.Z)((function(){e[e.length-1]&&t(Z(n).concat([e[e.length-1]]))}),[e.length]),o}((null===c||void 0===c?void 0:c.messages)||[]),p=i.useMemo((function(){if("TextMessageContentType"!==(null===f||void 0===f?void 0:f.content.__typename))return null;var e=null===f||void 0===f?void 0:f.content.text;return e?(0,g.kW)(e,{}):null}),[f]),v=(0,h.WWj)({variables:{username:(null===f||void 0===f||null===(r=f.user)||void 0===r?void 0:r.username)||""}}).data,x=(null===v||void 0===v||null===(n=v.user)||void 0===n?void 0:n.image)||null;return u&&f&&f.user&&f.user.id!==(null===(a=s.data)||void 0===a||null===(o=a.currentUser)||void 0===o?void 0:o.id)?(0,t.BX)("div",{onClick:function(e){e.stopPropagation(),l(e)},className:"jsx-4ee14b2dec205719 message-notification",children:[x?(0,t.tZ)("img",{src:x,className:"jsx-4ee14b2dec205719 chat-message-picture"}):(0,t.tZ)("div",{className:"jsx-4ee14b2dec205719 chat-message-picture"}),(0,t.BX)("div",{className:"jsx-4ee14b2dec205719 message",children:[(0,t.tZ)("span",{className:"jsx-4ee14b2dec205719 dimmed-text",children:f.user.username}),":"," ",(0,t.tZ)("span",{className:"jsx-4ee14b2dec205719 bold-text",children:p&&(0,t.tZ)(g.YI,{message:p})})]}),(0,t.tZ)(m(),{id:"4ee14b2dec205719",children:".message-notification.jsx-4ee14b2dec205719{background:var(--background-default);border:1px solid var(--accent-purple-default);position:absolute;right:60px;bottom:0;color:var(--foreground-default);-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;padding:3px 15px;cursor:auto;max-width:250px;width:auto;height:36px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;opacity:1;cursor:pointer;font-size:14px}.chat-message-picture.jsx-4ee14b2dec205719{min-width:24px;margin-right:10px;width:24px;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;border:1px solid transparent}.bold-text.jsx-4ee14b2dec205719{color:var(--foreground-default)}.dimmed-text.jsx-4ee14b2dec205719{color:var(--foreground-dimmest)}.message.jsx-4ee14b2dec205719{-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}"})]}):null}var I=function(e){var r=e.unreadThreadCount,n=e.onClick;return(0,t.BX)("div",{onClick:n,css:{backgroundColor:v.TV.blurpleDefault},className:m().dynamic([["9525eb8c09ba8e13",[v.TV.borderRadius8,v.TV.borderRadius8]]])+" floating-icon-wrapper",children:[(0,t.tZ)(j,{onClick:n}),(0,t.tZ)("div",{className:m().dynamic([["9525eb8c09ba8e13",[v.TV.borderRadius8,v.TV.borderRadius8]]])+" chat-icon-wrapper",children:(0,t.tZ)(p.Z,{})}),r>0&&(0,t.tZ)("div",{className:m().dynamic([["9525eb8c09ba8e13",[v.TV.borderRadius8,v.TV.borderRadius8]]])+" unread-icon"}),(0,t.tZ)(m(),{id:"9525eb8c09ba8e13",dynamic:[v.TV.borderRadius8,v.TV.borderRadius8],children:".floating-icon-wrapper.__jsx-style-dynamic-selector{height:36px;width:50px;-webkit-border-radius:".concat(v.TV.borderRadius8," 0 0 ").concat(v.TV.borderRadius8,";-moz-border-radius:").concat(v.TV.borderRadius8," 0 0 ").concat(v.TV.borderRadius8,";border-radius:").concat(v.TV.borderRadius8," 0 0 ").concat(v.TV.borderRadius8,";position:absolute;right:0px;bottom:var(--space-16);z-index:10;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;opacity:1;-webkit-transition:300ms;-moz-transition:300ms;-o-transition:300ms;transition:300ms}.chat-icon-wrapper.__jsx-style-dynamic-selector{width:32px;height:32px;padding:5px;color:#fff}.unread-icon.__jsx-style-dynamic-selector{position:absolute;top:5px;left:12px;background:red;width:8px;height:8px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;z-index:11}")})]})};function S(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function C(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return S(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(){var e=(0,d.Z)("flag-threads-2"),r=(0,o.Z)(),n=(0,l.Z)(r,{onReceiveAnnotationUpdate:function(){}}).unreadThreadCount,i=C((0,s.KO)(u.c),2),f=i[0],m=i[1],p=function(){f||((0,a.j)(a.U3.THREADS_OPENED,{unread:Boolean(n)}),(0,a.j)(a.U3.MESSAGES_LIST_OPENED,{replId:r,context:"threads",variant:"replace-chat"})),m((function(e){return!e}))};return e?(0,t.tZ)(c.Z,{onClick:p,unreadThreadCount:n,isOpen:f}):(0,t.tZ)(I,{unreadThreadCount:n,onClick:p})}},11427:function(e,r,n){n.d(r,{Z:function(){return u}});var t=n(35944),i=(n(67294),n(534)),a=n(79635),o=n(54929),l=n(3204);function s(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function u(e){var r=function(){e.canClick&&e.onClick&&e.onClick({username:e.username,id:e.id})};return(0,t.tZ)(a.ZP,{placement:"bottom",tooltip:"Observe ".concat(e.username),children:function(n,a){return(0,t.tZ)(o.Z,function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){s(e,r,n[r])}))}return e}({},n,{innerRef:a,onClick:r,children:(0,t.tZ)(i.Z,{size:e.size||35,src:e.image,alt:e.username,css:[e.canClick&&l.l0.cursor.pointer,{transition:"all 0.2s ease",border:"2px solid "+e.color,"&:hover":{filter:"brightness(95%)",boxShadow:l.TV.shadow1}}]})}))}})}},64457:function(e,r,n){n.d(r,{e:function(){return o}});var t=n(88768),i=n(89431),a=n(5560);function o(){return function(e){var r=(0,i.Z)("flag-tutorial-pane"),n=(0,t.JBO)({variables:{replId:e}}),a=n.data,o=n.loading,l=n.error,s=o||l||"Repl"!==(null===a||void 0===a?void 0:a.repl.__typename)?null:a.repl;return{loading:o,error:l,isTutorial:r&&Boolean(null===s||void 0===s?void 0:s.isTutorial)}}((0,a.Z)())}},62867:function(e,r,n){n.d(r,{Z:function(){return l}});var t=n(50348),i=n(88768),a=n(5560),o=n(27754);function l(){var e=(0,a.Z)(),r=(0,t.Z)();(0,i.LSc)({variables:{replId:e},skip:r!==o.e.CONNECTED})}},72839:function(e,r,n){n.d(r,{Z:function(){return a}});var t=n(67294),i=n(30617);function a(){var e=(0,i.Z)(),r=e.session,n=e.presence;return t.useCallback((function(e){var t=e.username,i=e.id,a=n.getFollowedUser();if((null===a||void 0===a?void 0:a.username)!==t){n.followUser(t);var o=n.getActiveFileForUser(i),l=r.getActiveFile();o&&o!==l&&r.openFile(o)}else n.unfollowUser()}),[r,n])}},90768:function(e,r,n){n.d(r,{$q:function(){return h},Oc:function(){return y},eo:function(){return m},sc:function(){return w}});var t=n(34051),i=n.n(t),a=n(44894),o=n(88768),l=n(87152),s=n(56834);function u(e,r,n,t,i,a,o){try{var l=e[a](o),s=l.value}catch(u){return void n(u)}l.done?r(s):Promise.resolve(s).then(t,i)}function c(e){return function(){var r=this,n=arguments;return new Promise((function(t,i){var a=e.apply(r,n);function o(e){u(a,t,i,o,l,"next",e)}function l(e){u(a,t,i,o,l,"throw",e)}o(void 0)}))}}function d(e){return f.apply(this,arguments)}function f(){return(f=c(i().mark((function e(r){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l.l){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,l.l.query({query:o.vce,variables:{username:r}});case 5:return t=e.sent.data,e.abrupt("return",null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.image);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return"Notification"in window?"true"===a.Z.get(g,"string")?"dismissed":window.Notification.permission:"denied"}function p(){return v.apply(this,arguments)}function v(){return(v=c(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,window.Notification.requestPermission().then(),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e){window.Notification.requestPermission((function(r){e(r)}))})));case 7:return e.abrupt("return",window.Notification.requestPermission());case 8:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function h(){return b.apply(this,arguments)}function b(){return(b=c(i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:r=e.sent,y(!1),(0,s.j)("granted"===r?s.U3.WEB_NOTIFICATION_PERM_GRANTED:s.U3.WEB_NOTIFICATION_PERM_DENIED);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g="notifications/dismissedModal";function y(e){a.Z.set(g,String(e)),e&&(0,s.j)(s.U3.WEB_NOTIFICATION_PERM_DISMISSED_MODAL)}var x={};function w(e){return Z.apply(this,arguments)}function Z(){return(Z=c(i().mark((function e(r){var n,t,a,o,l,s,u,c,f,p,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.title,t=r.body,a=r.badge,o=r.icon,l=r.iconByUsername,s=r.tag,u=r.onClick,c=r.cacheDuration,f=void 0===c?0:c,document.hidden||!document.hasFocus()){e.next=3;break}return e.abrupt("return");case 3:if("granted"===m()){e.next=5;break}return e.abrupt("return");case 5:if(p=Date.now(),!(s in x)){e.next=9;break}if(!(x[s]+f>p)){e.next=9;break}return e.abrupt("return");case 9:if(!l){e.next=13;break}return e.next=12,d(l);case 12:o=e.sent;case 13:(v=new window.Notification(n,{body:t,badge:a||"/public/images/logo-grayscale.png",icon:o||"/public/images/icon-square.png",tag:s})).addEventListener("click",(function(){window.focus(),v.close()})),u&&v.addEventListener("click",u),x[s]=p;case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},60789:function(e,r,n){n.d(r,{Z:function(){return _}});var t=n(35944),i=n(79547),a=n.n(i),o=n(67294),l=n(40425),s=n(8996),u=n(44054),c=n(94184),d=n.n(c),f=n(17632),m=n(53985),p=n(56834),v=n(88768),h=n(51281),b=n(35060),g=n(39155),y=n(38880),x=n(95757),w=n(64711);function Z(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function k(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||I(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,r){if(e){if("string"===typeof e)return Z(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,r):void 0}}function S(e){var r=e.replId,n=(0,v.X6F)({variables:{replId:r},pollInterval:8e3}),i=n.data,u=n.loading,c=(0,y.Z)(),Z=c.showConfirm,I=c.showError,S=k(o.useState(!1),2),C=S[0],_=S[1],A=k((0,v.QNh)({onCompleted:function(e){var n,t=null===(n=e.addMultiplayerUser.user)||void 0===n?void 0:n.username;t&&((0,p.j)(p.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"username"}),Z("Added @".concat(t)))}}),2),E=A[0],O=A[1],T=k((0,v.GkG)({onError:function(e){return I(e.message)},onCompleted:function(e){var n,t=null===(n=e.removeMultiplayerUser.user)||void 0===n?void 0:n.username;t&&((0,p.j)(p.U3.MP2_REMOVED_USER_PERMISSION,{replId:r,username:t}),Z("".concat(t," removed")))}}),2),U=T[0],R=T[1],N=k((0,v.SvR)({update:function(e,n){var t,i=null===(t=n.data)||void 0===t?void 0:t.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var a=i.email;return(0,p.j)(p.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"}),void Z("Invited ".concat(a," via email"))}if("ReplPermission"===i.__typename){var o;e.modify({id:e.identify({__typename:"Repl",id:r}),fields:{permissions:function(r){var n=e.writeFragment({data:i,fragment:v.L13});return j(r).concat([n])}}});var l=null===(o=i.user)||void 0===o?void 0:o.username;if(!l)return;(0,p.j)(p.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"}),Z("Invited @".concat(l))}}else I(i.message)}}),2),P=N[0],B=N[1],M=k((0,v.Ejz)({onError:function(e){return I(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;(0,p.j)(p.U3.MP2_REMOVED_EMAIL_INVITE,{replId:r,email:n}),Z("invite for ".concat(n," deleted"))}}else I(e.deleteMultiplayerInvite.message)}}),2),D=M[0],z=M[1];o.useEffect((function(){var e=O.error||B.error;e&&(e.message.includes("reached the limit")?_(!0):I(e.message))}),[O.error,B.error,I]);var X="Repl"===(null===i||void 0===i?void 0:i.repl.__typename)?i.repl:null,F=null===i||void 0===i?void 0:i.currentUser,G=null===X||void 0===X?void 0:X.permissions.reduce((function(e,r){return r.user?j(e).concat([r.user.username]):e}),[]),L=null===X||void 0===X?void 0:X.currentUserPermissions.editMultiplayers,V=Boolean(X&&!X.permissions.length&&!X.multiplayerInvites.length),W=(null===X||void 0===X?void 0:X.permissions)?X.permissions.length:null;return(0,t.BX)("div",{className:"jsx-7043475ed4bd7433 root",children:[(0,t.BX)(s.gC,{spacing:2,align:"stretch",children:[L&&G&&X?(0,t.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,t.tZ)(x.Z,{existingUsernames:G,onSubmit:function(e){!!!e.match(/.+@.+/)||B.loading?O.loading||E({variables:{username:e,replId:X.id,type:"rw"}}):P({variables:{email:e,replId:X.id,type:"rw"}})}})}):null,(0,t.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,t.BX)(l.Z,{level:5,foreground:u?3:1,children:[null!==W&&(null===F||void 0===F?void 0:F.isSubscribed)?"".concat((0,w.Z)("multiplayer",W,!0)):null,null===W||(null===F||void 0===F?void 0:F.isSubscribed)?null:"".concat(W,"/").concat(50," ").concat((0,w.Z)("multiplayer",W))," ",!u&&!(null===F||void 0===F?void 0:F.isSubscribed)&&(0,t.tZ)("a",{onClick:function(){return _(!0)},"aria-label":"Click to upgrade for unlimited invites","data-microtip-position":"top",role:"tooltip",className:"jsx-7043475ed4bd7433 info-tooltip",children:(0,t.tZ)(f.Z,{})}),u?"Loading...":null]})}),V?(0,t.tZ)("div",{className:"jsx-7043475ed4bd7433 empty-list",children:(0,t.BX)(s.Ug,{align:"center",justify:"center",children:[(0,t.tZ)("div",{className:"jsx-7043475ed4bd7433",children:"No one is here"}),(0,t.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,t.tZ)("img",{src:"/public/images/rainy-computer.png",className:"jsx-7043475ed4bd7433"})})]})}):(0,t.BX)("div",{className:"jsx-7043475ed4bd7433 multiplayers-list",children:[null===X||void 0===X?void 0:X.permissions.map((function(e){var n=e.user,i=e.type;return n?(0,t.BX)("div",{className:"jsx-7043475ed4bd7433 "+(d()("multiplayer-item",{"is-editable":X.currentUserPermissions.editMultiplayers})||""),children:[(0,t.tZ)(g.Z,{size:"s",url:n.image}),(0,t.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[n.username," ",i===v.aQH.Rw?" (can edit)":null]}),X.currentUserPermissions.editMultiplayers?(0,t.tZ)(h.Z,{border:!1,filled:!1,"aria-label":"Remove member",role:"tooltip","data-microtip-position":"left",onClick:function(){R.loading||U({variables:{replId:r,username:n.username}})},children:(0,t.tZ)(b.Z,{size:12})}):null]},n.id):null})),null===X||void 0===X?void 0:X.multiplayerInvites.map((function(e){return(0,t.BX)("div",{className:"jsx-7043475ed4bd7433 "+(d()("multiplayer-item",{"is-editable":L})||""),children:[(0,t.tZ)(g.Z,{size:"s"}),(0,t.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[e.email," (pending)"]}),L?(0,t.tZ)(h.Z,{border:!1,filled:!1,"aria-label":"Remove email invite",role:"tooltip","data-microtip-position":"left",onClick:function(){z.loading||D({variables:{replId:r,email:e.email}})},children:(0,t.tZ)(b.Z,{size:12})}):null]},e.email)}))]})]}),(0,t.tZ)(m.Z,{isOpen:C,onClose:function(){return _(!1)},trackingInfo:{context:"workspace-multiplayer-header"}}),(0,t.tZ)(a(),{id:"7043475ed4bd7433",children:".root.jsx-7043475ed4bd7433{color:var(--foreground-default)}.multiplayers-list.jsx-7043475ed4bd7433,.empty-list.jsx-7043475ed4bd7433{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:200px}.multiplayers-list.jsx-7043475ed4bd7433{overflow-y:auto;padding:var(--space-8)0}.multiplayer-item.jsx-7043475ed4bd7433{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-4)var(--space-16);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.multiplayer-item.is-editable.jsx-7043475ed4bd7433{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-7043475ed4bd7433:hover{background-color:var(--background-root)}.label.jsx-7043475ed4bd7433{margin-right:auto;padding-left:var(--space-8)}.info-tooltip.jsx-7043475ed4bd7433{display:inline-block}.info-tooltip.jsx-7043475ed4bd7433,.info-tooltip.jsx-7043475ed4bd7433:hover,.info-tooltip.jsx-7043475ed4bd7433:focus{color:var(--foreground-default);border:none;outline:none}.empty-list.jsx-7043475ed4bd7433 img.jsx-7043475ed4bd7433{display:block;height:200px;opacity:60%}"})]})}var C=n(76543);function _(e){var r=e.replId;return(0,t.BX)("div",{className:a().dynamic([["55263c1c9413c0cf",[u.j.mobileMax]]]),children:[(0,t.BX)(s.gC,{spacing:2,align:"stretch",children:[(0,t.tZ)(l.Z,{level:4,children:"Invite"}),(0,t.tZ)(S,{replId:r}),(0,t.tZ)(C.Z,{replId:r})]}),(0,t.tZ)(a(),{id:"55263c1c9413c0cf",dynamic:[u.j.mobileMax],children:"div.__jsx-style-dynamic-selector{padding:var(--space-16)}@media screen and (min-width:".concat(u.j.mobileMax,"px){div.__jsx-style-dynamic-selector{padding:var(--space-32)}}")})]})}},27545:function(e,r,n){n.d(r,{Z:function(){return M}});var t=n(35944),i=n(79547),a=n.n(i),o=n(67294),l=n(94184),s=n.n(l),u=n(88768),c=n(8996),d=n(23589),f=n(81736),m=n(15866),p=n(39155),v=n(38880),h=n(35060),b=n(94590),g=n(40425),y=n(58458),x=n(44054),w=n(57541),Z=n(66754),k=n(48015),j=n(95757),I=n(56834),S=n(51281);function C(e){var r=e.value,n=e.onButtonPress,i=e.statusText,o=void 0===i?"":i,l=e.image,u=e.filterValue,d=e.type,f=e.Icon;return(0,t.BX)("div",{className:"jsx-a16e88ad40d0e05c "+(s()("multiplayer-item",{"is-editable":!!n})||""),children:[(0,t.BX)(c.Ug,{align:"center",spacing:1,children:[(0,t.tZ)(p.Z,{size:"s",url:null!==l&&void 0!==l?l:""}),(0,t.tZ)("div",{className:"jsx-a16e88ad40d0e05c label",children:u?(0,t.tZ)(Z.gr,{source:r,match:u}):"".concat(r," ").concat(o)}),!!n&&(0,t.tZ)(S.Z,{className:"remove-button",border:!1,filled:!1,"aria-label":"Remove ".concat(d||"email invite"),role:"tooltip","data-microtip-position":"left",onClick:n,children:f&&(0,t.tZ)(f,{size:12,className:"jsx-a16e88ad40d0e05c"})})]}),(0,t.tZ)(a(),{id:"a16e88ad40d0e05c",children:".multiplayer-item.jsx-a16e88ad40d0e05c{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c:hover{background-color:var(--background-root)}.label.jsx-a16e88ad40d0e05c{margin-right:auto}"})]})}var _=n(78135),A=n(17632),E=n(45193);function O(e){var r=e.email,n=e.onInvite,i=e.onCancel;return(0,t.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa root",children:[(0,t.tZ)(g.Z,{level:3,align:"center",children:"Are you sure?"}),(0,t.BX)(y.Z,{align:"center",children:[(0,t.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa message",children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,t.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa email",children:r})]}),(0,t.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa controls",children:[(0,t.tZ)(S.Z,{onClick:i,children:"Cancel"}),(0,t.tZ)(S.Z,{filled:!0,color:"primary",onClick:n,children:"Invite"})]}),(0,t.tZ)(a(),{id:"1a6ae4ac10e8f1fa",children:".root.jsx-1a6ae4ac10e8f1fa{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24)}.controls.jsx-1a6ae4ac10e8f1fa{display:grid;grid-gap:var(--space-8);grid-auto-flow:column}.message.jsx-1a6ae4ac10e8f1fa{padding-bottom:var(--space-16)}"})]})}var T=n(76543),U=n(64711);function R(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function N(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||B(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,r){if(e){if("string"===typeof e)return R(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,r):void 0}}function M(e){var r,n=e.replId,i=(0,u.JT6)({variables:{replId:n}}),l=i.data,S=i.loading,R=(0,_.v9)((function(e){return e.user.userInfo.isLoggedIn?e.user.userInfo.id:null})),B=(0,v.Z)(),M=B.showConfirm,D=B.showError,z=N(o.useState(""),2),X=z[0],F=z[1],G=N((0,u.fSO)({onError:function(e){return D(e.message)},onCompleted:function(e){var r=e.addMultiplayerUser.user;(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"username"});var t=r?"@".concat(r.username):"Member";M("".concat(t," added"))}}),2),L=G[0],V=G[1],W=N((0,u.HMU)({onError:function(e){return D(e.message)},onCompleted:function(e){var r=e.removeMultiplayerUser.user,n=r?"@".concat(r.username):"Member";M("".concat(n," removed"))}}),2),q=W[0],H=W[1],$="Repl"===(null===l||void 0===l?void 0:l.repl.__typename)?l.repl:null,Y=N((0,u.SvR)({onError:function(e){D(e.message)},update:function(e,r){var t,i=null===(t=r.data)||void 0===t?void 0:t.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var a=i.email;return(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),void M("Invited ".concat(a," via email"))}if("ReplPermission"===i.__typename){e.modify({id:e.identify({__typename:"Repl",id:n}),fields:{permissions:function(r){var n=e.writeFragment({data:i,fragment:u.L13});return P(r).concat([n])}}});var o=i.user;(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"});var l=o?"@".concat(o.username):"Member";M("".concat(l," added"))}}else D(i.message)}}),2),K=Y[0],Q=Y[1],J=N((0,u.Ejz)({onError:function(e){return D(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var r=e.deleteMultiplayerInvite.email;(0,I.j)(I.U3.MP2_REMOVED_EMAIL_INVITE,{replId:n,email:r}),M("Invite for ".concat(r," deleted"))}}else D(e.deleteMultiplayerInvite.message)}}),2),ee=J[0],re=J[1];if($&&!$.owner)throw new Error("Cannot manage members on anon repls");if((null===$||void 0===$?void 0:$.owner)&&"Team"!==(null===$||void 0===$?void 0:$.owner.__typename))throw new Error("Expect repl owned by a team");var ne,te,ie,ae="Team"===(null===$||void 0===$||null===(r=$.owner)||void 0===r?void 0:r.__typename)?$.owner:null,oe=null!==(ne=null===$||void 0===$?void 0:$.permissions.reduce((function(e,r){return r.user?P(e).concat([r.user.username]):e}),[]))&&void 0!==ne?ne:[],le=null===$||void 0===$?void 0:$.permissions.reduce((function(e,r){if(!r.user)return e;var n=r.user;return!X||k.Z.filter(X,[n.username]).length>0?((null===ae||void 0===ae?void 0:ae.members.some((function(e){var r;return(null===(r=e.user)||void 0===r?void 0:r.id)===n.id})))||e.users.push(n),e):e}),{users:[]}),se=null===$||void 0===$?void 0:$.multiplayerInvites.filter((function(e){return!X||k.Z.filter(X,[e.email]).length>0})),ue=null===ae||void 0===ae?void 0:ae.members.reduce((function(e,r){if(!r.user)return e;var n=r.user;if(!(!X||k.Z.filter(X,[n.username]).length>0))return e;var t=r.permissions&&r.permissions!==u.SV1.Member,i=null===$||void 0===$?void 0:$.permissions.find((function(e){var r;return e.user&&(null===(r=e.user)||void 0===r?void 0:r.id)===n.id}));return t?e.teamAdmins.push(n):(null===i||void 0===i?void 0:i.type)?e.withPermission.push(n):e.withoutPermission.push(n),e}),{teamAdmins:[],withPermission:[],withoutPermission:[]}),ce=null===ue||void 0===ue?void 0:ue.teamAdmins.some((function(e){return e.id===R})),de=(null!==(te=null===le||void 0===le?void 0:le.users.length)&&void 0!==te?te:0)+(null!==(ie=null===se||void 0===se?void 0:se.length)&&void 0!==ie?ie:0),fe=null===$||void 0===$?void 0:$.currentUserPermissions.editMultiplayers,me=null===$||void 0===$?void 0:$.currentUserPermissions.inviteGuests,pe=Boolean(ue&&!ue.teamAdmins.length&&!ue.withPermission.length&&(!(null===le||void 0===le?void 0:le.users.length)&&!(null===se||void 0===se?void 0:se.length)&&me||!me&&!ue.withoutPermission.length)),ve=N(o.useState(null),2),he=ve[0],be=ve[1];return(0,t.BX)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" root",children:[(0,t.BX)(c.gC,{spacing:2,align:"stretch",children:[(0,t.BX)(c.Ug,{children:[(0,t.BX)(g.Z,{level:5,foreground:S?3:1,children:[fe?"Add or remove members from this repl":null,S?"Loading...":null]}),fe&&me&&!S&&(0,t.tZ)("div",{"aria-label":" Add team members or invite external guests via email or username","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" information-icon-container",children:(0,t.tZ)(A.Z,{})})]}),me?(0,t.tZ)(j.Z,{existingUsernames:oe,onSubmit:function(e){!!e.match(/.+@.+/)&&!Q.loading?be(e):V.loading||L({variables:{username:e,replId:n,type:"rw"}}),F("")},placeholder:fe?"Search for users or invite guests":"Filter users",isDisabled:S,onChange:function(e){return F(e)}}):(0,t.tZ)(w.ZP,{disabled:S,value:X,onChange:function(e){return F(e.currentTarget.value)},placeholder:fe?"Filter team members to add or remove":"Filter team members"}),(0,t.tZ)(E.Z,{isOpen:!!he,onRequestClose:function(){return be(null)},children:he?(0,t.tZ)(O,{email:he,onInvite:function(){K({variables:{email:he,replId:n,type:"rw"}}),be(null)},onCancel:function(){return be(null)}}):null}),(0,t.BX)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" "+(s()("multiplayers-list",{"is-empty":pe})||""),children:[(null===ue||void 0===ue?void 0:ue.withPermission.length)?(0,t.tZ)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" list-heading",children:(0,t.BX)(c.Ug,{align:"center",spacing:1,children:[(0,t.tZ)(d.Z,{size:12}),(0,t.BX)(y.Z,{foreground:2,size:"small",children:[null===ue||void 0===ue?void 0:ue.withPermission.length," member",1===(null===ue||void 0===ue?void 0:ue.withPermission.length)?"":"s"," with access"]})]})}):null,null===ue||void 0===ue?void 0:ue.withPermission.map((function(e){return(0,t.tZ)(C,{value:e.username,image:e.image,statusText:"(can edit)",type:"member",onButtonPress:ce?function(){H.loading||q({variables:{replId:n,username:e.username}})}:void 0,Icon:h.Z},e.id)})),!!de&&(0,t.tZ)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" list-heading",children:(0,t.BX)(c.Ug,{align:"center",spacing:1,children:[(0,t.tZ)(d.Z,{size:12}),(0,t.BX)(y.Z,{foreground:2,size:"small",children:[(0,U.Z)("guest",de,!0),"with access"]})]})}),null===le||void 0===le?void 0:le.users.map((function(e){return(0,t.tZ)(C,{value:e.username,image:e.image,statusText:"(can edit)",type:"guest",onButtonPress:ce?function(){H.loading||q({variables:{replId:n,username:e.username}})}:void 0,Icon:h.Z},e.id)})),null===se||void 0===se?void 0:se.map((function(e){return(0,t.tZ)(C,{value:e.email,statusText:"(pending)",onButtonPress:ce?function(){re.loading||ee({variables:{replId:n,email:e.email}})}:void 0,Icon:h.Z},e.email)})),!me&&(null===ue||void 0===ue?void 0:ue.withoutPermission.length)?(0,t.tZ)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" list-heading",children:(0,t.BX)(c.Ug,{align:"center",spacing:1,children:[(0,t.tZ)(f.Z,{size:12}),(0,t.BX)(y.Z,{foreground:2,size:"small",children:[(0,U.Z)("member",null===ue||void 0===ue?void 0:ue.withoutPermission.length,!0),"without access"]})]})}):null,!me&&(null===ue||void 0===ue?void 0:ue.withoutPermission.map((function(e){return(0,t.tZ)(C,{value:e.username,image:e.image,type:"member",onButtonPress:fe?function(){V.loading||L({variables:{replId:n,username:e.username,type:"rw"}})}:void 0,Icon:b.Z},e.id)}))),(null===ue||void 0===ue?void 0:ue.teamAdmins.length)?(0,t.tZ)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" list-heading",children:(0,t.BX)(c.Ug,{align:"center",spacing:1,children:[(0,t.tZ)(m.Z,{size:12}),(0,t.tZ)(y.Z,{foreground:2,size:"small",children:"Team admins cannot be removed from repls"})]})}):null,null===ue||void 0===ue?void 0:ue.teamAdmins.map((function(e){return(0,t.tZ)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" "+(s()("multiplayer-item",{"is-editable":fe})||""),children:(0,t.BX)(c.Ug,{align:"center",spacing:1,children:[(0,t.tZ)(p.Z,{size:"s",url:e.image}),(0,t.tZ)("div",{className:a().dynamic([["dc878561b7535f01",[x.j.mobileMax]]])+" label",children:X?(0,t.tZ)(Z.gr,{source:e.username,match:X}):e.username})]})},e.id)})),pe?(0,t.BX)(y.Z,{foreground:2,align:"center",children:['No members matching "',X,'" found']}):null]}),fe||S?null:(0,t.tZ)(y.Z,{foreground:2,size:"small",children:"Only admins can add and remove members to multiplayer"}),fe&&me&&(0,t.tZ)(T.Z,{replId:n})]}),(0,t.tZ)(a(),{id:"dc878561b7535f01",dynamic:[x.j.mobileMax],children:".root.__jsx-style-dynamic-selector{padding:var(--space-16);color:var(--foreground-default)}.multiplayers-list.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:300px;overflow-y:auto}.multiplayers-list.is-empty.__jsx-style-dynamic-selector{display:grid;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);word-break:break-word}.multiplayer-item.__jsx-style-dynamic-selector{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector{padding-right:var(--space-8)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector:hover{background-color:var(--background-root)}.list-heading.__jsx-style-dynamic-selector{padding:var(--space-16)var(--space-16)0}.label.__jsx-style-dynamic-selector{margin-right:auto}.information-icon-container.__jsx-style-dynamic-selector{margin-left:5px}@media screen and (min-width:".concat(x.j.mobileMax,"px){.root.__jsx-style-dynamic-selector{padding:var(--space-48)}}")})]})}},95757:function(e,r,n){n.d(r,{Z:function(){return Z}});var t=n(35944),i=n(79547),a=n.n(i),o=n(67294),l=n(94184),s=n.n(l),u=n(96594),c=n(57541),d=n(51281),f=n(90652),m=n(88768),p=n(38880),v=n(8996),h=n(8286),b=n(39155);function g(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function y(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function x(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){y(e,r,n[r])}))}return e}function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return g(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e){var r=e.onSubmit,n=e.existingUsernames,i=e.isDisabled,l=e.onChange,g=e.placeholder,y=w(o.useState(""),2),Z=y[0],k=y[1],j=!!Z.match(/.+@.+/),I=(0,f.Z)(Z.trim().replace(/^@/,""),250),S=(0,m.skk)({skip:!I||j,variables:{query:I,limit:6}}),C=S.data,_=S.loading,A=S.error,E=(0,p.Z)().showError;o.useEffect((function(){A&&E(A.message)}),[A,E]);var O=null===C||void 0===C?void 0:C.usernameSearch;return(0,t.BX)("form",{onSubmit:function(e){e.preventDefault(),r(Z),k("")},className:"jsx-d408485a86637a91",children:[(0,t.BX)("div",{className:"jsx-d408485a86637a91 form-content",children:[(0,t.tZ)(u.ZP,{onChange:function(e){e&&k(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var i=e.getInputProps,a=e.getItemProps,o=e.getMenuProps,u=e.isOpen,d=e.highlightedIndex;return(0,t.BX)("div",{className:"jsx-d408485a86637a91 dropdown",children:[(0,t.tZ)(c.ZP,x({},i({ref:null,value:Z,onChange:function(e){k(e.currentTarget.value),null===l||void 0===l||l(e.currentTarget.value)},placeholder:null!==g&&void 0!==g?g:"Search by username or invite by email",autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&Z.match(/.+@.+/)&&(r(Z),k(""),e.currentTarget.blur())}}))),(0,t.BX)("div",x({},o(),{className:"jsx-d408485a86637a91",children:[u&&O&&O.length?(0,t.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu",children:O.map((function(e,r){return(0,t.tZ)("div",x({},a({item:e,index:r}),{className:"jsx-d408485a86637a91 "+(s()("result",{"is-active":d===r})||""),children:(0,t.BX)(v.Ug,{align:"center",spacing:1,children:[(0,t.tZ)(b.Z,{size:"s",url:e.image}),(0,t.tZ)("div",{className:"jsx-d408485a86637a91",children:e.username}),n.includes(e.username)?(0,t.tZ)("div",{className:"jsx-d408485a86637a91 check-icon",children:(0,t.tZ)(h.Z,{})}):null]})}),e.username)}))}):null,u&&_?(0,t.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-loading",children:"loading..."}):null,u&&O&&0===O.length?(0,t.BX)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-empty",children:['no results found for "',Z,'"']}):null]}))]})}}),(0,t.tZ)("div",{className:"jsx-d408485a86637a91",children:(0,t.tZ)(d.Z,{color:"primary",type:"submit",filled:!0,disabled:i||!Z,children:"Invite"})})]}),(0,t.tZ)(a(),{id:"d408485a86637a91",children:".form-content.jsx-d408485a86637a91{display:grid;position:relative;width:100%;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.dropdown.jsx-d408485a86637a91{position:relative;z-index:5}.dropdown-menu.jsx-d408485a86637a91{position:absolute;z-index:1;top:100%;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--foreground-dimmest);border-top:0 none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);max-height:300px;overflow:auto}.dropdown-menu.is-loading.jsx-d408485a86637a91,.dropdown-menu.is-empty.jsx-d408485a86637a91{color:var(--foreground-dimmer);padding:var(--space-8)}.dropdown.jsx-d408485a86637a91:focus-within .dropdown-menu.jsx-d408485a86637a91{border-color:var(--accent-primary-default)}.spacer.jsx-d408485a86637a91{width:var(--space-8);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.result.jsx-d408485a86637a91{cursor:pointer;padding:var(--space-8)var(--space-16)}.result.jsx-d408485a86637a91:hover,.is-active.jsx-d408485a86637a91{background-color:var(--accent-primary-dimmer)}.check-icon.jsx-d408485a86637a91{margin-left:auto;color:var(--accent-positive-default)}"})]})}},25398:function(e,r,n){function t(e){var r={};return e.lite&&(r.lite=e.lite),e.classroom_template&&(r.classroom_template=e.classroom_template),e.outputonly&&(r.outputonly=e.outputonly),e.fileName&&(r.fileName=e.fileName),e.debug&&(r.debug=e.debug),e.inspector&&(r.inspector=e.inspector),e.fallback&&(r.fallback=e.fallback),e.vcr&&(r.vcr=e.vcr),r}n.d(r,{Z:function(){return t}})},86035:function(e,r,n){n.d(r,{Z:function(){return m}});var t=n(34051),i=n.n(t),a=n(67294),o=n(87152),l=n(88768),s=n(30617),u=n(90768);function c(e,r,n,t,i,a,o){try{var l=e[a](o),s=l.value}catch(u){return void n(u)}l.done?r(s):Promise.resolve(s).then(t,i)}function d(e){return function(){var r=this,n=arguments;return new Promise((function(t,i){var a=e.apply(r,n);function o(e){c(a,t,i,o,l,"next",e)}function l(e){c(a,t,i,o,l,"throw",e)}o(void 0)}))}}function f(){return(f=d(i().mark((function e(r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.l){e.next=2;break}throw new Error("Expected Apollo client");case 2:return e.next=4,o.l.query({query:l.UxF,variables:{id:r}});case 4:return n=e.sent.data,e.abrupt("return","Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl.title:null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){var e=(0,s.Z)(),r=e.container,n=e.presence;a.useEffect((function(){var e=n.onUserJoin((function(n){var t,i=null===(t=r.getContext())||void 0===t?void 0:t.repl;if(i){var a=n.username;return function(e){return f.apply(this,arguments)}(i.id).then((function(e){e&&(0,u.sc)({title:"",body:"".concat(a," joined ").concat(e),tag:"".concat(i.id,"-").concat(a,"-joined"),iconByUsername:a,cacheDuration:9e5})})),function(){e()}}}))}),[n,r])}},56167:function(e,r,n){n.d(r,{Z:function(){return a}});var t=n(67294),i=n(90601);function a(){t.useEffect((function(){var e=function(e){"s"===e.key&&(0,i.j)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[])}},50999:function(e,r,n){n.d(r,{Z:function(){return a}});var t=n(5560),i=n(88768);function a(e){var r=e.isAnon,n=e.isOwner,a=e.ignoreUnloadPrompt,o=(0,t.Z)();(0,i.Vgw)({skip:r||n,variables:{replId:o},onSubscriptionData:function(e){var r;!1===(null===(r=e.subscriptionData.data)||void 0===r?void 0:r.currentUserCanWrite)&&(a(!0),window.location.reload())}})}},53408:function(e,r,n){n.d(r,{Z:function(){return d}});var t=n(67294),i=n(5560),a=n(88768),o=n(30617),l=n(77998),s=n(80357);function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return u(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(){var e=(0,i.Z)(),r=(0,o.Z)().container,n=(0,a.Uv9)({variables:{replId:e}}).data,u=null===n||void 0===n?void 0:n.repl;(0,t.useEffect)((function(){if(u){var e,n=null!==u.origin,t=new Date(u.timeUpdated).getTime()-new Date(u.timeCreated).getTime()<1e3;if(n&&t)(e=r).exec.apply(e,c(l.rO.format(s.Xe)))}}),[r,u])}},18292:function(e,r,n){n.d(r,{Z:function(){return l}});var t=n(67294),i=n(30617),a=n(56834),o=n(84995);function l(){var e=(0,i.Z)().presence;t.useEffect((function(){return e.onFollowingUsersChanged((function(e){var r=e.followingUsers,n=e.type,t=r.length;"follow"===n?(0,a.j)(o.U.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:t}):(0,a.j)(o.U.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:t})}))}),[e])}},32547:function(e,r,n){n.d(r,{Z:function(){return v}});var t=n(35944),i=n(67294),a=n(40425),o=n(58458),l=n(8996),s=n(88341),u=n(67680),c=n(51281),d=n(56834),f=n(43552);function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function p(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return m(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){var r=e.children,n=e.showPopover,m=(0,f.Z)("announcement","add-guest-new-user"),v=m.shouldDisplay,h=m.register,b=m.dismiss,g=p(i.useState(!1),2),y=g[0],x=g[1],w=p(i.useState(!1),2),Z=w[0],k=w[1];i.useEffect((function(){n&&!Z&&h()}),[Z,h,n]);var j=v&&!Z;return(0,t.BX)(s.Z,{onClickOutside:function(){return k(!0)},isOpen:j,showArrow:!0,borderColor:"var(--accent-purple-default)",children:[r,(0,t.BX)(l.gC,{spacing:2,align:"stretch",children:[(0,t.BX)(l.Ug,{spacing:1,children:[(0,t.tZ)(u.Z,{}),(0,t.tZ)(a.Z,{level:5,children:"Invite guests to your repl!"})]}),(0,t.BX)(o.Z,{children:[" ","Add external guests to your repl for interviews and collaborative projects."," "]}),(0,t.tZ)(l.Ug,{spacing:1,justify:"end",children:(0,t.tZ)(c.Z,{loading:y,onClick:function(){x(!0),(0,d.j)(d.U3.ADD_GUEST_POPOVER_DISMISSED),b()},children:"Got it"})})]})]})}},31412:function(e,r,n){n.d(r,{Z:function(){return l}});var t=n(67294),i=n(30617);function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return a(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(){var e=(0,i.Z)().presence,r=o(t.useState(e.getFollowingUsers()),2),n=r[0],a=r[1];return t.useEffect((function(){return a(e.getFollowingUsers()),e.onFollowingUsersChanged((function(e){a(e.followingUsers)}))}),[e]),n}},5881:function(e,r,n){n.d(r,{Z:function(){return d}});var t=n(35944);var i=44100,a=32896,o=function e(){var r=this;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioStart=0,this.feed=function(e){var n=r.getFormatedValue(e),t=new Float32Array(r.samples.length+n.length);t.set(r.samples,0),t.set(n,r.samples.length),r.samples=t},this.getFormatedValue=function(e){for(var r=new Float32Array(e.length),n=0;n<e.length;n++)r[n]=e[n]/2147483648;return r},this.stop=function(){if(r.bufferSource)try{r.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}},this.flush=function(e){if(r.audioCtx&&r.samples.length){var n=0,t=r.audioCtx.currentTime;if(0===e)r.startTime=t,r.audioStart=t;else{for(var o=t-r.audioStart,l=Math.floor(o*i);l>e-a;)r.audioStart+=.7459410430839002,l-=a;l>e&&(n=l-e,r.startTime=t),r.startTime=t}r.samples=r.samples.slice(n,r.samples.length);for(var s,u,c,d=r.audioCtx.createBufferSource(),f=r.samples.length/1,m=r.audioCtx.createBuffer(1,f,i),p=0;p<1;p++)for(s=m.getChannelData(p),u=p,c=0;c<f;c++)s[c]=r.samples[u],u+=1;r.startTime<r.audioCtx.currentTime&&(r.startTime=r.audioCtx.currentTime),d.buffer=m,d.connect(r.gainNode),d.start(r.startTime),r.stop(),r.bufferSource=d,r.startTime+=m.duration,r.samples=new Float32Array}},this.samples=new Float32Array;var n=window.AudioContext||window.webkitAudioContext;this.audioCtx=new n,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime},l=n(56834),s=n(67294),u=n(23139),c=n(8286);function d(e){var r=e.container,n=(0,s.useState)(!1),i=n[0],a=n[1],d=(0,s.useRef)(null);(0,s.useEffect)((function(){return r.openChannel({name:"audio",service:"audio"},(function(e){var r=e.channel;if(r){var n=null,t=!1;return r.onCommand((function(e){var r;t||(t=!0,(0,l.j)(l.U3.AUDIO_PLAYING_STARTED),d.current=function(){n=new o,d.current=null},a(!0)),n&&(null===e||void 0===e||null===(r=e.audio2)||void 0===r?void 0:r.data)&&(e.audio2.samples||(e.audio2.samples=0),n.feed(Int32Array.from(e.audio2.data)),n.flush(e.audio2.samples))})),function(){a(!1),n&&(n.stop(),n=null),d.current=null}}}))}),[r]);var f=function(){a(!1),(0,l.j)(l.U3.AUDIO_PROMPT_CLOSED,{accepted:!1})};return(0,t.tZ)(u.u_,{isOpen:i,onRequestClose:f,children:(0,t.BX)(u.G7,{css:[u.l0.colWithGap(24)],children:[(0,t.tZ)(u.h4,{variant:"headerDefault",level:1,children:"We hear audio!"}),(0,t.BX)(u.G7,{css:[u.l0.colWithGap(8)],children:[(0,t.tZ)(u.xv,{multiline:!0,children:"Hey! It appears that this Repl is playing audio."}),(0,t.tZ)(u.xv,{multiline:!0,children:"In order for us to hear the audio you\u2019re receiving, please click confirm."})]}),(0,t.BX)(u.G7,{css:[u.l0.rowWithGap(12),u.l0.justify.end],children:[(0,t.tZ)(u.zx,{onClick:f,text:"Cancel"}),(0,t.tZ)(u.zx,{colorway:"positive",onClick:function(){a(!1),(0,l.j)(l.U3.AUDIO_PROMPT_CLOSED,{accepted:!0}),d.current&&d.current()},text:"Confirm",iconLeft:(0,t.tZ)(c.Z,{})})]})]})})}},38835:function(e,r,n){n.d(r,{Z:function(){return d}});var t=n(56834),i=n(67294),a=n(31284),o=n(30617),l=n(6763),s=n(5560),u=n(88768),c=n(27291);function d(e){var r=e.onOpenFile,n=e.onOutput,d=(0,o.Z)(),f=d.debuggest,m=d.dotReplit,p=(0,s.Z)(),v=(0,u.NJw)({variables:{replId:p}}).data,h=function(e){var r=e.repl,n=e.dotReplit,t=e.debuggest;return(0,i.useEffect)((function(){if(r){if(!r.lang.hasDAP)return n.watch((function(e){var r;e.error||(null===(r=e.config.debugger)||void 0===r?void 0:r.support)&&t.connect()}));t.connect()}}),[r,t]),(0,a.Z)(t.mainClient)}({debuggest:f,dotReplit:m,repl:"Repl"===(null===v||void 0===v?void 0:v.repl.__typename)?v.repl:null});!function(e){(0,i.useEffect)((function(){if(e){var r=e.onStarted((function(e){(0,t.j)(t.U3.DEBUGGER_USED,{action:"started",joined:e})})),n=e.onPaused((function(e){(0,t.j)(t.U3.DEBUGGER_USED,{action:"paused",reason:e})})),i=e.onBreakpoint((function(r){(0,t.j)(t.U3.DEBUGGER_USED,{action:"breakpointToggled",breakpointAction:r,state:e.state.current})}));return function(){r(),n(),i()}}}),[e])}(h),function(e,r){var n,t=r.onOutput,o=r.onOpenFile,s=(0,c.Z)(t),u=(0,c.Z)(o);(0,i.useEffect)((function(){if(e)return e.onOutput((function(e){s.current(e)}))}),[e]);var d=(0,a.Z)(e?e.stackFrames:null),f=null===d||void 0===d?void 0:d[0],m=null===f||void 0===f||null===(n=f.source)||void 0===n?void 0:n.path,p=null===f||void 0===f?void 0:f.line;(0,i.useEffect)((function(){if(m&&p&&e){var r=(0,l.om)(m);r?u.current({path:r,line:p}):e.stepOut()}}),[e,m,p])}(h,{onOpenFile:r,onOutput:n})}},21563:function(e,r,n){n.d(r,{Z:function(){return m}});var t=n(35944),i=n(79547),a=n.n(i),o=(n(67294),n(88768)),l=n(11427),s=n(58458),u=n(8996),c=n(31412);function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function f(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return d(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(){var e=(0,c.Z)();return 0===e.length?null:1===e.length?(0,t.tZ)(p,{user:e[0]}):(0,t.BX)("div",{className:"jsx-4f2e88846001c10e followed-indicator",children:[(0,t.BX)(s.Z,{children:[e.length," users are observing you"]}),(0,t.tZ)(a(),{id:"4f2e88846001c10e",children:".followed-indicator.jsx-4f2e88846001c10e{white-space:nowrap;height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})}function p(e){var r=e.user,n=(0,o.qC4)({variables:{ids:[r.id]},ssr:!1}).data;if(!n)return null;var i=f(n.usersByIds,1)[0].image,c=r.id,d=r.username,m=r.color;return(0,t.BX)("div",{className:"jsx-add9eb548244268a followed-indicator",children:[(0,t.BX)(u.Ug,{wrap:"nowrap",align:"center",className:"stack",spacing:"var(--space-4)",children:[(0,t.tZ)(l.Z,{id:c,username:d,image:i,color:m,size:22}),(0,t.tZ)(s.Z,{className:"username",children:d}),(0,t.tZ)("div",{className:"jsx-add9eb548244268a text",children:(0,t.tZ)(s.Z,{children:"is observing you"})})]}),(0,t.tZ)(a(),{id:"add9eb548244268a",children:".followed-indicator.jsx-add9eb548244268a{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.text.jsx-add9eb548244268a{white-space:nowrap}.followed-indicator.jsx-add9eb548244268a .stack{height:100%}.followed-indicator.jsx-add9eb548244268a .username{overflow:clip;max-width:150px;display:inline-block;-o-text-overflow:ellipsis;text-overflow:ellipsis}"})]})}},97600:function(e,r,n){n.d(r,{Z:function(){return h}});var t=n(35944),i=n(79547),a=n.n(i),o=(n(67294),n(88768)),l=n(30617),s=n(11427),u=n(58458),c=n(35060),d=n(51281),f=n(8996),m=n(34140);function p(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function v(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return p(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){var r=e.id,n=e.username,i=e.color,p=(0,l.Z)().presence,h=(0,o.qC4)({variables:{ids:[r]},ssr:!1}).data;if(!h)return null;var b=v(h.usersByIds,1)[0].image;return(0,t.BX)("div",{className:a().dynamic([["8eb09786a976f628",[i]]])+" following-indicator",children:[(0,t.BX)(f.Ug,{wrap:"nowrap",className:"stack",spacing:"var(--space-4)",children:[(0,t.tZ)(f.gC,{className:"stack",align:"center",justify:"center",children:(0,t.tZ)(s.Z,{id:r,username:n,image:b,color:i,size:22})}),(0,t.tZ)(f.gC,{className:"text-container",align:"center",justify:"center",children:(0,t.BX)(u.Z,{className:"following-text",children:["Observing ",n]})}),(0,t.tZ)(f.gC,{className:"stack",align:"center",justify:"center",children:(0,t.BX)(d.Z,{size:"small",filled:!1,border:!1,textColor:i,onClick:function(){p.unfollowUser()},children:[(0,t.tZ)(m.T,{children:"stop observing"}),(0,t.tZ)(c.Z,{})]})})]}),(0,t.tZ)(a(),{id:"8eb09786a976f628",dynamic:[i],children:".following-indicator.__jsx-style-dynamic-selector{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.following-indicator.__jsx-style-dynamic-selector .stack{height:100%;max-width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;overflow:clip}.following-indicator.__jsx-style-dynamic-selector .text-container{height:100%;margin-right:-2px}.following-indicator.__jsx-style-dynamic-selector .following-text{color:".concat(i,";white-space:nowrap}")})]})}},19537:function(e,r,n){n.d(r,{Z:function(){return M}});var t=n(35944),i=n(79547),a=n.n(i),o=n(67294),l=n(51739),s=n(59367),u=n(56718),c=n(43421),d=n(30617),f=n(56834),m=n(46846),p=n(28771);function v(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function h(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return v(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){var r=e.language,n=e.tabIndex,i=e.filePath,a=e.onClick,o=e.onClose,s=e.isActive,v=(0,d.Z)().session,b=h((0,c.c)({item:{type:u.z.FileHeaderTab,path:i},type:u.z.FileHeaderTab}),2)[1],g=h((0,l.L)({accept:[m.Tv.File,u.z.FileNode,u.z.FileHeaderTab],collect:function(e){return{isOver:e.isOver()}},drop:function(e){var t=e.path;t!==i&&(v.openFile(t,{tabIndex:n}),(0,f.j)(f.U3.FILE_HEADER_TAB_REPLACED,{language:r,tabIndex:n}))}}),2),y=g[0].isOver,x=g[1];return(0,t.tZ)(p.s,{innerRef:function(e){x(e),b(e)},filePath:i,isActive:s,isDragOver:y,onClick:a,onClose:o})}var g=n(58458);function y(e){var r=e.text;return(0,t.BX)("div",{className:"jsx-9398341bd91701d empty",children:[(0,t.tZ)(g.Z,{size:"small",foreground:2,children:r}),(0,t.tZ)(a(),{id:"9398341bd91701d",children:".empty.jsx-9398341bd91701d{background-color:var(--background-default);height:100%;min-width:var(--space-80);padding:var(--space-8)var(--space-16);-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-top-left-radius:var(--border-radius-4);-moz-border-radius-topleft:var(--border-radius-4);border-top-left-radius:var(--border-radius-4)}"})]})}var x=n(5560),w=n(88768),Z=n(39809),k=n(93577),j=n(67289),I=n(42458),S=n(92594),C=n(36377),_=n(41045),A=n(90039),E=n(39550),O=n(97600),T=n(21563),U=n(95722),R=n(91510),N=n(45536);function P(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function B(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return P(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e){var r=e.style,n=e.focusCodeEditor,i=(0,x.Z)(),c=(0,d.Z)(),p=c.session,v=c.fs,h=c.presence,g=(0,Z.Z)().openFiles,P=(0,k.Z)(),M=(0,S.Z)(),D=(0,E.Z)(),z=(0,A.Z)(),X=(0,C.Z)({fs:v,path:_.Ql,initialExpanded:!0}).loading,F=(0,w.IqK)({variables:{replId:i}}).data,G="Repl"===(null===F||void 0===F?void 0:F.repl.__typename)?F.repl.language:"",L="md"===(0,j.r6)(P||""),V=o.useCallback((function(){(0,f.j)(f.U3.MARKDOWN_PREVIEW_TOGGLE_CLICKED,{isOn:Boolean(M)}),p.setPreviewedFile(M?null:P),n&&n()}),[p,M,P,n]),W=g.map((function(e,r){return(0,t.tZ)(b,{language:G,filePath:e,tabIndex:r,onClick:function(){e!==P&&(p.openFile(e),D&&h.unfollowUser())},onClose:function(){p.closeTab(r),(0,f.j)(f.U3.FILE_HEADER_TAB_CLOSED,{language:G})},isActive:e===P},r)})),q=(0,N.Z)(),H=B((0,l.L)({accept:[m.Tv.File,u.z.FileNode,u.z.FileHeaderTab],collect:function(e){var r,n=null===(r=e.getItem())||void 0===r?void 0:r.isFolder;return{isOver:e.isOver({shallow:!0})&&!n}},canDrop:function(e){return!e.isFolder},drop:function(e,r){if(e&&!e.isFolder&&!r.didDrop()){var n=g.length;p.openFile(e.path,{tabIndex:n}),(0,R.Z)({replId:i,action:"newTab",source:"dragdrop"})}}}),2),$=H[0],Y=H[1],K=X?"Loading files...":"No files open";return(0,t.BX)("div",{ref:Y,style:r,className:a().dynamic([["a00e92b504a67b64",[$.isOver?"var(--background-higher)":"var(--background-root)",z?"0 0 0 3px ".concat(z):"0",D?"inset(-4px -4px 0px -4px)":"none",$.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header",children:[(0,t.tZ)(s.E,{className:q.className,options:q.options,onWheel:q.handleWheel,ref:q.ref,children:(0,t.tZ)("div",{className:a().dynamic([["a00e92b504a67b64",[$.isOver?"var(--background-higher)":"var(--background-root)",z?"0 0 0 3px ".concat(z):"0",D?"inset(-4px -4px 0px -4px)":"none",$.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header-name",children:W.length>0?W:(0,t.tZ)(y,{text:K})})}),D?null:(0,t.tZ)(T.Z,{}),L||!P||D?null:(0,t.tZ)(U.Z,{filePath:P,replLanguage:G}),D?(0,t.tZ)(O.Z,{id:D.id,username:D.username,color:D.color}):null,L&&!D?(0,t.tZ)(I.Z,{isOn:Boolean(M),onChange:V}):null,(0,t.tZ)(a(),{id:"a00e92b504a67b64",dynamic:[$.isOver?"var(--background-higher)":"var(--background-root)",z?"0 0 0 3px ".concat(z):"0",D?"inset(-4px -4px 0px -4px)":"none",$.isOver?"var(--background-higher)":"var(--background-root)"],children:".file-header.__jsx-style-dynamic-selector{position:relative;z-index:3;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:48px;width:100%;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;background-color:".concat($.isOver?"var(--background-higher)":"var(--background-root)",";-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);-webkit-border-top-left-radius:var(--border-radius-4);-moz-border-radius-topleft:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);-webkit-box-shadow:").concat(z?"0 0 0 3px ".concat(z):"0",";-moz-box-shadow:").concat(z?"0 0 0 3px ".concat(z):"0",";box-shadow:").concat(z?"0 0 0 3px ".concat(z):"0",";-webkit-clip-path:").concat(D?"inset(-4px -4px 0px -4px)":"none",";clip-path:").concat(D?"inset(-4px -4px 0px -4px)":"none","}.file-header.__jsx-style-dynamic-selector .os-host{height:100%;-webkit-box-flex:1;-webkit-flex:auto;-moz-box-flex:1;-ms-flex:auto;flex:auto;min-width:0}.os-content-glue{height:50px!important}.file-header.__jsx-style-dynamic-selector .os-scrollbar-handle{max-width:300px}.file-header-name.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:100%;background-color:").concat($.isOver?"var(--background-higher)":"var(--background-root)",";color:var(--foreground-dimmer);font-size:var(--font-size-default);height:100%;text-align:center;-webkit-box-align:end;-webkit-align-items:flex-end;-moz-box-align:end;-ms-flex-align:end;align-items:flex-end}")})]})}},22315:function(e,r,n){var t=n(35944),i=(n(67294),n(92704)),a=n(7177),o=n(35060),l=n(54929),s=n(67938),u=n(3204),c=n(8286);r.Z=function(e){return(0,t.tZ)(a.Z,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,t.BX)(l.Z,{css:[u.l0.colWithGap(24)],children:[(0,t.tZ)(s.h,{variant:"headerDefault",level:2,css:u.l0.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,t.tZ)(s.x,{multiline:!0,children:"Never miss messages from your collaborators if you\u2019re in another tab or window."}),(0,t.BX)(l.Z,{css:[u.l0.rowWithGap(12),u.l0.justify.end],children:[(0,t.tZ)(i.ZP,{onClick:e.onCancel,text:"Deny",iconLeft:(0,t.tZ)(o.Z,{})}),(0,t.tZ)(i.ZP,{text:"Allow notifications",colorway:"positive",iconLeft:(0,t.tZ)(c.Z,{}),onClick:e.onConfirm})]})]})})}},19378:function(e,r,n){var t=n(5152),i=n.n(t);r.Z=i()((function(){return Promise.all([n.e(4885),n.e(8966),n.e(9710),n.e(3220),n.e(6063),n.e(3308),n.e(6447)]).then(n.bind(n,19345)).then((function(e){return e.EditReplTemplate}))}),{loadableGenerated:{webpack:function(){return[19345]}}})},24521:function(e,r,n){n.d(r,{PZ:function(){return p},gn:function(){return h},$k:function(){return b},vF:function(){return v}});var t=n(35944),i=n(67294),a=n(70917),o=n(23139),l=n(35060),s=n(30617),u=n(46846),c=n(58123),d=n(36377);var f={base:(0,a.iv)([o.l0.display.inlineFlex,o.l0.height("100%"),o.l0.color.foregroundDimmer,o.l0.borderRadius(8),{border:"1px solid transparent",transition:"0.2s background-color",":focus":{borderColor:o.TV.accentPrimaryDefault,outline:"2px solid transparent",outlineOffset:"4px",":not(:focus-visible)":{outline:"none",borderColor:"transparent"}}}]),active:(0,a.iv)([o.l0.color.foregroundDefault,o.l0.shadow(1),{borderColor:o.TV.outlineDimmest}]),inactive:(0,a.iv)({"&:hover":[o.l0.color.foregroundDefault,o.l0.shadow(1),{borderColor:o.TV.outlineDimmest}]})},m=(0,a.iv)([o.l0.cursor.pointer,o.l0.justify.center,o.l0.pl(8),o.l0.height("100%"),{paddingRight:2,backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]);function p(e){var r=e.onClick;return(0,t.tZ)(o.hU,{tooltipHidden:!0,onClick:r,alt:"Close",css:[{"&& svg":{width:12,height:12,minWidth:"unset",minHeight:"unset"}}],children:(0,t.tZ)(l.Z,{})})}function v(e){var r=(0,s.Z)().fs,n=e.split("/"),t=n.pop(),a=n.join("/"),o=(0,i.useState)(!1),l=o[0],u=o[1],c=function(e){var r=e.path,n=e.initialExpanded,t=(0,s.Z)().fs;return(0,d.Z)({path:r,initialExpanded:n,fs:t})}({path:a.length>0?a:".",initialExpanded:!0}).children,f=null===c||void 0===c?void 0:c.filter((function(e){return e.filename!==t}));return{fileName:t,parentPath:a,renaming:l,siblings:f,handleRename:function(){u(!0)},handleCancel:function(){u(!1)},handleSubmit:function(n){var t=a.length>0?a+"/"+n:n;r.moveFile(e,t),u(!1)}}}function h(e){var r=e.filePath,n=e.onClick,i=e.onClose,a=e.isActive,l=e.innerRef,s=v(r),d=s.fileName,h=s.parentPath,b=s.renaming,g=s.siblings,y=s.handleRename,x=s.handleSubmit,w=s.handleCancel;return(0,t.BX)(o.Tg,{innerRef:l,elevated:a,css:[f.base,a?f.active:f.inactive,o.l0.pr(4),o.l0.flex.row,o.l0.align.center],children:[b?(0,t.tZ)(c.Z,{onSubmit:x,onCancel:w,loading:!1,siblings:g||[],parentPath:h,type:u.Tv.File,initialValue:d,rename:!0}):(0,t.tZ)(o.G7,{tag:"button",onDoubleClick:y,css:[m],onClick:n,children:(0,t.tZ)(o.xv,{children:r})}),(0,t.tZ)(p,{onClick:i})]})}function b(e){var r=e.title,n=e.onClick,i=e.onClose,a=e.isActive,l=e.innerRef;return(0,t.BX)(o.Tg,{elevated:a,innerRef:l,css:[f.base,a?f.active:f.inactive,o.l0.pr(4),o.l0.flex.row,o.l0.align.center],children:[(0,t.tZ)(o.G7,{tag:"button",css:[m],onClick:n,children:(0,t.tZ)(o.xv,{children:r})}),(0,t.tZ)(p,{onClick:i})]})}},28771:function(e,r,n){n.d(r,{q:function(){return g},s:function(){return y}});var t=n(35944),i=n(67294),a=n(23139),o=n(46846),l=n(58123),s=n(70917),u=n(98009),c=n(91131),d=n(29632),f=n(15682),m=n(24521);function p(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function v(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return p(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h={base:(0,s.iv)([a.l0.display.inlineFlex,a.l0.height("100%"),a.l0.color.foregroundDimmer,a.l0.borderRadius(4,4,0,0),{transition:"0.2s background-color"},{border:"1px solid transparent",padding:"7px",":focus":{borderColor:a.TV.accentPrimaryDefault,outline:"2px solid transparent",outlineOffset:"4px",":not(:focus-visible)":{outline:"none",borderColor:"transparent"}}}]),active:(0,s.iv)({color:a.TV.foregroundDefault}),inactive:(0,s.iv)({"&:hover":{color:a.TV.foregroundDefault}})},b=(0,s.iv)([a.l0.cursor.pointer,{border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]);function g(e){var r=e.paneId,n=e.isActive,o=e.onClick,l=(0,u.Se)().getTitle,s=(0,c.Dv)((0,d.z)(r)),m=l((0,c.Dv)(s.data)),p=i.useRef(null),g=v((0,f.XZ)(p,!1),4),y=g[0],x=g[1],w=g[2],Z=g[3];return(0,f.Ym)(x,p),(0,t.tZ)(a.Tg,{tabIndex:y,background:n?"default":"root",tag:"button",role:"tab","aria-selected":n,innerRef:p,css:[a.l0.p(8),b,h.base,n?h.active:h.inactive],onClick:function(){Z(),o()},onKeyDown:w,children:(0,t.BX)(a.xv,{children:[m,x]})})}function y(e){var r=e.filePath,n=e.onClick,i=e.onClose,s=e.isActive,u=e.isDragOver,c=e.innerRef,d=(0,m.vF)(r),f=d.fileName,p=d.parentPath,v=d.renaming,g=d.siblings,y=d.handleRename,x=d.handleSubmit,w=d.handleCancel;return(0,t.BX)(a.Tg,{innerRef:c,background:s||u?"default":"root",css:[h.base,s?h.active:h.inactive,a.l0.pr(4),a.l0.flex.row,a.l0.align.center],children:[v?(0,t.tZ)(l.Z,{onSubmit:x,onCancel:w,loading:!1,siblings:g||[],parentPath:p,type:o.Tv.File,initialValue:f,rename:!0}):(0,t.tZ)(a.G7,{tag:"button",onDoubleClick:y,css:[b,a.l0.justify.center,a.l0.pl(8),{paddingRight:2,backgroundColor:"transparent"}],onClick:n,children:(0,t.tZ)(a.xv,{children:r})}),(0,t.tZ)(m.PZ,{onClick:i})]})}},45536:function(e,r,n){n.d(r,{Z:function(){return l}});var t=n(67294),i=n(82820),a=n(55551),o={overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave"}};function l(){var e,r=(0,t.useRef)(null),n=null===(e=r.current)||void 0===e?void 0:e.osInstance(),l=(0,t.useRef)(0),s=(0,t.useRef)(0),u=(0,a.Z)();return{options:o,handleWheel:function(e){if(n&&0!==e.deltaY&&0===e.deltaX){var r=e.deltaY<0?-1:1,t=s.current!==r?n.scroll().position.x:l.current,i=25*r,a=n.scroll().max.x;l.current=Math.max(0,Math.min(a,t-i)),s.current=r;var o=function(){if(n){var e=n.scroll().position.x,r=l.current-e,t=Math.round(e+r/10);0!==r&&(n.scroll({x:t}),window.requestAnimationFrame(o))}};window.requestAnimationFrame(o)}},ref:r,className:u===i.V2.replitLight?"os-theme-dark":"os-theme-light"}}},45823:function(e,r,n){n.d(r,{Z:function(){return B}});var t=n(35944),i=n(44894),a=n(67294),o=n(92704),l=n(45193),s=n(7177),u=n(88768),c=n(19378),d=n(38880),f=n(67938),m=n(54929),p=n(30617),v=n(3204),h=n(8286);function b(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function g(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return b(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){var r,n=e.replId,i=e.onDone,a=e.isResubmit,l=e.lastUpdated,s=e.openIOtesterPane,c=(0,p.Z)().iotester,b=(0,u.CHr)({variables:{replId:n}}),y=c.lastRunAt.getTime()>l,x=(0,u.xhi)({variables:{replId:n}}).data,w="Repl"===(null===x||void 0===x?void 0:x.repl.__typename)?x.repl:null,Z=(null===w||void 0===w?void 0:w.template)||null,k=(null===Z||void 0===Z?void 0:Z.dueDate)||null,j=(new Date).toISOString(),I=(0,d.Z)(),S=I.showConfirm,C=I.showError,_=g((0,u.xAQ)({variables:{replId:n},onCompleted:function(e){var r=e.submitRepl;"UserError"!==r.__typename?"Repl"===r.__typename&&(S("Repl submitted"),i()):C(r.message)},onError:function(e){C(e.message)}}),2),A=_[0],E=_[1],O=y&&c.lastRunDidPass;return"Repl"===(null===(r=b.data)||void 0===r?void 0:r.repl.__typename)&&b.data.repl.ioTests.length>0&&!O?(0,t.BX)(m.Z,{css:[v.l0.colWithGap(24)],children:[(0,t.tZ)(f.h,{variant:"headerDefault",level:2,children:y?"Fix test failures before submitting":"Run tests before submitting"}),(0,t.tZ)(f.x,{multiline:!0,children:y?"Input/Output tests did not pass.":"Input/Output tests have not been run since this Repl was last changed."}),(0,t.BX)(m.Z,{css:[v.l0.rowWithGap(12),v.l0.justify.end],children:[(0,t.tZ)(o.ZP,{disabled:E.loading,colorway:"primary",onClick:function(){s(),i()},text:"View tests"}),(0,t.tZ)(o.ZP,{disabled:E.loading,onClick:function(){return A()},iconLeft:(0,t.tZ)(h.Z,{}),text:"Submit anyway"})]})]}):(0,t.BX)(m.Z,{css:[v.l0.colWithGap(24)],children:[(0,t.tZ)(f.h,{variant:"headerDefault",level:2,children:a?" Resubmit Repl":"Submit Repl"}),(0,t.tZ)(f.x,{multiline:!0,children:a?"This will re-notify Team admins about your submission.":"This will submit your Repl for review and notify the Team's admins."}),k&&k<j&&(0,t.tZ)(f.x,{multiline:!0,css:[v.l0.color.accentNegativeStronger],children:"Note: Your submission is past the due date and will be marked late."}),(0,t.BX)(m.Z,{css:[v.l0.rowWithGap(12),v.l0.justify.end],children:[(0,t.tZ)(o.ZP,{disabled:E.loading,onClick:i,text:"Cancel"}),(0,t.tZ)(o.ZP,{colorway:"primary",disabled:E.loading,onClick:function(){return A()},iconLeft:(0,t.tZ)(h.Z,{}),text:a?"Submit again":"Submit"})]})]})}var x=n(26400),w=n(93577),Z=n(46846),k=n(67289),j=n(37424),I=n(1517),S=n(71480),C=n(64711),_=n(23139);function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function E(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return A(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O,T=function(e){var r,n,i,o,l,s,c,f,m,p=e.replId,v=e.onDone,b=(0,d.Z)(),g=b.showConfirm,y=b.showError,x=(0,u.fuF)({variables:{replId:p},onCompleted:function(e){var r,n,t=e.repl;"Repl"===t.__typename&&(null===(r=t.origin)||void 0===r||null===(n=r.template)||void 0===n?void 0:n.modelSolution)&&"ReplTemplateModelSolution"===t.origin.template.modelSolution.__typename&&(R(t.origin.template.modelSolution.visibleAfterSubmitting),B(t.origin.template.modelSolution.visibleAfterPassingTests),z(t.origin.template.modelSolution.visibleAfterDueDate))}}),w=x.data,Z=x.loading,k=E((0,u.GA6)({onError:function(e){return y(e)},onCompleted:function(){g("Updated solution"),v()}}),2),A=k[0],O=k[1],T=E(a.useState(!1),2),U=T[0],R=T[1],N=E(a.useState(!1),2),P=N[0],B=N[1],M=E(a.useState(!1),2),D=M[0],z=M[1],X=E(a.useState(),2),F=X[0],G=X[1],L=(0,j.H)();if(a.useEffect((function(){var e="Students can ";if(U||D||P){e+="view the solution after";var r=[];U&&r.push("submitting their project"),P&&r.push("passing all tests"),D&&r.push("the due date has passed");for(var n=0;n<r.length;n++)n>0&&(e+=",",n===r.length-1&&(e+=" and")),e+=" "+r[n];e+="."}else e+="never view the solution.";G(e)}),[U,P,D]),Z)return(0,t.tZ)(_.G7,{css:[_.l0.center],children:(0,t.tZ)(I.Z,{})});var V="Repl"===(null===w||void 0===w?void 0:w.repl.__typename)&&"Team"===(null===(r=w.repl.owner)||void 0===r?void 0:r.__typename)&&(null===(n=w.repl.owner)||void 0===n?void 0:n.id),W="Repl"===(null===w||void 0===w?void 0:w.repl.__typename)&&(null===(i=w.repl.origin)||void 0===i||null===(o=i.template)||void 0===o?void 0:o.modelSolution);if(!W)return null;var q=W.id,H="Repl"===(null===w||void 0===w?void 0:w.repl.__typename)&&((null===(l=w.repl.origin)||void 0===l?void 0:l.ioTests.length)||(null===(s=w.repl.origin)||void 0===s||null===(c=s.unitTests)||void 0===c?void 0:c.tests.length)),$="Repl"===(null===w||void 0===w?void 0:w.repl.__typename)&&(null===(f=w.repl.origin)||void 0===f||null===(m=f.template)||void 0===m?void 0:m.dueDate);return(0,t.tZ)("form",{onSubmit:function(e){e.preventDefault(),V&&q&&A({variables:{input:{teamId:V,solutionId:q,visibleAfterSubmitting:U,visibleAfterPassingTests:P,visibleAfterDueDate:D}}})},children:(0,t.BX)(_.G7,{css:[_.l0.colWithGap(24)],children:[(0,t.tZ)(_.h4,{level:1,variant:"headerDefault",children:"Update solution"}),(0,t.BX)(_.G7,{css:[_.l0.colWithGap(16)],children:[(0,t.BX)(_.G7,{css:[_.l0.rowWithGap(8)],children:[(0,t.tZ)(_.XZ,{id:L("availableAfterSubmitting"),checked:U,onChange:function(){return R(!U)}}),(0,t.tZ)("label",{htmlFor:L("availableAfterSubmitting"),children:(0,t.tZ)(_.xv,{children:"Available after submitting"})})]}),(0,t.BX)(_.G7,{css:[_.l0.rowWithGap(8)],children:[(0,t.tZ)(_.XZ,{id:L("availableAfterPassingTests"),checked:P,onChange:function(){return B(!P)}}),(0,t.tZ)("label",{htmlFor:L("availableAfterPassingTests"),children:(0,t.BX)(_.G7,{css:[_.l0.rowWithGap(4)],children:[(0,t.tZ)(_.xv,{children:"Available after passing tests"}),(0,t.BX)(_.xv,{children:["(",H?"".concat(H," ").concat((0,C.Z)("test",H)," defined"):"no tests exist yet",")"]})]})})]}),(0,t.BX)(_.G7,{css:[_.l0.rowWithGap(8),{verticalAlign:"baseline"}],children:[(0,t.tZ)(_.XZ,{id:L("availableAfterDueDate"),checked:D,onChange:function(){return z(!D)}}),(0,t.tZ)("label",{htmlFor:L("availableAfterDueDate"),children:(0,t.BX)(_.G7,{css:[_.l0.rowWithGap(4)],children:[(0,t.tZ)(_.xv,{children:"Available after due date"}),(0,t.BX)(_.xv,{css:{textDecoration:"italic"},children:["(",$?(0,S.p)($):"no due date set yet",")"]})]})})]})]}),(0,t.tZ)(_.E_,{text:"".concat(F),colorway:U||P||D?"positive":"negative"}),(0,t.tZ)(_.G7,{css:{alignItems:"end"},children:(0,t.tZ)(_.zx,{stretch:!1,colorway:"primary",text:"".concat(O.loading?"Saving...":"Save"),iconLeft:(0,t.tZ)(h.Z,{}),disabled:O.loading})})]})})};function U(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function R(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function N(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return U(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=(R(O={},u.Sy.PublishTemplate,"Publish project"),R(O,u.Sy.EditTemplate,"Edit project"),R(O,u.Sy.Submit,"Submit"),R(O,u.Sy.Resubmit,"Resubmit"),R(O,u.Sy.UpdateModelSolution,"Update solution"),O);function B(e){var r=e.cta,n=e.replId,d=e.isGroupProject,f=e.openIOtesterPane,m=N(a.useState(null),2),v=m[0],b=m[1],g=function(){return b(null)},j=(0,w.Z)(),I=(0,p.Z)().fs,S=N(a.useState(0),2),C=S[0],_=S[1];a.useEffect((function(){if(j&&!(0,k.T3)(j)&&!(0,k.sL)(j))return I.watchOtFile(j,{onChange:function(e){e.changeSource===Z.Fl.Local&&_(Date.now())}})}),[j,I,_]);var A=Boolean(v&&[u.Sy.PublishTemplate,u.Sy.EditTemplate].includes(v));return a.useEffect((function(){r===u.Sy.ReviewSubmission&&(i.Z.get("annotations/educationModalDismissed")||(b(r),i.Z.set("annotations/educationModalDismissed",!0)))}),[r]),(0,t.BX)(t.HY,{children:[P[r]&&(0,t.tZ)(o.ZP,{onClick:function(){return b(r)},text:P[r],iconLeft:(0,t.tZ)(h.Z,{})}),(0,t.tZ)(s.Z,{isOpen:v===u.Sy.Submit||v===u.Sy.Resubmit,onRequestClose:g,maxWidth:512,children:(0,t.tZ)(y,{replId:n,onDone:g,isResubmit:v===u.Sy.Resubmit,lastUpdated:C,openIOtesterPane:f})}),(0,t.tZ)(l.Z,{preventClose:!0,isOpen:A,onRequestClose:g,width:d?"large":"medium",children:(0,t.tZ)(c.Z,{replId:n,onDone:g})}),(0,t.tZ)(s.Z,{isOpen:v===u.Sy.UpdateModelSolution,onRequestClose:g,maxWidth:600,children:(0,t.tZ)(T,{replId:n,onDone:g})}),(0,t.tZ)(x.Z,{isOpen:v===u.Sy.ReviewSubmission,onRequestClose:g})]})}},60210:function(e,r,n){var t=n(35944),i=n(23139),a=n(46253),o=n(35060);n(67294);r.Z=function(e){var r,n=e.unreadThreadCount,l=void 0===n?0:n,s=e.isOpen,u=e.onClick,c=l>0;return(0,t.BX)(i.G7,{css:[i.l0.position.relative],children:[c?(0,t.tZ)("div",{css:[i.l0.width(8),i.l0.height(8),i.l0.backgroundColor.redStronger,i.l0.position.absolute,s?i.l0.top(1):i.l0.top(-2),s?i.l0.right(1):i.l0.right(-2),i.l0.transition.snappy,i.l0.borderRadius("full")]}):null,(0,t.tZ)(i.hU,{size:28,alt:(r=s,r?"Hide inbox":"View inbox"),onClick:u,css:[i.l0.width(36),i.l0.height(36),i.l0.transition.snappy,i.l0.cursor.pointer,s?i.l0.borderRadius("full"):i.l0.borderRadius(8),{borderWidth:i.TV.borderWidthDefault,borderStyle:"solid",borderColor:s?i.TV.accentPrimaryDefault:i.TV.outlineStronger,backgroundColor:s?i.TV.accentPrimaryDimmer:i.TV.backgroundHighest},{":hover":{borderColor:i.TV.accentPrimaryDefault,background:i.TV.accentPrimaryDimmest+" !important"}}],children:s?(0,t.tZ)(o.Z,{size:24}):(0,t.tZ)(a.Z,{size:24})})]})}},43713:function(e,r,n){n.d(r,{Z:function(){return _}});var t=n(35944),i=n(79547),a=n.n(i),o=n(67294),l=n(88768),s=n(44054),u=n(11427),c=n(94184),d=n.n(c),f=n(1517),m=n(5560),p=n(49337),v=n(30617),h=n(72839),b=n(23139);function g(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){g(e,r,n[r])}))}return e}function x(e){var r=e.hideModal,n=e.onUserClick,i=e.isOpen,a=(0,m.Z)(),o=(0,v.Z)().presence,l=(0,p.Z)({presence:o});return(0,t.tZ)(b.u_,{isOpen:i,onRequestClose:r,children:(0,t.tZ)(Z,{replId:a,onUserClick:n,activeUsers:l,hideModal:r})})}function w(e,r){return r.some((function(r){return r.id===e}))}function Z(e){var r=e.replId,n=e.activeUsers,i=e.onUserClick,a=e.hideModal,o=(0,l.Flq)({variables:{replId:r}}),s=o.data,u=o.loading,c=o.error;if(u)return(0,t.tZ)(b.G7,{css:[b.l0.flex.row,b.l0.justify.center,b.l0.p(32)],children:(0,t.tZ)(f.Z,{})});if(c)return(0,t.tZ)("div",{children:c.message});if("Repl"===(null===s||void 0===s?void 0:s.repl.__typename)){var d=s.repl,m=s.currentUser,p=d.user,v=p&&n.find((function(e){return e.username===p.username})),h=d.permissions.filter((function(e){var r=e.user;return r&&w(r.id,n)})),g=d.permissions.filter((function(e){var r=e.user;return r&&!w(r.id,n)}));return(0,t.BX)(b.G7,{css:[b.l0.colWithGap(24)],children:[(0,t.tZ)(b.h4,{level:1,variant:"headerDefault",children:"Multiplayers"}),(0,t.tZ)(b.xv,{multiline:!0,children:"Users can interact with this Repl in real time."}),(0,t.tZ)(b.G7,{css:[b.l0.maxHeight(330),{overflowY:"auto"}],children:(0,t.BX)(b.G7,{children:[p?(0,t.tZ)(j,y({},p,{onClick:i,isOnline:Boolean(v),color:v?v.color:"transparent",isOwner:!0,hideModal:a,canClickAvatar:Boolean(v)&&p.id!==(null===m||void 0===m?void 0:m.id),type:l.aQH.Rw})):null,h.map((function(e){var r=e.type,o=e.user;if(!o)throw new Error("Expected user");var l=n.find((function(e){return e.username===o.username}));if(!l)throw new Error("Expected user online");var s=o.id!==(null===m||void 0===m?void 0:m.id);return(0,t.tZ)(j,y({onClick:i,type:r},o,{isOnline:!0,canClickAvatar:s,color:l.color,hideModal:a,isOwner:!1}),"chat-user-list-".concat(o.username))})),g.map((function(e){var r=e.type,n=e.user;if(!n)throw new Error("Expected user");return(0,t.tZ)(j,y({onClick:i,type:r},n,{canClickAvatar:!1,isOnline:!1,color:"transparent",hideModal:a,isOwner:!1}),"chat-user-list-".concat(n.username))}))]})})]})}return"ReplRedirect"===(null===s||void 0===s?void 0:s.repl.__typename)?(0,t.BX)("div",{children:["This Repl has moved to"," ",(0,t.tZ)("a",{href:s.repl.replUrl,children:s.repl.replUrl})]}):"SubscriptionExpiredError"===(null===s||void 0===s?void 0:s.repl.__typename)?(0,t.BX)("div",{children:["Your subscription has expired.",(0,t.tZ)("a",{href:"/pricing",children:"Upgrade here"})]}):null}var k={r:"read only",rw:"can edit"};function j(e){var r=e.type,n=e.id,i=e.username,o=e.image,l=e.isOnline,s=e.isOwner,u=e.color,c=e.onClick,f=e.hideModal,m=e.canClickAvatar,p=(0,h.Z)();return(0,t.BX)("div",{className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",u]]])+" "+(d()("user-list-item-wrapper",{online:l})||""),children:[(0,t.tZ)("div",{onClick:function(){m&&(p({username:i,id:n}),f())},className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",u]]])+" image",children:(0,t.tZ)("img",{src:o,className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",u]]])+" "+((l?"":"offline")||"")})}),(0,t.BX)("div",{className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",u]]])+" info",children:[(0,t.BX)("div",{className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",u]]]),children:[(0,t.BX)("a",{href:"/@".concat(i),target:"_blank",onClick:c,className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",u]]]),children:["@",i]}),!l&&" (offline)"]}),(0,t.tZ)("div",{className:a().dynamic([["81a9a688c6047602",[m?"pointer":"auto",u]]]),children:s?"owner":k[r]})]}),(0,t.tZ)(a(),{id:"81a9a688c6047602",dynamic:[m?"pointer":"auto",u],children:".user-list-item-wrapper.__jsx-style-dynamic-selector{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-ordinal-group:2;-webkit-order:1;-moz-box-ordinal-group:2;-ms-flex-order:1;order:1}.image.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;cursor:".concat(m?"pointer":"auto","}img.__jsx-style-dynamic-selector{width:40px;height:40px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;border:3px solid ").concat(u,";background:white;-o-object-fit:cover;object-fit:cover}.info.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-left:var(--space-8)}img.offline.__jsx-style-dynamic-selector{-webkit-filter:grayscale(100%);filter:grayscale(100%)}.user-list-item-wrapper.online.__jsx-style-dynamic-selector{-webkit-box-ordinal-group:1;-webkit-order:0;-moz-box-ordinal-group:1;-ms-flex-order:0;order:0}")})]})}var I=n(56834);function S(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function C(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return S(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){var r=C(o.useState(!1),2),n=r[0],i=r[1],c=(0,m.Z)(),d=(0,l.qC4)({variables:{ids:e.users.map((function(e){return e.id}))},ssr:!1,skip:!e.users.length}),f=d.data,p=d.loading,v=d.error,h=e.users.reduce((function(e,r){return e[r.id]=r.color,e}),{});if(p)return null;if(v)return null;if(!(null===f||void 0===f?void 0:f.currentUser))return null;var g=f.usersByIds,y=f.currentUser,w=g.filter((function(e){return e.id!==y.id})),Z=w.length-3;return(0,t.BX)(b.G7,{tag:"ul",className:"multiplayer-users-container",css:[b.l0.px(8),b.l0.rowWithGap(4),b.l0.align.center],"aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[Z>0?(0,t.tZ)("li",{className:a().dynamic([["2d2cab94a913fd79",[s.j.mobileMax+100]]]),children:(0,t.tZ)(b.zx,{onClick:function(){return i(!0)},text:"+ ".concat(Z),css:{background:"none"}})}):null,w.slice(0,3).map((function(r){return(0,t.tZ)("li",{className:a().dynamic([["2d2cab94a913fd79",[s.j.mobileMax+100]]]),children:(0,t.tZ)(u.Z,{id:r.id,username:r.username,image:r.image,color:h[r.id],onClick:e.onAvatarClick,canClick:!0})},r.id)})),(0,t.tZ)(x,{isOpen:n,hideModal:function(){return i(!1)},onUserClick:function(){(0,I.j)(I.U3.MP2_VISITED_PROFILE,{replId:c,from:"OnlineUsers"})}}),(0,t.tZ)(a(),{id:"2d2cab94a913fd79",dynamic:[s.j.mobileMax+100],children:".multiplayer-users-container.__jsx-style-dynamic-selector li.__jsx-style-dynamic-selector{list-style-type:none}@media only screen and (max-width:".concat(s.j.mobileMax+100,"px){.multiplayer-users-container.__jsx-style-dynamic-selector{display:none}}")})]})}}}]);
//# sourceMappingURL=3298-9eda1e598cfbd4d2.js.map