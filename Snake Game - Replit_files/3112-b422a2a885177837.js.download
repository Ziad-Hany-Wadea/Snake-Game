"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3112],{81193:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(67294);function i(e){var t=(0,r.useState)(!1),n=t[0],i=t[1],o=(0,r.useRef)(0);return[n,(0,r.useMemo)((function(){return{onDragEnter:function(e){e.preventDefault(),o.current++,i(!0)},onDragLeave:function(e){e.preventDefault(),o.current--,0===o.current&&i(!1)},onDrop:function(t){var n,r;t.preventDefault(),o.current=0,i(!1),t.persist();var a=Array.from(null!==(r=null===t||void 0===t||null===(n=t.dataTransfer)||void 0===n?void 0:n.files)&&void 0!==r?r:[]);0!==a.length?e(a):e(null)},onDragOver:function(e){e.preventDefault()}}}),[e])]}},3104:function(e,t,n){n.d(t,{G:function(){return Z},Z:function(){return k}});var r=n(35944),i=(n(67294),n(70917)),o=n(88768),a=n(54929),l=n(14285),u=n(3204),c=n(56834),s=n(24506),d=n(27464),f=n(92704),p=n(66552),h=n(24388),v=n(67938),y=n(98510);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z=(0,i.iv)([s.gU.filled,u.l0.p(8),{width:"auto",height:"auto"}]);function k(e){var t=e.repl,n=e.currentUser,i=e.surface,s=void 0===i||i,m=w((0,o.lUA)(),2),g=m[0],k=m[1].loading,x=(0,r.BX)(r.HY,{children:[(null===n||void 0===n?void 0:n.isVerified)&&(0,r.tZ)(f.zx,{css:[s&&Z],disabled:k,onClick:function(){t.currentUserDidLike||(0,c.j)(c.U3.REACTED_TO_REPL,{replView:"https://replit.com"+t.url,reaction:"heart",isReplTalk:!1,item:"repl",isCommunityPublish:t.wasPosted,isAppPublish:t.wasPublished}),g({variables:{input:{replId:t.id}},optimisticResponse:{toggleReplLike:b({},t,{likeCount:Math.max(0,t.likeCount+(t.currentUserDidLike?-1:1)),currentUserDidLike:!t.currentUserDidLike})}})},iconLeft:t.currentUserDidLike?(0,r.tZ)(y.Z,{}):(0,r.tZ)(l.Z,{}),text:t.likeCount>0?(0,h.d)(t.likeCount):"Like"}),n&&!n.isVerified&&(0,r.BX)(a.Z,{css:[u.l0.flex.row,u.l0.align.center,u.l0.backgroundColor.backgroundHigher,u.l0.borderRadius(8),u.l0.pr(8)],children:[(0,r.tZ)(d.Z,{alt:"Verify your email to like",css:s&&Z,disabled:!0,children:(0,r.tZ)(l.Z,{})}),(0,r.tZ)(v.x,{color:"dimmer",children:(0,h.d)(t.likeCount)})]}),!n&&(0,r.BX)(a.Z,{css:[u.l0.flex.row,u.l0.align.center,u.l0.backgroundColor.backgroundHigher,u.l0.borderRadius(8),u.l0.pr(8)],children:[(0,r.tZ)(d.Z,{alt:"Log in to like",css:s&&Z,disabled:!0,children:(0,r.tZ)(l.Z,{})}),(0,r.tZ)(v.x,{color:"dimmer",children:(0,h.d)(t.likeCount)})]})]});return s?(0,r.tZ)(p.Z,{background:"default",css:[u.l0.borderRadius(8)],children:x}):(0,r.tZ)(a.Z,{children:x})}},63112:function(e,t,n){n.d(t,{Z:function(){return Pt}});var r=n(35944),i=n(67294),o=n(88768),a=n(66552),l=n(3204),u=n(54929),c=n(92704),s=n(16108),d=n(67938),f=n(81193),p=n(58375),h=n(59339),v=n(7177),y=n(38956),m=n(27464),g=n(79744),b=n(70917),w=n(52620),Z=n(56834),k=n(72829),x=n(45309),S=n(20255),R=n(87349);function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I=(0,b.iv)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function j(e){var t=e.src,n=e.alt;return(0,r.BX)(u.Z,{css:[I,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,r.tZ)(g.Z,{objectFit:"cover",layout:"fill",src:t,alt:n}),(0,r.tZ)(u.Z,{css:[I,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}function P(e){var t=e.onClick;return(0,r.tZ)(u.Z,{onClick:function(){(0,Z.j)(Z.U3.RUN_BUTTON_CLICKED,{context:"replView",overlay:!0}),t()},css:[I,l.l0.center,{":hover > svg":{transform:"scale(1.2)"},"> svg":{transition:"transform 200ms",width:64,height:"auto",cursor:"pointer",filter:l.TV.shadowDefault}}],children:(0,r.tZ)(R.Z,{color:l.TV.white})})}function N(e){var t=e.isPublished,n=e.onChangeClick,o=e.onRemoveClick,a=O(i.useState(!1),2),s=a[0],d=a[1];return(0,r.BX)(u.Z,{css:[l.l0.rowWithGap(8),l.l0.align.center],children:[(0,r.tZ)(c.ZP,{onClick:function(e){e.stopPropagation(),n()},text:"Change image"}),t?(0,r.tZ)(m.Z,{alt:"Cannot remove cover image of a published Repl",disabled:!0,colorway:"negative",children:(0,r.tZ)(p.Z,{})}):null,t?null:(0,r.tZ)(u.Z,{children:(0,r.tZ)(m.Z,{alt:"Remove Image",colorway:"negative",onClick:function(){d(!0)},children:(0,r.tZ)(p.Z,{})})}),(0,r.tZ)(v.Z,{isOpen:s,onRequestClose:function(){return d(!1)},children:(0,r.tZ)(h.Z,{confirmLabel:"Yes, remove this image",title:"Remove image",isDestructive:!0,onConfirm:function(){o(),d(!1)},onCancel:function(){return d(!1)},children:"This will remove your Repl\u2019s cover image. You can always add one back at any time."})})]})}function D(e){var t=e.onClick,n=e.isActive;return(0,r.BX)(u.Z,{css:[l.l0.colWithGap(16),l.l0.center],children:[(0,r.BX)(u.Z,{css:[l.l0.colWithGap(8),l.l0.center],children:[(0,r.tZ)(u.Z,{css:[{"> svg":{width:44,height:"auto"}},n&&{color:l.TV.accentPrimaryDefault}],children:(0,r.tZ)(w.Z,{})}),(0,r.tZ)(d.x,{children:"Drag and drop a cover image"})]}),(0,r.tZ)(u.Z,{children:(0,r.tZ)(c.ZP,{onClick:t,iconLeft:(0,r.tZ)(S.Z,{}),colorway:"primary",text:"Or select a file"})})]})}function L(e){var t=e.onClick,n=e.repl,a=function(e){if(null!==e&&0!==e.length){var t=e.find((function(e){return e.type.startsWith("image/")}));t?(p(null),g.uploadImage(t,x.N.ReplCoverImage)):p("Expected an image file")}},c=i.useRef(null),s=O(i.useState(null),2),d=s[0],p=s[1],h=O(i.useState(n.imageUrl),2),v=h[0],m=h[1],g=(0,y.Z)({onUpload:function(e){var t=e.url;b({variables:{input:{id:n.id,imageUrl:t}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:E({},n,{imageUrl:t})}}})},onUploadPreview:function(e){var t=e.dataUrl;m(t)},onError:function(e){p(e.message)}}),b=O((0,o.wPL)({onCompleted:function(e){p(null),m(e.updateRepl.repl.imageUrl)}}),1)[0],w=n.currentUserPermissions.changeImageUrl,Z=O((0,f.Z)(a),2),S=Z[0],R=Z[1],C=!v&&w;return(0,r.BX)(u.Z,E({css:[l.l0.center,l.l0.flex.growAndShrink(1),!C&&{backgroundColor:l.TV.black},{borderBottomLeftRadius:8,borderBottomRightRadius:8,position:"relative",":hover .image-controls":{opacity:1}}]},R,{children:[v?(0,r.tZ)(j,{src:v,alt:n.title}):null,C?null:(0,r.tZ)(P,{onClick:t}),v&&w?(0,r.BX)(u.Z,{className:"image-controls",css:[{position:"absolute",top:l.TV.space8,right:l.TV.space8,opacity:0,".is-touch-device &":{opacity:1}}],children:[(0,r.tZ)(N,{onChangeClick:function(){var e;null===(e=c.current)||void 0===e||e.click()},onRemoveClick:function(){b({variables:{input:{id:n.id,imageUrl:null}}})},isPublished:Boolean(n.lastPublishedAt)}),d?(0,r.tZ)("div",{className:"error",children:d}):null]}):null,C?(0,r.tZ)(D,{isActive:S,onClick:function(){var e;null===(e=c.current)||void 0===e||e.click()}}):null,w?(0,r.tZ)("input",{css:{width:.1,height:.1,opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},ref:c,accept:k.W9.join(","),type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&a(r?Array.from(r):null)}}):null]}))}var T=n(17221),U=n(73049),B=n(56700),F=n(21217),_=n(81544),V=n(34051),M=n.n(V),X=n(92876),z=n(11163),G=n.n(z),H=n(48390),W=n(27754),K=n(44160),$=n(39441),q=n(35932),Y=n(9440),J=n(11938),Q=n(25108);function ee(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(c){return void n(c)}l.done?t(u):Promise.resolve(u).then(r,i)}var te=n(91272),ne=n(46846);function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var oe=".lesson/lessonplan.md";function ae(e){var t=e.fs,n=e.container,r=e.dotReplit,o=e.skip,a=e.preferredFile,l=ie(i.useState(null),2),u=l[0],c=l[1],s=function(e){var t,n=ie(i.useState(null===(t=e.getContext())||void 0===t?void 0:t.repl.id),2),r=n[0],o=n[1];return i.useEffect((function(){return e.onConnectionStateChanged((function(t){var n;t===W.e.CONNECTING&&o(null===(n=e.getContext())||void 0===n?void 0:n.repl.id)}))}),[e]),r}(n);return i.useEffect((function(){if(!o&&s){var e=!1;return Promise.all([(0,te.W)({replId:s,dotReplit:r,fs:t}),"LessonPlan"===(null===a||void 0===a?void 0:a.type)?t.stat(oe):null,"FilePath"===(null===a||void 0===a?void 0:a.type)?t.stat(a.path):null]).then((function(t){var n=ie(t,3),r=n[0],i=r.entrypoint,o=r.readmeFile,l=n[1],u=n[2];e||("LessonPlan"===(null===a||void 0===a?void 0:a.type)&&l&&l.exists&&l.type===ne.Tv.File?c(oe):"FilePath"===(null===a||void 0===a?void 0:a.type)&&u&&u.exists&&u.type===ne.Tv.File?c(a.path):"Readme"===(null===a||void 0===a?void 0:a.type)&&o?c(o):i&&c(i))})),function(){e=!0}}}),[t,r,s,o,a]),u}var le,ue=n(35589);function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e){var t,n,r=e.currentUser,a=e.repl,l=e.initialViewMode,u=e.enableDeeplinks,c=se(i.useState(""),2),s=c[0],d=c[1],f=(0,i.useState)(B.e.DISCONNECTED),p=f[0],h=f[1],v=(0,i.useState)(F.A.OFFLINE),y=v[0],m=v[1],g=(0,i.useState)((function(){return function(e){var t,n=e.setBsodSentryEventId,r=(0,W.Z)({onUnrecoverableError:function(e){if(e.message.toLowerCase().includes("repl not found"))G().push("/home","~/");else{Q.error(e),X.Tb(e);var t=(0,q.Z)(e,{tags:{replviewer:"true"}});n(t)}}}),i=(0,H.Z)({container:r}),o=(0,J.Z)({container:r,fs:i}),a=(0,$.Z)({container:r,dotReplit:o}),l=(0,K.Z)({container:r,mode:"shellrunner",beforeRun:(t=M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Y.Z)(r,o);case 2:if(!e.sent){e.next=5;break}return e.next=5,a.installPackages();case 5:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){ee(o,r,i,a,l,"next",e)}function l(e){ee(o,r,i,a,l,"throw",e)}a(void 0)}))})});return{container:r,fs:i,runner:l,dotReplit:o,packager:a}}({setBsodSentryEventId:d})})),b=g[0],w=b.container,k=b.fs,x=b.dotReplit,S=b.runner,R=b.packager,C=(0,i.useRef)((0,U.u9)()),A=(null===(t=a.replViewSettings)||void 0===t?void 0:t.defaultView)===o.dZH.ReplFile&&a.replViewSettings.replFile?a.replViewSettings.replFile:void 0,E={type:"Readme"};a.isProject?E={type:"LessonPlan"}:A&&(E={type:"FilePath",path:A});var O=(null===(n=a.replViewSettings)||void 0===n?void 0:n.defaultView)!==o.dZH.ReplImage&&(a.publishedAs===o.O2h.Template||a.isProject),I=(0,i.useState)((function(){return l===le.Code||C.current||A||O?{type:"code",fs:k,container:w,dotReplit:x}:null})),j=I[0],P=I[1],N=(0,i.useState)(C.current),D=N[0],L=N[1],T=se(i.useState(null),2),V=T[0],z=T[1],te=Boolean("code"===(null===j||void 0===j?void 0:j.type)&&!j.deeplink&&!C.current),ne=ae({fs:k,dotReplit:x,container:w,preferredFile:E,skip:!te});(0,ue.Z)({fs:k,currentDeeplink:"code"===(null===j||void 0===j?void 0:j.type)?j.deeplink:void 0,onChange:function(e){P(e?{deeplink:e,type:"code",container:w,fs:k,dotReplit:x}:null)},enabled:u});var re=se((0,o.yo9)({variables:{replId:a.id}}),1)[0];(0,i.useEffect)((function(){if((0,U.u9)()){var e=!1;return(0,U.mv)(k).then((function(t){var n=t.path,r=t.line,i=t.col;e||n&&P({type:"code",container:w,fs:k,dotReplit:x,deeplink:{path:n,line:r,col:i}})})),function(){e=!0}}}),[w,k,x]),(0,i.useEffect)((function(){te&&ne&&P({type:"code",container:w,fs:k,dotReplit:x,deeplink:{path:ne}})}),[te,ne,w,k,x]),(0,i.useEffect)((function(){V&&P("server"!==V?{type:"vnc",container:w,fs:k}:{type:"server",previewUrl:a.previewUrl})}),[w,k,V,a.previewUrl]),(0,i.useEffect)((function(){p!==B.e.CONNECTED&&z(null)}),[p]);var ie=(0,_.b)({repl:a,currentUser:r}),oe=function(e){return!!["html","web_project","kaboom"].includes(e.lang.id)||Boolean(e.config.isServer)}(a),ce=D||Boolean(j&&("code"===j.type||"vnc"===j.type||"replboxDisplay"===j.type||"terminal"===j.type));(0,i.useEffect)((function(){if(ce&&w.getConnectionState()===B.e.DISCONNECTED){w.connect({context:ie});var e=oe?[w.close]:[S.onStateChanged(m),w.onConnectionStateChanged(h),w.onPortOpened((function(e){var t=e.isVnc;z(t?"vnc":"server")})),w.close];return function(){e.forEach((function(e){return e()}))}}}),[ce,w,S,ie,oe]);var de=(0,i.useRef)(!1);return(0,i.useEffect)((function(){y===F.A.IDLE&&de.current&&(de.current=!1,"terminal"===(null===j||void 0===j?void 0:j.type)&&S.run())}),[y,j,S]),{fs:k,openFile:function(e){"server"!==(null===j||void 0===j?void 0:j.type)&&"replboxDisplay"!==(null===j||void 0===j?void 0:j.type)||m(F.A.IDLE),P({type:"code",container:w,fs:k,deeplink:{path:e},dotReplit:x}),S.getRunState()===F.A.RUNNING&&S.stopRun()},viewState:j,runRepl:function(){if(L(!1),r&&re(),(0,Z.j)(Z.U3.REACTED_TO_REPL,{replView:"https://replit.com"+a.url,reaction:"repl_ran",isReplTalk:!1,item:"repl",isCommunityPublish:a.wasPosted,isAppPublish:a.wasPublished}),oe){var e,t,n=(null===(e=a.deployment)||void 0===e||null===(t=e.activeRelease)||void 0===t?void 0:t.previewUrl)||a.previewUrl;return P({type:"server",previewUrl:n}),void m(F.A.RUNNING)}return a.lang.canUseShellRunner?(P("server"===V?{type:"server",previewUrl:a.previewUrl}:"vnc"===V?{type:"vnc",container:w,fs:k}:{type:"terminal",runner:S,packager:R}),S.getRunState()!==F.A.IDLE?void(de.current=!0):void S.run()):a.lang.hasReplboxWebview?(P({type:"replboxDisplay",fs:k}),void m(F.A.RUNNING)):void P({type:"deprecationNotice"})},stopRepl:function(){P(null),L(!1),m(F.A.IDLE),oe||S.getRunState()===F.A.RUNNING&&S.stopRun()},runState:y,isFileTreeOpen:D,setIsFileTreeOpen:L,didBsod:Boolean(s),showUrlOutput:oe,devClearBsod:function(){d("")}}}!function(e){e.Code="Code",e.Output="Output"}(le||(le={}));var fe=n(77346),pe=n(79547),he=n.n(pe),ve=n(67289),ye=n(62208),me=n(93770),ge=n(44054),be=ge.j.tabletMin,we=n(5152),Ze=n.n(we),ke=n(82820),xe=n(55551);function Se(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(c){return void n(c)}l.done?t(u):Promise.resolve(u).then(r,i)}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ce=function(){var e,t=(e=M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(2738),n.e(4474)]).then(n.t.bind(n,74474,23)).then((function(e){return e.default})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Se(o,r,i,a,l,"next",e)}function l(e){Se(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),Ae=Ze()(Ce,{ssr:!1,loading:function(){return null}});function Ee(e){var t=e.contents,n={scrollToContent:!0};try{n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Re(e,t,n[t])}))}return e}({},n,JSON.parse(t||"{}"))}catch(o){}var i=(0,xe.Z)();return(0,r.BX)("div",{className:"jsx-f04e2237e6284377 excalidraw-wrapper",children:[(0,r.tZ)(Ae,{viewModeEnabled:!0,zenModeEnabled:!0,initialData:n,theme:i===ke.V2.replitLight?"light":"dark"}),(0,r.tZ)(he(),{id:"f04e2237e6284377",children:".excalidraw-wrapper.jsx-f04e2237e6284377{cursor:all-scroll;height:100%;width:100%}"})]})}var Oe=n(34837),Ie=n.n(Oe),je=n(51409);function Pe(e){var t=e.contents,n=e.isKbmsprite,o=i.useRef(null);return i.useEffect((function(){var e=o.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var r=JSON.parse(t),i=Ie()({canvas:e,data:n?(0,je.C)(r):r,readonly:!0});return function(){i.cleanUp()}}}),[t,n]),(0,r.tZ)("canvas",{ref:o,className:"jsx-93826966b3fae22 pedit",children:(0,r.tZ)(he(),{id:"93826966b3fae22",children:".pedit.jsx-93826966b3fae22{width:100%;height:100%}"})})}var Ne=n(91299),De=n(24039),Le=n(5426),Te=n(45421),Ue=n(24931);function Be(e){var t=e.fs,n=e.deeplink,i=null===n||void 0===n?void 0:n.path,o=(0,Ne.Z)({fs:t,path:i});return(0,r.BX)("div",{className:he().dynamic([["2895239035e2208a",[be]]])+" file-viewer",children:[(0,r.BX)("div",{className:he().dynamic([["2895239035e2208a",[be]]])+" content",children:[o.result&&o.result.fileViewerType===Te.D.Media?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[be]]])+" media",children:(0,r.tZ)(ye.A,{content:me.Z.from(o.result.content).toString("base64"),mime:(0,ve.yC)(o.result.path)})}):null,o.isLoading&&o.fileViewerType===Te.D.Media?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[be]]])+" file-loader",children:(0,r.tZ)(De.Z,{})}):null,o.result&&o.result.fileViewerType===Te.D.Markdown?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[be]]])+" markdown",children:(0,r.tZ)(Ue.Z,{path:o.result.path,source:o.result.content.toString(),fs:t,sourcePos:!1})}):null,o.isLoading&&o.fileViewerType===Te.D.Markdown?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[be]]])+" file-loader",children:(0,r.tZ)(De.Z,{})}):null,o.result&&o.result.fileViewerType===Te.D.Draw?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[be]]])+" draw",children:(0,r.tZ)(Ee,{contents:o.result.content.toString()})}):null,o.isLoading&&o.fileViewerType===Te.D.Draw?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[be]]])+" file-loader",children:(0,r.tZ)(De.Z,{})}):null,o.result&&o.result.fileViewerType===Te.D.Code?(0,r.tZ)(Le.Z,{filePath:o.result.path,code:o.result.content.toString(),fontSize:14}):null,o.isLoading&&o.fileViewerType===Te.D.Code?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[be]]])+" file-loader",children:(0,r.tZ)(De.Z,{})}):null,o.result&&o.result.fileViewerType===Te.D.Pedit?(0,r.tZ)(Pe,{contents:o.result.content.toString(),isKbmsprite:!!(null===i||void 0===i?void 0:i.endsWith(".kbmsprite"))}):null,!o.isLoading&&o.error?(0,r.tZ)("div",{className:he().dynamic([["2895239035e2208a",[be]]])+" error",children:(0,r.BX)("div",{className:he().dynamic([["2895239035e2208a",[be]]]),children:["Could not load ",o.error.path]})}):null]}),(0,r.tZ)(he(),{id:"2895239035e2208a",dynamic:[be],children:".file-viewer.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;align:stretch;height:100%;width:100%}.markdown.__jsx-style-dynamic-selector{word-break:break-word;max-width:840px;margin:0 auto;padding:var(--space-16);overflow-y:auto;position:relative;height:100%}.draw.__jsx-style-dynamic-selector{height:100%;width:100%}.file-tree.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);overflow:auto;display:none}.content.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;height:100%;overflow-y:auto;position:relative}.file-loader.__jsx-style-dynamic-selector{width:100%;padding-top:var(--space-8);padding-left:var(--space-8);position:absolute;top:0;left:0;z-index:100;opacity:0;-webkit-animation:fadeIn ease 0s forwards;-moz-animation:fadeIn ease 0s forwards;-o-animation:fadeIn ease 0s forwards;animation:fadeIn ease 0s forwards;-webkit-animation-delay:200ms;-moz-animation-delay:200ms;-o-animation-delay:200ms;animation-delay:200ms}.media.__jsx-style-dynamic-selector,.error.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@media screen and (min-width:".concat(be,"px){.file-tree.__jsx-style-dynamic-selector{display:block;width:260px}}")})]})}var Fe=n(55662),_e=n(50278),Ve=n(24388),Me=n(96194),Xe=n(78842);function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var He=(0,u.K)("div");function We(e){var t=e.replId,n=e.language,o=Ge(i.useState((function(){return(0,Me.Z)({beforeRun:function(){return Promise.resolve()},getMainFileContents:function(){return(0,Xe.Z)({language:e.language,fs:e.fs})}})})),1)[0],a=i.useRef(null);return i.useEffect((function(){if(a.current){var e=!1;return o.load({replId:t,language:n,iframeParent:a.current}).then((function(){e||o.run()})),function(){e=!0,o.getRunState()!==F.A.OFFLINE&&o.destroy()}}}),[o,t,n]),(0,r.tZ)(He,{ref:a,css:[l.l0.width("100%"),l.l0.height("100%"),{backgroundColor:"white",borderBottomRightRadius:8,borderBottomLeftRadius:8,iframe:[l.l0.width("100%"),l.l0.height("100%"),{display:"block",utline:"none",border:"none",borderBottomRightRadius:8,borderBottomLeftRadius:8}]}]})}var Ke=n(41045),$e=n(14214),qe=n(37156),Ye=n(95883),Je=n(89796),Qe=n(73440),et=n(39511);function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nt(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(c){return void n(c)}l.done?t(u):Promise.resolve(u).then(r,i)}function rt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){nt(o,r,i,a,l,"next",e)}function l(e){nt(o,r,i,a,l,"throw",e)}a(void 0)}))}}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e){var t=e.fs,n=e.language,o=e.setActivePath,a=e.activePath,c=e.onNodeClick,s=(0,Qe.Z)({fs:t}),f=s.dirInfo,p=s.setExpandedState,h=s.watchDir,v=it(i.useState(!1),2),y=v[0],m=v[1];return(0,r.tZ)(Je.i.Provider,{value:{activePath:a,setActivePath:o,downloadFile:function(){},fs:t,transformChildren:(0,Ye.Z)({language:n,shouldHideHiddenFiles:!y}),setPendingFileType:function(){},uploadFiles:function(){},pendingFileType:null,getNodeType:function(){var e=rt(M().mark((function e(n){var r;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readFile(n);case 2:return r=e.sent,e.abrupt("return",r.error===ne.Df.IsDirectory?ne.Tv.Directory:ne.Tv.File);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pendingUploads:[],currentRenamePath:null,setCurrentRenamePath:function(){},pendingDelete:null,setPendingDelete:function(){},overwriteNode:function(){},renameNode:function(){},deleteNode:function(){},duplicateFile:rt(M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),currentOp:null,nodeOpError:null,dirInfo:f,setExpandedState:p,watchDir:h},children:(0,r.tZ)(qe.Z,{children:(0,r.BX)(u.Z,{css:[l.l0.flex.column,l.l0.p(8),(0,b.iv)({overflow:"auto",height:"100%"})],children:[(0,r.BX)(u.Z,{css:[l.l0.rowWithGap(4),l.l0.p(8),l.l0.justify.spaceBetween],children:[(0,r.tZ)(d.h,{level:3,variant:"subheadDefault",children:"Files"}),(0,r.tZ)(et.Z,{actions:[y?et.s.HideHiddenFiles:et.s.ShowHiddenFiles],onAction:function(e){switch(e){case et.s.ShowHiddenFiles:return void m(!0);case et.s.HideHiddenFiles:m(!1)}}})]}),(0,r.tZ)($e.Z,{siblings:[],readOnly:!0,onClick:function(){return null},onNodeClick:c,path:Ke.Ql})]})})})}var at=n(34860),lt=n(85252),ut=n(3104),ct=n(59897),st=n(29868),dt=n(79523),ft=n(68316),pt=n(11476),ht=n(38880);function vt(){return Boolean(function(){var e=document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullscreenElement}())}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gt=n(65684);function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){wt(e,t,n[t])}))}return e}function kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xt="1px solid "+l.TV.outlineDimmer;function St(e){var t=e.children;return(0,r.tZ)(u.Z,{tag:"header",css:[{borderBottom:xt},l.l0.p(8),l.l0.rowWithGap(8),l.l0.align.center],children:t})}var Rt=(0,u.K)("a");function Ct(e){var t=e.runCount,n=e.runState,i=e.onClick,a=e.publishedAs,d=n===F.A.RUNNING?(0,r.tZ)(Fe.Z,{fill:"currentColor"}):(0,r.tZ)(s.Z,{fill:"currentColor"}),f=a===o.O2h.Template?"Run example":"Run";return n===F.A.RUNNING&&(f="Stop"),(0,r.tZ)(u.Z,{css:[l.l0.rowWithGap(8),l.l0.align.center],children:(0,r.tZ)(c.ZP,Zt({colorway:n===F.A.RUNNING||a===o.O2h.Template?void 0:"positive",onClick:i,iconLeft:d,text:f},t>0&&{secondaryText:(0,Ve.d)(t)}))})}function At(e){var t=e.innerRef,n=e.children;return(0,r.tZ)(a.Z,{elevated:!0,css:[{border:xt},l.l0.borderRadius(8)],innerRef:t,children:n})}function Et(e){var t=e.src;return(0,r.tZ)(u.Z,{css:[l.l0.width("100%"),l.l0.height("100%")],children:(0,r.tZ)(u.Z,{tag:"iframe",sandbox:"allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals",src:t,css:[l.l0.width("100%"),l.l0.height("100%"),{borderBottomRightRadius:8,borderBottomLeftRadius:8,position:"absolute",backgroundColor:"white",display:"block",border:"none",top:0,left:0}]})})}function Ot(e){var t=e.fs,n=e.isOpen,i=e.language,o=e.activePath,l=e.setActivePath,c=e.onNodeClick;return(0,r.tZ)(u.Z,{css:[{zIndex:101,position:"absolute",top:0,left:0,height:"100%",overflow:"hidden",borderBottomLeftRadius:8},!n&&{pointerEvents:"none"}],children:(0,r.tZ)(a.Z,{elevated:!0,css:[{height:"100%",width:200,transition:"transform ".concat(160,"ms"),transform:"translateX(".concat(n?0:-200,"px)")}],children:(0,r.tZ)(ot,{fs:t,language:i,activePath:o,setActivePath:l,onNodeClick:c})})})}var It=(0,u.K)("div");function jt(e){var t,n=e.repl,o=e.currentUser,s=e.enableDeeplinks,f=e.isFromProfile,p=de({enableDeeplinks:Boolean(s),repl:n,currentUser:o}),h=p.openFile,v=p.viewState,y=p.fs,g=p.runRepl,b=p.stopRepl,w=p.runState,k=p.didBsod,x=p.devClearBsod,S=p.isFileTreeOpen,R=p.setIsFileTreeOpen,C=p.showUrlOutput,A=i.useRef(null),E=(0,ht.Z)().showNotice,O=(0,i.useState)(!1),I=O[0],j=O[1],P=function(){var e=mt(i.useState(vt()),2),t=e[0],n=e[1];return i.useEffect((function(){var e=function(){n(vt())};return document.addEventListener("fullscreenchange",e),function(){document.removeEventListener("fullscreenchange",e)}})),t}(),N=(0,lt.Z)((function(e){void 0!==e.width&&j(e.width<=500)})),D=kt(i.useState("code"===(null===v||void 0===v?void 0:v.type)&&v.deeplink?null===(t=v.deeplink)||void 0===t?void 0:t.path:null),2),U=D[0],B=D[1];return k?(0,r.tZ)(T.Z,{devHide:x}):(0,r.BX)(At,{innerRef:A,children:[(0,r.BX)(St,{children:[(0,r.BX)(u.Z,{css:[l.l0.flex.growAndShrink(1),l.l0.rowWithGap(8)],children:[(0,r.BX)(u.Z,{css:[l.l0.rowWithGap(4),l.l0.align.center],children:[(0,r.tZ)(c.ZP,{iconLeft:(0,r.tZ)(ct.Z,{}),text:S?"Hide files":"Show files",onClick:function(){return R((function(e){return!e}))},css:wt({},"@media (max-width: ".concat(ge.j.mobileMax,"px)"),{display:"none"})}),(0,r.tZ)(a.Z,{background:"default",css:[l.l0.borderRadius(8),wt({},"@media (min-width: ".concat(ge.j.mobileMax+1,"px)"),{display:"none"})],children:(0,r.tZ)(m.Z,{css:ut.G,alt:S?"Hide files":"Show files",onClick:function(){return R((function(e){return!e}))},children:(0,r.tZ)(ct.Z,{})})})]}),C||"server"===(null===v||void 0===v?void 0:v.type)?(0,r.tZ)(u.Z,{css:[l.l0.center,{borderLeft:"1px solid "+l.TV.outlineDimmest}],children:(0,r.BX)(Rt,{css:[l.l0.rowWithGap(4),l.l0.color.foregroundDimmer,l.l0.px(8)],href:n.prodUrl,target:"_blank",children:[(0,r.tZ)(at.Z,{}),(0,r.tZ)(d.x,{children:(0,r.tZ)("span",{css:wt({},"@media (max-width: ".concat(ge.j.mobileMax+20,"px)"),{display:"none"}),children:"Open website"})})]})}):null]}),(0,r.BX)(u.Z,{css:[l.l0.rowWithGap(8),l.l0.align.center],children:[A.current&&document.fullscreenEnabled&&(0,r.tZ)(m.Z,{alt:P?"Exit fullscreen":"Enter fullscreen",css:ut.G,onClick:function(){var e=A.current;e?P?function(){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozExitFullScreen?e.mozExitFullScreen():e.webkitExitFullScreen&&e.webkitExitFullScreen()}():(!function(e){var t=e;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()}(e),(0,Z.j)(Z.U3.REPL_VIEWER_FULLSCREEN_ENTERED,{location:f?"profile":"coverpage"})):E("Failed to enter fullscreen mode")},children:P?(0,r.tZ)(pt.Z,{}):(0,r.tZ)(ft.Z,{})}),(0,r.tZ)(ut.Z,{repl:n,currentUser:o}),(0,r.tZ)(Ct,{runCount:n.runCount,runState:w,publishedAs:n.publishedAs,onClick:function(){if(w===F.A.IDLE||w===F.A.OFFLINE)return(0,Z.j)(Z.U3.RUN_BUTTON_CLICKED,{context:"replView"}),void g();w===F.A.RUNNING&&b()}})]})]}),(0,r.BX)(It,{ref:function(e){N(e)},css:[l.l0.flex.growAndShrink(1),{position:"relative"}],children:[null===v?(0,r.tZ)(L,{repl:n,onClick:g}):null,"server"===(null===v||void 0===v?void 0:v.type)?(0,r.tZ)(Et,{src:v.previewUrl}):null,"vnc"===(null===v||void 0===v?void 0:v.type)?(0,r.tZ)(fe.Z,{fs:v.fs,container:v.container}):null,"replboxDisplay"===(null===v||void 0===v?void 0:v.type)?(0,r.tZ)(We,{replId:n.id,language:n.language,fs:v.fs}):null,"deprecationNotice"===(null===v||void 0===v?void 0:v.type)?(0,r.BX)(u.Z,{css:[l.l0.center,l.l0.p(16),l.l0.height("100%")],children:[(0,r.BX)(d.x,{multiline:!0,variant:"subheadDefault",children:['Running "',n.lang.displayName,'" is no longer supported.'," "]}),(0,r.tZ)(gt.Z,{})]}):null,"terminal"===(null===v||void 0===v?void 0:v.type)?(0,r.tZ)(u.Z,{css:[l.l0.height("100%"),l.l0.width("100%"),l.l0.position.relative,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8}],children:(0,r.tZ)(_e.Z,{packager:v.packager,runner:v.runner,languageHeader:n.lang.header||void 0})}):null,"code"===(null===v||void 0===v?void 0:v.type)?(0,r.tZ)(u.Z,{css:[l.l0.height("100%"),l.l0.flex.growAndShrink(1),{position:"relative",overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,transition:"margin ".concat(160,"ms"),marginLeft:S&&!I?200:0}],onClick:function(){I&&R(!1)},children:(0,r.tZ)(Be,{fs:v.fs,deeplink:v.deeplink})}):null,(0,r.tZ)(Ot,{isOpen:S,language:n.lang.id,activePath:U,onNodeClick:function(e){B(e.path),e.type!==ne.Tv.Directory&&(h(e.path),I&&R(!1))},setActivePath:B,fs:y})]})]})}function Pt(e){var t=e.repl,n=e.currentUser,o=e.enableDeeplinks,a=e.isFromProfile,l=(0,i.useState)(!1),u=l[0],c=l[1];return(0,i.useEffect)((function(){return c(!0)}),[]),(0,i.useEffect)(dt.S,[]),u?(0,r.tZ)(st.Z.Provider,{value:t.id,children:(0,r.tZ)(jt,{isFromProfile:a,repl:t,currentUser:n,enableDeeplinks:o})}):(0,r.tZ)(At,{})}},35589:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(34051),i=n.n(r),o=n(67294),a=n(11163),l=n.n(a),u=n(73049);function c(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(c){return void n(c)}l.done?t(u):Promise.resolve(u).then(r,i)}function s(e){var t=e.currentDeeplink,n=e.onChange,r=e.fs,a=e.enabled,s=(0,o.useRef)(!1);(0,o.useEffect)((function(){if(a){var e=function(){var e,t=(e=i().mark((function e(){var t,o,a,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,u.mv)(r);case 4:if(t=e.sent,o=t.path,a=t.line,l=t.col,o){e.next=11;break}return n(null),e.abrupt("return");case 11:n({path:o,line:a,col:l});case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,l,"next",e)}function l(e){c(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}}),[r,n,a]),(0,o.useEffect)((function(){if(a&&t){var e=(0,u.YM)(t),n=l().asPath;try{n=window.decodeURI(n)}catch(i){}if(!n.endsWith(e)){var r=l().asPath.includes("#")?l().asPath.slice(0,l().asPath.indexOf("#")):l().asPath;s.current=!0,l().push({pathname:l().pathname,query:l().query},"".concat(r).concat(e),{shallow:!0}),s.current=!1}}}),[r,t,a])}},91299:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(67294),i=n(45421);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({},e,t)}var c={isLoading:!1,result:null,error:null,fileViewerType:null};function s(e){var t=e.fs,n=e.path,o=l(r.useReducer(u,c),2),a=o[0],s=o[1];return r.useEffect((function(){if(n){var e=!1,r=(0,i.V)(n);return s({isLoading:!0,fileViewerType:r}),t.readFile(n).then((function(t){e||(t.error?s({isLoading:!1,result:null,error:{path:n,fileViewerType:r,error:t.error}}):s({isLoading:!1,result:{path:n,fileViewerType:r,content:t.content},error:null}))})),function(){e=!0}}s(c)}),[t,n]),a}},50278:function(e,t,n){n.d(t,{Z:function(){return N}});var r,i=n(35944),o=n(79547),a=n.n(o),l=n(67294),u=n(23139),c=n(90601),s=n(8996),d=n(70917),f=n(50055),p=n(90213),h=n(21217);function v(e,t){var n,i;switch(e){case r.Init:n="5%",i="Loading...";break;case r.Booting:i="Booting Repl",n="20%";break;case r.LoadingFiles:i="Downloading files",n="".concat(Math.floor(20+70*t).toString(),"%");break;case r.Ready:i="Ready",n="100%";break;default:(0,p.Z)(e)}return{percentString:n,message:i}}!function(e){e.Init="Init",e.Booting="Booting",e.LoadingFiles="LoadingFiles",e.Ready="Ready"}(r||(r={}));var y=(0,d.F4)({"0%":{opacity:0,top:0},"100%":{opacity:1,top:"-25px"}});function m(e){var t=e.onBootStatus,n=e.initialRunState,o=(0,l.useState)({current:n===h.A.OFFLINE?r.Init:r.Ready,previous:null}),a=o[0],u=o[1],c=(0,l.useState)(0),s=c[0],d=c[1];(0,l.useEffect)((function(){var e=0,n=0,i=null,o=null,a=function(){e=0,n=0,i=null,o&&(clearInterval(o),o=null)},l=t((function(t){var l;switch(function(t){var r=t.stage,l=t.progress,u=t.total;if(o&&clearInterval(o),r!==f.api.BootStatus.Stage.PULL_FILES&&r!==f.api.BootStatus.Stage.LOAD_BLOCK||!u)return a(),void d(0);if(!(e>l)&&n!==l){var c=Date.now(),s=0;s=i?(l-n)/(c-i)*50:5e4,i=c,n=l,o=setInterval((function(){(e+=s)>u&&(e=u),e=Math.max(e,l),d(e/u)}),50)}}(t),t.stage){case f.api.BootStatus.Stage.ACQUIRING:l=r.Booting;break;case f.api.BootStatus.Stage.PULL_FILES:case f.api.BootStatus.Stage.LOAD_BLOCK:l=r.LoadingFiles;break;case f.api.BootStatus.Stage.COMPLETE:l=r.Ready;break;default:return}u((function(e){return e.current===l?e:{current:l,previous:e.current}}))}));return function(){a(),l()}}),[t]);var p=a.previous?v(a.previous,1):null,m=v(a.current,s);return(0,i.BX)("div",{css:{position:"absolute",left:"25%",right:"25%",top:"45%",backgroundColor:"transparent",color:"white",transition:"all 1s 0.5s",opacity:a.current===r.Ready?0:1},children:[(0,i.BX)("div",{children:[p&&(0,i.BX)("div",{css:{textAlign:"center",position:"absolute",width:"100%",top:"-100px",opacity:0,transition:"top 0.4s, opacity 0.4s"},children:[p.message,a.previous===r.LoadingFiles&&" 100%"]},p.message),(0,i.BX)("div",{css:{textAlign:"center",position:"absolute",width:"100%",top:"-25px",opacity:1,animationName:y.toString(),animationDuration:"0.6s"},children:[m.message,a.current===r.LoadingFiles&&" ".concat(m.percentString)]},m.message)]}),(0,i.tZ)("div",{css:{background:"none",border:"solid white 1px",borderRadius:"10px"},children:(0,i.tZ)("div",{css:{height:"5px",width:m.percentString,backgroundColor:"#fff",transition:"width cubic-bezier(0.28, 0.26, 0.33, 1) 2s"}})})]})}var g=n(77012),b=n(51968);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=n(17070),x=n(89290),S=n(16911),R=n(84948),C=n(44660),A=n(34140),E=n(36793),O=n(94309);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=function(e,t){var n=e.runner,r=e.packager,o=e.languageHeader,d=e.onClear,f=e.enableScreenReaderMode,p=e.onBootStatus,v=(0,E.Z)().preferences.accessibleTerminal,y=j(function(e){var t=e.runner,n=e.packager,r=e.languageHeader,i=e.enableScreenReaderMode,o=Z((0,g.Z)({createXtermProps:{enableScreenReaderMode:i}}),2),a=o[0],u=o[1],c=(0,l.useState)(""),s=c[0],d=c[1];return(0,l.useEffect)((function(){if(!a)return t.onOutput((function(e){return d((function(t){return t+e}))}))}),[a,t,d]),(0,l.useEffect)((function(){if(!a&&n)return n.onOutput((function(e){return d((function(t){return t+e.replace(/\n/g,"\n\r")}))}))}),[a,n,d]),(0,l.useEffect)((function(){var e=function(e){if(!a)throw new Error("Expected xterm");a.write(e.replace(/\n/g,"\n\r"))};if(a&&n){var t=n.onOutput((function(t){e(t)})),r=n.onError((function(){return e("\x1b[31m\n\nReplit: Package operation failed.\x1b[00m")})),i=n.onStateChanged((function(t){t&&e("\n\nReplit: Updating package configuration\n\n")}));return function(){t(),r(),i()}}}),[a,n]),(0,l.useEffect)((function(){s&&a&&(a.write(s),d(""))}),[a,s]),(0,l.useEffect)((function(){r&&d((function(e){return e+"".concat(r.replace(/\n/g,"\n\r"),"\n\r")}))}),[r,d]),(0,l.useEffect)((function(){if(a){var e=function(){t.getRunState()!==h.A.OFFLINE&&t.resizeTerminal(a.getSize())},n=[];n.push(a.onResize(e).dispose);var r=[];n.push(a.onData((function(e){var n=(0,b.I)(e);t.getRunState()!==h.A.OFFLINE?t.sendInput(n):r.push(n)})).dispose),n.push(t.onOutput((function(e){a.write(e)})));var i=!1;return n.push(t.onStateChanged((function(n){if(n!==h.A.OFFLINE){if(i||(e(),i=!0),r.length){var o=!0,a=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;t.sendInput(s)}}catch(d){a=!0,l=d}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}r=[]}}else i=!1}))),t.getRunState()!==h.A.OFFLINE&&(e(),i=!0),function(){n.forEach((function(e){return e()}))}}}),[a,t]),[a,u,d]}({runner:n,packager:r,languageHeader:o,enableScreenReaderMode:f}),3),w=y[0],I=y[1],P=y[2],N=j(l.useState(!1),2),D=N[0],L=N[1],T=(0,O.a)();l.useImperativeHandle(t,(function(){return{write:function(e){w?w.write(e):P((function(t){return t+e.replace(/\n/g,"\n\r")}))},clear:function(){w&&w.clear()},focus:function(){w&&w.focus()}}}));var U=(0,R.Z)(C.H.Output);return(0,i.BX)("div",{css:T,onKeyDown:function(e){"f"===e.key&&(0,c.j)(e)&&!e.shiftKey&&(L(!0),e.preventDefault())},ref:U,className:a().dynamic([["ca4bff8d74a439a1",[u.TV.borderRadius4]]])+" terminal",children:[(0,i.tZ)("div",{className:a().dynamic([["ca4bff8d74a439a1",[u.TV.borderRadius4]]])+" controls",children:(0,i.BX)(s.Ug,{align:"center",wrap:"nowrap",children:[D&&w?(0,i.tZ)(k.R,{findPrevious:w.findPrevious,findNext:w.findNext,exit:function(){return L(!1)}}):(0,i.tZ)(x.l,{onClick:function(){return L(!0)}}),(0,i.tZ)(S.Z,{onClick:function(){w&&(w.clear(),d&&d(),o&&w.write("".concat(o.replace(/\n/g,"\n\r"),"\n\r")),w.focus())}})]})}),!(f||v)&&(0,i.tZ)(A.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the console.'}),(0,i.tZ)("div",{ref:I,className:a().dynamic([["ca4bff8d74a439a1",[u.TV.borderRadius4]]])+" xterm-container"}),p?(0,i.tZ)(m,{initialRunState:n.getRunState(),onBootStatus:p}):null,(0,i.tZ)(a(),{id:"ca4bff8d74a439a1",dynamic:[u.TV.borderRadius4],children:".terminal.__jsx-style-dynamic-selector{height:100%;width:100%;position:relative;background-color:var(--background-default);-webkit-border-radius:".concat(u.TV.borderRadius4,";-moz-border-radius:").concat(u.TV.borderRadius4,";border-radius:").concat(u.TV.borderRadius4,";padding-left:var(--space-16);padding-top:var(--space-4)}.controls.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;position:absolute;opacity:0;top:var(--space-8);right:var(--space-8);z-index:100;min-height:30px}.terminal.__jsx-style-dynamic-selector:focus-within .controls.__jsx-style-dynamic-selector{opacity:1}.xterm-container.__jsx-style-dynamic-selector{height:100%;overflow:auto}.xterm-container.__jsx-style-dynamic-selector .xterm{height:100%}.xterm-container.__jsx-style-dynamic-selector .xterm-viewport{overflow-y:auto!important;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}")})]})},N=l.forwardRef(P)},51409:function(e,t,n){function r(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(t.width=e.width,t.height=e.height,!n)throw new Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map((function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return n.putImageData(i,0,0),t.toDataURL()}))}}function i(e){return new Promise((function(t,n){var r=new window.Image;r.src=e,r.onload=function(){t(r)},r.onerror=n}))}function o(e){return new Promise((function(t,n){Promise.all(e.frames.map(i)).then((function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");if(o){var a=r.map((function(t){return o.drawImage(t,0,0),{pixels:Array.from(o.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}));t({frames:a,preview:e.frames[0],width:e.width,height:e.height})}else n(new Error("failed to get canvas ctx"))})).catch(n)}))}n.d(t,{C:function(){return r},u:function(){return o}})}}]);
//# sourceMappingURL=3112-b422a2a885177837.js.map